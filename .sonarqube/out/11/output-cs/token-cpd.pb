¢ñ
pD:\Projects\DefensePoint\whitesource-testcases-csharp\CWE79\mojoportal\mojoPortal.Features.Business\Blog\Blog.cs
	namespace

 	

mojoPortal


 
.

 
Business

 
{ 
public 
class 
Blog 
: 
IIndexableContent &
{ 
private 	
const
 
string 
featureGuid "
=# $
$str% K
;K L
public 
static	 
Guid 
FeatureGuid  
{ 
get 
{ 
return	 
new 
Guid 
( 
featureGuid $
)$ %
;% &
}' (
} 
public 
Blog	 
( 
) 
{ 
} 
public!! 
Blog!!	 
(!! 
int!! 
itemId!! 
)!! 
{"" 
if## 
(## 
itemId## 
>## 
-## 
$num## 
)## 
{$$ 
GetBlog%% 
(%% 
itemId%% 
)%% 
;%% 
}&& 
}(( 
private.. 	
static..
 
readonly.. 
ILog.. 
log.. "
=..# $

LogManager..% /
.../ 0
	GetLogger..0 9
(..9 :
typeof..: @
(..@ A
Blog..A E
)..E F
)..F G
;..G H
private00 	
int00
 
itemID00 
=00 
-00 
$num00 
;00 
private11 	
int11
 
previousItemId11 
=11 
-11  
$num11  !
;11! "
private22 	
int22
 

nextItemId22 
=22 
-22 
$num22 
;22 
private33 	
Guid33
 
blogGuid33 
=33 
Guid33 
.33 
Empty33 $
;33$ %
private44 	
Guid44
 

moduleGuid44 
=44 
Guid44  
.44  !
Empty44! &
;44& '
private55 	
int55
 
moduleID55 
=55 
-55 
$num55 
;55 
private66 	
string66
 
userName66 
=66 
string66 "
.66" #
Empty66# (
;66( )
private77 	
string77
 
title77 
=77 
string77 
.77  
Empty77  %
;77% &
private99 	
string99
 
location99 
=99 
string99 "
.99" #
Empty99# (
;99( )
private<< 	
string<<
 
excerpt<< 
=<< 
string<< !
.<<! "
Empty<<" '
;<<' (
private>> 	
string>>
 
description>> 
=>> 
string>> %
.>>% &
Empty>>& +
;>>+ ,
private?? 	
DateTime??
 
	startDate?? 
=?? 
DateTime?? '
.??' (
UtcNow??( .
;??. /
private@@ 	
bool@@
 
isPublished@@ 
=@@ 
true@@ !
;@@! "
privateAA 	
boolAA
 
isInNewsletterAA 
=AA 
trueAA  $
;AA$ %
privateBB 	
boolBB
 
includeInFeedBB 
=BB 
trueBB #
;BB# $
privateCC 	
stringCC
 
categoryCC 
=CC 
stringCC "
.CC" #
EmptyCC# (
;CC( )
privateDD 	
intDD
  
allowCommentsForDaysDD "
=DD# $
$numDD% '
;DD' (
privateEE 	
GuidEE
 
userGuidEE 
=EE 
GuidEE 
.EE 
EmptyEE $
;EE$ %
privateFF 	
GuidFF
 
lastModUserGuidFF 
=FF  
GuidFF! %
.FF% &
EmptyFF& +
;FF+ ,
privateGG 	
DateTimeGG
 

createdUtcGG 
=GG 
DateTimeGG  (
.GG( )
UtcNowGG) /
;GG/ 0
privateHH 	
DateTimeHH
 

lastModUtcHH 
=HH 
DateTimeHH  (
.HH( )
UtcNowHH) /
;HH/ 0
privateII 	
stringII
 
itemUrlII 
=II 
stringII !
.II! "
EmptyII" '
;II' (
privateJJ 	
stringJJ
 
previousPostUrlJJ  
=JJ! "
stringJJ# )
.JJ) *
EmptyJJ* /
;JJ/ 0
privateKK 	
stringKK
 
previousPostTitleKK "
=KK# $
stringKK% +
.KK+ ,
EmptyKK, 1
;KK1 2
privateLL 	
stringLL
 
nextPostUrlLL 
=LL 
stringLL %
.LL% &
EmptyLL& +
;LL+ ,
privateMM 	
stringMM
 
nextPostTitleMM 
=MM  
stringMM! '
.MM' (
EmptyMM( -
;MM- .
privateNN 	
intNN
 
commentCountNN 
=NN 
$numNN 
;NN 
privatePP 	
stringPP
 
metaKeywordsPP 
=PP 
stringPP  &
.PP& '
EmptyPP' ,
;PP, -
privateQQ 	
stringQQ
 
metaDescriptionQQ  
=QQ! "
stringQQ# )
.QQ) *
EmptyQQ* /
;QQ/ 0
privateRR 	
stringRR
 
compiledMetaRR 
=RR 
stringRR  &
.RR& '
EmptyRR' ,
;RR, -
privateTT 	
intTT
 
siteIdTT 
=TT 
-TT 
$numTT 
;TT 
privateUU 	
stringUU
 
searchIndexPathUU  
=UU! "
stringUU# )
.UU) *
EmptyUU* /
;UU/ 0
public__ 
Guid__	 
BlogGuid__ 
{`` 
getaa 
{aa 
returnaa	 
blogGuidaa 
;aa 
}aa 
}cc 
publicee 
Guidee	 

ModuleGuidee 
{ff 
getgg 
{gg 
returngg	 

moduleGuidgg 
;gg 
}gg 
sethh 
{hh 

moduleGuidhh	 
=hh 
valuehh 
;hh 
}hh 
}ii 
publickk 
intkk	 
ItemIdkk 
{ll 
getmm 
{mm 
returnmm	 
itemIDmm 
;mm 
}mm 
}nn 
publicpp 
intpp	 
PreviousItemIdpp 
{qq 
getrr 
{rr 
returnrr	 
previousItemIdrr 
;rr 
}rr  !
}ss 
publicuu 
intuu	 

NextItemIduu 
{vv 
getww 
{ww 
returnww	 

nextItemIdww 
;ww 
}ww 
}xx 
publiczz 
intzz	 
ModuleIdzz 
{{{ 
get|| 
{|| 
return||	 
moduleID|| 
;|| 
}|| 
set}} 
{}} 
moduleID}}	 
=}} 
value}} 
;}} 
}}} 
}~~ 
public
ÄÄ 
string
ÄÄ	 
UserName
ÄÄ 
{
ÅÅ 
get
ÇÇ 
{
ÇÇ 
return
ÇÇ	 
userName
ÇÇ 
;
ÇÇ 
}
ÇÇ 
set
ÉÉ 
{
ÉÉ 
userName
ÉÉ	 
=
ÉÉ 
value
ÉÉ 
;
ÉÉ 
}
ÉÉ 
}
ÑÑ 
public
ÜÜ 
Guid
ÜÜ	 
UserGuid
ÜÜ 
{
áá 
get
àà 
{
àà 
return
àà	 
userGuid
àà 
;
àà 
}
àà 
set
ââ 
{
ââ 
userGuid
ââ	 
=
ââ 
value
ââ 
;
ââ 
}
ââ 
}
ää 
public
åå 
Guid
åå	 
LastModUserGuid
åå 
{
çç 
get
éé 
{
éé 
return
éé	 
lastModUserGuid
éé 
;
éé  
}
éé! "
set
èè 
{
èè 
lastModUserGuid
èè	 
=
èè 
value
èè  
;
èè  !
}
èè" #
}
êê 
public
íí 
string
íí	 
Title
íí 
{
ìì 
get
îî 
{
îî 
return
îî	 
title
îî 
;
îî 
}
îî 
set
ïï 
{
ïï 
title
ïï	 
=
ïï 
value
ïï 
;
ïï 
}
ïï 
}
ññ 
private
òò 	
string
òò
 
subTitle
òò 
=
òò 
string
òò "
.
òò" #
Empty
òò# (
;
òò( )
public
öö 
string
öö	 
SubTitle
öö 
{
õõ 
get
úú 
{
úú 
return
úú	 
subTitle
úú 
;
úú 
}
úú 
set
ùù 
{
ùù 
subTitle
ùù	 
=
ùù 
value
ùù 
;
ùù 
}
ùù 
}
ûû 
public
†† 
string
††	 
Category
†† 
{
°° 
get
¢¢ 
{
¢¢ 
return
¢¢	 
category
¢¢ 
;
¢¢ 
}
¢¢ 
set
££ 
{
££ 
category
££	 
=
££ 
value
££ 
;
££ 
}
££ 
}
§§ 
public
¶¶ 
string
¶¶	 
Excerpt
¶¶ 
{
ßß 
get
®® 
{
®® 
return
®®	 
excerpt
®® 
;
®® 
}
®® 
set
©© 
{
©© 
excerpt
©©	 
=
©© 
value
©© 
;
©© 
}
©© 
}
™™ 
public
¨¨ 
string
¨¨	 
Description
¨¨ 
{
≠≠ 
get
ÆÆ 
{
ÆÆ 
return
ÆÆ	 
description
ÆÆ 
;
ÆÆ 
}
ÆÆ 
set
ØØ 
{
ØØ 
description
ØØ	 
=
ØØ 
value
ØØ 
;
ØØ 
}
ØØ 
}
∞∞ 
public
≤≤ 
string
≤≤	 
Location
≤≤ 
{
≥≥ 
get
¥¥ 
{
¥¥ 
return
¥¥	 
location
¥¥ 
;
¥¥ 
}
¥¥ 
set
µµ 
{
µµ 
location
µµ	 
=
µµ 
value
µµ 
;
µµ 
}
µµ 
}
∂∂ 
public
∏∏ 
string
∏∏	 
MetaKeywords
∏∏ 
{
ππ 
get
∫∫ 
{
∫∫ 
return
∫∫	 
metaKeywords
∫∫ 
;
∫∫ 
}
∫∫ 
set
ªª 
{
ªª 
metaKeywords
ªª	 
=
ªª 
value
ªª 
;
ªª 
}
ªª  
}
ºº 
public
ææ 
string
ææ	 
MetaDescription
ææ 
{
øø 
get
¿¿ 
{
¿¿ 
return
¿¿	 
metaDescription
¿¿ 
;
¿¿  
}
¿¿! "
set
¡¡ 
{
¡¡ 
metaDescription
¡¡	 
=
¡¡ 
value
¡¡  
;
¡¡  !
}
¡¡" #
}
¬¬ 
public
ƒƒ 
string
ƒƒ	 
CompiledMeta
ƒƒ 
{
≈≈ 
get
∆∆ 
{
∆∆ 
return
∆∆	 
compiledMeta
∆∆ 
;
∆∆ 
}
∆∆ 
set
«« 
{
«« 
compiledMeta
««	 
=
«« 
value
«« 
;
«« 
}
««  
}
»» 
public
   
DateTime
  	 
	StartDate
   
{
ÀÀ 
get
ÃÃ 
{
ÃÃ 
return
ÃÃ	 
	startDate
ÃÃ 
;
ÃÃ 
}
ÃÃ 
set
ÕÕ 
{
ÕÕ 
	startDate
ÕÕ	 
=
ÕÕ 
value
ÕÕ 
;
ÕÕ 
}
ÕÕ 
}
ŒŒ 
private
–– 	
DateTime
––
 
endDate
–– 
=
–– 
DateTime
–– %
.
––% &
MaxValue
––& .
;
––. /
public
““ 
DateTime
““	 
EndDate
““ 
{
”” 
get
‘‘ 
{
‘‘ 
return
‘‘	 
endDate
‘‘ 
;
‘‘ 
}
‘‘ 
set
’’ 
{
’’ 
endDate
’’	 
=
’’ 
value
’’ 
;
’’ 
}
’’ 
}
÷÷ 
private
ÿÿ 	
bool
ÿÿ
 
approved
ÿÿ 
=
ÿÿ 
true
ÿÿ 
;
ÿÿ 
public
⁄⁄ 
bool
⁄⁄	 
Approved
⁄⁄ 
{
€€ 
get
‹‹ 
{
‹‹ 
return
‹‹	 
approved
‹‹ 
;
‹‹ 
}
‹‹ 
set
›› 
{
›› 
approved
››	 
=
›› 
value
›› 
;
›› 
}
›› 
}
ﬁﬁ 
private
‡‡ 	
Guid
‡‡
 

approvedBy
‡‡ 
=
‡‡ 
Guid
‡‡  
.
‡‡  !
Empty
‡‡! &
;
‡‡& '
public
‚‚ 
Guid
‚‚	 

ApprovedBy
‚‚ 
{
„„ 
get
‰‰ 
{
‰‰ 
return
‰‰	 

approvedBy
‰‰ 
;
‰‰ 
}
‰‰ 
set
ÂÂ 
{
ÂÂ 

approvedBy
ÂÂ	 
=
ÂÂ 
value
ÂÂ 
;
ÂÂ 
}
ÂÂ 
}
ÊÊ 
private
ËË 	
DateTime
ËË
 
approvedDate
ËË 
=
ËË  !
DateTime
ËË" *
.
ËË* +
MaxValue
ËË+ 3
;
ËË3 4
public
ÍÍ 
DateTime
ÍÍ	 
ApprovedDate
ÍÍ 
{
ÎÎ 
get
ÏÏ 
{
ÏÏ 
return
ÏÏ	 
approvedDate
ÏÏ 
;
ÏÏ 
}
ÏÏ 
set
ÌÌ 
{
ÌÌ 
approvedDate
ÌÌ	 
=
ÌÌ 
value
ÌÌ 
;
ÌÌ 
}
ÌÌ  
}
ÓÓ 
public
 
bool
	 
IsPublished
 
{
ÒÒ 
get
ÚÚ 
{
ÚÚ 
return
ÚÚ	 
isPublished
ÚÚ 
;
ÚÚ 
}
ÚÚ 
set
ÛÛ 
{
ÛÛ 
isPublished
ÛÛ	 
=
ÛÛ 
value
ÛÛ 
;
ÛÛ 
}
ÛÛ 
}
ÙÙ 
public
ˆˆ 
bool
ˆˆ	 
IsInNewsletter
ˆˆ 
{
˜˜ 
get
¯¯ 
{
¯¯ 
return
¯¯	 
isInNewsletter
¯¯ 
;
¯¯ 
}
¯¯  !
set
˘˘ 
{
˘˘ 
isInNewsletter
˘˘	 
=
˘˘ 
value
˘˘ 
;
˘˘  
}
˘˘! "
}
˙˙ 
public
¸¸ 
bool
¸¸	 
IncludeInFeed
¸¸ 
{
˝˝ 
get
˛˛ 
{
˛˛ 
return
˛˛	 
includeInFeed
˛˛ 
;
˛˛ 
}
˛˛  
set
ˇˇ 
{
ˇˇ 
includeInFeed
ˇˇ	 
=
ˇˇ 
value
ˇˇ 
;
ˇˇ 
}
ˇˇ  !
}
ÄÄ 
public
ÇÇ 
int
ÇÇ	 "
AllowCommentsForDays
ÇÇ !
{
ÉÉ 
get
ÑÑ 
{
ÑÑ 
return
ÑÑ	 "
allowCommentsForDays
ÑÑ $
;
ÑÑ$ %
}
ÑÑ& '
set
ÖÖ 
{
ÖÖ "
allowCommentsForDays
ÖÖ	 
=
ÖÖ 
value
ÖÖ  %
;
ÖÖ% &
}
ÖÖ' (
}
ÜÜ 
public
àà 
DateTime
àà	 

CreatedUtc
àà 
{
ââ 
get
ää 
{
ää 
return
ää	 

createdUtc
ää 
;
ää 
}
ää 
set
ãã 
{
ãã 

createdUtc
ãã	 
=
ãã 
value
ãã 
;
ãã 
}
ãã 
}
åå 
public
éé 
DateTime
éé	 

LastModUtc
éé 
{
èè 
get
êê 
{
êê 
return
êê	 

lastModUtc
êê 
;
êê 
}
êê 
set
ëë 
{
ëë 

lastModUtc
ëë	 
=
ëë 
value
ëë 
;
ëë 
}
ëë 
}
íí 
public
îî 
string
îî	 
ItemUrl
îî 
{
ïï 
get
ññ 
{
ññ 
return
ññ	 
itemUrl
ññ 
;
ññ 
}
ññ 
set
óó 
{
óó 
itemUrl
óó	 
=
óó 
value
óó 
;
óó 
}
óó 
}
òò 
private
úú 	
bool
úú
 
showAuthorName
úú 
=
úú 
true
úú  $
;
úú$ %
public
ûû 
bool
ûû	 
ShowAuthorName
ûû 
{
üü 
get
†† 
{
†† 
return
††	 
showAuthorName
†† 
;
†† 
}
††  !
set
°° 
{
°° 
showAuthorName
°°	 
=
°° 
value
°° 
;
°°  
}
°°! "
}
¢¢ 
private
§§ 	
bool
§§
 
showAuthorAvatar
§§ 
=
§§  !
true
§§" &
;
§§& '
public
¶¶ 
bool
¶¶	 
ShowAuthorAvatar
¶¶ 
{
ßß 
get
®® 
{
®® 
return
®®	 
showAuthorAvatar
®®  
;
®®  !
}
®®" #
set
©© 
{
©© 
showAuthorAvatar
©©	 
=
©© 
value
©© !
;
©©! "
}
©©# $
}
™™ 
private
¨¨ 	
bool
¨¨
 
showAuthorBio
¨¨ 
=
¨¨ 
true
¨¨ #
;
¨¨# $
public
ÆÆ 
bool
ÆÆ	 
ShowAuthorBio
ÆÆ 
{
ØØ 
get
∞∞ 
{
∞∞ 
return
∞∞	 
showAuthorBio
∞∞ 
;
∞∞ 
}
∞∞  
set
±± 
{
±± 
showAuthorBio
±±	 
=
±± 
value
±± 
;
±± 
}
±±  !
}
≤≤ 
private
¥¥ 	
bool
¥¥
 
includeInSearch
¥¥ 
=
¥¥  
true
¥¥! %
;
¥¥% &
public
∂∂ 
bool
∂∂	 
IncludeInSearch
∂∂ 
{
∑∑ 
get
∏∏ 
{
∏∏ 
return
∏∏	 
includeInSearch
∏∏ 
;
∏∏  
}
∏∏! "
set
ππ 
{
ππ 
includeInSearch
ππ	 
=
ππ 
value
ππ  
;
ππ  !
}
ππ" #
}
∫∫ 
private
ºº 	
bool
ºº
 

useBingMap
ºº 
=
ºº 
false
ºº !
;
ºº! "
public
ææ 
bool
ææ	 

UseBingMap
ææ 
{
øø 
get
¿¿ 
{
¿¿ 
return
¿¿	 

useBingMap
¿¿ 
;
¿¿ 
}
¿¿ 
set
¡¡ 
{
¡¡ 

useBingMap
¡¡	 
=
¡¡ 
value
¡¡ 
;
¡¡ 
}
¡¡ 
}
¬¬ 
private
ƒƒ 	
string
ƒƒ
 
	mapHeight
ƒƒ 
=
ƒƒ 
$str
ƒƒ "
;
ƒƒ" #
public
∆∆ 
string
∆∆	 
	MapHeight
∆∆ 
{
«« 
get
»» 
{
»» 
return
»»	 
	mapHeight
»» 
;
»» 
}
»» 
set
…… 
{
…… 
	mapHeight
……	 
=
…… 
value
…… 
;
…… 
}
…… 
}
   
private
ÃÃ 	
string
ÃÃ
 
mapWidth
ÃÃ 
=
ÃÃ 
$str
ÃÃ !
;
ÃÃ! "
public
ŒŒ 
string
ŒŒ	 
MapWidth
ŒŒ 
{
œœ 
get
–– 
{
–– 
return
––	 
mapWidth
–– 
;
–– 
}
–– 
set
—— 
{
—— 
mapWidth
——	 
=
—— 
value
—— 
;
—— 
}
—— 
}
““ 
private
‘‘ 	
bool
‘‘
 
showMapOptions
‘‘ 
=
‘‘ 
false
‘‘  %
;
‘‘% &
public
÷÷ 
bool
÷÷	 
ShowMapOptions
÷÷ 
{
◊◊ 
get
ÿÿ 
{
ÿÿ 
return
ÿÿ	 
showMapOptions
ÿÿ 
;
ÿÿ 
}
ÿÿ  !
set
ŸŸ 
{
ŸŸ 
showMapOptions
ŸŸ	 
=
ŸŸ 
value
ŸŸ 
;
ŸŸ  
}
ŸŸ! "
}
⁄⁄ 
private
‹‹ 	
bool
‹‹
 
showZoomTool
‹‹ 
=
‹‹ 
false
‹‹ #
;
‹‹# $
public
ﬁﬁ 
bool
ﬁﬁ	 
ShowZoomTool
ﬁﬁ 
{
ﬂﬂ 
get
‡‡ 
{
‡‡ 
return
‡‡	 
showZoomTool
‡‡ 
;
‡‡ 
}
‡‡ 
set
·· 
{
·· 
showZoomTool
··	 
=
·· 
value
·· 
;
·· 
}
··  
}
‚‚ 
private
‰‰ 	
bool
‰‰
 
showLocationInfo
‰‰ 
=
‰‰  !
false
‰‰" '
;
‰‰' (
public
ÊÊ 
bool
ÊÊ	 
ShowLocationInfo
ÊÊ 
{
ÁÁ 
get
ËË 
{
ËË 
return
ËË	 
showLocationInfo
ËË  
;
ËË  !
}
ËË" #
set
ÈÈ 
{
ÈÈ 
showLocationInfo
ÈÈ	 
=
ÈÈ 
value
ÈÈ !
;
ÈÈ! "
}
ÈÈ# $
}
ÍÍ 
private
ÏÏ 	
bool
ÏÏ
 "
useDrivingDirections
ÏÏ #
=
ÏÏ$ %
false
ÏÏ& +
;
ÏÏ+ ,
public
ÓÓ 
bool
ÓÓ	 "
UseDrivingDirections
ÓÓ "
{
ÔÔ 
get
 
{
 
return
	 "
useDrivingDirections
 $
;
$ %
}
& '
set
ÒÒ 
{
ÒÒ "
useDrivingDirections
ÒÒ	 
=
ÒÒ 
value
ÒÒ  %
;
ÒÒ% &
}
ÒÒ' (
}
ÚÚ 
private
ÙÙ 	
string
ÙÙ
 
mapType
ÙÙ 
=
ÙÙ 
$str
ÙÙ ,
;
ÙÙ, -
public
ˆˆ 
string
ˆˆ	 
MapType
ˆˆ 
{
˜˜ 
get
¯¯ 
{
¯¯ 
return
¯¯	 
mapType
¯¯ 
;
¯¯ 
}
¯¯ 
set
˘˘ 
{
˘˘ 
mapType
˘˘	 
=
˘˘ 
value
˘˘ 
;
˘˘ 
}
˘˘ 
}
˙˙ 
private
¸¸ 	
int
¸¸
 
mapZoom
¸¸ 
=
¸¸ 
$num
¸¸ 
;
¸¸ 
public
˛˛ 
int
˛˛	 
MapZoom
˛˛ 
{
ˇˇ 
get
ÄÄ 
{
ÄÄ 
return
ÄÄ	 
mapZoom
ÄÄ 
;
ÄÄ 
}
ÄÄ 
set
ÅÅ 
{
ÅÅ 
mapZoom
ÅÅ	 
=
ÅÅ 
value
ÅÅ 
;
ÅÅ 
}
ÅÅ 
}
ÇÇ 
private
ÑÑ 	
bool
ÑÑ
 
showDownloadLink
ÑÑ 
=
ÑÑ  !
false
ÑÑ" '
;
ÑÑ' (
public
ÜÜ 
bool
ÜÜ	 
ShowDownloadLink
ÜÜ 
{
áá 
get
àà 
{
àà 
return
àà	 
showDownloadLink
àà  
;
àà  !
}
àà" #
set
ââ 
{
ââ 
showDownloadLink
ââ	 
=
ââ 
value
ââ !
;
ââ! "
}
ââ# $
}
ää 
private
åå 	
bool
åå
 
includeInSiteMap
åå 
=
åå  !
true
åå" &
;
åå& '
public
éé 
bool
éé	 
IncludeInSiteMap
éé 
{
èè 
get
êê 
{
êê 
return
êê	 
includeInSiteMap
êê  
;
êê  !
}
êê" #
set
ëë 
{
ëë 
includeInSiteMap
ëë	 
=
ëë 
value
ëë !
;
ëë! "
}
ëë# $
}
íí 
private
îî 	
bool
îî
 &
excludeFromRecentContent
îî '
=
îî( )
false
îî* /
;
îî/ 0
public
ññ 
bool
ññ	 &
ExcludeFromRecentContent
ññ &
{
óó 
get
òò 
{
òò 
return
òò	 &
excludeFromRecentContent
òò (
;
òò( )
}
òò* +
set
ôô 
{
ôô &
excludeFromRecentContent
ôô	 !
=
ôô" #
value
ôô$ )
;
ôô) *
}
ôô+ ,
}
öö 
public
°° 
string
°°	 
PreviousPostUrl
°° 
{
¢¢ 
get
££ 
{
££ 
return
££	 
previousPostUrl
££ 
;
££  
}
££! "
}
•• 
public
ßß 
string
ßß	 
NextPostUrl
ßß 
{
®® 
get
©© 
{
©© 
return
©©	 
nextPostUrl
©© 
;
©© 
}
©© 
}
´´ 
public
≠≠ 
string
≠≠	 
PreviousPostTitle
≠≠ !
{
ÆÆ 
get
ØØ 
{
ØØ 
return
ØØ	 
previousPostTitle
ØØ !
;
ØØ! "
}
ØØ# $
}
±± 
public
≥≥ 
string
≥≥	 
NextPostTitle
≥≥ 
{
¥¥ 
get
µµ 
{
µµ 
return
µµ	 
nextPostTitle
µµ 
;
µµ 
}
µµ  
}
∑∑ 
public
ππ 
int
ππ	 
CommentCount
ππ 
{
∫∫ 
get
ªª 
{
ªª 
return
ªª	 
commentCount
ªª 
;
ªª 
}
ªª 
}
ºº 
private
ææ 	
int
ææ
 
userId
ææ 
=
ææ 
-
ææ 
$num
ææ 
;
ææ 
public
¿¿ 
int
¿¿	 
UserId
¿¿ 
{
¡¡ 
get
¬¬ 
{
¬¬ 
return
¬¬	 
userId
¬¬ 
;
¬¬ 
}
¬¬ 
}
√√ 
private
≈≈ 	
string
≈≈
 
userLoginName
≈≈ 
=
≈≈  
string
≈≈! '
.
≈≈' (
Empty
≈≈( -
;
≈≈- .
public
«« 
string
««	 
UserLoginName
«« 
{
»» 
get
…… 
{
…… 
return
……	 
userLoginName
…… 
;
…… 
}
……  
}
ÀÀ 
private
ÕÕ 	
string
ÕÕ
 
userDisplayName
ÕÕ  
=
ÕÕ! "
string
ÕÕ# )
.
ÕÕ) *
Empty
ÕÕ* /
;
ÕÕ/ 0
public
œœ 
string
œœ	 
UserDisplayName
œœ 
{
–– 
get
—— 
{
—— 
return
——	 
userDisplayName
—— 
;
——  
}
——! "
}
”” 
private
’’ 	
string
’’
 
userFirstName
’’ 
=
’’  
string
’’! '
.
’’' (
Empty
’’( -
;
’’- .
public
◊◊ 
string
◊◊	 
UserFirstName
◊◊ 
{
ÿÿ 
get
ŸŸ 
{
ŸŸ 
return
ŸŸ	 
userFirstName
ŸŸ 
;
ŸŸ 
}
ŸŸ  
}
€€ 
private
›› 	
string
››
 
userLastName
›› 
=
›› 
string
››  &
.
››& '
Empty
››' ,
;
››, -
public
ﬂﬂ 
string
ﬂﬂ	 
UserLastName
ﬂﬂ 
{
‡‡ 
get
·· 
{
·· 
return
··	 
userLastName
·· 
;
·· 
}
·· 
}
„„ 
private
ÂÂ 	
string
ÂÂ
 
	userEmail
ÂÂ 
=
ÂÂ 
string
ÂÂ #
.
ÂÂ# $
Empty
ÂÂ$ )
;
ÂÂ) *
public
ÁÁ 
string
ÁÁ	 
	UserEmail
ÁÁ 
{
ËË 
get
ÈÈ 
{
ÈÈ 
return
ÈÈ	 
	userEmail
ÈÈ 
;
ÈÈ 
}
ÈÈ 
}
ÎÎ 
private
ÌÌ 	
string
ÌÌ
 

userAvatar
ÌÌ 
=
ÌÌ 
string
ÌÌ $
.
ÌÌ$ %
Empty
ÌÌ% *
;
ÌÌ* +
public
ÔÔ 
string
ÔÔ	 

UserAvatar
ÔÔ 
{
 
get
ÒÒ 
{
ÒÒ 
return
ÒÒ	 

userAvatar
ÒÒ 
;
ÒÒ 
}
ÒÒ 
}
ÛÛ 
private
ıı 	
string
ıı
 
	authorBio
ıı 
=
ıı 
string
ıı #
.
ıı# $
Empty
ıı$ )
;
ıı) *
public
˜˜ 
string
˜˜	 
	AuthorBio
˜˜ 
{
¯¯ 
get
˘˘ 
{
˘˘ 
return
˘˘	 
	authorBio
˘˘ 
;
˘˘ 
}
˘˘ 
}
˚˚ 
private
˝˝ 	
bool
˝˝
 
includeInNews
˝˝ 
=
˝˝ 
false
˝˝ $
;
˝˝$ %
public
ˇˇ 
bool
ˇˇ	 
IncludeInNews
ˇˇ 
{
ÄÄ 
get
ÅÅ 
{
ÅÅ 
return
ÅÅ	 
includeInNews
ÅÅ 
;
ÅÅ 
}
ÅÅ  
set
ÇÇ 
{
ÇÇ 
includeInNews
ÇÇ	 
=
ÇÇ 
value
ÇÇ 
;
ÇÇ 
}
ÇÇ  !
}
ÉÉ 
private
ÖÖ 	
string
ÖÖ
 
pubName
ÖÖ 
=
ÖÖ 
string
ÖÖ !
.
ÖÖ! "
Empty
ÖÖ" '
;
ÖÖ' (
public
áá 
string
áá	 
PubName
áá 
{
àà 
get
ââ 
{
ââ 
return
ââ	 
pubName
ââ 
;
ââ 
}
ââ 
set
ää 
{
ää 
pubName
ää	 
=
ää 
value
ää 
;
ää 
}
ää 
}
ãã 
private
çç 	
string
çç
 
pubLanguage
çç 
=
çç 
string
çç %
.
çç% &
Empty
çç& +
;
çç+ ,
public
èè 
string
èè	 
PubLanguage
èè 
{
êê 
get
ëë 
{
ëë 
return
ëë	 
pubLanguage
ëë 
;
ëë 
}
ëë 
set
íí 
{
íí 
pubLanguage
íí	 
=
íí 
value
íí 
;
íí 
}
íí 
}
ìì 
private
ïï 	
string
ïï
 
	pubAccess
ïï 
=
ïï 
string
ïï #
.
ïï# $
Empty
ïï$ )
;
ïï) *
public
óó 
string
óó	 
	PubAccess
óó 
{
òò 
get
ôô 
{
ôô 
return
ôô	 
	pubAccess
ôô 
;
ôô 
}
ôô 
set
öö 
{
öö 
	pubAccess
öö	 
=
öö 
value
öö 
;
öö 
}
öö 
}
õõ 
private
ùù 	
string
ùù
 
	pubGenres
ùù 
=
ùù 
string
ùù #
.
ùù# $
Empty
ùù$ )
;
ùù) *
public
üü 
string
üü	 
	PubGenres
üü 
{
†† 
get
°° 
{
°° 
return
°°	 
	pubGenres
°° 
;
°° 
}
°° 
set
¢¢ 
{
¢¢ 
	pubGenres
¢¢	 
=
¢¢ 
value
¢¢ 
;
¢¢ 
}
¢¢ 
}
££ 
private
•• 	
string
••
 
pubKeyWords
•• 
=
•• 
string
•• %
.
••% &
Empty
••& +
;
••+ ,
public
ßß 
string
ßß	 
PubKeyWords
ßß 
{
®® 
get
©© 
{
©© 
return
©©	 
pubKeyWords
©© 
;
©© 
}
©© 
set
™™ 
{
™™ 
pubKeyWords
™™	 
=
™™ 
value
™™ 
;
™™ 
}
™™ 
}
´´ 
private
≠≠ 	
string
≠≠
 
pubGeoLocations
≠≠  
=
≠≠! "
string
≠≠# )
.
≠≠) *
Empty
≠≠* /
;
≠≠/ 0
public
ØØ 
string
ØØ	 
PubGeoLocations
ØØ 
{
∞∞ 
get
±± 
{
±± 
return
±±	 
pubGeoLocations
±± 
;
±±  
}
±±! "
set
≤≤ 
{
≤≤ 
pubGeoLocations
≤≤	 
=
≤≤ 
value
≤≤  
;
≤≤  !
}
≤≤" #
}
≥≥ 
private
µµ 	
string
µµ
 
pubStockTickers
µµ  
=
µµ! "
string
µµ# )
.
µµ) *
Empty
µµ* /
;
µµ/ 0
public
∑∑ 
string
∑∑	 
PubStockTickers
∑∑ 
{
∏∏ 
get
ππ 
{
ππ 
return
ππ	 
pubStockTickers
ππ 
;
ππ  
}
ππ! "
set
∫∫ 
{
∫∫ 
pubStockTickers
∫∫	 
=
∫∫ 
value
∫∫  
;
∫∫  !
}
∫∫" #
}
ªª 
private
ΩΩ 	
string
ΩΩ
 
headlineImageUrl
ΩΩ !
=
ΩΩ" #
string
ΩΩ$ *
.
ΩΩ* +
Empty
ΩΩ+ 0
;
ΩΩ0 1
public
øø 
string
øø	 
HeadlineImageUrl
øø  
{
¿¿ 
get
¡¡ 
{
¡¡ 
return
¡¡	 
headlineImageUrl
¡¡  
;
¡¡  !
}
¡¡" #
set
¬¬ 
{
¬¬ 
headlineImageUrl
¬¬	 
=
¬¬ 
value
¬¬ !
;
¬¬! "
}
¬¬# $
}
√√ 
private
≈≈ 	
bool
≈≈
 #
includeImageInExcerpt
≈≈ $
=
≈≈% &
true
≈≈' +
;
≈≈+ ,
public
«« 
bool
««	 #
IncludeImageInExcerpt
«« #
{
»» 
get
…… 
{
…… 
return
……	 #
includeImageInExcerpt
…… %
;
……% &
}
……' (
set
   
{
   #
includeImageInExcerpt
  	 
=
    
value
  ! &
;
  & '
}
  ( )
}
ÀÀ 
private
ÕÕ 	
bool
ÕÕ
  
includeImageInPost
ÕÕ !
=
ÕÕ" #
true
ÕÕ$ (
;
ÕÕ( )
public
œœ 
bool
œœ	  
IncludeImageInPost
œœ  
{
–– 
get
—— 
{
—— 
return
——	  
includeImageInPost
—— "
;
——" #
}
——$ %
set
““ 
{
““  
includeImageInPost
““	 
=
““ 
value
““ #
;
““# $
}
““% &
}
”” 
public
›› 
int
››	 
SiteId
›› 
{
ﬁﬁ 
get
ﬂﬂ 
{
ﬂﬂ 
return
ﬂﬂ	 
siteId
ﬂﬂ 
;
ﬂﬂ 
}
ﬂﬂ 
set
‡‡ 
{
‡‡ 
siteId
‡‡	 
=
‡‡ 
value
‡‡ 
;
‡‡ 
}
‡‡ 
}
·· 
public
ËË 
string
ËË	 
SearchIndexPath
ËË 
{
ÈÈ 
get
ÍÍ 
{
ÍÍ 
return
ÍÍ	 
searchIndexPath
ÍÍ 
;
ÍÍ  
}
ÍÍ! "
set
ÎÎ 
{
ÎÎ 
searchIndexPath
ÎÎ	 
=
ÎÎ 
value
ÎÎ  
;
ÎÎ  !
}
ÎÎ" #
}
ÏÏ 
private
˜˜ 	
void
˜˜
 
GetBlog
˜˜ 
(
˜˜ 
int
˜˜ 
itemId
˜˜ !
)
˜˜! "
{
¯¯ 
using
˘˘ 
(
˘˘	 

IDataReader
˘˘
 
reader
˘˘ 
=
˘˘ 
DBBlog
˘˘ %
.
˘˘% &
GetSingleBlog
˘˘& 3
(
˘˘3 4
itemId
˘˘4 :
,
˘˘: ;
DateTime
˘˘< D
.
˘˘D E
UtcNow
˘˘E K
)
˘˘K L
)
˘˘L M
{
˙˙ 
if
˚˚ 
(
˚˚ 
reader
˚˚ 
.
˚˚ 
Read
˚˚ 
(
˚˚ 
)
˚˚ 
)
˚˚ 
{
¸¸ 
this
˝˝ 	
.
˝˝	 

itemID
˝˝
 
=
˝˝ 
Convert
˝˝ 
.
˝˝ 
ToInt32
˝˝ "
(
˝˝" #
reader
˝˝# )
[
˝˝) *
$str
˝˝* 2
]
˝˝2 3
.
˝˝3 4
ToString
˝˝4 <
(
˝˝< =
)
˝˝= >
,
˝˝> ?
CultureInfo
˝˝@ K
.
˝˝K L
InvariantCulture
˝˝L \
)
˝˝\ ]
;
˝˝] ^
this
˛˛ 	
.
˛˛	 

moduleID
˛˛
 
=
˛˛ 
Convert
˛˛ 
.
˛˛ 
ToInt32
˛˛ $
(
˛˛$ %
reader
˛˛% +
[
˛˛+ ,
$str
˛˛, 6
]
˛˛6 7
.
˛˛7 8
ToString
˛˛8 @
(
˛˛@ A
)
˛˛A B
,
˛˛B C
CultureInfo
˛˛D O
.
˛˛O P
InvariantCulture
˛˛P `
)
˛˛` a
;
˛˛a b
this
ˇˇ 	
.
ˇˇ	 

userName
ˇˇ
 
=
ˇˇ 
reader
ˇˇ 
[
ˇˇ 
$str
ˇˇ "
]
ˇˇ" #
.
ˇˇ# $
ToString
ˇˇ$ ,
(
ˇˇ, -
)
ˇˇ- .
;
ˇˇ. /
this
ÄÄ 	
.
ÄÄ	 

title
ÄÄ
 
=
ÄÄ 
reader
ÄÄ 
[
ÄÄ 
$str
ÄÄ "
]
ÄÄ" #
.
ÄÄ# $
ToString
ÄÄ$ ,
(
ÄÄ, -
)
ÄÄ- .
;
ÄÄ. /
this
ÅÅ 	
.
ÅÅ	 

excerpt
ÅÅ
 
=
ÅÅ 
reader
ÅÅ 
[
ÅÅ 
$str
ÅÅ %
]
ÅÅ% &
.
ÅÅ& '
ToString
ÅÅ' /
(
ÅÅ/ 0
)
ÅÅ0 1
;
ÅÅ1 2
this
ÇÇ 	
.
ÇÇ	 

description
ÇÇ
 
=
ÇÇ 
reader
ÇÇ 
[
ÇÇ 
$str
ÇÇ ,
]
ÇÇ, -
.
ÇÇ- .
ToString
ÇÇ. 6
(
ÇÇ6 7
)
ÇÇ7 8
;
ÇÇ8 9
this
ÑÑ 	
.
ÑÑ	 

metaKeywords
ÑÑ
 
=
ÑÑ 
reader
ÑÑ 
[
ÑÑ  
$str
ÑÑ  .
]
ÑÑ. /
.
ÑÑ/ 0
ToString
ÑÑ0 8
(
ÑÑ8 9
)
ÑÑ9 :
;
ÑÑ: ;
this
ÖÖ 	
.
ÖÖ	 

metaDescription
ÖÖ
 
=
ÖÖ 
reader
ÖÖ "
[
ÖÖ" #
$str
ÖÖ# 4
]
ÖÖ4 5
.
ÖÖ5 6
ToString
ÖÖ6 >
(
ÖÖ> ?
)
ÖÖ? @
;
ÖÖ@ A
this
áá 	
.
áá	 

	startDate
áá
 
=
áá 
Convert
áá 
.
áá 

ToDateTime
áá (
(
áá( )
reader
áá) /
[
áá/ 0
$str
áá0 ;
]
áá; <
.
áá< =
ToString
áá= E
(
ááE F
)
ááF G
)
ááG H
;
ááH I
this
çç 	
.
çç	 

isInNewsletter
çç
 
=
çç 
Convert
çç "
.
çç" #
	ToBoolean
çç# ,
(
çç, -
reader
çç- 3
[
çç3 4
$str
çç4 D
]
ççD E
)
ççE F
;
ççF G
this
íí 	
.
íí	 

includeInFeed
íí
 
=
íí 
Convert
íí !
.
íí! "
	ToBoolean
íí" +
(
íí+ ,
reader
íí, 2
[
íí2 3
$str
íí3 B
]
ííB C
)
ííC D
;
ííD E
if
îî 
(
îî 	
reader
îî	 
[
îî 
$str
îî &
]
îî& '
!=
îî( *
DBNull
îî+ 1
.
îî1 2
Value
îî2 7
)
îî7 8
{
ïï 
this
ññ 

.
ññ
 "
allowCommentsForDays
ññ 
=
ññ  !
Convert
ññ" )
.
ññ) *
ToInt32
ññ* 1
(
ññ1 2
reader
ññ2 8
[
ññ8 9
$str
ññ9 O
]
ññO P
)
ññP Q
;
ññQ R
}
óó 
this
ôô 	
.
ôô	 

blogGuid
ôô
 
=
ôô 
new
ôô 
Guid
ôô 
(
ôô 
reader
ôô $
[
ôô$ %
$str
ôô% /
]
ôô/ 0
.
ôô0 1
ToString
ôô1 9
(
ôô9 :
)
ôô: ;
)
ôô; <
;
ôô< =
this
öö 	
.
öö	 


moduleGuid
öö
 
=
öö 
new
öö 
Guid
öö 
(
öö  
reader
öö  &
[
öö& '
$str
öö' 3
]
öö3 4
.
öö4 5
ToString
öö5 =
(
öö= >
)
öö> ?
)
öö? @
;
öö@ A
this
õõ 	
.
õõ	 

location
õõ
 
=
õõ 
reader
õõ 
[
õõ 
$str
õõ &
]
õõ& '
.
õõ' (
ToString
õõ( 0
(
õõ0 1
)
õõ1 2
;
õõ2 3
this
úú 	
.
úú	 

compiledMeta
úú
 
=
úú 
reader
úú 
[
úú  
$str
úú  .
]
úú. /
.
úú/ 0
ToString
úú0 8
(
úú8 9
)
úú9 :
;
úú: ;
if
ûû 
(
ûû 	
reader
ûû	 
[
ûû 
$str
ûû 
]
ûû 
!=
ûû !
DBNull
ûû" (
.
ûû( )
Value
ûû) .
)
ûû. /
{
üü 
this
†† 

.
††
 

createdUtc
†† 
=
†† 
Convert
†† 
.
††  

ToDateTime
††  *
(
††* +
reader
††+ 1
[
††1 2
$str
††2 ?
]
††? @
)
††@ A
;
††A B
}
°° 
if
££ 
(
££ 	
reader
££	 
[
££ 
$str
££ 
]
££ 
!=
££  
DBNull
££! '
.
££' (
Value
££( -
)
££- .
{
§§ 
this
•• 

.
••
 

lastModUtc
•• 
=
•• 
Convert
•• 
.
••  

ToDateTime
••  *
(
••* +
reader
••+ 1
[
••1 2
$str
••2 >
]
••> ?
)
••? @
;
••@ A
}
¶¶ 
string
®® 
var
®® 
=
®® 
reader
®® 
[
®® 
$str
®® #
]
®®# $
.
®®$ %
ToString
®®% -
(
®®- .
)
®®. /
;
®®/ 0
if
©© 
(
©© 	
var
©©	 
.
©© 
Length
©© 
==
©© 
$num
©© 
)
©© 
this
©© 
.
©©  
userGuid
©©  (
=
©©) *
new
©©+ .
Guid
©©/ 3
(
©©3 4
var
©©4 7
)
©©7 8
;
©©8 9
var
´´ 
=
´´	 

reader
´´ 
[
´´ 
$str
´´ #
]
´´# $
.
´´$ %
ToString
´´% -
(
´´- .
)
´´. /
;
´´/ 0
if
¨¨ 
(
¨¨ 	
var
¨¨	 
.
¨¨ 
Length
¨¨ 
==
¨¨ 
$num
¨¨ 
)
¨¨ 
this
¨¨ 
.
¨¨  
lastModUserGuid
¨¨  /
=
¨¨0 1
new
¨¨2 5
Guid
¨¨6 :
(
¨¨: ;
var
¨¨; >
)
¨¨> ?
;
¨¨? @
itemUrl
ÆÆ 
=
ÆÆ 
reader
ÆÆ 
[
ÆÆ 
$str
ÆÆ 
]
ÆÆ  
.
ÆÆ  !
ToString
ÆÆ! )
(
ÆÆ) *
)
ÆÆ* +
;
ÆÆ+ ,
previousPostUrl
∞∞ 
=
∞∞ 
reader
∞∞ 
[
∞∞ 
$str
∞∞ ,
]
∞∞, -
.
∞∞- .
ToString
∞∞. 6
(
∞∞6 7
)
∞∞7 8
;
∞∞8 9
previousPostTitle
±± 
=
±± 
reader
±± 
[
±±  
$str
±±  3
]
±±3 4
.
±±4 5
ToString
±±5 =
(
±±= >
)
±±> ?
;
±±? @
nextPostUrl
≤≤ 
=
≤≤ 
reader
≤≤ 
[
≤≤ 
$str
≤≤ $
]
≤≤$ %
.
≤≤% &
ToString
≤≤& .
(
≤≤. /
)
≤≤/ 0
;
≤≤0 1
nextPostTitle
≥≥ 
=
≥≥ 
reader
≥≥ 
[
≥≥ 
$str
≥≥ +
]
≥≥+ ,
.
≥≥, -
ToString
≥≥- 5
(
≥≥5 6
)
≥≥6 7
;
≥≥7 8
commentCount
µµ 
=
µµ 
Convert
µµ 
.
µµ 
ToInt32
µµ #
(
µµ# $
reader
µµ$ *
[
µµ* +
$str
µµ+ 9
]
µµ9 :
)
µµ: ;
;
µµ; <
isPublished
∑∑ 
=
∑∑ 
Convert
∑∑ 
.
∑∑ 
	ToBoolean
∑∑ $
(
∑∑$ %
reader
∑∑% +
[
∑∑+ ,
$str
∑∑, 9
]
∑∑9 :
)
∑∑: ;
;
∑∑; <
this
ππ 	
.
ππ	 

previousItemId
ππ
 
=
ππ 
Convert
ππ "
.
ππ" #
ToInt32
ππ# *
(
ππ* +
reader
ππ+ 1
[
ππ1 2
$str
ππ2 B
]
ππB C
.
ππC D
ToString
ππD L
(
ππL M
)
ππM N
,
ππN O
CultureInfo
ππP [
.
ππ[ \
InvariantCulture
ππ\ l
)
ππl m
;
ππm n
this
∫∫ 	
.
∫∫	 


nextItemId
∫∫
 
=
∫∫ 
Convert
∫∫ 
.
∫∫ 
ToInt32
∫∫ &
(
∫∫& '
reader
∫∫' -
[
∫∫- .
$str
∫∫. :
]
∫∫: ;
.
∫∫; <
ToString
∫∫< D
(
∫∫D E
)
∫∫E F
,
∫∫F G
CultureInfo
∫∫H S
.
∫∫S T
InvariantCulture
∫∫T d
)
∫∫d e
;
∫∫e f
this
ºº 	
.
ºº	 

userId
ºº
 
=
ºº 
Convert
ºº 
.
ºº 
ToInt32
ºº "
(
ºº" #
reader
ºº# )
[
ºº) *
$str
ºº* 2
]
ºº2 3
)
ºº3 4
;
ºº4 5
this
ΩΩ 	
.
ΩΩ	 

userDisplayName
ΩΩ
 
=
ΩΩ 
reader
ΩΩ "
[
ΩΩ" #
$str
ΩΩ# )
]
ΩΩ) *
.
ΩΩ* +
ToString
ΩΩ+ 3
(
ΩΩ3 4
)
ΩΩ4 5
;
ΩΩ5 6
this
ææ 	
.
ææ	 

userLoginName
ææ
 
=
ææ 
reader
ææ  
[
ææ  !
$str
ææ! ,
]
ææ, -
.
ææ- .
ToString
ææ. 6
(
ææ6 7
)
ææ7 8
;
ææ8 9
this
øø 	
.
øø	 

userFirstName
øø
 
=
øø 
reader
øø  
[
øø  !
$str
øø! ,
]
øø, -
.
øø- .
ToString
øø. 6
(
øø6 7
)
øø7 8
;
øø8 9
this
¿¿ 	
.
¿¿	 

userLastName
¿¿
 
=
¿¿ 
reader
¿¿ 
[
¿¿  
$str
¿¿  *
]
¿¿* +
.
¿¿+ ,
ToString
¿¿, 4
(
¿¿4 5
)
¿¿5 6
;
¿¿6 7
this
¡¡ 	
.
¡¡	 

	userEmail
¡¡
 
=
¡¡ 
reader
¡¡ 
[
¡¡ 
$str
¡¡ $
]
¡¡$ %
.
¡¡% &
ToString
¡¡& .
(
¡¡. /
)
¡¡/ 0
;
¡¡0 1
this
¬¬ 	
.
¬¬	 


userAvatar
¬¬
 
=
¬¬ 
reader
¬¬ 
[
¬¬ 
$str
¬¬ )
]
¬¬) *
.
¬¬* +
ToString
¬¬+ 3
(
¬¬3 4
)
¬¬4 5
;
¬¬5 6
this
√√ 	
.
√√	 

	authorBio
√√
 
=
√√ 
reader
√√ 
[
√√ 
$str
√√ (
]
√√( )
.
√√) *
ToString
√√* 2
(
√√2 3
)
√√3 4
;
√√4 5
this
≈≈ 	
.
≈≈	 

subTitle
≈≈
 
=
≈≈ 
reader
≈≈ 
[
≈≈ 
$str
≈≈ &
]
≈≈& '
.
≈≈' (
ToString
≈≈( 0
(
≈≈0 1
)
≈≈1 2
;
≈≈2 3
if
«« 
(
«« 	
reader
««	 
[
«« 
$str
«« 
]
«« 
!=
«« 
DBNull
«« $
.
««$ %
Value
««% *
)
««* +
{
»» 
this
…… 

.
……
 
endDate
…… 
=
…… 
Convert
…… 
.
…… 

ToDateTime
…… '
(
……' (
reader
……( .
[
……. /
$str
……/ 8
]
……8 9
)
……9 :
;
……: ;
}
   
if
ÃÃ 
(
ÃÃ 	
reader
ÃÃ	 
[
ÃÃ 
$str
ÃÃ 
]
ÃÃ 
!=
ÃÃ  "
DBNull
ÃÃ# )
.
ÃÃ) *
Value
ÃÃ* /
)
ÃÃ/ 0
{
ÕÕ 
this
ŒŒ 

.
ŒŒ
 
approvedDate
ŒŒ 
=
ŒŒ 
Convert
ŒŒ !
.
ŒŒ! "

ToDateTime
ŒŒ" ,
(
ŒŒ, -
reader
ŒŒ- 3
[
ŒŒ3 4
$str
ŒŒ4 B
]
ŒŒB C
)
ŒŒC D
;
ŒŒD E
}
œœ 
if
—— 
(
—— 	
reader
——	 
[
—— 
$str
—— 
]
—— 
!=
——  
DBNull
——! '
.
——' (
Value
——( -
)
——- .
{
““ 
var
”” 	
=
””
 
reader
”” 
[
”” 
$str
”” 
]
””  
.
””  !
ToString
””! )
(
””) *
)
””* +
;
””+ ,
if
‘‘ 
(
‘‘	 

var
‘‘
 
.
‘‘ 
Length
‘‘ 
==
‘‘ 
$num
‘‘ 
)
‘‘ 
this
‘‘  
.
‘‘  !

approvedBy
‘‘! +
=
‘‘, -
new
‘‘. 1
Guid
‘‘2 6
(
‘‘6 7
var
‘‘7 :
)
‘‘: ;
;
‘‘; <
}
’’ 
if
◊◊ 
(
◊◊ 	
reader
◊◊	 
[
◊◊ 
$str
◊◊ 
]
◊◊ 
!=
◊◊ 
DBNull
◊◊ %
.
◊◊% &
Value
◊◊& +
)
◊◊+ ,
{
ÿÿ 
this
ŸŸ 

.
ŸŸ
 
approved
ŸŸ 
=
ŸŸ 
Convert
ŸŸ 
.
ŸŸ 
	ToBoolean
ŸŸ '
(
ŸŸ' (
reader
ŸŸ( .
[
ŸŸ. /
$str
ŸŸ/ 9
]
ŸŸ9 :
)
ŸŸ: ;
;
ŸŸ; <
}
⁄⁄ 
if
ﬂﬂ 
(
ﬂﬂ 	
reader
ﬂﬂ	 
[
ﬂﬂ 
$str
ﬂﬂ  
]
ﬂﬂ  !
!=
ﬂﬂ" $
DBNull
ﬂﬂ% +
.
ﬂﬂ+ ,
Value
ﬂﬂ, 1
)
ﬂﬂ1 2
{
‡‡ 
this
·· 

.
··
 
showAuthorName
·· 
=
·· 
Convert
·· #
.
··# $
	ToBoolean
··$ -
(
··- .
reader
··. 4
[
··4 5
$str
··5 E
]
··E F
)
··F G
;
··G H
}
‚‚ 
if
‰‰ 
(
‰‰ 	
reader
‰‰	 
[
‰‰ 
$str
‰‰ "
]
‰‰" #
!=
‰‰$ &
DBNull
‰‰' -
.
‰‰- .
Value
‰‰. 3
)
‰‰3 4
{
ÂÂ 
this
ÊÊ 

.
ÊÊ
 
showAuthorAvatar
ÊÊ 
=
ÊÊ 
Convert
ÊÊ %
.
ÊÊ% &
	ToBoolean
ÊÊ& /
(
ÊÊ/ 0
reader
ÊÊ0 6
[
ÊÊ6 7
$str
ÊÊ7 I
]
ÊÊI J
)
ÊÊJ K
;
ÊÊK L
}
ÁÁ 
if
ÈÈ 
(
ÈÈ 	
reader
ÈÈ	 
[
ÈÈ 
$str
ÈÈ 
]
ÈÈ  
!=
ÈÈ! #
DBNull
ÈÈ$ *
.
ÈÈ* +
Value
ÈÈ+ 0
)
ÈÈ0 1
{
ÍÍ 
this
ÎÎ 

.
ÎÎ
 
showAuthorBio
ÎÎ 
=
ÎÎ 
Convert
ÎÎ "
.
ÎÎ" #
	ToBoolean
ÎÎ# ,
(
ÎÎ, -
reader
ÎÎ- 3
[
ÎÎ3 4
$str
ÎÎ4 C
]
ÎÎC D
)
ÎÎD E
;
ÎÎE F
}
ÏÏ 
if
ÓÓ 
(
ÓÓ 	
reader
ÓÓ	 
[
ÓÓ 
$str
ÓÓ !
]
ÓÓ! "
!=
ÓÓ# %
DBNull
ÓÓ& ,
.
ÓÓ, -
Value
ÓÓ- 2
)
ÓÓ2 3
{
ÔÔ 
this
 

.

 
includeInSearch
 
=
 
Convert
 $
.
$ %
	ToBoolean
% .
(
. /
reader
/ 5
[
5 6
$str
6 G
]
G H
)
H I
;
I J
}
ÒÒ 
if
ÛÛ 
(
ÛÛ 	
reader
ÛÛ	 
[
ÛÛ 
$str
ÛÛ "
]
ÛÛ" #
!=
ÛÛ$ &
DBNull
ÛÛ' -
.
ÛÛ- .
Value
ÛÛ. 3
)
ÛÛ3 4
{
ÙÙ 
this
ıı 

.
ıı
 
includeInSiteMap
ıı 
=
ıı 
Convert
ıı %
.
ıı% &
	ToBoolean
ıı& /
(
ıı/ 0
reader
ıı0 6
[
ıı6 7
$str
ıı7 I
]
ııI J
)
ııJ K
;
ııK L
}
ˆˆ 
if
¯¯ 
(
¯¯ 	
reader
¯¯	 
[
¯¯ 
$str
¯¯ 
]
¯¯ 
!=
¯¯  
DBNull
¯¯! '
.
¯¯' (
Value
¯¯( -
)
¯¯- .
{
˘˘ 
this
˙˙ 

.
˙˙
 

UseBingMap
˙˙ 
=
˙˙ 
Convert
˙˙ 
.
˙˙  
	ToBoolean
˙˙  )
(
˙˙) *
reader
˙˙* 0
[
˙˙0 1
$str
˙˙1 =
]
˙˙= >
)
˙˙> ?
;
˙˙? @
}
˚˚ 
if
˝˝ 
(
˝˝ 	
reader
˝˝	 
[
˝˝ 
$str
˝˝ 
]
˝˝ 
!=
˝˝ 
DBNull
˝˝  &
.
˝˝& '
Value
˝˝' ,
)
˝˝, -
{
˛˛ 
this
ˇˇ 

.
ˇˇ
 
	mapHeight
ˇˇ 
=
ˇˇ 
reader
ˇˇ 
[
ˇˇ 
$str
ˇˇ )
]
ˇˇ) *
.
ˇˇ* +
ToString
ˇˇ+ 3
(
ˇˇ3 4
)
ˇˇ4 5
;
ˇˇ5 6
}
ÄÄ 
if
ÇÇ 
(
ÇÇ 	
reader
ÇÇ	 
[
ÇÇ 
$str
ÇÇ 
]
ÇÇ 
!=
ÇÇ 
DBNull
ÇÇ %
.
ÇÇ% &
Value
ÇÇ& +
)
ÇÇ+ ,
{
ÉÉ 
this
ÑÑ 

.
ÑÑ
 
mapWidth
ÑÑ 
=
ÑÑ 
reader
ÑÑ 
[
ÑÑ 
$str
ÑÑ '
]
ÑÑ' (
.
ÑÑ( )
ToString
ÑÑ) 1
(
ÑÑ1 2
)
ÑÑ2 3
;
ÑÑ3 4
}
ÖÖ 
if
áá 
(
áá 	
reader
áá	 
[
áá 
$str
áá  
]
áá  !
!=
áá" $
DBNull
áá% +
.
áá+ ,
Value
áá, 1
)
áá1 2
{
àà 
this
ââ 

.
ââ
 
showMapOptions
ââ 
=
ââ 
Convert
ââ #
.
ââ# $
	ToBoolean
ââ$ -
(
ââ- .
reader
ââ. 4
[
ââ4 5
$str
ââ5 E
]
ââE F
)
ââF G
;
ââG H
}
ää 
if
åå 
(
åå 	
reader
åå	 
[
åå 
$str
åå 
]
åå 
!=
åå  "
DBNull
åå# )
.
åå) *
Value
åå* /
)
åå/ 0
{
çç 
this
éé 

.
éé
 
showZoomTool
éé 
=
éé 
Convert
éé !
.
éé! "
	ToBoolean
éé" +
(
éé+ ,
reader
éé, 2
[
éé2 3
$str
éé3 A
]
ééA B
)
ééB C
;
ééC D
}
èè 
if
ëë 
(
ëë 	
reader
ëë	 
[
ëë 
$str
ëë "
]
ëë" #
!=
ëë$ &
DBNull
ëë' -
.
ëë- .
Value
ëë. 3
)
ëë3 4
{
íí 
this
ìì 

.
ìì
 
showLocationInfo
ìì 
=
ìì 
Convert
ìì %
.
ìì% &
	ToBoolean
ìì& /
(
ìì/ 0
reader
ìì0 6
[
ìì6 7
$str
ìì7 I
]
ììI J
)
ììJ K
;
ììK L
}
îî 
if
ññ 
(
ññ 	
reader
ññ	 
[
ññ 
$str
ññ &
]
ññ& '
!=
ññ( *
DBNull
ññ+ 1
.
ññ1 2
Value
ññ2 7
)
ññ7 8
{
óó 
this
òò 

.
òò
 "
useDrivingDirections
òò 
=
òò  !
Convert
òò" )
.
òò) *
	ToBoolean
òò* 3
(
òò3 4
reader
òò4 :
[
òò: ;
$str
òò; Q
]
òòQ R
)
òòR S
;
òòS T
}
ôô 
if
õõ 
(
õõ 	
reader
õõ	 
[
õõ 
$str
õõ 
]
õõ 
!=
õõ 
DBNull
õõ $
.
õõ$ %
Value
õõ% *
)
õõ* +
{
úú 
this
ùù 

.
ùù
 
mapType
ùù 
=
ùù 
reader
ùù 
[
ùù 
$str
ùù %
]
ùù% &
.
ùù& '
ToString
ùù' /
(
ùù/ 0
)
ùù0 1
;
ùù1 2
}
ûû 
if
†† 
(
†† 	
reader
††	 
[
†† 
$str
†† 
]
†† 
!=
†† 
DBNull
†† $
.
††$ %
Value
††% *
)
††* +
{
°° 
this
¢¢ 

.
¢¢
 
mapZoom
¢¢ 
=
¢¢ 
Convert
¢¢ 
.
¢¢ 
ToInt32
¢¢ $
(
¢¢$ %
reader
¢¢% +
[
¢¢+ ,
$str
¢¢, 5
]
¢¢5 6
)
¢¢6 7
;
¢¢7 8
}
££ 
if
•• 
(
•• 	
reader
••	 
[
•• 
$str
•• "
]
••" #
!=
••$ &
DBNull
••' -
.
••- .
Value
••. 3
)
••3 4
{
¶¶ 
this
ßß 

.
ßß
 
showDownloadLink
ßß 
=
ßß 
Convert
ßß %
.
ßß% &
	ToBoolean
ßß& /
(
ßß/ 0
reader
ßß0 6
[
ßß6 7
$str
ßß7 I
]
ßßI J
)
ßßJ K
;
ßßK L
}
®® 
if
™™ 
(
™™ 	
reader
™™	 
[
™™ 
$str
™™ *
]
™™* +
!=
™™, .
DBNull
™™/ 5
.
™™5 6
Value
™™6 ;
)
™™; <
{
´´ 
this
¨¨ 

.
¨¨
 &
excludeFromRecentContent
¨¨ #
=
¨¨$ %
Convert
¨¨& -
.
¨¨- .
	ToBoolean
¨¨. 7
(
¨¨7 8
reader
¨¨8 >
[
¨¨> ?
$str
¨¨? Y
]
¨¨Y Z
)
¨¨Z [
;
¨¨[ \
}
≠≠ 
if
ØØ 
(
ØØ 	
reader
ØØ	 
[
ØØ 
$str
ØØ 
]
ØØ  
!=
ØØ! #
DBNull
ØØ$ *
.
ØØ* +
Value
ØØ+ 0
)
ØØ0 1
{
∞∞ 
this
±± 

.
±±
 
includeInNews
±± 
=
±± 
Convert
±± "
.
±±" #
	ToBoolean
±±# ,
(
±±, -
reader
±±- 3
[
±±3 4
$str
±±4 C
]
±±C D
)
±±D E
;
±±E F
}
≤≤ 
pubName
¥¥ 
=
¥¥ 
reader
¥¥ 
[
¥¥ 
$str
¥¥ 
]
¥¥  
.
¥¥  !
ToString
¥¥! )
(
¥¥) *
)
¥¥* +
;
¥¥+ ,
pubLanguage
µµ 
=
µµ 
reader
µµ 
[
µµ 
$str
µµ '
]
µµ' (
.
µµ( )
ToString
µµ) 1
(
µµ1 2
)
µµ2 3
;
µµ3 4
	pubAccess
∂∂ 
=
∂∂ 
reader
∂∂ 
[
∂∂ 
$str
∂∂ #
]
∂∂# $
.
∂∂$ %
ToString
∂∂% -
(
∂∂- .
)
∂∂. /
;
∂∂/ 0
	pubGenres
∑∑ 
=
∑∑ 
reader
∑∑ 
[
∑∑ 
$str
∑∑ #
]
∑∑# $
.
∑∑$ %
ToString
∑∑% -
(
∑∑- .
)
∑∑. /
;
∑∑/ 0
pubKeyWords
∏∏ 
=
∏∏ 
reader
∏∏ 
[
∏∏ 
$str
∏∏ '
]
∏∏' (
.
∏∏( )
ToString
∏∏) 1
(
∏∏1 2
)
∏∏2 3
;
∏∏3 4
pubGeoLocations
ππ 
=
ππ 
reader
ππ 
[
ππ 
$str
ππ /
]
ππ/ 0
.
ππ0 1
ToString
ππ1 9
(
ππ9 :
)
ππ: ;
;
ππ; <
pubStockTickers
∫∫ 
=
∫∫ 
reader
∫∫ 
[
∫∫ 
$str
∫∫ /
]
∫∫/ 0
.
∫∫0 1
ToString
∫∫1 9
(
∫∫9 :
)
∫∫: ;
;
∫∫; <
headlineImageUrl
ªª 
=
ªª 
reader
ªª 
[
ªª 
$str
ªª 1
]
ªª1 2
.
ªª2 3
ToString
ªª3 ;
(
ªª; <
)
ªª< =
;
ªª= >
if
ΩΩ 
(
ΩΩ 	
reader
ΩΩ	 
[
ΩΩ 
$str
ΩΩ '
]
ΩΩ' (
!=
ΩΩ) +
DBNull
ΩΩ, 2
.
ΩΩ2 3
Value
ΩΩ3 8
)
ΩΩ8 9
{
ææ #
includeImageInExcerpt
øø 
=
øø 
Convert
øø %
.
øø% &
	ToBoolean
øø& /
(
øø/ 0
reader
øø0 6
[
øø6 7
$str
øø7 N
]
øøN O
)
øøO P
;
øøP Q
}
¿¿ 
if
¬¬ 
(
¬¬ 	
reader
¬¬	 
[
¬¬ 
$str
¬¬ $
]
¬¬$ %
!=
¬¬& (
DBNull
¬¬) /
.
¬¬/ 0
Value
¬¬0 5
)
¬¬5 6
{
√√  
includeImageInPost
ƒƒ 
=
ƒƒ 
Convert
ƒƒ "
.
ƒƒ" #
	ToBoolean
ƒƒ# ,
(
ƒƒ, -
reader
ƒƒ- 3
[
ƒƒ3 4
$str
ƒƒ4 H
]
ƒƒH I
)
ƒƒI J
;
ƒƒJ K
}
≈≈ 
}
∆∆ 
}
«« 
}
»» 
private
ŒŒ 	
bool
ŒŒ
 
Create
ŒŒ 
(
ŒŒ 
)
ŒŒ 
{
œœ 
int
–– 
newID
–– 
=
–– 
$num
–– 
;
–– 
blogGuid
—— 
=
—— 
Guid
—— 
.
—— 
NewGuid
—— 
(
—— 
)
—— 
;
—— 

createdUtc
““ 
=
““ 
DateTime
““ 
.
““ 
UtcNow
““ 
;
““  
if
‘‘ 
(
‘‘ 
approved
‘‘ 
)
‘‘ 
{
’’ 
approvedDate
÷÷ 
=
÷÷ 
DateTime
÷÷ 
.
÷÷ 
UtcNow
÷÷ "
;
÷÷" #
}
◊◊ 
newID
ŸŸ 
=
ŸŸ	 

DBBlog
ŸŸ 
.
ŸŸ 
AddBlog
ŸŸ 
(
ŸŸ 
blogGuid
⁄⁄ 
,
⁄⁄ 

moduleGuid
€€ 
,
€€ 
moduleID
‹‹ 
,
‹‹ 
userName
›› 
,
›› 
title
ﬁﬁ 	
,
ﬁﬁ	 

excerpt
ﬂﬂ 
,
ﬂﬂ 
description
‡‡ 
,
‡‡ 
	startDate
·· 
,
·· 
isInNewsletter
‚‚ 
,
‚‚ 
includeInFeed
„„ 
,
„„ "
allowCommentsForDays
‰‰ 
,
‰‰ 
location
ÂÂ 
,
ÂÂ 
userGuid
ÊÊ 
,
ÊÊ 

createdUtc
ÁÁ 
,
ÁÁ 
itemUrl
ËË 
,
ËË 
metaKeywords
ÈÈ 
,
ÈÈ 
metaDescription
ÍÍ 
,
ÍÍ 
compiledMeta
ÎÎ 
,
ÎÎ 
isPublished
ÏÏ 
,
ÏÏ 
subTitle
ÌÌ 
,
ÌÌ 
endDate
ÓÓ 
,
ÓÓ 
approved
ÔÔ 
,
ÔÔ 

approvedBy
 
,
 
approvedDate
ÒÒ 
,
ÒÒ 
showAuthorName
ÚÚ 
,
ÚÚ 
showAuthorAvatar
ÛÛ 
,
ÛÛ 
showAuthorBio
ÙÙ 
,
ÙÙ 
includeInSearch
ıı 
,
ıı 

useBingMap
ˆˆ 
,
ˆˆ 
	mapHeight
˜˜ 
,
˜˜ 
MapWidth
¯¯ 
,
¯¯ 
showMapOptions
˘˘ 
,
˘˘ 
showZoomTool
˙˙ 
,
˙˙ 
showLocationInfo
˚˚ 
,
˚˚ "
useDrivingDirections
¸¸ 
,
¸¸ 
mapType
˝˝ 
,
˝˝ 
mapZoom
˛˛ 
,
˛˛ 
showDownloadLink
ˇˇ 
,
ˇˇ 
includeInSiteMap
ÄÄ 
,
ÄÄ &
excludeFromRecentContent
ÅÅ 
,
ÅÅ 
includeInNews
ÇÇ 
,
ÇÇ 
pubName
ÉÉ 
,
ÉÉ 
pubLanguage
ÑÑ 
,
ÑÑ 
	pubAccess
ÖÖ 
,
ÖÖ 
	pubGenres
ÜÜ 
,
ÜÜ 
pubKeyWords
áá 
,
áá 
pubGeoLocations
àà 
,
àà 
pubStockTickers
ââ 
,
ââ 
headlineImageUrl
ää 
,
ää #
includeImageInExcerpt
ãã 
,
ãã  
includeImageInPost
åå 
)
çç 
;
çç 
itemID
èè 	
=
èè
 
newID
èè 
;
èè 
bool
ëë 
result
ëë 
=
ëë 
(
ëë 
newID
ëë 
>
ëë 
$num
ëë 
)
ëë 
;
ëë 
if
îî 
(
îî 
result
îî 
)
îî 
{
ïï %
ContentChangedEventArgs
ññ 
e
ññ 
=
ññ 
new
ññ  #%
ContentChangedEventArgs
ññ$ ;
(
ññ; <
)
ññ< =
;
ññ= >
OnContentChanged
óó 
(
óó 
e
óó 
)
óó 
;
óó 
}
òò 
return
öö 	
result
öö
 
;
öö 
}
õõ 
private
°° 	
bool
°°
 
Update
°° 
(
°° 
)
°° 
{
¢¢ 

lastModUtc
££ 
=
££ 
DateTime
££ 
.
££ 
UtcNow
££ 
;
££  
if
§§ 
(
§§ 
(
§§ 
approved
§§ 
)
§§ 
&&
§§ 
(
§§ 
approvedDate
§§ "
==
§§# %
DateTime
§§& .
.
§§. /
MaxValue
§§/ 7
)
§§7 8
)
§§8 9
{
§§: ;
approvedDate
§§< H
=
§§I J
DateTime
§§K S
.
§§S T
UtcNow
§§T Z
;
§§Z [
}
§§\ ]
bool
¶¶ 
result
¶¶ 
=
¶¶ 
DBBlog
¶¶ 
.
¶¶ 

UpdateBlog
¶¶ "
(
¶¶" #
moduleID
ßß 
,
ßß 
itemID
®® 

,
®®
 
userName
©© 
,
©© 
title
™™ 	
,
™™	 

excerpt
´´ 
,
´´ 
description
¨¨ 
,
¨¨ 
	startDate
≠≠ 
,
≠≠ 
isInNewsletter
ÆÆ 
,
ÆÆ 
includeInFeed
ØØ 
,
ØØ "
allowCommentsForDays
∞∞ 
,
∞∞ 
location
±± 
,
±± 
lastModUserGuid
≤≤ 
,
≤≤ 

lastModUtc
≥≥ 
,
≥≥ 
itemUrl
¥¥ 
,
¥¥ 
metaKeywords
µµ 
,
µµ 
metaDescription
∂∂ 
,
∂∂ 
compiledMeta
∑∑ 
,
∑∑ 
isPublished
∏∏ 
,
∏∏ 
subTitle
ππ 
,
ππ 
endDate
∫∫ 
,
∫∫ 
approved
ªª 
,
ªª 

approvedBy
ºº 
,
ºº 
approvedDate
ΩΩ 
,
ΩΩ 
showAuthorName
ææ 
,
ææ 
showAuthorAvatar
øø 
,
øø 
showAuthorBio
¿¿ 
,
¿¿ 
includeInSearch
¡¡ 
,
¡¡ 

useBingMap
¬¬ 
,
¬¬ 
	mapHeight
√√ 
,
√√ 
MapWidth
ƒƒ 
,
ƒƒ 
showMapOptions
≈≈ 
,
≈≈ 
showZoomTool
∆∆ 
,
∆∆ 
showLocationInfo
«« 
,
«« "
useDrivingDirections
»» 
,
»» 
mapType
…… 
,
…… 
mapZoom
   
,
   
showDownloadLink
ÀÀ 
,
ÀÀ 
includeInSiteMap
ÃÃ 
,
ÃÃ &
excludeFromRecentContent
ÕÕ 
,
ÕÕ 
includeInNews
ŒŒ 
,
ŒŒ 
pubName
œœ 
,
œœ 
pubLanguage
–– 
,
–– 
	pubAccess
—— 
,
—— 
	pubGenres
““ 
,
““ 
pubKeyWords
”” 
,
”” 
pubGeoLocations
‘‘ 
,
‘‘ 
pubStockTickers
’’ 
,
’’ 
headlineImageUrl
÷÷ 
,
÷÷ #
includeImageInExcerpt
◊◊ 
,
◊◊  
includeImageInPost
ÿÿ 
)
ŸŸ 
;
ŸŸ %
ContentChangedEventArgs
‹‹ 
e
‹‹ 
=
‹‹ 
new
‹‹ "%
ContentChangedEventArgs
‹‹# :
(
‹‹: ;
)
‹‹; <
;
‹‹< =
OnContentChanged
›› 
(
›› 
e
›› 
)
›› 
;
›› 
return
ﬂﬂ 	
result
ﬂﬂ
 
;
ﬂﬂ 
}
‡‡ 
public
ÁÁ 
void
ÁÁ	 
CreateHistory
ÁÁ 
(
ÁÁ 
Guid
ÁÁ  
siteGuid
ÁÁ! )
)
ÁÁ) *
{
ËË 
if
ÈÈ 
(
ÈÈ 
blogGuid
ÈÈ 
==
ÈÈ 
Guid
ÈÈ 
.
ÈÈ 
Empty
ÈÈ 
)
ÈÈ 
{
ÍÍ 
return
ÎÎ 

;
ÎÎ
 
}
ÏÏ 
Blog
ÓÓ 
currentVersion
ÓÓ 
=
ÓÓ 
new
ÓÓ 
Blog
ÓÓ !
(
ÓÓ! "
itemID
ÓÓ" (
)
ÓÓ( )
;
ÓÓ) *
if
 
(
 
currentVersion
 
.
 
Description
 !
==
" $
Description
% 0
)
0 1
{
ÒÒ 
return
ÚÚ 

;
ÚÚ
 
}
ÛÛ 
ContentHistory
ıı 
history
ıı 
=
ıı 
new
ıı 
ContentHistory
ıı  .
(
ıı. /
)
ıı/ 0
;
ıı0 1
history
ˆˆ 

.
ˆˆ
 
ContentGuid
ˆˆ 
=
ˆˆ 
currentVersion
ˆˆ '
.
ˆˆ' (
BlogGuid
ˆˆ( 0
;
ˆˆ0 1
history
˜˜ 

.
˜˜
 
Title
˜˜ 
=
˜˜ 
currentVersion
˜˜ !
.
˜˜! "
Title
˜˜" '
;
˜˜' (
history
¯¯ 

.
¯¯
 
ContentText
¯¯ 
=
¯¯ 
currentVersion
¯¯ '
.
¯¯' (
Description
¯¯( 3
;
¯¯3 4
history
˘˘ 

.
˘˘
 
SiteGuid
˘˘ 
=
˘˘ 
siteGuid
˘˘ 
;
˘˘ 
history
˙˙ 

.
˙˙
 
UserGuid
˙˙ 
=
˙˙ 
currentVersion
˙˙ $
.
˙˙$ %
LastModUserGuid
˙˙% 4
;
˙˙4 5
history
˚˚ 

.
˚˚
 

CreatedUtc
˚˚ 
=
˚˚ 
currentVersion
˚˚ &
.
˚˚& '

LastModUtc
˚˚' 1
;
˚˚1 2
history
¸¸ 

.
¸¸
 
Save
¸¸ 
(
¸¸ 
)
¸¸ 
;
¸¸ 
}
˝˝ 
public
ÑÑ 
bool
ÑÑ	 
Save
ÑÑ 
(
ÑÑ 
)
ÑÑ 
{
ÖÖ 
if
ÜÜ 
(
ÜÜ 
itemID
ÜÜ 
>
ÜÜ 
$num
ÜÜ 
)
ÜÜ 
{
áá 
return
àà 

Update
àà 
(
àà 
)
àà 
;
àà 
}
ââ 
else
ää 
{
ãã 
return
åå 

Create
åå 
(
åå 
)
åå 
;
åå 
}
çç 
}
êê 
public
íí 
bool
íí	 
Delete
íí 
(
íí 
)
íí 
{
ìì 
DBBlog
îî 	
.
îî	 
"
DeleteItemCategories
îî
 
(
îî 
itemID
îî %
)
îî% &
;
îî& '
DBBlog
ïï 	
.
ïï	 
&
DeleteAllCommentsForBlog
ïï
 "
(
ïï" #
itemID
ïï# )
)
ïï) *
;
ïï* +
DBBlog
ññ 	
.
ññ	 
 
UpdateCommentStats
ññ
 
(
ññ 
moduleID
ññ %
)
ññ% &
;
ññ& '
bool
óó 
result
óó 
=
óó 
DBBlog
óó 
.
óó 

DeleteBlog
óó "
(
óó" #
itemID
óó# )
)
óó) *
;
óó* +
DBBlog
òò 	
.
òò	 

UpdateEntryStats
òò
 
(
òò 
moduleID
òò #
)
òò# $
;
òò$ %%
ContentChangedEventArgs
öö 
e
öö 
=
öö 
new
öö "%
ContentChangedEventArgs
öö# :
(
öö: ;
)
öö; <
;
öö< =
e
õõ 
.
õõ 
	IsDeleted
õõ 
=
õõ 
true
õõ 
;
õõ 
OnContentChanged
úú 
(
úú 
e
úú 
)
úú 
;
úú 
return
ûû 	
result
ûû
 
;
ûû 
}
üü 
public
∂∂ 
static
∂∂	 
IDataReader
∂∂ 
GetBlogs
∂∂ $
(
∂∂$ %
int
∂∂% (
moduleId
∂∂) 1
,
∂∂1 2
DateTime
∂∂3 ;
	beginDate
∂∂< E
)
∂∂E F
{
∑∑ 
return
∏∏ 	
DBBlog
∏∏
 
.
∏∏ 
GetBlogs
∏∏ 
(
∏∏ 
moduleId
∏∏ "
,
∏∏" #
	beginDate
∏∏$ -
,
∏∏- .
DateTime
∏∏/ 7
.
∏∏7 8
UtcNow
∏∏8 >
)
∏∏> ?
;
∏∏? @
}
ππ 
public
ªª 
static
ªª	 
IDataReader
ªª 
GetBlogsForFeed
ªª +
(
ªª+ ,
int
ªª, /
moduleId
ªª0 8
,
ªª8 9
DateTime
ªª: B
	beginDate
ªªC L
)
ªªL M
{
ºº 
return
ΩΩ 	
DBBlog
ΩΩ
 
.
ΩΩ 
GetBlogsForFeed
ΩΩ  
(
ΩΩ  !
moduleId
ΩΩ! )
,
ΩΩ) *
	beginDate
ΩΩ+ 4
,
ΩΩ4 5
DateTime
ΩΩ6 >
.
ΩΩ> ?
UtcNow
ΩΩ? E
)
ΩΩE F
;
ΩΩF G
}
ææ 
public
¿¿ 
static
¿¿	 
IDataReader
¿¿ &
GetBlogsForMetaWeblogApi
¿¿ 4
(
¿¿4 5
int
¿¿5 8
moduleId
¿¿9 A
,
¿¿A B
DateTime
¿¿C K
	beginDate
¿¿L U
)
¿¿U V
{
¡¡ 
return
¬¬ 	
DBBlog
¬¬
 
.
¬¬ &
GetBlogsForMetaWeblogApi
¬¬ )
(
¬¬) *
moduleId
¬¬* 2
,
¬¬2 3
	beginDate
¬¬4 =
,
¬¬= >
DateTime
¬¬? G
.
¬¬G H
UtcNow
¬¬H N
)
¬¬N O
;
¬¬O P
}
√√ 
public
≈≈ 
static
≈≈	 
DataSet
≈≈ -
GetBlogsForMetaWeblogApiDataSet
≈≈ 7
(
≈≈7 8
int
≈≈8 ;
moduleId
≈≈< D
,
≈≈D E
DateTime
≈≈F N
	beginDate
≈≈O X
)
≈≈X Y
{
∆∆ 
DataSet
«« 

dataSet
«« 
=
«« 
new
«« 
DataSet
««  
(
««  !
)
««! "
;
««" #
	DataTable
…… 
posts
…… 
=
…… $
GetPostsTableStructure
…… +
(
……+ ,
)
……, -
;
……- .
using
ÀÀ 
(
ÀÀ	 

IDataReader
ÀÀ
 
reader
ÀÀ 
=
ÀÀ 
DBBlog
ÀÀ %
.
ÀÀ% &&
GetBlogsForMetaWeblogApi
ÀÀ& >
(
ÀÀ> ?
moduleId
ÀÀ? G
,
ÀÀG H
	beginDate
ÀÀI R
,
ÀÀR S
DateTime
ÀÀT \
.
ÀÀ\ ]
UtcNow
ÀÀ] c
)
ÀÀc d
)
ÀÀd e
{
ÃÃ 
while
ÕÕ 	
(
ÕÕ
 
reader
ÕÕ 
.
ÕÕ 
Read
ÕÕ 
(
ÕÕ 
)
ÕÕ 
)
ÕÕ 
{
ŒŒ 
DataRow
–– 
row
–– 
=
–– 
posts
–– 
.
–– 
NewRow
–– 
(
––  
)
––  !
;
––! "
row
”” 
[
”” 	
$str
””	 
]
”” 
=
”” 
Convert
”” 
.
”” 
ToInt32
”” $
(
””$ %
reader
””% +
[
””+ ,
$str
””, 4
]
””4 5
)
””5 6
;
””6 7
row
‘‘ 
[
‘‘ 	
$str
‘‘	 
]
‘‘ 
=
‘‘ 
Convert
‘‘ 
.
‘‘ 
ToInt32
‘‘ &
(
‘‘& '
reader
‘‘' -
[
‘‘- .
$str
‘‘. 8
]
‘‘8 9
)
‘‘9 :
;
‘‘: ;
row
’’ 
[
’’ 	
$str
’’	 
]
’’ 
=
’’ 
reader
’’ 
[
’’ 
$str
’’ (
]
’’( )
.
’’) *
ToString
’’* 2
(
’’2 3
)
’’3 4
;
’’4 5
row
÷÷ 
[
÷÷ 	
$str
÷÷	 
]
÷÷ 
=
÷÷ 
Convert
÷÷ !
.
÷÷! "

ToDateTime
÷÷" ,
(
÷÷, -
reader
÷÷- 3
[
÷÷3 4
$str
÷÷4 A
]
÷÷A B
)
÷÷B C
;
÷÷C D
row
◊◊ 
[
◊◊ 	
$str
◊◊	 
]
◊◊ 
=
◊◊ 
reader
◊◊ 
[
◊◊ 
$str
◊◊ &
]
◊◊& '
;
◊◊' (
row
ÿÿ 
[
ÿÿ 	
$str
ÿÿ	 
]
ÿÿ 
=
ÿÿ 
Convert
ÿÿ 
.
ÿÿ  

ToDateTime
ÿÿ  *
(
ÿÿ* +
reader
ÿÿ+ 1
[
ÿÿ1 2
$str
ÿÿ2 =
]
ÿÿ= >
)
ÿÿ> ?
;
ÿÿ? @
row
ŸŸ 
[
ŸŸ 	
$str
ŸŸ	 
]
ŸŸ 
=
ŸŸ 
reader
ŸŸ  
[
ŸŸ  !
$str
ŸŸ! .
]
ŸŸ. /
;
ŸŸ/ 0
row
⁄⁄ 
[
⁄⁄ 	
$str
⁄⁄	 
]
⁄⁄ 
=
⁄⁄ 
reader
⁄⁄ 
[
⁄⁄ 
$str
⁄⁄ &
]
⁄⁄& '
;
⁄⁄' (
row
€€ 
[
€€ 	
$str
€€	 
]
€€ 
=
€€ 
reader
€€ 
[
€€ 
$str
€€ (
]
€€( )
;
€€) *
row
‹‹ 
[
‹‹ 	
$str
‹‹	 
]
‹‹ 
=
‹‹ 
reader
‹‹ !
[
‹‹! "
$str
‹‹" 0
]
‹‹0 1
;
‹‹1 2
row
›› 
[
›› 	
$str
››	 
]
›› 
=
›› 
reader
›› $
[
››$ %
$str
››% 6
]
››6 7
;
››7 8
row
ﬁﬁ 
[
ﬁﬁ 	
$str
ﬁﬁ	 
]
ﬁﬁ 
=
ﬁﬁ 
Convert
ﬁﬁ  
.
ﬁﬁ  !

ToDateTime
ﬁﬁ! +
(
ﬁﬁ+ ,
reader
ﬁﬁ, 2
[
ﬁﬁ2 3
$str
ﬁﬁ3 ?
]
ﬁﬁ? @
)
ﬁﬁ@ A
;
ﬁﬁA B
row
ﬂﬂ 
[
ﬂﬂ 	
$str
ﬂﬂ	 
]
ﬂﬂ 
=
ﬂﬂ 
Convert
ﬂﬂ !
.
ﬂﬂ! "
	ToBoolean
ﬂﬂ" +
(
ﬂﬂ+ ,
reader
ﬂﬂ, 2
[
ﬂﬂ2 3
$str
ﬂﬂ3 @
]
ﬂﬂ@ A
)
ﬂﬂA B
;
ﬂﬂB C
row
‡‡ 
[
‡‡ 	
$str
‡‡	 
]
‡‡ 
=
‡‡ 
Convert
‡‡ #
.
‡‡# $
	ToBoolean
‡‡$ -
(
‡‡- .
reader
‡‡. 4
[
‡‡4 5
$str
‡‡5 D
]
‡‡D E
)
‡‡E F
;
‡‡F G
row
·· 
[
·· 	
$str
··	 
]
·· 
=
··  
Convert
··! (
.
··( )
	ToBoolean
··) 2
(
··2 3
reader
··3 9
[
··9 :
$str
··: N
]
··N O
)
··O P
;
··P Q
row
‚‚ 
[
‚‚ 	
$str
‚‚	  
]
‚‚  !
=
‚‚" #
Convert
‚‚$ +
.
‚‚+ ,
	ToBoolean
‚‚, 5
(
‚‚5 6
reader
‚‚6 <
[
‚‚< =
$str
‚‚= T
]
‚‚T U
)
‚‚U V
;
‚‚V W
row
„„ 
[
„„ 	
$str
„„	 
]
„„ 
=
„„ 
reader
„„ %
[
„„% &
$str
„„& 8
]
„„8 9
;
„„9 :
row
‰‰ 
[
‰‰ 	
$str
‰‰	 
]
‰‰ 
=
‰‰ 
Convert
‰‰ "
.
‰‰" #
ToInt32
‰‰# *
(
‰‰* +
reader
‰‰+ 1
[
‰‰1 2
$str
‰‰2 @
]
‰‰@ A
)
‰‰A B
;
‰‰B C
row
ÂÂ 
[
ÂÂ 	
$str
ÂÂ	 
]
ÂÂ 
=
ÂÂ 
reader
ÂÂ 
[
ÂÂ 
$str
ÂÂ  
]
ÂÂ  !
;
ÂÂ! "
row
ÊÊ 
[
ÊÊ 	
$str
ÊÊ	 
]
ÊÊ 
=
ÊÊ 
reader
ÊÊ 
[
ÊÊ 
$str
ÊÊ *
]
ÊÊ* +
;
ÊÊ+ ,
row
ÁÁ 
[
ÁÁ 	
$str
ÁÁ	 
]
ÁÁ 
=
ÁÁ 
reader
ÁÁ 
[
ÁÁ 
$str
ÁÁ "
]
ÁÁ" #
;
ÁÁ# $
posts
ÍÍ 

.
ÍÍ
 
Rows
ÍÍ 
.
ÍÍ 
Add
ÍÍ 
(
ÍÍ 
row
ÍÍ 
)
ÍÍ 
;
ÍÍ 
}
ÎÎ 
}
ÏÏ 
posts
ÓÓ 
.
ÓÓ 	
	TableName
ÓÓ	 
=
ÓÓ 
$str
ÓÓ 
;
ÓÓ 
dataSet
ÔÔ 

.
ÔÔ
 
Tables
ÔÔ 
.
ÔÔ 
Add
ÔÔ 
(
ÔÔ 
posts
ÔÔ 
)
ÔÔ 
;
ÔÔ 
	DataTable
ÒÒ 

categories
ÒÒ 
=
ÒÒ '
GetCategoryTableStructure
ÒÒ 3
(
ÒÒ3 4
)
ÒÒ4 5
;
ÒÒ5 6
using
ÛÛ 
(
ÛÛ	 

IDataReader
ÛÛ
 
reader
ÛÛ 
=
ÛÛ 
DBBlog
ÛÛ %
.
ÛÛ% &/
!GetBlogCategoriesForMetaWeblogApi
ÛÛ& G
(
ÛÛG H
moduleId
ÛÛH P
,
ÛÛP Q
	beginDate
ÛÛR [
,
ÛÛ[ \
DateTime
ÛÛ] e
.
ÛÛe f
UtcNow
ÛÛf l
)
ÛÛl m
)
ÛÛm n
{
ÙÙ 
while
ıı 	
(
ıı
 
reader
ıı 
.
ıı 
Read
ıı 
(
ıı 
)
ıı 
)
ıı 
{
ˆˆ 
DataRow
¯¯ 
row
¯¯ 
=
¯¯ 

categories
¯¯ 
.
¯¯ 
NewRow
¯¯ $
(
¯¯$ %
)
¯¯% &
;
¯¯& '
row
˙˙ 
[
˙˙ 	
$str
˙˙	 
]
˙˙ 
=
˙˙ 
reader
˙˙ 
[
˙˙ 
$str
˙˙ 
]
˙˙ 
;
˙˙ 
row
˚˚ 
[
˚˚ 	
$str
˚˚	 
]
˚˚ 
=
˚˚ 
reader
˚˚ 
[
˚˚ 
$str
˚˚ $
]
˚˚$ %
;
˚˚% &
row
¸¸ 
[
¸¸ 	
$str
¸¸	 
]
¸¸ 
=
¸¸ 
reader
¸¸ 
[
¸¸  
$str
¸¸  ,
]
¸¸, -
;
¸¸- .
row
˝˝ 
[
˝˝ 	
$str
˝˝	 
]
˝˝ 
=
˝˝ 
reader
˝˝ 
[
˝˝ 
$str
˝˝ (
]
˝˝( )
;
˝˝) *

categories
ˇˇ 
.
ˇˇ 
Rows
ˇˇ 
.
ˇˇ 
Add
ˇˇ 
(
ˇˇ 
row
ˇˇ 
)
ˇˇ 
;
ˇˇ 
}
Ä	Ä	 
}
Å	Å	 

categories
É	É	 
.
É	É	 
	TableName
É	É	 
=
É	É	 
$str
É	É	 &
;
É	É	& '
dataSet
Ñ	Ñ	 

.
Ñ	Ñ	
 
Tables
Ñ	Ñ	 
.
Ñ	Ñ	 
Add
Ñ	Ñ	 
(
Ñ	Ñ	 

categories
Ñ	Ñ	  
)
Ñ	Ñ	  !
;
Ñ	Ñ	! "
try
á	á	 
{
à	à	 
dataSet
â	â	 
.
â	â	 
	Relations
â	â	 
.
â	â	 
Add
â	â	 
(
â	â	 
$str
â	â	 *
,
â	â	* +
dataSet
ä	ä	 
.
ä	ä	 
Tables
ä	ä	 
[
ä	ä	 
$str
ä	ä	 
]
ä	ä	 
.
ä	ä	 
Columns
ä	ä	 $
[
ä	ä	$ %
$str
ä	ä	% -
]
ä	ä	- .
,
ä	ä	. /
dataSet
ã	ã	 
.
ã	ã	 
Tables
ã	ã	 
[
ã	ã	 
$str
ã	ã	  
]
ã	ã	  !
.
ã	ã	! "
Columns
ã	ã	" )
[
ã	ã	) *
$str
ã	ã	* 2
]
ã	ã	2 3
)
ã	ã	3 4
;
ã	ã	4 5
}
å	å	 
catch
ç	ç	 
(
ç	ç		 

System
ç	ç	
 
.
ç	ç	 
Data
ç	ç	 
.
ç	ç	 !
ConstraintException
ç	ç	 )
)
ç	ç	) *
{
ç	ç	+ ,
}
ç	ç	- .
catch
é	é	 
(
é	é		 

ArgumentException
é	é	
 
)
é	é	 
{
é	é	 
}
é	é	  
return
ë	ë	 	
dataSet
ë	ë	
 
;
ë	ë	 
}
í	í	 
private
î	î	 	
static
î	î	
 
	DataTable
î	î	 '
GetCategoryTableStructure
î	î	 4
(
î	î	4 5
)
î	î	5 6
{
ï	ï	 
	DataTable
ñ	ñ	 
	dataTable
ñ	ñ	 
=
ñ	ñ	 
new
ñ	ñ	 
	DataTable
ñ	ñ	 &
(
ñ	ñ	& '
)
ñ	ñ	' (
;
ñ	ñ	( )
	dataTable
ò	ò	 
.
ò	ò	 
Columns
ò	ò	 
.
ò	ò	 
Add
ò	ò	 
(
ò	ò	 
$str
ò	ò	 
,
ò	ò	 
typeof
ò	ò	 %
(
ò	ò	% &
int
ò	ò	& )
)
ò	ò	) *
)
ò	ò	* +
;
ò	ò	+ ,
	dataTable
ô	ô	 
.
ô	ô	 
Columns
ô	ô	 
.
ô	ô	 
Add
ô	ô	 
(
ô	ô	 
$str
ô	ô	 !
,
ô	ô	! "
typeof
ô	ô	# )
(
ô	ô	) *
int
ô	ô	* -
)
ô	ô	- .
)
ô	ô	. /
;
ô	ô	/ 0
	dataTable
ö	ö	 
.
ö	ö	 
Columns
ö	ö	 
.
ö	ö	 
Add
ö	ö	 
(
ö	ö	 
$str
ö	ö	 %
,
ö	ö	% &
typeof
ö	ö	' -
(
ö	ö	- .
int
ö	ö	. 1
)
ö	ö	1 2
)
ö	ö	2 3
;
ö	ö	3 4
	dataTable
õ	õ	 
.
õ	õ	 
Columns
õ	õ	 
.
õ	õ	 
Add
õ	õ	 
(
õ	õ	 
$str
õ	õ	 #
,
õ	õ	# $
typeof
õ	õ	% +
(
õ	õ	+ ,
string
õ	õ	, 2
)
õ	õ	2 3
)
õ	õ	3 4
;
õ	õ	4 5
return
ù	ù	 	
	dataTable
ù	ù	
 
;
ù	ù	 
}
ü	ü	 
private
°	°	 	
static
°	°	
 
	DataTable
°	°	 *
GetAttachmentsTableStructure
°	°	 7
(
°	°	7 8
)
°	°	8 9
{
¢	¢	 
	DataTable
£	£	 
	dataTable
£	£	 
=
£	£	 
new
£	£	 
	DataTable
£	£	 &
(
£	£	& '
)
£	£	' (
;
£	£	( )
	dataTable
•	•	 
.
•	•	 
Columns
•	•	 
.
•	•	 
Add
•	•	 
(
•	•	 
$str
•	•	 "
,
•	•	" #
typeof
•	•	$ *
(
•	•	* +
string
•	•	+ 1
)
•	•	1 2
)
•	•	2 3
;
•	•	3 4
	dataTable
¶	¶	 
.
¶	¶	 
Columns
¶	¶	 
.
¶	¶	 
Add
¶	¶	 
(
¶	¶	 
$str
¶	¶	 #
,
¶	¶	# $
typeof
¶	¶	% +
(
¶	¶	+ ,
string
¶	¶	, 2
)
¶	¶	2 3
)
¶	¶	3 4
;
¶	¶	4 5
	dataTable
ß	ß	 
.
ß	ß	 
Columns
ß	ß	 
.
ß	ß	 
Add
ß	ß	 
(
ß	ß	 
$str
ß	ß	 #
,
ß	ß	# $
typeof
ß	ß	% +
(
ß	ß	+ ,
string
ß	ß	, 2
)
ß	ß	2 3
)
ß	ß	3 4
;
ß	ß	4 5
	dataTable
®	®	 
.
®	®	 
Columns
®	®	 
.
®	®	 
Add
®	®	 
(
®	®	 
$str
®	®	 )
,
®	®	) *
typeof
®	®	+ 1
(
®	®	1 2
string
®	®	2 8
)
®	®	8 9
)
®	®	9 :
;
®	®	: ;
	dataTable
©	©	 
.
©	©	 
Columns
©	©	 
.
©	©	 
Add
©	©	 
(
©	©	 
$str
©	©	 (
,
©	©	( )
typeof
©	©	* 0
(
©	©	0 1
long
©	©	1 5
)
©	©	5 6
)
©	©	6 7
;
©	©	7 8
	dataTable
™	™	 
.
™	™	 
Columns
™	™	 
.
™	™	 
Add
™	™	 
(
™	™	 
$str
™	™	 &
,
™	™	& '
typeof
™	™	( .
(
™	™	. /
string
™	™	/ 5
)
™	™	5 6
)
™	™	6 7
;
™	™	7 8
	dataTable
´	´	 
.
´	´	 
Columns
´	´	 
.
´	´	 
Add
´	´	 
(
´	´	 
$str
´	´	 +
,
´	´	+ ,
typeof
´	´	- 3
(
´	´	3 4
bool
´	´	4 8
)
´	´	8 9
)
´	´	9 :
;
´	´	: ;
return
≠	≠	 	
	dataTable
≠	≠	
 
;
≠	≠	 
}
Ø	Ø	 
private
±	±	 	
static
±	±	
 
	DataTable
±	±	 $
GetPostsTableStructure
±	±	 1
(
±	±	1 2
)
±	±	2 3
{
≤	≤	 
	DataTable
≥	≥	 
	dataTable
≥	≥	 
=
≥	≥	 
new
≥	≥	 
	DataTable
≥	≥	 &
(
≥	≥	& '
)
≥	≥	' (
;
≥	≥	( )
	dataTable
∑	∑	 
.
∑	∑	 
Columns
∑	∑	 
.
∑	∑	 
Add
∑	∑	 
(
∑	∑	 
$str
∑	∑	 #
,
∑	∑	# $
typeof
∑	∑	% +
(
∑	∑	+ ,
int
∑	∑	, /
)
∑	∑	/ 0
)
∑	∑	0 1
;
∑	∑	1 2
	dataTable
∏	∏	 
.
∏	∏	 
Columns
∏	∏	 
.
∏	∏	 
Add
∏	∏	 
(
∏	∏	 
$str
∏	∏	 #
,
∏	∏	# $
typeof
∏	∏	% +
(
∏	∏	+ ,
string
∏	∏	, 2
)
∏	∏	2 3
)
∏	∏	3 4
;
∏	∏	4 5
	dataTable
π	π	 
.
π	π	 
Columns
π	π	 
.
π	π	 
Add
π	π	 
(
π	π	 
$str
π	π	 !
,
π	π	! "
typeof
π	π	# )
(
π	π	) *
int
π	π	* -
)
π	π	- .
)
π	π	. /
;
π	π	/ 0
	dataTable
∫	∫	 
.
∫	∫	 

PrimaryKey
∫	∫	 
=
∫	∫	 
new
∫	∫	 

DataColumn
∫	∫	 (
[
∫	∫	( )
]
∫	∫	) *
{
∫	∫	+ ,
	dataTable
∫	∫	- 6
.
∫	∫	6 7
Columns
∫	∫	7 >
[
∫	∫	> ?
$str
∫	∫	? G
]
∫	∫	G H
}
∫	∫	I J
;
∫	∫	J K
	dataTable
ª	ª	 
.
ª	ª	 
Columns
ª	ª	 
.
ª	ª	 
Add
ª	ª	 
(
ª	ª	 
$str
ª	ª	 &
,
ª	ª	& '
typeof
ª	ª	( .
(
ª	ª	. /
DateTime
ª	ª	/ 7
)
ª	ª	7 8
)
ª	ª	8 9
;
ª	ª	9 :
	dataTable
º	º	 
.
º	º	 
Columns
º	º	 
.
º	º	 
Add
º	º	 
(
º	º	 
$str
º	º	 "
,
º	º	" #
typeof
º	º	$ *
(
º	º	* +
string
º	º	+ 1
)
º	º	1 2
)
º	º	2 3
;
º	º	3 4
	dataTable
Ω	Ω	 
.
Ω	Ω	 
Columns
Ω	Ω	 
.
Ω	Ω	 
Add
Ω	Ω	 
(
Ω	Ω	 
$str
Ω	Ω	 #
,
Ω	Ω	# $
typeof
Ω	Ω	% +
(
Ω	Ω	+ ,
string
Ω	Ω	, 2
)
Ω	Ω	2 3
)
Ω	Ω	3 4
;
Ω	Ω	4 5
	dataTable
æ	æ	 
.
æ	æ	 
Columns
æ	æ	 
.
æ	æ	 
Add
æ	æ	 
(
æ	æ	 
$str
æ	æ	 $
,
æ	æ	$ %
typeof
æ	æ	& ,
(
æ	æ	, -
DateTime
æ	æ	- 5
)
æ	æ	5 6
)
æ	æ	6 7
;
æ	æ	7 8
	dataTable
ø	ø	 
.
ø	ø	 
Columns
ø	ø	 
.
ø	ø	 
Add
ø	ø	 
(
ø	ø	 
$str
ø	ø	 "
,
ø	ø	" #
typeof
ø	ø	$ *
(
ø	ø	* +
DateTime
ø	ø	+ 3
)
ø	ø	3 4
)
ø	ø	4 5
;
ø	ø	5 6
	dataTable
¿	¿	 
.
¿	¿	 
Columns
¿	¿	 
.
¿	¿	 
Add
¿	¿	 
(
¿	¿	 
$str
¿	¿	 &
,
¿	¿	& '
typeof
¿	¿	( .
(
¿	¿	. /
string
¿	¿	/ 5
)
¿	¿	5 6
)
¿	¿	6 7
;
¿	¿	7 8
	dataTable
¡	¡	 
.
¡	¡	 
Columns
¡	¡	 
.
¡	¡	 
Add
¡	¡	 
(
¡	¡	 
$str
¡	¡	 "
,
¡	¡	" #
typeof
¡	¡	$ *
(
¡	¡	* +
string
¡	¡	+ 1
)
¡	¡	1 2
)
¡	¡	2 3
;
¡	¡	3 4
	dataTable
¬	¬	 
.
¬	¬	 
Columns
¬	¬	 
.
¬	¬	 
Add
¬	¬	 
(
¬	¬	 
$str
¬	¬	 #
,
¬	¬	# $
typeof
¬	¬	% +
(
¬	¬	+ ,
string
¬	¬	, 2
)
¬	¬	2 3
)
¬	¬	3 4
;
¬	¬	4 5
	dataTable
√	√	 
.
√	√	 
Columns
√	√	 
.
√	√	 
Add
√	√	 
(
√	√	 
$str
√	√	 '
,
√	√	' (
typeof
√	√	) /
(
√	√	/ 0
string
√	√	0 6
)
√	√	6 7
)
√	√	7 8
;
√	√	8 9
	dataTable
ƒ	ƒ	 
.
ƒ	ƒ	 
Columns
ƒ	ƒ	 
.
ƒ	ƒ	 
Add
ƒ	ƒ	 
(
ƒ	ƒ	 
$str
ƒ	ƒ	 *
,
ƒ	ƒ	* +
typeof
ƒ	ƒ	, 2
(
ƒ	ƒ	2 3
string
ƒ	ƒ	3 9
)
ƒ	ƒ	9 :
)
ƒ	ƒ	: ;
;
ƒ	ƒ	; <
	dataTable
≈	≈	 
.
≈	≈	 
Columns
≈	≈	 
.
≈	≈	 
Add
≈	≈	 
(
≈	≈	 
$str
≈	≈	 #
,
≈	≈	# $
typeof
≈	≈	% +
(
≈	≈	+ ,
string
≈	≈	, 2
)
≈	≈	2 3
)
≈	≈	3 4
;
≈	≈	4 5
	dataTable
∆	∆	 
.
∆	∆	 
Columns
∆	∆	 
.
∆	∆	 
Add
∆	∆	 
(
∆	∆	 
$str
∆	∆	 %
,
∆	∆	% &
typeof
∆	∆	' -
(
∆	∆	- .
DateTime
∆	∆	. 6
)
∆	∆	6 7
)
∆	∆	7 8
;
∆	∆	8 9
	dataTable
«	«	 
.
«	«	 
Columns
«	«	 
.
«	«	 
Add
«	«	 
(
«	«	 
$str
«	«	 &
,
«	«	& '
typeof
«	«	( .
(
«	«	. /
bool
«	«	/ 3
)
«	«	3 4
)
«	«	4 5
;
«	«	5 6
	dataTable
»	»	 
.
»	»	 
Columns
»	»	 
.
»	»	 
Add
»	»	 
(
»	»	 
$str
»	»	 (
,
»	»	( )
typeof
»	»	* 0
(
»	»	0 1
bool
»	»	1 5
)
»	»	5 6
)
»	»	6 7
;
»	»	7 8
	dataTable
…	…	 
.
…	…	 
Columns
…	…	 
.
…	…	 
Add
…	…	 
(
…	…	 
$str
…	…	 '
,
…	…	' (
typeof
…	…	) /
(
…	…	/ 0
int
…	…	0 3
)
…	…	3 4
)
…	…	4 5
;
…	…	5 6
	dataTable
 	 	 
.
 	 	 
Columns
 	 	 
.
 	 	 
Add
 	 	 
(
 	 	 
$str
 	 	 /
,
 	 	/ 0
typeof
 	 	1 7
(
 	 	7 8
int
 	 	8 ;
)
 	 	; <
)
 	 	< =
;
 	 	= >
	dataTable
À	À	 
.
À	À	 
Columns
À	À	 
.
À	À	 
Add
À	À	 
(
À	À	 
$str
À	À	 !
,
À	À	! "
typeof
À	À	# )
(
À	À	) *
int
À	À	* -
)
À	À	- .
)
À	À	. /
;
À	À	/ 0
	dataTable
Ã	Ã	 
.
Ã	Ã	 
Columns
Ã	Ã	 
.
Ã	Ã	 
Add
Ã	Ã	 
(
Ã	Ã	 
$str
Ã	Ã	 
,
Ã	Ã	  
typeof
Ã	Ã	! '
(
Ã	Ã	' (
string
Ã	Ã	( .
)
Ã	Ã	. /
)
Ã	Ã	/ 0
;
Ã	Ã	0 1
	dataTable
Õ	Õ	 
.
Õ	Õ	 
Columns
Õ	Õ	 
.
Õ	Õ	 
Add
Õ	Õ	 
(
Õ	Õ	 
$str
Õ	Õ	 $
,
Õ	Õ	$ %
typeof
Õ	Õ	& ,
(
Õ	Õ	, -
string
Õ	Õ	- 3
)
Õ	Õ	3 4
)
Õ	Õ	4 5
;
Õ	Õ	5 6
	dataTable
Œ	Œ	 
.
Œ	Œ	 
Columns
Œ	Œ	 
.
Œ	Œ	 
Add
Œ	Œ	 
(
Œ	Œ	 
$str
Œ	Œ	 #
,
Œ	Œ	# $
typeof
Œ	Œ	% +
(
Œ	Œ	+ ,
string
Œ	Œ	, 2
)
Œ	Œ	2 3
)
Œ	Œ	3 4
;
Œ	Œ	4 5
	dataTable
œ	œ	 
.
œ	œ	 
Columns
œ	œ	 
.
œ	œ	 
Add
œ	œ	 
(
œ	œ	 
$str
œ	œ	 $
,
œ	œ	$ %
typeof
œ	œ	& ,
(
œ	œ	, -
string
œ	œ	- 3
)
œ	œ	3 4
)
œ	œ	4 5
;
œ	œ	5 6
	dataTable
–	–	 
.
–	–	 
Columns
–	–	 
.
–	–	 
Add
–	–	 
(
–	–	 
$str
–	–	  
,
–	–	  !
typeof
–	–	" (
(
–	–	( )
string
–	–	) /
)
–	–	/ 0
)
–	–	0 1
;
–	–	1 2
	dataTable
—	—	 
.
—	—	 
Columns
—	—	 
.
—	—	 
Add
—	—	 
(
—	—	 
$str
—	—	 $
,
—	—	$ %
typeof
—	—	& ,
(
—	—	, -
string
—	—	- 3
)
—	—	3 4
)
—	—	4 5
;
—	—	5 6
	dataTable
“	“	 
.
“	“	 
Columns
“	“	 
.
“	“	 
Add
“	“	 
(
“	“	 
$str
“	“	 $
,
“	“	$ %
typeof
“	“	& ,
(
“	“	, -
string
“	“	- 3
)
“	“	3 4
)
“	“	4 5
;
“	“	5 6
	dataTable
’	’	 
.
’	’	 
Columns
’	’	 
.
’	’	 
Add
’	’	 
(
’	’	 
$str
’	’	 )
,
’	’	) *
typeof
’	’	+ 1
(
’	’	1 2
bool
’	’	2 6
)
’	’	6 7
)
’	’	7 8
;
’	’	8 9
	dataTable
÷	÷	 
.
÷	÷	 
Columns
÷	÷	 
.
÷	÷	 
Add
÷	÷	 
(
÷	÷	 
$str
÷	÷	 +
,
÷	÷	+ ,
typeof
÷	÷	- 3
(
÷	÷	3 4
bool
÷	÷	4 8
)
÷	÷	8 9
)
÷	÷	9 :
;
÷	÷	: ;
	dataTable
◊	◊	 
.
◊	◊	 
Columns
◊	◊	 
.
◊	◊	 
Add
◊	◊	 
(
◊	◊	 
$str
◊	◊	 (
,
◊	◊	( )
typeof
◊	◊	* 0
(
◊	◊	0 1
bool
◊	◊	1 5
)
◊	◊	5 6
)
◊	◊	6 7
;
◊	◊	7 8
	dataTable
ÿ	ÿ	 
.
ÿ	ÿ	 
Columns
ÿ	ÿ	 
.
ÿ	ÿ	 
Add
ÿ	ÿ	 
(
ÿ	ÿ	 
$str
ÿ	ÿ	 %
,
ÿ	ÿ	% &
typeof
ÿ	ÿ	' -
(
ÿ	ÿ	- .
bool
ÿ	ÿ	. 2
)
ÿ	ÿ	2 3
)
ÿ	ÿ	3 4
;
ÿ	ÿ	4 5
	dataTable
Ÿ	Ÿ	 
.
Ÿ	Ÿ	 
Columns
Ÿ	Ÿ	 
.
Ÿ	Ÿ	 
Add
Ÿ	Ÿ	 
(
Ÿ	Ÿ	 
$str
Ÿ	Ÿ	 $
,
Ÿ	Ÿ	$ %
typeof
Ÿ	Ÿ	& ,
(
Ÿ	Ÿ	, -
string
Ÿ	Ÿ	- 3
)
Ÿ	Ÿ	3 4
)
Ÿ	Ÿ	4 5
;
Ÿ	Ÿ	5 6
	dataTable
⁄	⁄	 
.
⁄	⁄	 
Columns
⁄	⁄	 
.
⁄	⁄	 
Add
⁄	⁄	 
(
⁄	⁄	 
$str
⁄	⁄	 #
,
⁄	⁄	# $
typeof
⁄	⁄	% +
(
⁄	⁄	+ ,
string
⁄	⁄	, 2
)
⁄	⁄	2 3
)
⁄	⁄	3 4
;
⁄	⁄	4 5
	dataTable
€	€	 
.
€	€	 
Columns
€	€	 
.
€	€	 
Add
€	€	 
(
€	€	 
$str
€	€	 )
,
€	€	) *
typeof
€	€	+ 1
(
€	€	1 2
bool
€	€	2 6
)
€	€	6 7
)
€	€	7 8
;
€	€	8 9
	dataTable
‹	‹	 
.
‹	‹	 
Columns
‹	‹	 
.
‹	‹	 
Add
‹	‹	 
(
‹	‹	 
$str
‹	‹	 '
,
‹	‹	' (
typeof
‹	‹	) /
(
‹	‹	/ 0
bool
‹	‹	0 4
)
‹	‹	4 5
)
‹	‹	5 6
;
‹	‹	6 7
	dataTable
›	›	 
.
›	›	 
Columns
›	›	 
.
›	›	 
Add
›	›	 
(
›	›	 
$str
›	›	 +
,
›	›	+ ,
typeof
›	›	- 3
(
›	›	3 4
bool
›	›	4 8
)
›	›	8 9
)
›	›	9 :
;
›	›	: ;
	dataTable
ﬁ	ﬁ	 
.
ﬁ	ﬁ	 
Columns
ﬁ	ﬁ	 
.
ﬁ	ﬁ	 
Add
ﬁ	ﬁ	 
(
ﬁ	ﬁ	 
$str
ﬁ	ﬁ	 /
,
ﬁ	ﬁ	/ 0
typeof
ﬁ	ﬁ	1 7
(
ﬁ	ﬁ	7 8
bool
ﬁ	ﬁ	8 <
)
ﬁ	ﬁ	< =
)
ﬁ	ﬁ	= >
;
ﬁ	ﬁ	> ?
	dataTable
ﬂ	ﬂ	 
.
ﬂ	ﬂ	 
Columns
ﬂ	ﬂ	 
.
ﬂ	ﬂ	 
Add
ﬂ	ﬂ	 
(
ﬂ	ﬂ	 
$str
ﬂ	ﬂ	 "
,
ﬂ	ﬂ	" #
typeof
ﬂ	ﬂ	$ *
(
ﬂ	ﬂ	* +
string
ﬂ	ﬂ	+ 1
)
ﬂ	ﬂ	1 2
)
ﬂ	ﬂ	2 3
;
ﬂ	ﬂ	3 4
	dataTable
‡	‡	 
.
‡	‡	 
Columns
‡	‡	 
.
‡	‡	 
Add
‡	‡	 
(
‡	‡	 
$str
‡	‡	 "
,
‡	‡	" #
typeof
‡	‡	$ *
(
‡	‡	* +
int
‡	‡	+ .
)
‡	‡	. /
)
‡	‡	/ 0
;
‡	‡	0 1
	dataTable
·	·	 
.
·	·	 
Columns
·	·	 
.
·	·	 
Add
·	·	 
(
·	·	 
$str
·	·	 +
,
·	·	+ ,
typeof
·	·	- 3
(
·	·	3 4
bool
·	·	4 8
)
·	·	8 9
)
·	·	9 :
;
·	·	: ;
	dataTable
„	„	 
.
„	„	 
Columns
„	„	 
.
„	„	 
Add
„	„	 
(
„	„	 
$str
„	„	 +
,
„	„	+ ,
typeof
„	„	- 3
(
„	„	3 4
string
„	„	4 :
)
„	„	: ;
)
„	„	; <
;
„	„	< =
	dataTable
‰	‰	 
.
‰	‰	 
Columns
‰	‰	 
.
‰	‰	 
Add
‰	‰	 
(
‰	‰	 
$str
‰	‰	 0
,
‰	‰	0 1
typeof
‰	‰	2 8
(
‰	‰	8 9
bool
‰	‰	9 =
)
‰	‰	= >
)
‰	‰	> ?
;
‰	‰	? @
	dataTable
Â	Â	 
.
Â	Â	 
Columns
Â	Â	 
.
Â	Â	 
Add
Â	Â	 
(
Â	Â	 
$str
Â	Â	 -
,
Â	Â	- .
typeof
Â	Â	/ 5
(
Â	Â	5 6
bool
Â	Â	6 :
)
Â	Â	: ;
)
Â	Â	; <
;
Â	Â	< =
return
Á	Á	 	
	dataTable
Á	Á	
 
;
Á	Á	 
}
È	È	 
public
Î	Î	 
static
Î	Î		 
DataSet
Î	Î	 
GetPageDataSet
Î	Î	 &
(
Î	Î	& '
int
Ï	Ï	 
moduleId
Ï	Ï	 
,
Ï	Ï	 
DateTime
Ì	Ì	 
	beginDate
Ì	Ì	 
,
Ì	Ì	 
int
Ó	Ó	 

pageNumber
Ó	Ó	 
,
Ó	Ó	 
int
Ô	Ô	 
pageSize
Ô	Ô	 
,
Ô	Ô	 
out
		 
int
		 


totalPages
		 
)
		 
{
Ò	Ò	 
DataSet
Ú	Ú	 

dataSet
Ú	Ú	 
=
Ú	Ú	 
new
Ú	Ú	 
DataSet
Ú	Ú	  
(
Ú	Ú	  !
)
Ú	Ú	! "
;
Ú	Ú	" #
	DataTable
Ù	Ù	 
posts
Ù	Ù	 
=
Ù	Ù	 $
GetPostsTableStructure
Ù	Ù	 +
(
Ù	Ù	+ ,
)
Ù	Ù	, -
;
Ù	Ù	- .
using
ˆ	ˆ	 
(
ˆ	ˆ		 

IDataReader
ˆ	ˆ	
 
reader
ˆ	ˆ	 
=
ˆ	ˆ	 
GetPage
ˆ	ˆ	 &
(
ˆ	ˆ	& '
moduleId
ˆ	ˆ	' /
,
ˆ	ˆ	/ 0
	beginDate
ˆ	ˆ	1 :
,
ˆ	ˆ	: ;

pageNumber
ˆ	ˆ	< F
,
ˆ	ˆ	F G
pageSize
ˆ	ˆ	H P
,
ˆ	ˆ	P Q
out
ˆ	ˆ	R U

totalPages
ˆ	ˆ	V `
)
ˆ	ˆ	` a
)
ˆ	ˆ	a b
{
˜	˜	 
while
¯	¯	 	
(
¯	¯	
 
reader
¯	¯	 
.
¯	¯	 
Read
¯	¯	 
(
¯	¯	 
)
¯	¯	 
)
¯	¯	 
{
˘	˘	 
DataRow
˚	˚	 
row
˚	˚	 
=
˚	˚	 
posts
˚	˚	 
.
˚	˚	 
NewRow
˚	˚	 
(
˚	˚	  
)
˚	˚	  !
;
˚	˚	! "
row
˛	˛	 
[
˛	˛	 	
$str
˛	˛		 
]
˛	˛	 
=
˛	˛	 
Convert
˛	˛	 
.
˛	˛	 
ToInt32
˛	˛	 $
(
˛	˛	$ %
reader
˛	˛	% +
[
˛	˛	+ ,
$str
˛	˛	, 4
]
˛	˛	4 5
)
˛	˛	5 6
;
˛	˛	6 7
row
ˇ	ˇ	 
[
ˇ	ˇ	 	
$str
ˇ	ˇ		 
]
ˇ	ˇ	 
=
ˇ	ˇ	 
Convert
ˇ	ˇ	 
.
ˇ	ˇ	 
ToInt32
ˇ	ˇ	 &
(
ˇ	ˇ	& '
reader
ˇ	ˇ	' -
[
ˇ	ˇ	- .
$str
ˇ	ˇ	. 8
]
ˇ	ˇ	8 9
)
ˇ	ˇ	9 :
;
ˇ	ˇ	: ;
row
Ä
Ä
 
[
Ä
Ä
 	
$str
Ä
Ä
	 
]
Ä
Ä
 
=
Ä
Ä
 
reader
Ä
Ä
 
[
Ä
Ä
 
$str
Ä
Ä
 (
]
Ä
Ä
( )
.
Ä
Ä
) *
ToString
Ä
Ä
* 2
(
Ä
Ä
2 3
)
Ä
Ä
3 4
;
Ä
Ä
4 5
row
Å
Å
 
[
Å
Å
 	
$str
Å
Å
	 
]
Å
Å
 
=
Å
Å
 
Convert
Å
Å
 !
.
Å
Å
! "

ToDateTime
Å
Å
" ,
(
Å
Å
, -
reader
Å
Å
- 3
[
Å
Å
3 4
$str
Å
Å
4 A
]
Å
Å
A B
)
Å
Å
B C
;
Å
Å
C D
row
Ç
Ç
 
[
Ç
Ç
 	
$str
Ç
Ç
	 
]
Ç
Ç
 
=
Ç
Ç
 
reader
Ç
Ç
 
[
Ç
Ç
 
$str
Ç
Ç
 &
]
Ç
Ç
& '
;
Ç
Ç
' (
row
É
É
 
[
É
É
 	
$str
É
É
	 
]
É
É
 
=
É
É
 
reader
É
É
 
[
É
É
 
$str
É
É
 (
]
É
É
( )
;
É
É
) *
row
Ñ
Ñ
 
[
Ñ
Ñ
 	
$str
Ñ
Ñ
	 
]
Ñ
Ñ
 
=
Ñ
Ñ
 
Convert
Ñ
Ñ
 
.
Ñ
Ñ
  

ToDateTime
Ñ
Ñ
  *
(
Ñ
Ñ
* +
reader
Ñ
Ñ
+ 1
[
Ñ
Ñ
1 2
$str
Ñ
Ñ
2 =
]
Ñ
Ñ
= >
)
Ñ
Ñ
> ?
;
Ñ
Ñ
? @
row
Ö
Ö
 
[
Ö
Ö
 	
$str
Ö
Ö
	 
]
Ö
Ö
 
=
Ö
Ö
 
reader
Ö
Ö
  
[
Ö
Ö
  !
$str
Ö
Ö
! .
]
Ö
Ö
. /
;
Ö
Ö
/ 0
row
Ü
Ü
 
[
Ü
Ü
 	
$str
Ü
Ü
	 
]
Ü
Ü
 
=
Ü
Ü
 
reader
Ü
Ü
 
[
Ü
Ü
 
$str
Ü
Ü
 (
]
Ü
Ü
( )
;
Ü
Ü
) *
row
á
á
 
[
á
á
 	
$str
á
á
	 
]
á
á
 
=
á
á
 
reader
á
á
 
[
á
á
 
$str
á
á
 &
]
á
á
& '
;
á
á
' (
row
à
à
 
[
à
à
 	
$str
à
à
	 
]
à
à
 
=
à
à
 
reader
à
à
 
[
à
à
 
$str
à
à
 (
]
à
à
( )
;
à
à
) *
row
â
â
 
[
â
â
 	
$str
â
â
	 
]
â
â
 
=
â
â
 
reader
â
â
 !
[
â
â
! "
$str
â
â
" 0
]
â
â
0 1
;
â
â
1 2
row
ä
ä
 
[
ä
ä
 	
$str
ä
ä
	 
]
ä
ä
 
=
ä
ä
 
reader
ä
ä
 $
[
ä
ä
$ %
$str
ä
ä
% 6
]
ä
ä
6 7
;
ä
ä
7 8
row
ã
ã
 
[
ã
ã
 	
$str
ã
ã
	 
]
ã
ã
 
=
ã
ã
 
Convert
ã
ã
  
.
ã
ã
  !

ToDateTime
ã
ã
! +
(
ã
ã
+ ,
reader
ã
ã
, 2
[
ã
ã
2 3
$str
ã
ã
3 ?
]
ã
ã
? @
)
ã
ã
@ A
;
ã
ã
A B
row
å
å
 
[
å
å
 	
$str
å
å
	 
]
å
å
 
=
å
å
 
true
å
å
 
;
å
å
 
row
ç
ç
 
[
ç
ç
 	
$str
ç
ç
	 
]
ç
ç
 
=
ç
ç
 
Convert
ç
ç
 #
.
ç
ç
# $
	ToBoolean
ç
ç
$ -
(
ç
ç
- .
reader
ç
ç
. 4
[
ç
ç
4 5
$str
ç
ç
5 D
]
ç
ç
D E
)
ç
ç
E F
;
ç
ç
F G
row
é
é
 
[
é
é
 	
$str
é
é
	 
]
é
é
 
=
é
é
 
Convert
é
é
 "
.
é
é
" #
ToInt32
é
é
# *
(
é
é
* +
reader
é
é
+ 1
[
é
é
1 2
$str
é
é
2 @
]
é
é
@ A
)
é
é
A B
;
é
é
B C
if
ê
ê
 
(
ê
ê
 	
reader
ê
ê
	 
[
ê
ê
 
$str
ê
ê
 &
]
ê
ê
& '
!=
ê
ê
( *
DBNull
ê
ê
+ 1
.
ê
ê
1 2
Value
ê
ê
2 7
)
ê
ê
7 8
{
ë
ë
 
row
í
í
 	
[
í
í
	 

$str
í
í

  
]
í
í
  !
=
í
í
" #
reader
í
í
$ *
[
í
í
* +
$str
í
í
+ A
]
í
í
A B
;
í
í
B C
}
ì
ì
 
row
ï
ï
 
[
ï
ï
 	
$str
ï
ï
	 
]
ï
ï
 
=
ï
ï
 
Convert
ï
ï
 
.
ï
ï
 
ToInt32
ï
ï
 $
(
ï
ï
$ %
reader
ï
ï
% +
[
ï
ï
+ ,
$str
ï
ï
, 4
]
ï
ï
4 5
)
ï
ï
5 6
;
ï
ï
6 7
row
ñ
ñ
 
[
ñ
ñ
 	
$str
ñ
ñ
	 
]
ñ
ñ
 
=
ñ
ñ
 
reader
ñ
ñ
 
[
ñ
ñ
 
$str
ñ
ñ
  
]
ñ
ñ
  !
;
ñ
ñ
! "
row
ó
ó
 
[
ó
ó
 	
$str
ó
ó
	 
]
ó
ó
 
=
ó
ó
 
reader
ó
ó
 
[
ó
ó
 
$str
ó
ó
 *
]
ó
ó
* +
;
ó
ó
+ ,
row
ò
ò
 
[
ò
ò
 	
$str
ò
ò
	 
]
ò
ò
 
=
ò
ò
 
reader
ò
ò
 
[
ò
ò
 
$str
ò
ò
 (
]
ò
ò
( )
;
ò
ò
) *
row
ô
ô
 
[
ô
ô
 	
$str
ô
ô
	 
]
ô
ô
 
=
ô
ô
 
reader
ô
ô
 
[
ô
ô
 
$str
ô
ô
 *
]
ô
ô
* +
;
ô
ô
+ ,
row
ö
ö
 
[
ö
ö
 	
$str
ö
ö
	 
]
ö
ö
 
=
ö
ö
 
reader
ö
ö
 
[
ö
ö
 
$str
ö
ö
 "
]
ö
ö
" #
;
ö
ö
# $
row
õ
õ
 
[
õ
õ
 	
$str
õ
õ
	 
]
õ
õ
 
=
õ
õ
 
reader
õ
õ
 
[
õ
õ
 
$str
õ
õ
 *
]
õ
õ
* +
;
õ
õ
+ ,
row
ú
ú
 
[
ú
ú
 	
$str
ú
ú
	 
]
ú
ú
 
=
ú
ú
 
reader
ú
ú
 
[
ú
ú
 
$str
ú
ú
 *
]
ú
ú
* +
;
ú
ú
+ ,
if
ü
ü
 
(
ü
ü
 	
reader
ü
ü
	 
[
ü
ü
 
$str
ü
ü
  
]
ü
ü
  !
!=
ü
ü
" $
DBNull
ü
ü
% +
.
ü
ü
+ ,
Value
ü
ü
, 1
)
ü
ü
1 2
{
†
†
 
row
°
°
 	
[
°
°
	 

$str
°
°

 
]
°
°
 
=
°
°
 
Convert
°
°
 %
.
°
°
% &
	ToBoolean
°
°
& /
(
°
°
/ 0
reader
°
°
0 6
[
°
°
6 7
$str
°
°
7 G
]
°
°
G H
)
°
°
H I
;
°
°
I J
}
¢
¢
 
else
£
£
 	
{
§
§
 
row
•
•
 	
[
•
•
	 

$str
•
•

 
]
•
•
 
=
•
•
 
true
•
•
 "
;
•
•
" #
}
¶
¶
 
if
®
®
 
(
®
®
 	
reader
®
®
	 
[
®
®
 
$str
®
®
 "
]
®
®
" #
!=
®
®
$ &
DBNull
®
®
' -
.
®
®
- .
Value
®
®
. 3
)
®
®
3 4
{
©
©
 
row
™
™
 	
[
™
™
	 

$str
™
™

 
]
™
™
 
=
™
™
 
Convert
™
™
  '
.
™
™
' (
	ToBoolean
™
™
( 1
(
™
™
1 2
reader
™
™
2 8
[
™
™
8 9
$str
™
™
9 K
]
™
™
K L
)
™
™
L M
;
™
™
M N
}
´
´
 
else
¨
¨
 	
{
≠
≠
 
row
Æ
Æ
 	
[
Æ
Æ
	 

$str
Æ
Æ

 
]
Æ
Æ
 
=
Æ
Æ
 
true
Æ
Æ
  $
;
Æ
Æ
$ %
}
Ø
Ø
 
if
±
±
 
(
±
±
 	
reader
±
±
	 
[
±
±
 
$str
±
±
 
]
±
±
  
!=
±
±
! #
DBNull
±
±
$ *
.
±
±
* +
Value
±
±
+ 0
)
±
±
0 1
{
≤
≤
 
row
≥
≥
 	
[
≥
≥
	 

$str
≥
≥

 
]
≥
≥
 
=
≥
≥
 
Convert
≥
≥
 $
.
≥
≥
$ %
	ToBoolean
≥
≥
% .
(
≥
≥
. /
reader
≥
≥
/ 5
[
≥
≥
5 6
$str
≥
≥
6 E
]
≥
≥
E F
)
≥
≥
F G
;
≥
≥
G H
}
¥
¥
 
else
µ
µ
 	
{
∂
∂
 
row
∑
∑
 	
[
∑
∑
	 

$str
∑
∑

 
]
∑
∑
 
=
∑
∑
 
true
∑
∑
 !
;
∑
∑
! "
}
∏
∏
 
if
∫
∫
 
(
∫
∫
 	
reader
∫
∫
	 
[
∫
∫
 
$str
∫
∫
 
]
∫
∫
 
!=
∫
∫
  
DBNull
∫
∫
! '
.
∫
∫
' (
Value
∫
∫
( -
)
∫
∫
- .
{
ª
ª
 
row
º
º
 	
[
º
º
	 

$str
º
º

 
]
º
º
 
=
º
º
 
Convert
º
º
 !
.
º
º
! "
	ToBoolean
º
º
" +
(
º
º
+ ,
reader
º
º
, 2
[
º
º
2 3
$str
º
º
3 ?
]
º
º
? @
)
º
º
@ A
;
º
º
A B
}
Ω
Ω
 
else
æ
æ
 	
{
ø
ø
 
row
¿
¿
 	
[
¿
¿
	 

$str
¿
¿

 
]
¿
¿
 
=
¿
¿
 
false
¿
¿
 
;
¿
¿
  
}
¡
¡
 
row
√
√
 
[
√
√
 	
$str
√
√
	 
]
√
√
 
=
√
√
 
reader
√
√
 
[
√
√
 
$str
√
√
 *
]
√
√
* +
;
√
√
+ ,
row
ƒ
ƒ
 
[
ƒ
ƒ
 	
$str
ƒ
ƒ
	 
]
ƒ
ƒ
 
=
ƒ
ƒ
 
reader
ƒ
ƒ
 
[
ƒ
ƒ
 
$str
ƒ
ƒ
 (
]
ƒ
ƒ
( )
;
ƒ
ƒ
) *
row
≈
≈
 
[
≈
≈
 	
$str
≈
≈
	 
]
≈
≈
 
=
≈
≈
 
reader
≈
≈
 
[
≈
≈
 
$str
≈
≈
 &
]
≈
≈
& '
;
≈
≈
' (
if
«
«
 
(
«
«
 	
reader
«
«
	 
[
«
«
 
$str
«
«
 
]
«
«
 
!=
«
«
 
DBNull
«
«
 $
.
«
«
$ %
Value
«
«
% *
)
«
«
* +
{
»
»
 
row
…
…
 	
[
…
…
	 

$str
…
…

 
]
…
…
 
=
…
…
 
Convert
…
…
 
.
…
…
 
ToInt32
…
…
 &
(
…
…
& '
reader
…
…
' -
[
…
…
- .
$str
…
…
. 7
]
…
…
7 8
)
…
…
8 9
;
…
…
9 :
}
 
 
 
else
À
À
 	
{
Ã
Ã
 
row
Õ
Õ
 	
[
Õ
Õ
	 

$str
Õ
Õ

 
]
Õ
Õ
 
=
Õ
Õ
 
$num
Õ
Õ
 
;
Õ
Õ
 
}
Œ
Œ
 
if
–
–
 
(
–
–
 	
reader
–
–
	 
[
–
–
 
$str
–
–
  
]
–
–
  !
!=
–
–
" $
DBNull
–
–
% +
.
–
–
+ ,
Value
–
–
, 1
)
–
–
1 2
{
—
—
 
row
“
“
 	
[
“
“
	 

$str
“
“

 
]
“
“
 
=
“
“
 
Convert
“
“
 %
.
“
“
% &
	ToBoolean
“
“
& /
(
“
“
/ 0
reader
“
“
0 6
[
“
“
6 7
$str
“
“
7 G
]
“
“
G H
)
“
“
H I
;
“
“
I J
}
”
”
 
else
‘
‘
 	
{
’
’
 
row
÷
÷
 	
[
÷
÷
	 

$str
÷
÷

 
]
÷
÷
 
=
÷
÷
 
false
÷
÷
 #
;
÷
÷
# $
}
◊
◊
 
if
Ÿ
Ÿ
 
(
Ÿ
Ÿ
 	
reader
Ÿ
Ÿ
	 
[
Ÿ
Ÿ
 
$str
Ÿ
Ÿ
 
]
Ÿ
Ÿ
 
!=
Ÿ
Ÿ
  "
DBNull
Ÿ
Ÿ
# )
.
Ÿ
Ÿ
) *
Value
Ÿ
Ÿ
* /
)
Ÿ
Ÿ
/ 0
{
⁄
⁄
 
row
€
€
 	
[
€
€
	 

$str
€
€

 
]
€
€
 
=
€
€
 
Convert
€
€
 #
.
€
€
# $
	ToBoolean
€
€
$ -
(
€
€
- .
reader
€
€
. 4
[
€
€
4 5
$str
€
€
5 C
]
€
€
C D
)
€
€
D E
;
€
€
E F
}
‹
‹
 
else
›
›
 	
{
ﬁ
ﬁ
 
row
ﬂ
ﬂ
 	
[
ﬂ
ﬂ
	 

$str
ﬂ
ﬂ

 
]
ﬂ
ﬂ
 
=
ﬂ
ﬂ
 
false
ﬂ
ﬂ
 !
;
ﬂ
ﬂ
! "
}
‡
‡
 
if
‚
‚
 
(
‚
‚
 	
reader
‚
‚
	 
[
‚
‚
 
$str
‚
‚
 "
]
‚
‚
" #
!=
‚
‚
$ &
DBNull
‚
‚
' -
.
‚
‚
- .
Value
‚
‚
. 3
)
‚
‚
3 4
{
„
„
 
row
‰
‰
 	
[
‰
‰
	 

$str
‰
‰

 
]
‰
‰
 
=
‰
‰
 
Convert
‰
‰
  '
.
‰
‰
' (
	ToBoolean
‰
‰
( 1
(
‰
‰
1 2
reader
‰
‰
2 8
[
‰
‰
8 9
$str
‰
‰
9 K
]
‰
‰
K L
)
‰
‰
L M
;
‰
‰
M N
}
Â
Â
 
else
Ê
Ê
 	
{
Á
Á
 
row
Ë
Ë
 	
[
Ë
Ë
	 

$str
Ë
Ë

 
]
Ë
Ë
 
=
Ë
Ë
 
false
Ë
Ë
  %
;
Ë
Ë
% &
}
È
È
 
if
Î
Î
 
(
Î
Î
 	
reader
Î
Î
	 
[
Î
Î
 
$str
Î
Î
 &
]
Î
Î
& '
!=
Î
Î
( *
DBNull
Î
Î
+ 1
.
Î
Î
1 2
Value
Î
Î
2 7
)
Î
Î
7 8
{
Ï
Ï
 
row
Ì
Ì
 	
[
Ì
Ì
	 

$str
Ì
Ì

  
]
Ì
Ì
  !
=
Ì
Ì
" #
Convert
Ì
Ì
$ +
.
Ì
Ì
+ ,
	ToBoolean
Ì
Ì
, 5
(
Ì
Ì
5 6
reader
Ì
Ì
6 <
[
Ì
Ì
< =
$str
Ì
Ì
= S
]
Ì
Ì
S T
)
Ì
Ì
T U
;
Ì
Ì
U V
}
Ó
Ó
 
else
Ô
Ô
 	
{


 
row
Ò
Ò
 	
[
Ò
Ò
	 

$str
Ò
Ò

  
]
Ò
Ò
  !
=
Ò
Ò
" #
false
Ò
Ò
$ )
;
Ò
Ò
) *
}
Ú
Ú
 
if
Ù
Ù
 
(
Ù
Ù
 	
reader
Ù
Ù
	 
[
Ù
Ù
 
$str
Ù
Ù
 "
]
Ù
Ù
" #
!=
Ù
Ù
$ &
DBNull
Ù
Ù
' -
.
Ù
Ù
- .
Value
Ù
Ù
. 3
)
Ù
Ù
3 4
{
ı
ı
 
row
ˆ
ˆ
 	
[
ˆ
ˆ
	 

$str
ˆ
ˆ

 
]
ˆ
ˆ
 
=
ˆ
ˆ
 
Convert
ˆ
ˆ
  '
.
ˆ
ˆ
' (
	ToBoolean
ˆ
ˆ
( 1
(
ˆ
ˆ
1 2
reader
ˆ
ˆ
2 8
[
ˆ
ˆ
8 9
$str
ˆ
ˆ
9 K
]
ˆ
ˆ
K L
)
ˆ
ˆ
L M
;
ˆ
ˆ
M N
}
˜
˜
 
else
¯
¯
 	
{
˘
˘
 
row
˙
˙
 	
[
˙
˙
	 

$str
˙
˙

 
]
˙
˙
 
=
˙
˙
 
false
˙
˙
  %
;
˙
˙
% &
}
˚
˚
 
row
˛
˛
 
[
˛
˛
 	
$str
˛
˛
	 
]
˛
˛
 
=
˛
˛
 
reader
˛
˛
 %
[
˛
˛
% &
$str
˛
˛
& 8
]
˛
˛
8 9
;
˛
˛
9 :
if
ÄÄ 
(
ÄÄ 	
reader
ÄÄ	 
[
ÄÄ 
$str
ÄÄ '
]
ÄÄ' (
!=
ÄÄ) +
DBNull
ÄÄ, 2
.
ÄÄ2 3
Value
ÄÄ3 8
)
ÄÄ8 9
{
ÅÅ 
row
ÇÇ 	
[
ÇÇ	 

$str
ÇÇ
 !
]
ÇÇ! "
=
ÇÇ# $
Convert
ÇÇ% ,
.
ÇÇ, -
	ToBoolean
ÇÇ- 6
(
ÇÇ6 7
reader
ÇÇ7 =
[
ÇÇ= >
$str
ÇÇ> U
]
ÇÇU V
)
ÇÇV W
;
ÇÇW X
}
ÉÉ 
else
ÑÑ 	
{
ÖÖ 
row
ÜÜ 	
[
ÜÜ	 

$str
ÜÜ
 !
]
ÜÜ! "
=
ÜÜ# $
true
ÜÜ% )
;
ÜÜ) *
}
áá 
if
ää 
(
ää 	
reader
ää	 
[
ää 
$str
ää $
]
ää$ %
!=
ää& (
DBNull
ää) /
.
ää/ 0
Value
ää0 5
)
ää5 6
{
ãã 
row
åå 	
[
åå	 

$str
åå
 
]
åå 
=
åå  !
Convert
åå" )
.
åå) *
	ToBoolean
åå* 3
(
åå3 4
reader
åå4 :
[
åå: ;
$str
åå; O
]
ååO P
)
ååP Q
;
ååQ R
}
çç 
else
éé 	
{
èè 
row
êê 	
[
êê	 

$str
êê
 
]
êê 
=
êê  !
true
êê" &
;
êê& '
}
ëë 
posts
ìì 

.
ìì
 
Rows
ìì 
.
ìì 
Add
ìì 
(
ìì 
row
ìì 
)
ìì 
;
ìì 
}
îî 
}
ïï 
posts
óó 
.
óó 	
	TableName
óó	 
=
óó 
$str
óó 
;
óó 
dataSet
òò 

.
òò
 
Tables
òò 
.
òò 
Add
òò 
(
òò 
posts
òò 
)
òò 
;
òò 
	DataTable
öö 

categories
öö 
=
öö '
GetCategoryTableStructure
öö 3
(
öö3 4
)
öö4 5
;
öö5 6
using
úú 
(
úú	 

IDataReader
úú
 
reader
úú 
=
úú 
DBBlog
úú %
.
úú% &"
GetCategoriesForPage
úú& :
(
úú: ;
moduleId
úú; C
,
úúC D
	beginDate
úúE N
,
úúN O
DateTime
úúP X
.
úúX Y
UtcNow
úúY _
,
úú_ `

pageNumber
úúa k
,
úúk l
pageSize
úúm u
)
úúu v
)
úúv w
{
ùù 
while
ûû 	
(
ûû
 
reader
ûû 
.
ûû 
Read
ûû 
(
ûû 
)
ûû 
)
ûû 
{
üü 
DataRow
°° 
row
°° 
=
°° 

categories
°° 
.
°° 
NewRow
°° $
(
°°$ %
)
°°% &
;
°°& '
row
££ 
[
££ 	
$str
££	 
]
££ 
=
££ 
reader
££ 
[
££ 
$str
££ 
]
££ 
;
££ 
row
§§ 
[
§§ 	
$str
§§	 
]
§§ 
=
§§ 
reader
§§ 
[
§§ 
$str
§§ $
]
§§$ %
;
§§% &
row
•• 
[
•• 	
$str
••	 
]
•• 
=
•• 
reader
•• 
[
••  
$str
••  ,
]
••, -
;
••- .
row
¶¶ 
[
¶¶ 	
$str
¶¶	 
]
¶¶ 
=
¶¶ 
reader
¶¶ 
[
¶¶ 
$str
¶¶ (
]
¶¶( )
;
¶¶) *

categories
®® 
.
®® 
Rows
®® 
.
®® 
Add
®® 
(
®® 
row
®® 
)
®® 
;
®® 
}
©© 
}
´´ 

categories
≠≠ 
.
≠≠ 
	TableName
≠≠ 
=
≠≠ 
$str
≠≠ &
;
≠≠& '
dataSet
ÆÆ 

.
ÆÆ
 
Tables
ÆÆ 
.
ÆÆ 
Add
ÆÆ 
(
ÆÆ 

categories
ÆÆ  
)
ÆÆ  !
;
ÆÆ! "
	DataTable
∞∞ 
attachments
∞∞ 
=
∞∞ *
GetAttachmentsTableStructure
∞∞ 7
(
∞∞7 8
)
∞∞8 9
;
∞∞9 :
using
≤≤ 
(
≤≤	 

IDataReader
≤≤
 
reader
≤≤ 
=
≤≤ 
DBBlog
≤≤ %
.
≤≤% &#
GetAttachmentsForPage
≤≤& ;
(
≤≤; <
moduleId
≤≤< D
,
≤≤D E
	beginDate
≤≤F O
,
≤≤O P
DateTime
≤≤Q Y
.
≤≤Y Z
UtcNow
≤≤Z `
,
≤≤` a

pageNumber
≤≤b l
,
≤≤l m
pageSize
≤≤n v
)
≤≤v w
)
≤≤w x
{
≥≥ 
while
¥¥ 	
(
¥¥
 
reader
¥¥ 
.
¥¥ 
Read
¥¥ 
(
¥¥ 
)
¥¥ 
)
¥¥ 
{
µµ 
DataRow
∑∑ 
row
∑∑ 
=
∑∑ 
attachments
∑∑ 
.
∑∑ 
NewRow
∑∑ %
(
∑∑% &
)
∑∑& '
;
∑∑' (
row
ππ 
[
ππ 	
$str
ππ	 
]
ππ 
=
ππ 
reader
ππ 
[
ππ 
$str
ππ &
]
ππ& '
;
ππ' (
row
∫∫ 
[
∫∫ 	
$str
∫∫	 
]
∫∫ 
=
∫∫ 
reader
∫∫ 
[
∫∫ 
$str
∫∫ (
]
∫∫( )
;
∫∫) *
row
ªª 
[
ªª 	
$str
ªª	 
]
ªª 
=
ªª 
reader
ªª 
[
ªª 
$str
ªª (
]
ªª( )
;
ªª) *
row
ºº 
[
ºº 	
$str
ºº	 
]
ºº 
=
ºº 
reader
ºº #
[
ºº# $
$str
ºº$ 4
]
ºº4 5
;
ºº5 6
row
ΩΩ 
[
ΩΩ 	
$str
ΩΩ	 
]
ΩΩ 
=
ΩΩ 
Convert
ΩΩ #
.
ΩΩ# $
ToInt64
ΩΩ$ +
(
ΩΩ+ ,
reader
ΩΩ, 2
[
ΩΩ2 3
$str
ΩΩ3 B
]
ΩΩB C
)
ΩΩC D
;
ΩΩD E
row
ææ 
[
ææ 	
$str
ææ	 
]
ææ 
=
ææ 
reader
ææ  
[
ææ  !
$str
ææ! .
]
ææ. /
;
ææ/ 0
if
¿¿ 
(
¿¿ 	
reader
¿¿	 
[
¿¿ 
$str
¿¿ "
]
¿¿" #
!=
¿¿$ &
DBNull
¿¿' -
.
¿¿- .
Value
¿¿. 3
)
¿¿3 4
{
¡¡ 
row
¬¬ 	
[
¬¬	 

$str
¬¬
 
]
¬¬ 
=
¬¬ 
Convert
¬¬  '
.
¬¬' (
	ToBoolean
¬¬( 1
(
¬¬1 2
reader
¬¬2 8
[
¬¬8 9
$str
¬¬9 K
]
¬¬K L
)
¬¬L M
;
¬¬M N
}
√√ 
else
ƒƒ 	
{
≈≈ 
row
∆∆ 	
[
∆∆	 

$str
∆∆
 
]
∆∆ 
=
∆∆ 
false
∆∆  %
;
∆∆% &
}
«« 
attachments
…… 
.
…… 
Rows
…… 
.
…… 
Add
…… 
(
…… 
row
…… 
)
…… 
;
…… 
}
   
}
ÃÃ 
attachments
ŒŒ 
.
ŒŒ 
	TableName
ŒŒ 
=
ŒŒ 
$str
ŒŒ (
;
ŒŒ( )
dataSet
œœ 

.
œœ
 
Tables
œœ 
.
œœ 
Add
œœ 
(
œœ 
attachments
œœ !
)
œœ! "
;
œœ" #
try
““ 
{
”” 
dataSet
‘‘ 
.
‘‘ 
	Relations
‘‘ 
.
‘‘ 
Add
‘‘ 
(
‘‘ 
$str
‘‘ *
,
‘‘* +
dataSet
’’ 
.
’’ 
Tables
’’ 
[
’’ 
$str
’’ 
]
’’ 
.
’’ 
Columns
’’ $
[
’’$ %
$str
’’% -
]
’’- .
,
’’. /
dataSet
÷÷ 
.
÷÷ 
Tables
÷÷ 
[
÷÷ 
$str
÷÷  
]
÷÷  !
.
÷÷! "
Columns
÷÷" )
[
÷÷) *
$str
÷÷* 2
]
÷÷2 3
)
÷÷3 4
;
÷÷4 5
}
◊◊ 
catch
ÿÿ 
(
ÿÿ	 

System
ÿÿ
 
.
ÿÿ 
Data
ÿÿ 
.
ÿÿ !
ConstraintException
ÿÿ )
)
ÿÿ) *
{
ÿÿ+ ,
}
ÿÿ- .
catch
ŸŸ 
(
ŸŸ	 

ArgumentException
ŸŸ
 
)
ŸŸ 
{
ŸŸ 
}
ŸŸ  
try
€€ 
{
‹‹ 
dataSet
›› 
.
›› 
	Relations
›› 
.
›› 
Add
›› 
(
›› 
$str
›› +
,
››+ ,
dataSet
ﬁﬁ 
.
ﬁﬁ 
Tables
ﬁﬁ 
[
ﬁﬁ 
$str
ﬁﬁ 
]
ﬁﬁ 
.
ﬁﬁ 
Columns
ﬁﬁ $
[
ﬁﬁ$ %
$str
ﬁﬁ% /
]
ﬁﬁ/ 0
,
ﬁﬁ0 1
dataSet
ﬂﬂ 
.
ﬂﬂ 
Tables
ﬂﬂ 
[
ﬂﬂ 
$str
ﬂﬂ !
]
ﬂﬂ! "
.
ﬂﬂ" #
Columns
ﬂﬂ# *
[
ﬂﬂ* +
$str
ﬂﬂ+ 5
]
ﬂﬂ5 6
)
ﬂﬂ6 7
;
ﬂﬂ7 8
}
‡‡ 
catch
·· 
(
··	 

System
··
 
.
·· 
Data
·· 
.
·· !
ConstraintException
·· )
)
··) *
{
··+ ,
}
··- .
catch
‚‚ 
(
‚‚	 

ArgumentException
‚‚
 
)
‚‚ 
{
‚‚ 
}
‚‚  
return
ÂÂ 	
dataSet
ÂÂ
 
;
ÂÂ 
}
ÊÊ 
public
ËË 
static
ËË	 
DataSet
ËË #
GetBlogEntriesByMonth
ËË -
(
ËË- .
int
ÈÈ 
month
ÈÈ 
,
ÈÈ 
int
ÍÍ 
year
ÍÍ 
,
ÍÍ 
int
ÎÎ 
moduleId
ÎÎ 
,
ÎÎ 
DateTime
ÏÏ 
currentTime
ÏÏ 
,
ÏÏ 
int
ÌÌ 

pageNumber
ÌÌ 
,
ÌÌ 
int
ÓÓ 
pageSize
ÓÓ 
,
ÓÓ 
out
ÔÔ 
int
ÔÔ 


totalPages
ÔÔ 
)
ÔÔ 
{
 
DataSet
ÒÒ 

dataSet
ÒÒ 
=
ÒÒ 
new
ÒÒ 
DataSet
ÒÒ  
(
ÒÒ  !
)
ÒÒ! "
;
ÒÒ" #
	DataTable
ÛÛ 
posts
ÛÛ 
=
ÛÛ $
GetPostsTableStructure
ÛÛ +
(
ÛÛ+ ,
)
ÛÛ, -
;
ÛÛ- .
using
ıı 
(
ıı	 

IDataReader
ıı
 
reader
ıı 
=
ıı 
DBBlog
ıı %
.
ıı% &#
GetBlogEntriesByMonth
ıı& ;
(
ıı; <
month
ıı< A
,
ııA B
year
ııC G
,
ııG H
moduleId
ııI Q
,
ııQ R
currentTime
ııS ^
,
ıı^ _

pageNumber
ıı` j
,
ııj k
pageSize
ııl t
,
ııt u
out
ııv y

totalPagesıız Ñ
)ııÑ Ö
)ııÖ Ü
{
ˆˆ 
while
˜˜ 	
(
˜˜
 
reader
˜˜ 
.
˜˜ 
Read
˜˜ 
(
˜˜ 
)
˜˜ 
)
˜˜ 
{
¯¯ 
DataRow
˙˙ 
row
˙˙ 
=
˙˙ 
posts
˙˙ 
.
˙˙ 
NewRow
˙˙ 
(
˙˙  
)
˙˙  !
;
˙˙! "
row
˝˝ 
[
˝˝ 	
$str
˝˝	 
]
˝˝ 
=
˝˝ 
Convert
˝˝ 
.
˝˝ 
ToInt32
˝˝ $
(
˝˝$ %
reader
˝˝% +
[
˝˝+ ,
$str
˝˝, 4
]
˝˝4 5
)
˝˝5 6
;
˝˝6 7
row
˛˛ 
[
˛˛ 	
$str
˛˛	 
]
˛˛ 
=
˛˛ 
Convert
˛˛ 
.
˛˛ 
ToInt32
˛˛ &
(
˛˛& '
reader
˛˛' -
[
˛˛- .
$str
˛˛. 8
]
˛˛8 9
)
˛˛9 :
;
˛˛: ;
row
ˇˇ 
[
ˇˇ 	
$str
ˇˇ	 
]
ˇˇ 
=
ˇˇ 
reader
ˇˇ 
[
ˇˇ 
$str
ˇˇ (
]
ˇˇ( )
.
ˇˇ) *
ToString
ˇˇ* 2
(
ˇˇ2 3
)
ˇˇ3 4
;
ˇˇ4 5
row
ÄÄ 
[
ÄÄ 	
$str
ÄÄ	 
]
ÄÄ 
=
ÄÄ 
Convert
ÄÄ !
.
ÄÄ! "

ToDateTime
ÄÄ" ,
(
ÄÄ, -
reader
ÄÄ- 3
[
ÄÄ3 4
$str
ÄÄ4 A
]
ÄÄA B
)
ÄÄB C
;
ÄÄC D
row
ÅÅ 
[
ÅÅ 	
$str
ÅÅ	 
]
ÅÅ 
=
ÅÅ 
reader
ÅÅ 
[
ÅÅ 
$str
ÅÅ &
]
ÅÅ& '
;
ÅÅ' (
row
ÇÇ 
[
ÇÇ 	
$str
ÇÇ	 
]
ÇÇ 
=
ÇÇ 
reader
ÇÇ 
[
ÇÇ 
$str
ÇÇ (
]
ÇÇ( )
;
ÇÇ) *
row
ÉÉ 
[
ÉÉ 	
$str
ÉÉ	 
]
ÉÉ 
=
ÉÉ 
Convert
ÉÉ 
.
ÉÉ  

ToDateTime
ÉÉ  *
(
ÉÉ* +
reader
ÉÉ+ 1
[
ÉÉ1 2
$str
ÉÉ2 =
]
ÉÉ= >
)
ÉÉ> ?
;
ÉÉ? @
row
ÑÑ 
[
ÑÑ 	
$str
ÑÑ	 
]
ÑÑ 
=
ÑÑ 
reader
ÑÑ  
[
ÑÑ  !
$str
ÑÑ! .
]
ÑÑ. /
;
ÑÑ/ 0
row
ÖÖ 
[
ÖÖ 	
$str
ÖÖ	 
]
ÖÖ 
=
ÖÖ 
reader
ÖÖ 
[
ÖÖ 
$str
ÖÖ (
]
ÖÖ( )
;
ÖÖ) *
row
ÜÜ 
[
ÜÜ 	
$str
ÜÜ	 
]
ÜÜ 
=
ÜÜ 
reader
ÜÜ 
[
ÜÜ 
$str
ÜÜ &
]
ÜÜ& '
;
ÜÜ' (
row
áá 
[
áá 	
$str
áá	 
]
áá 
=
áá 
reader
áá 
[
áá 
$str
áá (
]
áá( )
;
áá) *
row
àà 
[
àà 	
$str
àà	 
]
àà 
=
àà 
reader
àà !
[
àà! "
$str
àà" 0
]
àà0 1
;
àà1 2
row
ââ 
[
ââ 	
$str
ââ	 
]
ââ 
=
ââ 
reader
ââ $
[
ââ$ %
$str
ââ% 6
]
ââ6 7
;
ââ7 8
row
ää 
[
ää 	
$str
ää	 
]
ää 
=
ää 
Convert
ää  
.
ää  !

ToDateTime
ää! +
(
ää+ ,
reader
ää, 2
[
ää2 3
$str
ää3 ?
]
ää? @
)
ää@ A
;
ääA B
row
ãã 
[
ãã 	
$str
ãã	 
]
ãã 
=
ãã 
true
ãã 
;
ãã 
row
åå 
[
åå 	
$str
åå	 
]
åå 
=
åå 
Convert
åå #
.
åå# $
	ToBoolean
åå$ -
(
åå- .
reader
åå. 4
[
åå4 5
$str
åå5 D
]
ååD E
)
ååE F
;
ååF G
row
çç 
[
çç 	
$str
çç	 
]
çç 
=
çç 
Convert
çç "
.
çç" #
ToInt32
çç# *
(
çç* +
reader
çç+ 1
[
çç1 2
$str
çç2 @
]
çç@ A
)
ççA B
;
ççB C
row
éé 
[
éé 	
$str
éé	 
]
éé 
=
éé 
Convert
éé 
.
éé 
ToInt32
éé $
(
éé$ %
reader
éé% +
[
éé+ ,
$str
éé, 4
]
éé4 5
)
éé5 6
;
éé6 7
row
èè 
[
èè 	
$str
èè	 
]
èè 
=
èè 
reader
èè 
[
èè 
$str
èè  
]
èè  !
;
èè! "
row
êê 
[
êê 	
$str
êê	 
]
êê 
=
êê 
reader
êê 
[
êê 
$str
êê *
]
êê* +
;
êê+ ,
row
ëë 
[
ëë 	
$str
ëë	 
]
ëë 
=
ëë 
reader
ëë 
[
ëë 
$str
ëë (
]
ëë( )
;
ëë) *
row
íí 
[
íí 	
$str
íí	 
]
íí 
=
íí 
reader
íí 
[
íí 
$str
íí *
]
íí* +
;
íí+ ,
row
ìì 
[
ìì 	
$str
ìì	 
]
ìì 
=
ìì 
reader
ìì 
[
ìì 
$str
ìì "
]
ìì" #
;
ìì# $
row
îî 
[
îî 	
$str
îî	 
]
îî 
=
îî 
reader
îî 
[
îî 
$str
îî *
]
îî* +
;
îî+ ,
row
ïï 
[
ïï 	
$str
ïï	 
]
ïï 
=
ïï 
reader
ïï 
[
ïï 
$str
ïï *
]
ïï* +
;
ïï+ ,
if
òò 
(
òò 	
reader
òò	 
[
òò 
$str
òò  
]
òò  !
!=
òò" $
DBNull
òò% +
.
òò+ ,
Value
òò, 1
)
òò1 2
{
ôô 
row
öö 	
[
öö	 

$str
öö
 
]
öö 
=
öö 
Convert
öö %
.
öö% &
	ToBoolean
öö& /
(
öö/ 0
reader
öö0 6
[
öö6 7
$str
öö7 G
]
ööG H
)
ööH I
;
ööI J
}
õõ 
else
úú 	
{
ùù 
row
ûû 	
[
ûû	 

$str
ûû
 
]
ûû 
=
ûû 
true
ûû "
;
ûû" #
}
üü 
if
°° 
(
°° 	
reader
°°	 
[
°° 
$str
°° "
]
°°" #
!=
°°$ &
DBNull
°°' -
.
°°- .
Value
°°. 3
)
°°3 4
{
¢¢ 
row
££ 	
[
££	 

$str
££
 
]
££ 
=
££ 
Convert
££  '
.
££' (
	ToBoolean
££( 1
(
££1 2
reader
££2 8
[
££8 9
$str
££9 K
]
££K L
)
££L M
;
££M N
}
§§ 
else
•• 	
{
¶¶ 
row
ßß 	
[
ßß	 

$str
ßß
 
]
ßß 
=
ßß 
true
ßß  $
;
ßß$ %
}
®® 
if
™™ 
(
™™ 	
reader
™™	 
[
™™ 
$str
™™ 
]
™™  
!=
™™! #
DBNull
™™$ *
.
™™* +
Value
™™+ 0
)
™™0 1
{
´´ 
row
¨¨ 	
[
¨¨	 

$str
¨¨
 
]
¨¨ 
=
¨¨ 
Convert
¨¨ $
.
¨¨$ %
	ToBoolean
¨¨% .
(
¨¨. /
reader
¨¨/ 5
[
¨¨5 6
$str
¨¨6 E
]
¨¨E F
)
¨¨F G
;
¨¨G H
}
≠≠ 
else
ÆÆ 	
{
ØØ 
row
∞∞ 	
[
∞∞	 

$str
∞∞
 
]
∞∞ 
=
∞∞ 
true
∞∞ !
;
∞∞! "
}
±± 
if
≥≥ 
(
≥≥ 	
reader
≥≥	 
[
≥≥ 
$str
≥≥ 
]
≥≥ 
!=
≥≥  
DBNull
≥≥! '
.
≥≥' (
Value
≥≥( -
)
≥≥- .
{
¥¥ 
row
µµ 	
[
µµ	 

$str
µµ
 
]
µµ 
=
µµ 
Convert
µµ !
.
µµ! "
	ToBoolean
µµ" +
(
µµ+ ,
reader
µµ, 2
[
µµ2 3
$str
µµ3 ?
]
µµ? @
)
µµ@ A
;
µµA B
}
∂∂ 
else
∑∑ 	
{
∏∏ 
row
ππ 	
[
ππ	 

$str
ππ
 
]
ππ 
=
ππ 
false
ππ 
;
ππ  
}
∫∫ 
row
ºº 
[
ºº 	
$str
ºº	 
]
ºº 
=
ºº 
reader
ºº 
[
ºº 
$str
ºº *
]
ºº* +
;
ºº+ ,
row
ΩΩ 
[
ΩΩ 	
$str
ΩΩ	 
]
ΩΩ 
=
ΩΩ 
reader
ΩΩ 
[
ΩΩ 
$str
ΩΩ (
]
ΩΩ( )
;
ΩΩ) *
row
ææ 
[
ææ 	
$str
ææ	 
]
ææ 
=
ææ 
reader
ææ 
[
ææ 
$str
ææ &
]
ææ& '
;
ææ' (
if
¿¿ 
(
¿¿ 	
reader
¿¿	 
[
¿¿ 
$str
¿¿ 
]
¿¿ 
!=
¿¿ 
DBNull
¿¿ $
.
¿¿$ %
Value
¿¿% *
)
¿¿* +
{
¡¡ 
row
¬¬ 	
[
¬¬	 

$str
¬¬
 
]
¬¬ 
=
¬¬ 
Convert
¬¬ 
.
¬¬ 
ToInt32
¬¬ &
(
¬¬& '
reader
¬¬' -
[
¬¬- .
$str
¬¬. 7
]
¬¬7 8
)
¬¬8 9
;
¬¬9 :
}
√√ 
else
ƒƒ 	
{
≈≈ 
row
∆∆ 	
[
∆∆	 

$str
∆∆
 
]
∆∆ 
=
∆∆ 
$num
∆∆ 
;
∆∆ 
}
«« 
if
…… 
(
…… 	
reader
……	 
[
…… 
$str
……  
]
……  !
!=
……" $
DBNull
……% +
.
……+ ,
Value
……, 1
)
……1 2
{
   
row
ÀÀ 	
[
ÀÀ	 

$str
ÀÀ
 
]
ÀÀ 
=
ÀÀ 
Convert
ÀÀ %
.
ÀÀ% &
	ToBoolean
ÀÀ& /
(
ÀÀ/ 0
reader
ÀÀ0 6
[
ÀÀ6 7
$str
ÀÀ7 G
]
ÀÀG H
)
ÀÀH I
;
ÀÀI J
}
ÃÃ 
else
ÕÕ 	
{
ŒŒ 
row
œœ 	
[
œœ	 

$str
œœ
 
]
œœ 
=
œœ 
false
œœ #
;
œœ# $
}
–– 
if
““ 
(
““ 	
reader
““	 
[
““ 
$str
““ 
]
““ 
!=
““  "
DBNull
““# )
.
““) *
Value
““* /
)
““/ 0
{
”” 
row
‘‘ 	
[
‘‘	 

$str
‘‘
 
]
‘‘ 
=
‘‘ 
Convert
‘‘ #
.
‘‘# $
	ToBoolean
‘‘$ -
(
‘‘- .
reader
‘‘. 4
[
‘‘4 5
$str
‘‘5 C
]
‘‘C D
)
‘‘D E
;
‘‘E F
}
’’ 
else
÷÷ 	
{
◊◊ 
row
ÿÿ 	
[
ÿÿ	 

$str
ÿÿ
 
]
ÿÿ 
=
ÿÿ 
false
ÿÿ !
;
ÿÿ! "
}
ŸŸ 
if
€€ 
(
€€ 	
reader
€€	 
[
€€ 
$str
€€ "
]
€€" #
!=
€€$ &
DBNull
€€' -
.
€€- .
Value
€€. 3
)
€€3 4
{
‹‹ 
row
›› 	
[
››	 

$str
››
 
]
›› 
=
›› 
Convert
››  '
.
››' (
	ToBoolean
››( 1
(
››1 2
reader
››2 8
[
››8 9
$str
››9 K
]
››K L
)
››L M
;
››M N
}
ﬁﬁ 
else
ﬂﬂ 	
{
‡‡ 
row
·· 	
[
··	 

$str
··
 
]
·· 
=
·· 
false
··  %
;
··% &
}
‚‚ 
if
‰‰ 
(
‰‰ 	
reader
‰‰	 
[
‰‰ 
$str
‰‰ &
]
‰‰& '
!=
‰‰( *
DBNull
‰‰+ 1
.
‰‰1 2
Value
‰‰2 7
)
‰‰7 8
{
ÂÂ 
row
ÊÊ 	
[
ÊÊ	 

$str
ÊÊ
  
]
ÊÊ  !
=
ÊÊ" #
Convert
ÊÊ$ +
.
ÊÊ+ ,
	ToBoolean
ÊÊ, 5
(
ÊÊ5 6
reader
ÊÊ6 <
[
ÊÊ< =
$str
ÊÊ= S
]
ÊÊS T
)
ÊÊT U
;
ÊÊU V
}
ÁÁ 
else
ËË 	
{
ÈÈ 
row
ÍÍ 	
[
ÍÍ	 

$str
ÍÍ
  
]
ÍÍ  !
=
ÍÍ" #
false
ÍÍ$ )
;
ÍÍ) *
}
ÎÎ 
if
ÌÌ 
(
ÌÌ 	
reader
ÌÌ	 
[
ÌÌ 
$str
ÌÌ "
]
ÌÌ" #
!=
ÌÌ$ &
DBNull
ÌÌ' -
.
ÌÌ- .
Value
ÌÌ. 3
)
ÌÌ3 4
{
ÓÓ 
row
ÔÔ 	
[
ÔÔ	 

$str
ÔÔ
 
]
ÔÔ 
=
ÔÔ 
Convert
ÔÔ  '
.
ÔÔ' (
	ToBoolean
ÔÔ( 1
(
ÔÔ1 2
reader
ÔÔ2 8
[
ÔÔ8 9
$str
ÔÔ9 K
]
ÔÔK L
)
ÔÔL M
;
ÔÔM N
}
 
else
ÒÒ 	
{
ÚÚ 
row
ÛÛ 	
[
ÛÛ	 

$str
ÛÛ
 
]
ÛÛ 
=
ÛÛ 
false
ÛÛ  %
;
ÛÛ% &
}
ÙÙ 
row
ˆˆ 
[
ˆˆ 	
$str
ˆˆ	 
]
ˆˆ 
=
ˆˆ 
reader
ˆˆ %
[
ˆˆ% &
$str
ˆˆ& 8
]
ˆˆ8 9
;
ˆˆ9 :
if
¯¯ 
(
¯¯ 	
reader
¯¯	 
[
¯¯ 
$str
¯¯ '
]
¯¯' (
!=
¯¯) +
DBNull
¯¯, 2
.
¯¯2 3
Value
¯¯3 8
)
¯¯8 9
{
˘˘ 
row
˙˙ 	
[
˙˙	 

$str
˙˙
 !
]
˙˙! "
=
˙˙# $
Convert
˙˙% ,
.
˙˙, -
	ToBoolean
˙˙- 6
(
˙˙6 7
reader
˙˙7 =
[
˙˙= >
$str
˙˙> U
]
˙˙U V
)
˙˙V W
;
˙˙W X
}
˚˚ 
else
¸¸ 	
{
˝˝ 
row
˛˛ 	
[
˛˛	 

$str
˛˛
 !
]
˛˛! "
=
˛˛# $
true
˛˛% )
;
˛˛) *
}
ˇˇ 
if
ÇÇ 
(
ÇÇ 	
reader
ÇÇ	 
[
ÇÇ 
$str
ÇÇ $
]
ÇÇ$ %
!=
ÇÇ& (
DBNull
ÇÇ) /
.
ÇÇ/ 0
Value
ÇÇ0 5
)
ÇÇ5 6
{
ÉÉ 
row
ÑÑ 	
[
ÑÑ	 

$str
ÑÑ
 
]
ÑÑ 
=
ÑÑ  !
Convert
ÑÑ" )
.
ÑÑ) *
	ToBoolean
ÑÑ* 3
(
ÑÑ3 4
reader
ÑÑ4 :
[
ÑÑ: ;
$str
ÑÑ; O
]
ÑÑO P
)
ÑÑP Q
;
ÑÑQ R
}
ÖÖ 
else
ÜÜ 	
{
áá 
row
àà 	
[
àà	 

$str
àà
 
]
àà 
=
àà  !
true
àà" &
;
àà& '
}
ââ 
posts
åå 

.
åå
 
Rows
åå 
.
åå 
Add
åå 
(
åå 
row
åå 
)
åå 
;
åå 
}
çç 
}
éé 
posts
êê 
.
êê 	
	TableName
êê	 
=
êê 
$str
êê 
;
êê 
dataSet
ëë 

.
ëë
 
Tables
ëë 
.
ëë 
Add
ëë 
(
ëë 
posts
ëë 
)
ëë 
;
ëë 
	DataTable
ìì 

categories
ìì 
=
ìì '
GetCategoryTableStructure
ìì 3
(
ìì3 4
)
ìì4 5
;
ìì5 6
using
ïï 
(
ïï	 

IDataReader
ïï
 
reader
ïï 
=
ïï 
DBBlog
ïï %
.
ïï% &"
GetCategoriesForPage
ïï& :
(
ïï: ;
month
ïï; @
,
ïï@ A
year
ïïB F
,
ïïF G
moduleId
ïïH P
,
ïïP Q
DateTime
ïïR Z
.
ïïZ [
UtcNow
ïï[ a
,
ïïa b

pageNumber
ïïc m
,
ïïm n
pageSize
ïïo w
)
ïïw x
)
ïïx y
{
ññ 
while
óó 	
(
óó
 
reader
óó 
.
óó 
Read
óó 
(
óó 
)
óó 
)
óó 
{
òò 
DataRow
öö 
row
öö 
=
öö 

categories
öö 
.
öö 
NewRow
öö $
(
öö$ %
)
öö% &
;
öö& '
row
úú 
[
úú 	
$str
úú	 
]
úú 
=
úú 
reader
úú 
[
úú 
$str
úú 
]
úú 
;
úú 
row
ùù 
[
ùù 	
$str
ùù	 
]
ùù 
=
ùù 
reader
ùù 
[
ùù 
$str
ùù $
]
ùù$ %
;
ùù% &
row
ûû 
[
ûû 	
$str
ûû	 
]
ûû 
=
ûû 
reader
ûû 
[
ûû  
$str
ûû  ,
]
ûû, -
;
ûû- .
row
üü 
[
üü 	
$str
üü	 
]
üü 
=
üü 
reader
üü 
[
üü 
$str
üü (
]
üü( )
;
üü) *

categories
°° 
.
°° 
Rows
°° 
.
°° 
Add
°° 
(
°° 
row
°° 
)
°° 
;
°° 
}
¢¢ 
}
§§ 

categories
¶¶ 
.
¶¶ 
	TableName
¶¶ 
=
¶¶ 
$str
¶¶ &
;
¶¶& '
dataSet
ßß 

.
ßß
 
Tables
ßß 
.
ßß 
Add
ßß 
(
ßß 

categories
ßß  
)
ßß  !
;
ßß! "
try
™™ 
{
´´ 
dataSet
¨¨ 
.
¨¨ 
	Relations
¨¨ 
.
¨¨ 
Add
¨¨ 
(
¨¨ 
$str
¨¨ *
,
¨¨* +
dataSet
≠≠ 
.
≠≠ 
Tables
≠≠ 
[
≠≠ 
$str
≠≠ 
]
≠≠ 
.
≠≠ 
Columns
≠≠ $
[
≠≠$ %
$str
≠≠% -
]
≠≠- .
,
≠≠. /
dataSet
ÆÆ 
.
ÆÆ 
Tables
ÆÆ 
[
ÆÆ 
$str
ÆÆ  
]
ÆÆ  !
.
ÆÆ! "
Columns
ÆÆ" )
[
ÆÆ) *
$str
ÆÆ* 2
]
ÆÆ2 3
)
ÆÆ3 4
;
ÆÆ4 5
}
ØØ 
catch
∞∞ 
(
∞∞	 

System
∞∞
 
.
∞∞ 
Data
∞∞ 
.
∞∞ !
ConstraintException
∞∞ )
)
∞∞) *
{
∞∞+ ,
}
∞∞- .
catch
±± 
(
±±	 

ArgumentException
±±
 
)
±± 
{
±± 
}
±±  
	DataTable
≥≥ 
attachments
≥≥ 
=
≥≥ *
GetAttachmentsTableStructure
≥≥ 7
(
≥≥7 8
)
≥≥8 9
;
≥≥9 :
using
µµ 
(
µµ	 

IDataReader
µµ
 
reader
µµ 
=
µµ 
DBBlog
µµ %
.
µµ% &#
GetAttachmentsForPage
µµ& ;
(
µµ; <
month
µµ< A
,
µµA B
year
µµC G
,
µµG H
moduleId
µµI Q
,
µµQ R
DateTime
µµS [
.
µµ[ \
UtcNow
µµ\ b
,
µµb c

pageNumber
µµd n
,
µµn o
pageSize
µµp x
)
µµx y
)
µµy z
{
∂∂ 
while
∑∑ 	
(
∑∑
 
reader
∑∑ 
.
∑∑ 
Read
∑∑ 
(
∑∑ 
)
∑∑ 
)
∑∑ 
{
∏∏ 
DataRow
∫∫ 
row
∫∫ 
=
∫∫ 
attachments
∫∫ 
.
∫∫ 
NewRow
∫∫ %
(
∫∫% &
)
∫∫& '
;
∫∫' (
row
ºº 
[
ºº 	
$str
ºº	 
]
ºº 
=
ºº 
reader
ºº 
[
ºº 
$str
ºº &
]
ºº& '
;
ºº' (
row
ΩΩ 
[
ΩΩ 	
$str
ΩΩ	 
]
ΩΩ 
=
ΩΩ 
reader
ΩΩ 
[
ΩΩ 
$str
ΩΩ (
]
ΩΩ( )
;
ΩΩ) *
row
ææ 
[
ææ 	
$str
ææ	 
]
ææ 
=
ææ 
reader
ææ 
[
ææ 
$str
ææ (
]
ææ( )
;
ææ) *
row
øø 
[
øø 	
$str
øø	 
]
øø 
=
øø 
reader
øø #
[
øø# $
$str
øø$ 4
]
øø4 5
;
øø5 6
row
¿¿ 
[
¿¿ 	
$str
¿¿	 
]
¿¿ 
=
¿¿ 
Convert
¿¿ #
.
¿¿# $
ToInt64
¿¿$ +
(
¿¿+ ,
reader
¿¿, 2
[
¿¿2 3
$str
¿¿3 B
]
¿¿B C
)
¿¿C D
;
¿¿D E
row
¡¡ 
[
¡¡ 	
$str
¡¡	 
]
¡¡ 
=
¡¡ 
reader
¡¡  
[
¡¡  !
$str
¡¡! .
]
¡¡. /
;
¡¡/ 0
if
√√ 
(
√√ 	
reader
√√	 
[
√√ 
$str
√√ "
]
√√" #
!=
√√$ &
DBNull
√√' -
.
√√- .
Value
√√. 3
)
√√3 4
{
ƒƒ 
row
≈≈ 	
[
≈≈	 

$str
≈≈
 
]
≈≈ 
=
≈≈ 
Convert
≈≈  '
.
≈≈' (
	ToBoolean
≈≈( 1
(
≈≈1 2
reader
≈≈2 8
[
≈≈8 9
$str
≈≈9 K
]
≈≈K L
)
≈≈L M
;
≈≈M N
}
∆∆ 
else
«« 	
{
»» 
row
…… 	
[
……	 

$str
……
 
]
…… 
=
…… 
false
……  %
;
……% &
}
   
attachments
ÃÃ 
.
ÃÃ 
Rows
ÃÃ 
.
ÃÃ 
Add
ÃÃ 
(
ÃÃ 
row
ÃÃ 
)
ÃÃ 
;
ÃÃ 
}
ÕÕ 
}
œœ 
attachments
—— 
.
—— 
	TableName
—— 
=
—— 
$str
—— (
;
——( )
dataSet
““ 

.
““
 
Tables
““ 
.
““ 
Add
““ 
(
““ 
attachments
““ !
)
““! "
;
““" #
try
’’ 
{
÷÷ 
dataSet
◊◊ 
.
◊◊ 
	Relations
◊◊ 
.
◊◊ 
Add
◊◊ 
(
◊◊ 
$str
◊◊ +
,
◊◊+ ,
dataSet
ÿÿ 
.
ÿÿ 
Tables
ÿÿ 
[
ÿÿ 
$str
ÿÿ 
]
ÿÿ 
.
ÿÿ 
Columns
ÿÿ $
[
ÿÿ$ %
$str
ÿÿ% /
]
ÿÿ/ 0
,
ÿÿ0 1
dataSet
ŸŸ 
.
ŸŸ 
Tables
ŸŸ 
[
ŸŸ 
$str
ŸŸ !
]
ŸŸ! "
.
ŸŸ" #
Columns
ŸŸ# *
[
ŸŸ* +
$str
ŸŸ+ 5
]
ŸŸ5 6
)
ŸŸ6 7
;
ŸŸ7 8
}
⁄⁄ 
catch
€€ 
(
€€	 

System
€€
 
.
€€ 
Data
€€ 
.
€€ !
ConstraintException
€€ )
)
€€) *
{
€€+ ,
}
€€- .
catch
‹‹ 
(
‹‹	 

ArgumentException
‹‹
 
)
‹‹ 
{
‹‹ 
}
‹‹  
return
ﬂﬂ 	
dataSet
ﬂﬂ
 
;
ﬂﬂ 
}
‡‡ 
public
‚‚ 
static
‚‚	 
DataSet
‚‚ &
GetBlogEntriesByCategory
‚‚ 0
(
‚‚0 1
int
„„ 
moduleId
„„ 
,
„„ 
int
‰‰ 

categoryId
‰‰ 
,
‰‰ 
DateTime
ÂÂ 
currentTime
ÂÂ 
,
ÂÂ 
int
ÊÊ 

pageNumber
ÊÊ 
,
ÊÊ 
int
ÁÁ 
pageSize
ÁÁ 
,
ÁÁ 
out
ËË 
int
ËË 


totalPages
ËË 
)
ËË 
{
ÈÈ 
DataSet
ÍÍ 

dataSet
ÍÍ 
=
ÍÍ 
new
ÍÍ 
DataSet
ÍÍ  
(
ÍÍ  !
)
ÍÍ! "
;
ÍÍ" #
	DataTable
ÏÏ 
posts
ÏÏ 
=
ÏÏ $
GetPostsTableStructure
ÏÏ +
(
ÏÏ+ ,
)
ÏÏ, -
;
ÏÏ- .
using
ÓÓ 
(
ÓÓ	 

IDataReader
ÓÓ
 
reader
ÓÓ 
=
ÓÓ 
DBBlog
ÓÓ %
.
ÓÓ% &"
GetEntriesByCategory
ÓÓ& :
(
ÓÓ: ;
moduleId
ÓÓ; C
,
ÓÓC D

categoryId
ÓÓE O
,
ÓÓO P
currentTime
ÓÓQ \
,
ÓÓ\ ]

pageNumber
ÓÓ^ h
,
ÓÓh i
pageSize
ÓÓj r
,
ÓÓr s
out
ÓÓt w

totalPagesÓÓx Ç
)ÓÓÇ É
)ÓÓÉ Ñ
{
ÔÔ 
while
 	
(

 
reader
 
.
 
Read
 
(
 
)
 
)
 
{
ÒÒ 
DataRow
ÛÛ 
row
ÛÛ 
=
ÛÛ 
posts
ÛÛ 
.
ÛÛ 
NewRow
ÛÛ 
(
ÛÛ  
)
ÛÛ  !
;
ÛÛ! "
row
ˆˆ 
[
ˆˆ 	
$str
ˆˆ	 
]
ˆˆ 
=
ˆˆ 
Convert
ˆˆ 
.
ˆˆ 
ToInt32
ˆˆ $
(
ˆˆ$ %
reader
ˆˆ% +
[
ˆˆ+ ,
$str
ˆˆ, 4
]
ˆˆ4 5
)
ˆˆ5 6
;
ˆˆ6 7
row
˜˜ 
[
˜˜ 	
$str
˜˜	 
]
˜˜ 
=
˜˜ 
Convert
˜˜ 
.
˜˜ 
ToInt32
˜˜ &
(
˜˜& '
reader
˜˜' -
[
˜˜- .
$str
˜˜. 8
]
˜˜8 9
)
˜˜9 :
;
˜˜: ;
row
¯¯ 
[
¯¯ 	
$str
¯¯	 
]
¯¯ 
=
¯¯ 
reader
¯¯ 
[
¯¯ 
$str
¯¯ (
]
¯¯( )
.
¯¯) *
ToString
¯¯* 2
(
¯¯2 3
)
¯¯3 4
;
¯¯4 5
row
˘˘ 
[
˘˘ 	
$str
˘˘	 
]
˘˘ 
=
˘˘ 
Convert
˘˘ !
.
˘˘! "

ToDateTime
˘˘" ,
(
˘˘, -
reader
˘˘- 3
[
˘˘3 4
$str
˘˘4 A
]
˘˘A B
)
˘˘B C
;
˘˘C D
row
˙˙ 
[
˙˙ 	
$str
˙˙	 
]
˙˙ 
=
˙˙ 
reader
˙˙ 
[
˙˙ 
$str
˙˙ &
]
˙˙& '
;
˙˙' (
row
˚˚ 
[
˚˚ 	
$str
˚˚	 
]
˚˚ 
=
˚˚ 
reader
˚˚ 
[
˚˚ 
$str
˚˚ (
]
˚˚( )
;
˚˚) *
row
¸¸ 
[
¸¸ 	
$str
¸¸	 
]
¸¸ 
=
¸¸ 
Convert
¸¸ 
.
¸¸  

ToDateTime
¸¸  *
(
¸¸* +
reader
¸¸+ 1
[
¸¸1 2
$str
¸¸2 =
]
¸¸= >
)
¸¸> ?
;
¸¸? @
row
˝˝ 
[
˝˝ 	
$str
˝˝	 
]
˝˝ 
=
˝˝ 
reader
˝˝  
[
˝˝  !
$str
˝˝! .
]
˝˝. /
;
˝˝/ 0
row
˛˛ 
[
˛˛ 	
$str
˛˛	 
]
˛˛ 
=
˛˛ 
reader
˛˛ 
[
˛˛ 
$str
˛˛ (
]
˛˛( )
;
˛˛) *
row
ˇˇ 
[
ˇˇ 	
$str
ˇˇ	 
]
ˇˇ 
=
ˇˇ 
reader
ˇˇ 
[
ˇˇ 
$str
ˇˇ &
]
ˇˇ& '
;
ˇˇ' (
row
ÄÄ 
[
ÄÄ 	
$str
ÄÄ	 
]
ÄÄ 
=
ÄÄ 
reader
ÄÄ 
[
ÄÄ 
$str
ÄÄ (
]
ÄÄ( )
;
ÄÄ) *
row
ÅÅ 
[
ÅÅ 	
$str
ÅÅ	 
]
ÅÅ 
=
ÅÅ 
reader
ÅÅ !
[
ÅÅ! "
$str
ÅÅ" 0
]
ÅÅ0 1
;
ÅÅ1 2
row
ÇÇ 
[
ÇÇ 	
$str
ÇÇ	 
]
ÇÇ 
=
ÇÇ 
reader
ÇÇ $
[
ÇÇ$ %
$str
ÇÇ% 6
]
ÇÇ6 7
;
ÇÇ7 8
row
ÉÉ 
[
ÉÉ 	
$str
ÉÉ	 
]
ÉÉ 
=
ÉÉ 
Convert
ÉÉ  
.
ÉÉ  !

ToDateTime
ÉÉ! +
(
ÉÉ+ ,
reader
ÉÉ, 2
[
ÉÉ2 3
$str
ÉÉ3 ?
]
ÉÉ? @
)
ÉÉ@ A
;
ÉÉA B
row
ÑÑ 
[
ÑÑ 	
$str
ÑÑ	 
]
ÑÑ 
=
ÑÑ 
true
ÑÑ 
;
ÑÑ 
row
ÖÖ 
[
ÖÖ 	
$str
ÖÖ	 
]
ÖÖ 
=
ÖÖ 
Convert
ÖÖ #
.
ÖÖ# $
	ToBoolean
ÖÖ$ -
(
ÖÖ- .
reader
ÖÖ. 4
[
ÖÖ4 5
$str
ÖÖ5 D
]
ÖÖD E
)
ÖÖE F
;
ÖÖF G
row
ÜÜ 
[
ÜÜ 	
$str
ÜÜ	 
]
ÜÜ 
=
ÜÜ 
Convert
ÜÜ "
.
ÜÜ" #
ToInt32
ÜÜ# *
(
ÜÜ* +
reader
ÜÜ+ 1
[
ÜÜ1 2
$str
ÜÜ2 @
]
ÜÜ@ A
)
ÜÜA B
;
ÜÜB C
row
áá 
[
áá 	
$str
áá	 
]
áá 
=
áá 
Convert
áá 
.
áá 
ToInt32
áá $
(
áá$ %
reader
áá% +
[
áá+ ,
$str
áá, 4
]
áá4 5
)
áá5 6
;
áá6 7
row
àà 
[
àà 	
$str
àà	 
]
àà 
=
àà 
reader
àà 
[
àà 
$str
àà  
]
àà  !
;
àà! "
row
ââ 
[
ââ 	
$str
ââ	 
]
ââ 
=
ââ 
reader
ââ 
[
ââ 
$str
ââ *
]
ââ* +
;
ââ+ ,
row
ää 
[
ää 	
$str
ää	 
]
ää 
=
ää 
reader
ää 
[
ää 
$str
ää (
]
ää( )
;
ää) *
row
ãã 
[
ãã 	
$str
ãã	 
]
ãã 
=
ãã 
reader
ãã 
[
ãã 
$str
ãã *
]
ãã* +
;
ãã+ ,
row
åå 
[
åå 	
$str
åå	 
]
åå 
=
åå 
reader
åå 
[
åå 
$str
åå "
]
åå" #
;
åå# $
row
çç 
[
çç 	
$str
çç	 
]
çç 
=
çç 
reader
çç 
[
çç 
$str
çç *
]
çç* +
;
çç+ ,
row
éé 
[
éé 	
$str
éé	 
]
éé 
=
éé 
reader
éé 
[
éé 
$str
éé *
]
éé* +
;
éé+ ,
if
ëë 
(
ëë 	
reader
ëë	 
[
ëë 
$str
ëë  
]
ëë  !
!=
ëë" $
DBNull
ëë% +
.
ëë+ ,
Value
ëë, 1
)
ëë1 2
{
íí 
row
ìì 	
[
ìì	 

$str
ìì
 
]
ìì 
=
ìì 
Convert
ìì %
.
ìì% &
	ToBoolean
ìì& /
(
ìì/ 0
reader
ìì0 6
[
ìì6 7
$str
ìì7 G
]
ììG H
)
ììH I
;
ììI J
}
îî 
else
ïï 	
{
ññ 
row
óó 	
[
óó	 

$str
óó
 
]
óó 
=
óó 
true
óó "
;
óó" #
}
òò 
if
öö 
(
öö 	
reader
öö	 
[
öö 
$str
öö "
]
öö" #
!=
öö$ &
DBNull
öö' -
.
öö- .
Value
öö. 3
)
öö3 4
{
õõ 
row
úú 	
[
úú	 

$str
úú
 
]
úú 
=
úú 
Convert
úú  '
.
úú' (
	ToBoolean
úú( 1
(
úú1 2
reader
úú2 8
[
úú8 9
$str
úú9 K
]
úúK L
)
úúL M
;
úúM N
}
ùù 
else
ûû 	
{
üü 
row
†† 	
[
††	 

$str
††
 
]
†† 
=
†† 
true
††  $
;
††$ %
}
°° 
if
££ 
(
££ 	
reader
££	 
[
££ 
$str
££ 
]
££  
!=
££! #
DBNull
££$ *
.
££* +
Value
££+ 0
)
££0 1
{
§§ 
row
•• 	
[
••	 

$str
••
 
]
•• 
=
•• 
Convert
•• $
.
••$ %
	ToBoolean
••% .
(
••. /
reader
••/ 5
[
••5 6
$str
••6 E
]
••E F
)
••F G
;
••G H
}
¶¶ 
else
ßß 	
{
®® 
row
©© 	
[
©©	 

$str
©©
 
]
©© 
=
©© 
true
©© !
;
©©! "
}
™™ 
if
¨¨ 
(
¨¨ 	
reader
¨¨	 
[
¨¨ 
$str
¨¨ 
]
¨¨ 
!=
¨¨  
DBNull
¨¨! '
.
¨¨' (
Value
¨¨( -
)
¨¨- .
{
≠≠ 
row
ÆÆ 	
[
ÆÆ	 

$str
ÆÆ
 
]
ÆÆ 
=
ÆÆ 
Convert
ÆÆ !
.
ÆÆ! "
	ToBoolean
ÆÆ" +
(
ÆÆ+ ,
reader
ÆÆ, 2
[
ÆÆ2 3
$str
ÆÆ3 ?
]
ÆÆ? @
)
ÆÆ@ A
;
ÆÆA B
}
ØØ 
else
∞∞ 	
{
±± 
row
≤≤ 	
[
≤≤	 

$str
≤≤
 
]
≤≤ 
=
≤≤ 
false
≤≤ 
;
≤≤  
}
≥≥ 
row
µµ 
[
µµ 	
$str
µµ	 
]
µµ 
=
µµ 
reader
µµ 
[
µµ 
$str
µµ *
]
µµ* +
;
µµ+ ,
row
∂∂ 
[
∂∂ 	
$str
∂∂	 
]
∂∂ 
=
∂∂ 
reader
∂∂ 
[
∂∂ 
$str
∂∂ (
]
∂∂( )
;
∂∂) *
row
∑∑ 
[
∑∑ 	
$str
∑∑	 
]
∑∑ 
=
∑∑ 
reader
∑∑ 
[
∑∑ 
$str
∑∑ &
]
∑∑& '
;
∑∑' (
if
ππ 
(
ππ 	
reader
ππ	 
[
ππ 
$str
ππ 
]
ππ 
!=
ππ 
DBNull
ππ $
.
ππ$ %
Value
ππ% *
)
ππ* +
{
∫∫ 
row
ªª 	
[
ªª	 

$str
ªª
 
]
ªª 
=
ªª 
Convert
ªª 
.
ªª 
ToInt32
ªª &
(
ªª& '
reader
ªª' -
[
ªª- .
$str
ªª. 7
]
ªª7 8
)
ªª8 9
;
ªª9 :
}
ºº 
else
ΩΩ 	
{
ææ 
row
øø 	
[
øø	 

$str
øø
 
]
øø 
=
øø 
$num
øø 
;
øø 
}
¿¿ 
if
¬¬ 
(
¬¬ 	
reader
¬¬	 
[
¬¬ 
$str
¬¬  
]
¬¬  !
!=
¬¬" $
DBNull
¬¬% +
.
¬¬+ ,
Value
¬¬, 1
)
¬¬1 2
{
√√ 
row
ƒƒ 	
[
ƒƒ	 

$str
ƒƒ
 
]
ƒƒ 
=
ƒƒ 
Convert
ƒƒ %
.
ƒƒ% &
	ToBoolean
ƒƒ& /
(
ƒƒ/ 0
reader
ƒƒ0 6
[
ƒƒ6 7
$str
ƒƒ7 G
]
ƒƒG H
)
ƒƒH I
;
ƒƒI J
}
≈≈ 
else
∆∆ 	
{
«« 
row
»» 	
[
»»	 

$str
»»
 
]
»» 
=
»» 
false
»» #
;
»»# $
}
…… 
if
ÀÀ 
(
ÀÀ 	
reader
ÀÀ	 
[
ÀÀ 
$str
ÀÀ 
]
ÀÀ 
!=
ÀÀ  "
DBNull
ÀÀ# )
.
ÀÀ) *
Value
ÀÀ* /
)
ÀÀ/ 0
{
ÃÃ 
row
ÕÕ 	
[
ÕÕ	 

$str
ÕÕ
 
]
ÕÕ 
=
ÕÕ 
Convert
ÕÕ #
.
ÕÕ# $
	ToBoolean
ÕÕ$ -
(
ÕÕ- .
reader
ÕÕ. 4
[
ÕÕ4 5
$str
ÕÕ5 C
]
ÕÕC D
)
ÕÕD E
;
ÕÕE F
}
ŒŒ 
else
œœ 	
{
–– 
row
—— 	
[
——	 

$str
——
 
]
—— 
=
—— 
false
—— !
;
——! "
}
““ 
if
‘‘ 
(
‘‘ 	
reader
‘‘	 
[
‘‘ 
$str
‘‘ "
]
‘‘" #
!=
‘‘$ &
DBNull
‘‘' -
.
‘‘- .
Value
‘‘. 3
)
‘‘3 4
{
’’ 
row
÷÷ 	
[
÷÷	 

$str
÷÷
 
]
÷÷ 
=
÷÷ 
Convert
÷÷  '
.
÷÷' (
	ToBoolean
÷÷( 1
(
÷÷1 2
reader
÷÷2 8
[
÷÷8 9
$str
÷÷9 K
]
÷÷K L
)
÷÷L M
;
÷÷M N
}
◊◊ 
else
ÿÿ 	
{
ŸŸ 
row
⁄⁄ 	
[
⁄⁄	 

$str
⁄⁄
 
]
⁄⁄ 
=
⁄⁄ 
false
⁄⁄  %
;
⁄⁄% &
}
€€ 
if
›› 
(
›› 	
reader
››	 
[
›› 
$str
›› &
]
››& '
!=
››( *
DBNull
››+ 1
.
››1 2
Value
››2 7
)
››7 8
{
ﬁﬁ 
row
ﬂﬂ 	
[
ﬂﬂ	 

$str
ﬂﬂ
  
]
ﬂﬂ  !
=
ﬂﬂ" #
Convert
ﬂﬂ$ +
.
ﬂﬂ+ ,
	ToBoolean
ﬂﬂ, 5
(
ﬂﬂ5 6
reader
ﬂﬂ6 <
[
ﬂﬂ< =
$str
ﬂﬂ= S
]
ﬂﬂS T
)
ﬂﬂT U
;
ﬂﬂU V
}
‡‡ 
else
·· 	
{
‚‚ 
row
„„ 	
[
„„	 

$str
„„
  
]
„„  !
=
„„" #
false
„„$ )
;
„„) *
}
‰‰ 
if
ÊÊ 
(
ÊÊ 	
reader
ÊÊ	 
[
ÊÊ 
$str
ÊÊ "
]
ÊÊ" #
!=
ÊÊ$ &
DBNull
ÊÊ' -
.
ÊÊ- .
Value
ÊÊ. 3
)
ÊÊ3 4
{
ÁÁ 
row
ËË 	
[
ËË	 

$str
ËË
 
]
ËË 
=
ËË 
Convert
ËË  '
.
ËË' (
	ToBoolean
ËË( 1
(
ËË1 2
reader
ËË2 8
[
ËË8 9
$str
ËË9 K
]
ËËK L
)
ËËL M
;
ËËM N
}
ÈÈ 
else
ÍÍ 	
{
ÎÎ 
row
ÏÏ 	
[
ÏÏ	 

$str
ÏÏ
 
]
ÏÏ 
=
ÏÏ 
false
ÏÏ  %
;
ÏÏ% &
}
ÌÌ 
row
ÔÔ 
[
ÔÔ 	
$str
ÔÔ	 
]
ÔÔ 
=
ÔÔ 
reader
ÔÔ %
[
ÔÔ% &
$str
ÔÔ& 8
]
ÔÔ8 9
;
ÔÔ9 :
if
ÒÒ 
(
ÒÒ 	
reader
ÒÒ	 
[
ÒÒ 
$str
ÒÒ '
]
ÒÒ' (
!=
ÒÒ) +
DBNull
ÒÒ, 2
.
ÒÒ2 3
Value
ÒÒ3 8
)
ÒÒ8 9
{
ÚÚ 
row
ÛÛ 	
[
ÛÛ	 

$str
ÛÛ
 !
]
ÛÛ! "
=
ÛÛ# $
Convert
ÛÛ% ,
.
ÛÛ, -
	ToBoolean
ÛÛ- 6
(
ÛÛ6 7
reader
ÛÛ7 =
[
ÛÛ= >
$str
ÛÛ> U
]
ÛÛU V
)
ÛÛV W
;
ÛÛW X
}
ÙÙ 
else
ıı 	
{
ˆˆ 
row
˜˜ 	
[
˜˜	 

$str
˜˜
 !
]
˜˜! "
=
˜˜# $
true
˜˜% )
;
˜˜) *
}
¯¯ 
if
˚˚ 
(
˚˚ 	
reader
˚˚	 
[
˚˚ 
$str
˚˚ $
]
˚˚$ %
!=
˚˚& (
DBNull
˚˚) /
.
˚˚/ 0
Value
˚˚0 5
)
˚˚5 6
{
¸¸ 
row
˝˝ 	
[
˝˝	 

$str
˝˝
 
]
˝˝ 
=
˝˝  !
Convert
˝˝" )
.
˝˝) *
	ToBoolean
˝˝* 3
(
˝˝3 4
reader
˝˝4 :
[
˝˝: ;
$str
˝˝; O
]
˝˝O P
)
˝˝P Q
;
˝˝Q R
}
˛˛ 
else
ˇˇ 	
{
ÄÄ 
row
ÅÅ 	
[
ÅÅ	 

$str
ÅÅ
 
]
ÅÅ 
=
ÅÅ  !
true
ÅÅ" &
;
ÅÅ& '
}
ÇÇ 
posts
ÖÖ 

.
ÖÖ
 
Rows
ÖÖ 
.
ÖÖ 
Add
ÖÖ 
(
ÖÖ 
row
ÖÖ 
)
ÖÖ 
;
ÖÖ 
}
ÜÜ 
}
áá 
posts
ââ 
.
ââ 	
	TableName
ââ	 
=
ââ 
$str
ââ 
;
ââ 
dataSet
ää 

.
ää
 
Tables
ää 
.
ää 
Add
ää 
(
ää 
posts
ää 
)
ää 
;
ää 
	DataTable
åå 

categories
åå 
=
åå '
GetCategoryTableStructure
åå 3
(
åå3 4
)
åå4 5
;
åå5 6
using
éé 
(
éé	 

IDataReader
éé
 
reader
éé 
=
éé 
DBBlog
éé %
.
éé% &"
GetCategoriesForPage
éé& :
(
éé: ;
moduleId
éé; C
,
ééC D

categoryId
ééE O
,
ééO P
DateTime
ééQ Y
.
ééY Z
UtcNow
ééZ `
,
éé` a

pageNumber
ééb l
,
éél m
pageSize
één v
)
éév w
)
ééw x
{
èè 
while
êê 	
(
êê
 
reader
êê 
.
êê 
Read
êê 
(
êê 
)
êê 
)
êê 
{
ëë 
DataRow
ìì 
row
ìì 
=
ìì 

categories
ìì 
.
ìì 
NewRow
ìì $
(
ìì$ %
)
ìì% &
;
ìì& '
row
ïï 
[
ïï 	
$str
ïï	 
]
ïï 
=
ïï 
reader
ïï 
[
ïï 
$str
ïï 
]
ïï 
;
ïï 
row
ññ 
[
ññ 	
$str
ññ	 
]
ññ 
=
ññ 
reader
ññ 
[
ññ 
$str
ññ $
]
ññ$ %
;
ññ% &
row
óó 
[
óó 	
$str
óó	 
]
óó 
=
óó 
reader
óó 
[
óó  
$str
óó  ,
]
óó, -
;
óó- .
row
òò 
[
òò 	
$str
òò	 
]
òò 
=
òò 
reader
òò 
[
òò 
$str
òò (
]
òò( )
;
òò) *

categories
öö 
.
öö 
Rows
öö 
.
öö 
Add
öö 
(
öö 
row
öö 
)
öö 
;
öö 
}
õõ 
}
ùù 

categories
üü 
.
üü 
	TableName
üü 
=
üü 
$str
üü &
;
üü& '
dataSet
†† 

.
††
 
Tables
†† 
.
†† 
Add
†† 
(
†† 

categories
††  
)
††  !
;
††! "
try
££ 
{
§§ 
dataSet
•• 
.
•• 
	Relations
•• 
.
•• 
Add
•• 
(
•• 
$str
•• *
,
••* +
dataSet
¶¶ 
.
¶¶ 
Tables
¶¶ 
[
¶¶ 
$str
¶¶ 
]
¶¶ 
.
¶¶ 
Columns
¶¶ $
[
¶¶$ %
$str
¶¶% -
]
¶¶- .
,
¶¶. /
dataSet
ßß 
.
ßß 
Tables
ßß 
[
ßß 
$str
ßß  
]
ßß  !
.
ßß! "
Columns
ßß" )
[
ßß) *
$str
ßß* 2
]
ßß2 3
)
ßß3 4
;
ßß4 5
}
®® 
catch
©© 
(
©©	 

System
©©
 
.
©© 
Data
©© 
.
©© !
ConstraintException
©© )
)
©©) *
{
©©+ ,
}
©©- .
catch
™™ 
(
™™	 

ArgumentException
™™
 
)
™™ 
{
™™ 
}
™™  
	DataTable
¨¨ 
attachments
¨¨ 
=
¨¨ *
GetAttachmentsTableStructure
¨¨ 7
(
¨¨7 8
)
¨¨8 9
;
¨¨9 :
using
ÆÆ 
(
ÆÆ	 

IDataReader
ÆÆ
 
reader
ÆÆ 
=
ÆÆ 
DBBlog
ÆÆ %
.
ÆÆ% &#
GetAttachmentsForPage
ÆÆ& ;
(
ÆÆ; <
moduleId
ÆÆ< D
,
ÆÆD E

categoryId
ÆÆF P
,
ÆÆP Q
DateTime
ÆÆR Z
.
ÆÆZ [
UtcNow
ÆÆ[ a
,
ÆÆa b

pageNumber
ÆÆc m
,
ÆÆm n
pageSize
ÆÆo w
)
ÆÆw x
)
ÆÆx y
{
ØØ 
while
∞∞ 	
(
∞∞
 
reader
∞∞ 
.
∞∞ 
Read
∞∞ 
(
∞∞ 
)
∞∞ 
)
∞∞ 
{
±± 
DataRow
≥≥ 
row
≥≥ 
=
≥≥ 
attachments
≥≥ 
.
≥≥ 
NewRow
≥≥ %
(
≥≥% &
)
≥≥& '
;
≥≥' (
row
µµ 
[
µµ 	
$str
µµ	 
]
µµ 
=
µµ 
reader
µµ 
[
µµ 
$str
µµ &
]
µµ& '
;
µµ' (
row
∂∂ 
[
∂∂ 	
$str
∂∂	 
]
∂∂ 
=
∂∂ 
reader
∂∂ 
[
∂∂ 
$str
∂∂ (
]
∂∂( )
;
∂∂) *
row
∑∑ 
[
∑∑ 	
$str
∑∑	 
]
∑∑ 
=
∑∑ 
reader
∑∑ 
[
∑∑ 
$str
∑∑ (
]
∑∑( )
;
∑∑) *
row
∏∏ 
[
∏∏ 	
$str
∏∏	 
]
∏∏ 
=
∏∏ 
reader
∏∏ #
[
∏∏# $
$str
∏∏$ 4
]
∏∏4 5
;
∏∏5 6
row
ππ 
[
ππ 	
$str
ππ	 
]
ππ 
=
ππ 
Convert
ππ #
.
ππ# $
ToInt64
ππ$ +
(
ππ+ ,
reader
ππ, 2
[
ππ2 3
$str
ππ3 B
]
ππB C
)
ππC D
;
ππD E
row
∫∫ 
[
∫∫ 	
$str
∫∫	 
]
∫∫ 
=
∫∫ 
reader
∫∫  
[
∫∫  !
$str
∫∫! .
]
∫∫. /
;
∫∫/ 0
if
ºº 
(
ºº 	
reader
ºº	 
[
ºº 
$str
ºº "
]
ºº" #
!=
ºº$ &
DBNull
ºº' -
.
ºº- .
Value
ºº. 3
)
ºº3 4
{
ΩΩ 
row
ææ 	
[
ææ	 

$str
ææ
 
]
ææ 
=
ææ 
Convert
ææ  '
.
ææ' (
	ToBoolean
ææ( 1
(
ææ1 2
reader
ææ2 8
[
ææ8 9
$str
ææ9 K
]
ææK L
)
ææL M
;
ææM N
}
øø 
else
¿¿ 	
{
¡¡ 
row
¬¬ 	
[
¬¬	 

$str
¬¬
 
]
¬¬ 
=
¬¬ 
false
¬¬  %
;
¬¬% &
}
√√ 
attachments
≈≈ 
.
≈≈ 
Rows
≈≈ 
.
≈≈ 
Add
≈≈ 
(
≈≈ 
row
≈≈ 
)
≈≈ 
;
≈≈ 
}
∆∆ 
}
»» 
attachments
   
.
   
	TableName
   
=
   
$str
   (
;
  ( )
dataSet
ÀÀ 

.
ÀÀ
 
Tables
ÀÀ 
.
ÀÀ 
Add
ÀÀ 
(
ÀÀ 
attachments
ÀÀ !
)
ÀÀ! "
;
ÀÀ" #
try
ŒŒ 
{
œœ 
dataSet
–– 
.
–– 
	Relations
–– 
.
–– 
Add
–– 
(
–– 
$str
–– +
,
––+ ,
dataSet
—— 
.
—— 
Tables
—— 
[
—— 
$str
—— 
]
—— 
.
—— 
Columns
—— $
[
——$ %
$str
——% /
]
——/ 0
,
——0 1
dataSet
““ 
.
““ 
Tables
““ 
[
““ 
$str
““ !
]
““! "
.
““" #
Columns
““# *
[
““* +
$str
““+ 5
]
““5 6
)
““6 7
;
““7 8
}
”” 
catch
‘‘ 
(
‘‘	 

System
‘‘
 
.
‘‘ 
Data
‘‘ 
.
‘‘ !
ConstraintException
‘‘ )
)
‘‘) *
{
‘‘+ ,
}
‘‘- .
catch
’’ 
(
’’	 

ArgumentException
’’
 
)
’’ 
{
’’ 
}
’’  
return
ÿÿ 	
dataSet
ÿÿ
 
;
ÿÿ 
}
ŸŸ 
public
€€ 
static
€€	 
DataSet
€€ 
GetClosedDataSet
€€ (
(
€€( )
int
‹‹ 
moduleId
‹‹ 
,
‹‹ 
int
›› 

pageNumber
›› 
,
›› 
int
ﬁﬁ 
pageSize
ﬁﬁ 
,
ﬁﬁ 
out
ﬂﬂ 
int
ﬂﬂ 


totalPages
ﬂﬂ 
)
ﬂﬂ 
{
‡‡ 
DataSet
·· 

dataSet
·· 
=
·· 
new
·· 
DataSet
··  
(
··  !
)
··! "
;
··" #
	DataTable
„„ 
posts
„„ 
=
„„ $
GetPostsTableStructure
„„ +
(
„„+ ,
)
„„, -
;
„„- .
using
ÂÂ 
(
ÂÂ	 

IDataReader
ÂÂ
 
reader
ÂÂ 
=
ÂÂ 
DBBlog
ÂÂ %
.
ÂÂ% &
	GetClosed
ÂÂ& /
(
ÂÂ/ 0
moduleId
ÂÂ0 8
,
ÂÂ8 9
DateTime
ÂÂ: B
.
ÂÂB C
UtcNow
ÂÂC I
,
ÂÂI J

pageNumber
ÂÂK U
,
ÂÂU V
pageSize
ÂÂW _
,
ÂÂ_ `
out
ÂÂa d

totalPages
ÂÂe o
)
ÂÂo p
)
ÂÂp q
{
ÊÊ 
while
ÁÁ 	
(
ÁÁ
 
reader
ÁÁ 
.
ÁÁ 
Read
ÁÁ 
(
ÁÁ 
)
ÁÁ 
)
ÁÁ 
{
ËË 
DataRow
ÍÍ 
row
ÍÍ 
=
ÍÍ 
posts
ÍÍ 
.
ÍÍ 
NewRow
ÍÍ 
(
ÍÍ  
)
ÍÍ  !
;
ÍÍ! "
row
ÌÌ 
[
ÌÌ 	
$str
ÌÌ	 
]
ÌÌ 
=
ÌÌ 
Convert
ÌÌ 
.
ÌÌ 
ToInt32
ÌÌ $
(
ÌÌ$ %
reader
ÌÌ% +
[
ÌÌ+ ,
$str
ÌÌ, 4
]
ÌÌ4 5
)
ÌÌ5 6
;
ÌÌ6 7
row
ÓÓ 
[
ÓÓ 	
$str
ÓÓ	 
]
ÓÓ 
=
ÓÓ 
Convert
ÓÓ 
.
ÓÓ 
ToInt32
ÓÓ &
(
ÓÓ& '
reader
ÓÓ' -
[
ÓÓ- .
$str
ÓÓ. 8
]
ÓÓ8 9
)
ÓÓ9 :
;
ÓÓ: ;
row
ÔÔ 
[
ÔÔ 	
$str
ÔÔ	 
]
ÔÔ 
=
ÔÔ 
reader
ÔÔ 
[
ÔÔ 
$str
ÔÔ (
]
ÔÔ( )
.
ÔÔ) *
ToString
ÔÔ* 2
(
ÔÔ2 3
)
ÔÔ3 4
;
ÔÔ4 5
row
 
[
 	
$str
	 
]
 
=
 
Convert
 !
.
! "

ToDateTime
" ,
(
, -
reader
- 3
[
3 4
$str
4 A
]
A B
)
B C
;
C D
row
ÒÒ 
[
ÒÒ 	
$str
ÒÒ	 
]
ÒÒ 
=
ÒÒ 
reader
ÒÒ 
[
ÒÒ 
$str
ÒÒ &
]
ÒÒ& '
;
ÒÒ' (
row
ÚÚ 
[
ÚÚ 	
$str
ÚÚ	 
]
ÚÚ 
=
ÚÚ 
reader
ÚÚ 
[
ÚÚ 
$str
ÚÚ (
]
ÚÚ( )
;
ÚÚ) *
row
ÛÛ 
[
ÛÛ 	
$str
ÛÛ	 
]
ÛÛ 
=
ÛÛ 
Convert
ÛÛ 
.
ÛÛ  

ToDateTime
ÛÛ  *
(
ÛÛ* +
reader
ÛÛ+ 1
[
ÛÛ1 2
$str
ÛÛ2 =
]
ÛÛ= >
)
ÛÛ> ?
;
ÛÛ? @
row
ÙÙ 
[
ÙÙ 	
$str
ÙÙ	 
]
ÙÙ 
=
ÙÙ 
Convert
ÙÙ 
.
ÙÙ 

ToDateTime
ÙÙ (
(
ÙÙ( )
reader
ÙÙ) /
[
ÙÙ/ 0
$str
ÙÙ0 9
]
ÙÙ9 :
)
ÙÙ: ;
;
ÙÙ; <
row
ıı 
[
ıı 	
$str
ıı	 
]
ıı 
=
ıı 
reader
ıı  
[
ıı  !
$str
ıı! .
]
ıı. /
;
ıı/ 0
row
ˆˆ 
[
ˆˆ 	
$str
ˆˆ	 
]
ˆˆ 
=
ˆˆ 
reader
ˆˆ 
[
ˆˆ 
$str
ˆˆ (
]
ˆˆ( )
;
ˆˆ) *
row
˜˜ 
[
˜˜ 	
$str
˜˜	 
]
˜˜ 
=
˜˜ 
reader
˜˜ 
[
˜˜ 
$str
˜˜ &
]
˜˜& '
;
˜˜' (
row
¯¯ 
[
¯¯ 	
$str
¯¯	 
]
¯¯ 
=
¯¯ 
reader
¯¯ 
[
¯¯ 
$str
¯¯ (
]
¯¯( )
;
¯¯) *
row
˘˘ 
[
˘˘ 	
$str
˘˘	 
]
˘˘ 
=
˘˘ 
reader
˘˘ !
[
˘˘! "
$str
˘˘" 0
]
˘˘0 1
;
˘˘1 2
row
˙˙ 
[
˙˙ 	
$str
˙˙	 
]
˙˙ 
=
˙˙ 
reader
˙˙ $
[
˙˙$ %
$str
˙˙% 6
]
˙˙6 7
;
˙˙7 8
row
˚˚ 
[
˚˚ 	
$str
˚˚	 
]
˚˚ 
=
˚˚ 
Convert
˚˚  
.
˚˚  !

ToDateTime
˚˚! +
(
˚˚+ ,
reader
˚˚, 2
[
˚˚2 3
$str
˚˚3 ?
]
˚˚? @
)
˚˚@ A
;
˚˚A B
row
¸¸ 
[
¸¸ 	
$str
¸¸	 
]
¸¸ 
=
¸¸ 
true
¸¸ 
;
¸¸ 
row
˝˝ 
[
˝˝ 	
$str
˝˝	 
]
˝˝ 
=
˝˝ 
Convert
˝˝ #
.
˝˝# $
	ToBoolean
˝˝$ -
(
˝˝- .
reader
˝˝. 4
[
˝˝4 5
$str
˝˝5 D
]
˝˝D E
)
˝˝E F
;
˝˝F G
row
˛˛ 
[
˛˛ 	
$str
˛˛	 
]
˛˛ 
=
˛˛ 
Convert
˛˛ "
.
˛˛" #
ToInt32
˛˛# *
(
˛˛* +
reader
˛˛+ 1
[
˛˛1 2
$str
˛˛2 @
]
˛˛@ A
)
˛˛A B
;
˛˛B C
row
ˇˇ 
[
ˇˇ 	
$str
ˇˇ	 
]
ˇˇ 
=
ˇˇ 
Convert
ˇˇ 
.
ˇˇ 
ToInt32
ˇˇ $
(
ˇˇ$ %
reader
ˇˇ% +
[
ˇˇ+ ,
$str
ˇˇ, 4
]
ˇˇ4 5
)
ˇˇ5 6
;
ˇˇ6 7
row
ÄÄ 
[
ÄÄ 	
$str
ÄÄ	 
]
ÄÄ 
=
ÄÄ 
reader
ÄÄ 
[
ÄÄ 
$str
ÄÄ  
]
ÄÄ  !
;
ÄÄ! "
row
ÅÅ 
[
ÅÅ 	
$str
ÅÅ	 
]
ÅÅ 
=
ÅÅ 
reader
ÅÅ 
[
ÅÅ 
$str
ÅÅ *
]
ÅÅ* +
;
ÅÅ+ ,
row
ÇÇ 
[
ÇÇ 	
$str
ÇÇ	 
]
ÇÇ 
=
ÇÇ 
reader
ÇÇ 
[
ÇÇ 
$str
ÇÇ (
]
ÇÇ( )
;
ÇÇ) *
row
ÉÉ 
[
ÉÉ 	
$str
ÉÉ	 
]
ÉÉ 
=
ÉÉ 
reader
ÉÉ 
[
ÉÉ 
$str
ÉÉ *
]
ÉÉ* +
;
ÉÉ+ ,
row
ÑÑ 
[
ÑÑ 	
$str
ÑÑ	 
]
ÑÑ 
=
ÑÑ 
reader
ÑÑ 
[
ÑÑ 
$str
ÑÑ "
]
ÑÑ" #
;
ÑÑ# $
row
ÖÖ 
[
ÖÖ 	
$str
ÖÖ	 
]
ÖÖ 
=
ÖÖ 
reader
ÖÖ 
[
ÖÖ 
$str
ÖÖ *
]
ÖÖ* +
;
ÖÖ+ ,
row
ÜÜ 
[
ÜÜ 	
$str
ÜÜ	 
]
ÜÜ 
=
ÜÜ 
reader
ÜÜ 
[
ÜÜ 
$str
ÜÜ *
]
ÜÜ* +
;
ÜÜ+ ,
if
ââ 
(
ââ 	
reader
ââ	 
[
ââ 
$str
ââ  
]
ââ  !
!=
ââ" $
DBNull
ââ% +
.
ââ+ ,
Value
ââ, 1
)
ââ1 2
{
ää 
row
ãã 	
[
ãã	 

$str
ãã
 
]
ãã 
=
ãã 
Convert
ãã %
.
ãã% &
	ToBoolean
ãã& /
(
ãã/ 0
reader
ãã0 6
[
ãã6 7
$str
ãã7 G
]
ããG H
)
ããH I
;
ããI J
}
åå 
else
çç 	
{
éé 
row
èè 	
[
èè	 

$str
èè
 
]
èè 
=
èè 
true
èè "
;
èè" #
}
êê 
if
íí 
(
íí 	
reader
íí	 
[
íí 
$str
íí "
]
íí" #
!=
íí$ &
DBNull
íí' -
.
íí- .
Value
íí. 3
)
íí3 4
{
ìì 
row
îî 	
[
îî	 

$str
îî
 
]
îî 
=
îî 
Convert
îî  '
.
îî' (
	ToBoolean
îî( 1
(
îî1 2
reader
îî2 8
[
îî8 9
$str
îî9 K
]
îîK L
)
îîL M
;
îîM N
}
ïï 
else
ññ 	
{
óó 
row
òò 	
[
òò	 

$str
òò
 
]
òò 
=
òò 
true
òò  $
;
òò$ %
}
ôô 
if
õõ 
(
õõ 	
reader
õõ	 
[
õõ 
$str
õõ 
]
õõ  
!=
õõ! #
DBNull
õõ$ *
.
õõ* +
Value
õõ+ 0
)
õõ0 1
{
úú 
row
ùù 	
[
ùù	 

$str
ùù
 
]
ùù 
=
ùù 
Convert
ùù $
.
ùù$ %
	ToBoolean
ùù% .
(
ùù. /
reader
ùù/ 5
[
ùù5 6
$str
ùù6 E
]
ùùE F
)
ùùF G
;
ùùG H
}
ûû 
else
üü 	
{
†† 
row
°° 	
[
°°	 

$str
°°
 
]
°° 
=
°° 
true
°° !
;
°°! "
}
¢¢ 
if
§§ 
(
§§ 	
reader
§§	 
[
§§ 
$str
§§ 
]
§§ 
!=
§§  
DBNull
§§! '
.
§§' (
Value
§§( -
)
§§- .
{
•• 
row
¶¶ 	
[
¶¶	 

$str
¶¶
 
]
¶¶ 
=
¶¶ 
Convert
¶¶ !
.
¶¶! "
	ToBoolean
¶¶" +
(
¶¶+ ,
reader
¶¶, 2
[
¶¶2 3
$str
¶¶3 ?
]
¶¶? @
)
¶¶@ A
;
¶¶A B
}
ßß 
else
®® 	
{
©© 
row
™™ 	
[
™™	 

$str
™™
 
]
™™ 
=
™™ 
false
™™ 
;
™™  
}
´´ 
row
≠≠ 
[
≠≠ 	
$str
≠≠	 
]
≠≠ 
=
≠≠ 
reader
≠≠ 
[
≠≠ 
$str
≠≠ *
]
≠≠* +
;
≠≠+ ,
row
ÆÆ 
[
ÆÆ 	
$str
ÆÆ	 
]
ÆÆ 
=
ÆÆ 
reader
ÆÆ 
[
ÆÆ 
$str
ÆÆ (
]
ÆÆ( )
;
ÆÆ) *
row
ØØ 
[
ØØ 	
$str
ØØ	 
]
ØØ 
=
ØØ 
reader
ØØ 
[
ØØ 
$str
ØØ &
]
ØØ& '
;
ØØ' (
if
±± 
(
±± 	
reader
±±	 
[
±± 
$str
±± 
]
±± 
!=
±± 
DBNull
±± $
.
±±$ %
Value
±±% *
)
±±* +
{
≤≤ 
row
≥≥ 	
[
≥≥	 

$str
≥≥
 
]
≥≥ 
=
≥≥ 
Convert
≥≥ 
.
≥≥ 
ToInt32
≥≥ &
(
≥≥& '
reader
≥≥' -
[
≥≥- .
$str
≥≥. 7
]
≥≥7 8
)
≥≥8 9
;
≥≥9 :
}
¥¥ 
else
µµ 	
{
∂∂ 
row
∑∑ 	
[
∑∑	 

$str
∑∑
 
]
∑∑ 
=
∑∑ 
$num
∑∑ 
;
∑∑ 
}
∏∏ 
if
∫∫ 
(
∫∫ 	
reader
∫∫	 
[
∫∫ 
$str
∫∫  
]
∫∫  !
!=
∫∫" $
DBNull
∫∫% +
.
∫∫+ ,
Value
∫∫, 1
)
∫∫1 2
{
ªª 
row
ºº 	
[
ºº	 

$str
ºº
 
]
ºº 
=
ºº 
Convert
ºº %
.
ºº% &
	ToBoolean
ºº& /
(
ºº/ 0
reader
ºº0 6
[
ºº6 7
$str
ºº7 G
]
ººG H
)
ººH I
;
ººI J
}
ΩΩ 
else
ææ 	
{
øø 
row
¿¿ 	
[
¿¿	 

$str
¿¿
 
]
¿¿ 
=
¿¿ 
false
¿¿ #
;
¿¿# $
}
¡¡ 
if
√√ 
(
√√ 	
reader
√√	 
[
√√ 
$str
√√ 
]
√√ 
!=
√√  "
DBNull
√√# )
.
√√) *
Value
√√* /
)
√√/ 0
{
ƒƒ 
row
≈≈ 	
[
≈≈	 

$str
≈≈
 
]
≈≈ 
=
≈≈ 
Convert
≈≈ #
.
≈≈# $
	ToBoolean
≈≈$ -
(
≈≈- .
reader
≈≈. 4
[
≈≈4 5
$str
≈≈5 C
]
≈≈C D
)
≈≈D E
;
≈≈E F
}
∆∆ 
else
«« 	
{
»» 
row
…… 	
[
……	 

$str
……
 
]
…… 
=
…… 
false
…… !
;
……! "
}
   
if
ÃÃ 
(
ÃÃ 	
reader
ÃÃ	 
[
ÃÃ 
$str
ÃÃ "
]
ÃÃ" #
!=
ÃÃ$ &
DBNull
ÃÃ' -
.
ÃÃ- .
Value
ÃÃ. 3
)
ÃÃ3 4
{
ÕÕ 
row
ŒŒ 	
[
ŒŒ	 

$str
ŒŒ
 
]
ŒŒ 
=
ŒŒ 
Convert
ŒŒ  '
.
ŒŒ' (
	ToBoolean
ŒŒ( 1
(
ŒŒ1 2
reader
ŒŒ2 8
[
ŒŒ8 9
$str
ŒŒ9 K
]
ŒŒK L
)
ŒŒL M
;
ŒŒM N
}
œœ 
else
–– 	
{
—— 
row
““ 	
[
““	 

$str
““
 
]
““ 
=
““ 
false
““  %
;
““% &
}
”” 
if
’’ 
(
’’ 	
reader
’’	 
[
’’ 
$str
’’ &
]
’’& '
!=
’’( *
DBNull
’’+ 1
.
’’1 2
Value
’’2 7
)
’’7 8
{
÷÷ 
row
◊◊ 	
[
◊◊	 

$str
◊◊
  
]
◊◊  !
=
◊◊" #
Convert
◊◊$ +
.
◊◊+ ,
	ToBoolean
◊◊, 5
(
◊◊5 6
reader
◊◊6 <
[
◊◊< =
$str
◊◊= S
]
◊◊S T
)
◊◊T U
;
◊◊U V
}
ÿÿ 
else
ŸŸ 	
{
⁄⁄ 
row
€€ 	
[
€€	 

$str
€€
  
]
€€  !
=
€€" #
false
€€$ )
;
€€) *
}
‹‹ 
if
ﬁﬁ 
(
ﬁﬁ 	
reader
ﬁﬁ	 
[
ﬁﬁ 
$str
ﬁﬁ "
]
ﬁﬁ" #
!=
ﬁﬁ$ &
DBNull
ﬁﬁ' -
.
ﬁﬁ- .
Value
ﬁﬁ. 3
)
ﬁﬁ3 4
{
ﬂﬂ 
row
‡‡ 	
[
‡‡	 

$str
‡‡
 
]
‡‡ 
=
‡‡ 
Convert
‡‡  '
.
‡‡' (
	ToBoolean
‡‡( 1
(
‡‡1 2
reader
‡‡2 8
[
‡‡8 9
$str
‡‡9 K
]
‡‡K L
)
‡‡L M
;
‡‡M N
}
·· 
else
‚‚ 	
{
„„ 
row
‰‰ 	
[
‰‰	 

$str
‰‰
 
]
‰‰ 
=
‰‰ 
false
‰‰  %
;
‰‰% &
}
ÂÂ 
row
ÁÁ 
[
ÁÁ 	
$str
ÁÁ	 
]
ÁÁ 
=
ÁÁ 
reader
ÁÁ %
[
ÁÁ% &
$str
ÁÁ& 8
]
ÁÁ8 9
;
ÁÁ9 :
if
ÈÈ 
(
ÈÈ 	
reader
ÈÈ	 
[
ÈÈ 
$str
ÈÈ '
]
ÈÈ' (
!=
ÈÈ) +
DBNull
ÈÈ, 2
.
ÈÈ2 3
Value
ÈÈ3 8
)
ÈÈ8 9
{
ÍÍ 
row
ÎÎ 	
[
ÎÎ	 

$str
ÎÎ
 !
]
ÎÎ! "
=
ÎÎ# $
Convert
ÎÎ% ,
.
ÎÎ, -
	ToBoolean
ÎÎ- 6
(
ÎÎ6 7
reader
ÎÎ7 =
[
ÎÎ= >
$str
ÎÎ> U
]
ÎÎU V
)
ÎÎV W
;
ÎÎW X
}
ÏÏ 
else
ÌÌ 	
{
ÓÓ 
row
ÔÔ 	
[
ÔÔ	 

$str
ÔÔ
 !
]
ÔÔ! "
=
ÔÔ# $
true
ÔÔ% )
;
ÔÔ) *
}
 
if
ÛÛ 
(
ÛÛ 	
reader
ÛÛ	 
[
ÛÛ 
$str
ÛÛ $
]
ÛÛ$ %
!=
ÛÛ& (
DBNull
ÛÛ) /
.
ÛÛ/ 0
Value
ÛÛ0 5
)
ÛÛ5 6
{
ÙÙ 
row
ıı 	
[
ıı	 

$str
ıı
 
]
ıı 
=
ıı  !
Convert
ıı" )
.
ıı) *
	ToBoolean
ıı* 3
(
ıı3 4
reader
ıı4 :
[
ıı: ;
$str
ıı; O
]
ııO P
)
ııP Q
;
ııQ R
}
ˆˆ 
else
˜˜ 	
{
¯¯ 
row
˘˘ 	
[
˘˘	 

$str
˘˘
 
]
˘˘ 
=
˘˘  !
true
˘˘" &
;
˘˘& '
}
˙˙ 
posts
˝˝ 

.
˝˝
 
Rows
˝˝ 
.
˝˝ 
Add
˝˝ 
(
˝˝ 
row
˝˝ 
)
˝˝ 
;
˝˝ 
}
˛˛ 
}
ˇˇ 
posts
ÅÅ 
.
ÅÅ 	
	TableName
ÅÅ	 
=
ÅÅ 
$str
ÅÅ 
;
ÅÅ 
dataSet
ÇÇ 

.
ÇÇ
 
Tables
ÇÇ 
.
ÇÇ 
Add
ÇÇ 
(
ÇÇ 
posts
ÇÇ 
)
ÇÇ 
;
ÇÇ 
	DataTable
ÑÑ 

categories
ÑÑ 
=
ÑÑ '
GetCategoryTableStructure
ÑÑ 3
(
ÑÑ3 4
)
ÑÑ4 5
;
ÑÑ5 6
using
ÜÜ 
(
ÜÜ	 

IDataReader
ÜÜ
 
reader
ÜÜ 
=
ÜÜ 
DBBlog
ÜÜ %
.
ÜÜ% &$
GetCategoriesForClosed
ÜÜ& <
(
ÜÜ< =
moduleId
ÜÜ= E
,
ÜÜE F
DateTime
ÜÜG O
.
ÜÜO P
UtcNow
ÜÜP V
,
ÜÜV W

pageNumber
ÜÜX b
,
ÜÜb c
pageSize
ÜÜd l
)
ÜÜl m
)
ÜÜm n
{
áá 
while
àà 	
(
àà
 
reader
àà 
.
àà 
Read
àà 
(
àà 
)
àà 
)
àà 
{
ââ 
DataRow
ãã 
row
ãã 
=
ãã 

categories
ãã 
.
ãã 
NewRow
ãã $
(
ãã$ %
)
ãã% &
;
ãã& '
row
çç 
[
çç 	
$str
çç	 
]
çç 
=
çç 
reader
çç 
[
çç 
$str
çç 
]
çç 
;
çç 
row
éé 
[
éé 	
$str
éé	 
]
éé 
=
éé 
reader
éé 
[
éé 
$str
éé $
]
éé$ %
;
éé% &
row
èè 
[
èè 	
$str
èè	 
]
èè 
=
èè 
reader
èè 
[
èè  
$str
èè  ,
]
èè, -
;
èè- .
row
êê 
[
êê 	
$str
êê	 
]
êê 
=
êê 
reader
êê 
[
êê 
$str
êê (
]
êê( )
;
êê) *

categories
íí 
.
íí 
Rows
íí 
.
íí 
Add
íí 
(
íí 
row
íí 
)
íí 
;
íí 
}
ìì 
}
ïï 

categories
óó 
.
óó 
	TableName
óó 
=
óó 
$str
óó &
;
óó& '
dataSet
òò 

.
òò
 
Tables
òò 
.
òò 
Add
òò 
(
òò 

categories
òò  
)
òò  !
;
òò! "
	DataTable
öö 
attachments
öö 
=
öö *
GetAttachmentsTableStructure
öö 7
(
öö7 8
)
öö8 9
;
öö9 :
using
úú 
(
úú	 

IDataReader
úú
 
reader
úú 
=
úú 
DBBlog
úú %
.
úú% &%
GetAttachmentsForClosed
úú& =
(
úú= >
moduleId
úú> F
,
úúF G
DateTime
úúH P
.
úúP Q
UtcNow
úúQ W
,
úúW X

pageNumber
úúY c
,
úúc d
pageSize
úúe m
)
úúm n
)
úún o
{
ùù 
while
ûû 	
(
ûû
 
reader
ûû 
.
ûû 
Read
ûû 
(
ûû 
)
ûû 
)
ûû 
{
üü 
DataRow
°° 
row
°° 
=
°° 
attachments
°° 
.
°° 
NewRow
°° %
(
°°% &
)
°°& '
;
°°' (
row
££ 
[
££ 	
$str
££	 
]
££ 
=
££ 
reader
££ 
[
££ 
$str
££ &
]
££& '
;
££' (
row
§§ 
[
§§ 	
$str
§§	 
]
§§ 
=
§§ 
reader
§§ 
[
§§ 
$str
§§ (
]
§§( )
;
§§) *
row
•• 
[
•• 	
$str
••	 
]
•• 
=
•• 
reader
•• 
[
•• 
$str
•• (
]
••( )
;
••) *
row
¶¶ 
[
¶¶ 	
$str
¶¶	 
]
¶¶ 
=
¶¶ 
reader
¶¶ #
[
¶¶# $
$str
¶¶$ 4
]
¶¶4 5
;
¶¶5 6
row
ßß 
[
ßß 	
$str
ßß	 
]
ßß 
=
ßß 
Convert
ßß #
.
ßß# $
ToInt64
ßß$ +
(
ßß+ ,
reader
ßß, 2
[
ßß2 3
$str
ßß3 B
]
ßßB C
)
ßßC D
;
ßßD E
row
®® 
[
®® 	
$str
®®	 
]
®® 
=
®® 
reader
®®  
[
®®  !
$str
®®! .
]
®®. /
;
®®/ 0
if
™™ 
(
™™ 	
reader
™™	 
[
™™ 
$str
™™ "
]
™™" #
!=
™™$ &
DBNull
™™' -
.
™™- .
Value
™™. 3
)
™™3 4
{
´´ 
row
¨¨ 	
[
¨¨	 

$str
¨¨
 
]
¨¨ 
=
¨¨ 
Convert
¨¨  '
.
¨¨' (
	ToBoolean
¨¨( 1
(
¨¨1 2
reader
¨¨2 8
[
¨¨8 9
$str
¨¨9 K
]
¨¨K L
)
¨¨L M
;
¨¨M N
}
≠≠ 
else
ÆÆ 	
{
ØØ 
row
∞∞ 	
[
∞∞	 

$str
∞∞
 
]
∞∞ 
=
∞∞ 
false
∞∞  %
;
∞∞% &
}
±± 
attachments
≥≥ 
.
≥≥ 
Rows
≥≥ 
.
≥≥ 
Add
≥≥ 
(
≥≥ 
row
≥≥ 
)
≥≥ 
;
≥≥ 
}
¥¥ 
}
∂∂ 
attachments
∏∏ 
.
∏∏ 
	TableName
∏∏ 
=
∏∏ 
$str
∏∏ (
;
∏∏( )
dataSet
ππ 

.
ππ
 
Tables
ππ 
.
ππ 
Add
ππ 
(
ππ 
attachments
ππ !
)
ππ! "
;
ππ" #
try
ºº 
{
ΩΩ 
dataSet
ææ 
.
ææ 
	Relations
ææ 
.
ææ 
Add
ææ 
(
ææ 
$str
ææ *
,
ææ* +
dataSet
øø 
.
øø 
Tables
øø 
[
øø 
$str
øø 
]
øø 
.
øø 
Columns
øø $
[
øø$ %
$str
øø% -
]
øø- .
,
øø. /
dataSet
¿¿ 
.
¿¿ 
Tables
¿¿ 
[
¿¿ 
$str
¿¿  
]
¿¿  !
.
¿¿! "
Columns
¿¿" )
[
¿¿) *
$str
¿¿* 2
]
¿¿2 3
)
¿¿3 4
;
¿¿4 5
}
¡¡ 
catch
¬¬ 
(
¬¬	 

System
¬¬
 
.
¬¬ 
Data
¬¬ 
.
¬¬ !
ConstraintException
¬¬ )
)
¬¬) *
{
¬¬+ ,
}
¬¬- .
catch
√√ 
(
√√	 

ArgumentException
√√
 
)
√√ 
{
√√ 
}
√√  
try
≈≈ 
{
∆∆ 
dataSet
«« 
.
«« 
	Relations
«« 
.
«« 
Add
«« 
(
«« 
$str
«« +
,
««+ ,
dataSet
»» 
.
»» 
Tables
»» 
[
»» 
$str
»» 
]
»» 
.
»» 
Columns
»» $
[
»»$ %
$str
»»% /
]
»»/ 0
,
»»0 1
dataSet
…… 
.
…… 
Tables
…… 
[
…… 
$str
…… !
]
……! "
.
……" #
Columns
……# *
[
……* +
$str
……+ 5
]
……5 6
)
……6 7
;
……7 8
}
   
catch
ÀÀ 
(
ÀÀ	 

System
ÀÀ
 
.
ÀÀ 
Data
ÀÀ 
.
ÀÀ !
ConstraintException
ÀÀ )
)
ÀÀ) *
{
ÀÀ+ ,
}
ÀÀ- .
catch
ÃÃ 
(
ÃÃ	 

ArgumentException
ÃÃ
 
)
ÃÃ 
{
ÃÃ 
}
ÃÃ  
return
œœ 	
dataSet
œœ
 
;
œœ 
}
–– 
public
““ 
static
““	 
IDataReader
““ 
GetPage
““ #
(
““# $
int
”” 
moduleId
”” 
,
”” 
DateTime
‘‘ 
	beginDate
‘‘ 
,
‘‘ 
int
’’ 

pageNumber
’’ 
,
’’ 
int
÷÷ 
pageSize
÷÷ 
,
÷÷ 
out
◊◊ 
int
◊◊ 


totalPages
◊◊ 
)
◊◊ 
{
ÿÿ 
return
ŸŸ 	
DBBlog
ŸŸ
 
.
ŸŸ 
GetPage
ŸŸ 
(
ŸŸ 
moduleId
ŸŸ !
,
ŸŸ! "
	beginDate
ŸŸ# ,
,
ŸŸ, -
DateTime
ŸŸ. 6
.
ŸŸ6 7
UtcNow
ŸŸ7 =
,
ŸŸ= >

pageNumber
ŸŸ? I
,
ŸŸI J
pageSize
ŸŸK S
,
ŸŸS T
out
ŸŸU X

totalPages
ŸŸY c
)
ŸŸc d
;
ŸŸd e
}
⁄⁄ 
public
›› 
static
››	 
IDataReader
››  
GetBlogsForSiteMap
›› .
(
››. /
int
››/ 2
siteId
››3 9
)
››9 :
{
ﬁﬁ 
return
ﬂﬂ 	
DBBlog
ﬂﬂ
 
.
ﬂﬂ  
GetBlogsForSiteMap
ﬂﬂ #
(
ﬂﬂ# $
siteId
ﬂﬂ$ *
,
ﬂﬂ* +
DateTime
ﬂﬂ, 4
.
ﬂﬂ4 5
UtcNow
ﬂﬂ5 ;
)
ﬂﬂ; <
;
ﬂﬂ< =
}
‡‡ 
public
‚‚ 
static
‚‚	 
IDataReader
‚‚  
GetBlogsForNewsMap
‚‚ .
(
‚‚. /
int
‚‚/ 2
siteId
‚‚3 9
,
‚‚9 :
int
‚‚; >
hoursOld
‚‚? G
)
‚‚G H
{
„„ 
return
‰‰ 	
DBBlog
‰‰
 
.
‰‰  
GetBlogsForNewsMap
‰‰ #
(
‰‰# $
siteId
‰‰$ *
,
‰‰* +
DateTime
‰‰, 4
.
‰‰4 5
UtcNow
‰‰5 ;
.
‰‰; <
AddHours
‰‰< D
(
‰‰D E
-
‰‰E F
hoursOld
‰‰F N
)
‰‰N O
)
‰‰O P
;
‰‰P Q
}
ÂÂ 
public
ÏÏ 
static
ÏÏ	 
IDataReader
ÏÏ 
	GetDrafts
ÏÏ %
(
ÏÏ% &
int
ÏÏ& )
moduleId
ÏÏ* 2
)
ÏÏ2 3
{
ÌÌ 
return
ÓÓ 	
DBBlog
ÓÓ
 
.
ÓÓ 
	GetDrafts
ÓÓ 
(
ÓÓ 
moduleId
ÓÓ #
)
ÓÓ# $
;
ÓÓ$ %
}
ÔÔ 
public
ÒÒ 
static
ÒÒ	 
IDataReader
ÒÒ 
GetPageOfDrafts
ÒÒ +
(
ÒÒ+ ,
int
ÚÚ 
moduleId
ÚÚ 
,
ÚÚ 
Guid
ÛÛ 
userGuid
ÛÛ 
,
ÛÛ 
int
ÙÙ 

pageNumber
ÙÙ 
,
ÙÙ 
int
ıı 
pageSize
ıı 
,
ıı 
out
ˆˆ 
int
ˆˆ 


totalPages
ˆˆ 
)
ˆˆ 
{
˜˜ 
return
¯¯ 	
DBBlog
¯¯
 
.
¯¯ 
GetPageOfDrafts
¯¯  
(
¯¯  !
moduleId
˘˘ 
,
˘˘ 
userGuid
˙˙ 
,
˙˙ 
DateTime
˚˚ 
.
˚˚ 
UtcNow
˚˚ 
,
˚˚ 

pageNumber
¸¸ 
,
¸¸ 
pageSize
˝˝ 
,
˝˝ 
out
˛˛ 

totalPages
˛˛ 
)
˛˛ 
;
˛˛ 
}
ˇˇ 
public
ÅÅ 
static
ÅÅ	 
int
ÅÅ 
GetCountOfDrafts
ÅÅ $
(
ÅÅ$ %
int
ÇÇ 
moduleId
ÇÇ 
,
ÇÇ 
Guid
ÉÉ 
userGuid
ÉÉ 
)
ÉÉ 
{
ÑÑ 
return
ÖÖ 	
DBBlog
ÖÖ
 
.
ÖÖ 
GetCountOfDrafts
ÖÖ !
(
ÖÖ! "
moduleId
ÖÖ" *
,
ÖÖ* +
userGuid
ÖÖ, 4
,
ÖÖ4 5
DateTime
ÖÖ6 >
.
ÖÖ> ?
UtcNow
ÖÖ? E
)
ÖÖE F
;
ÖÖF G
}
ÜÜ 
public
àà 
static
àà	 
int
àà 
GetCountClosed
àà "
(
àà" #
int
ââ 
moduleId
ââ 
)
ââ 
{
ää 
return
ãã 	
DBBlog
ãã
 
.
ãã 
GetCountClosed
ãã 
(
ãã  
moduleId
ãã  (
,
ãã( )
DateTime
ãã* 2
.
ãã2 3
UtcNow
ãã3 9
)
ãã9 :
;
ãã: ;
}
åå 
public
üü 
static
üü	 
bool
üü 
DeleteByModule
üü #
(
üü# $
int
üü$ '
moduleId
üü( 0
)
üü0 1
{
†† 
return
°° 	
DBBlog
°°
 
.
°° 
DeleteByModule
°° 
(
°°  
moduleId
°°  (
)
°°( )
;
°°) *
}
¢¢ 
public
§§ 
static
§§	 
bool
§§ 
DeleteBySite
§§ !
(
§§! "
int
§§" %
siteId
§§& ,
)
§§, -
{
•• 
return
¶¶ 	
DBBlog
¶¶
 
.
¶¶ 
DeleteBySite
¶¶ 
(
¶¶ 
siteId
¶¶ $
)
¶¶$ %
;
¶¶% &
}
ßß 
public
™™ 
static
™™	 
IDataReader
™™ 
GetBlogStats
™™ (
(
™™( )
int
™™) ,
moduleId
™™- 5
)
™™5 6
{
´´ 
return
¨¨ 	
DBBlog
¨¨
 
.
¨¨ 
GetBlogStats
¨¨ 
(
¨¨ 
moduleId
¨¨ &
)
¨¨& '
;
¨¨' (
}
≠≠ 
public
µµ 
static
µµ	 
	DataTable
µµ 
GetRelatedPosts
µµ )
(
µµ) *
int
µµ* -
itemId
µµ. 4
,
µµ4 5
int
µµ6 9
maxToGet
µµ: B
)
µµB C
{
∂∂ 
	DataTable
∑∑ 
	dataTable
∑∑ 
=
∑∑ 
new
∑∑ 
	DataTable
∑∑ &
(
∑∑& '
)
∑∑' (
;
∑∑( )
	dataTable
ππ 
.
ππ 
Columns
ππ 
.
ππ 
Add
ππ 
(
ππ 
$str
ππ !
,
ππ! "
typeof
ππ# )
(
ππ) *
int
ππ* -
)
ππ- .
)
ππ. /
;
ππ/ 0
	dataTable
∫∫ 
.
∫∫ 
Columns
∫∫ 
.
∫∫ 
Add
∫∫ 
(
∫∫ 
$str
∫∫ "
,
∫∫" #
typeof
∫∫$ *
(
∫∫* +
string
∫∫+ 1
)
∫∫1 2
)
∫∫2 3
;
∫∫3 4
	dataTable
ªª 
.
ªª 
Columns
ªª 
.
ªª 
Add
ªª 
(
ªª 
$str
ªª "
,
ªª" #
typeof
ªª$ *
(
ªª* +
string
ªª+ 1
)
ªª1 2
)
ªª2 3
;
ªª3 4
int
ææ 
counter
ææ 
=
ææ 
$num
ææ 
;
ææ 
using
¿¿ 
(
¿¿	 

IDataReader
¿¿
 
reader
¿¿ 
=
¿¿ 
DBBlog
¿¿ %
.
¿¿% &
GetRelatedPosts
¿¿& 5
(
¿¿5 6
itemId
¿¿6 <
)
¿¿< =
)
¿¿= >
{
¡¡ 
while
¬¬ 	
(
¬¬
 
reader
¬¬ 
.
¬¬ 
Read
¬¬ 
(
¬¬ 
)
¬¬ 
)
¬¬ 
{
√√ 
if
ƒƒ 
(
ƒƒ 	
counter
ƒƒ	 
>
ƒƒ 
maxToGet
ƒƒ 
)
ƒƒ 
{
ƒƒ 
continue
ƒƒ '
;
ƒƒ' (
}
ƒƒ) *
DataRow
∆∆ 
row
∆∆ 
=
∆∆ 
	dataTable
∆∆ 
.
∆∆ 
NewRow
∆∆ #
(
∆∆# $
)
∆∆$ %
;
∆∆% &
row
«« 
[
«« 	
$str
««	 
]
«« 
=
«« 
Convert
«« 
.
«« 
ToInt32
«« $
(
««$ %
reader
««% +
[
««+ ,
$str
««, 4
]
««4 5
)
««5 6
;
««6 7
row
»» 
[
»» 	
$str
»»	 
]
»» 
=
»» 
reader
»» 
[
»» 
$str
»» &
]
»»& '
;
»»' (
row
…… 
[
…… 	
$str
……	 
]
…… 
=
…… 
reader
…… 
[
…… 
$str
…… &
]
……& '
;
……' (
	dataTable
   
.
   
Rows
   
.
   
Add
   
(
   
row
   
)
   
;
   
counter
ÃÃ 
+=
ÃÃ 
$num
ÃÃ 
;
ÃÃ 
}
ÕÕ 
}
œœ 
return
—— 	
	dataTable
——
 
;
—— 
}
““ 
public
‘‘ 
static
‘‘	 
IDataReader
‘‘ #
GetBlogEntriesByMonth
‘‘ 1
(
‘‘1 2
int
‘‘2 5
month
‘‘6 ;
,
‘‘; <
int
‘‘= @
year
‘‘A E
,
‘‘E F
int
‘‘G J
moduleId
‘‘K S
)
‘‘S T
{
’’ 
return
÷÷ 	
DBBlog
÷÷
 
.
÷÷ #
GetBlogEntriesByMonth
÷÷ &
(
÷÷& '
month
÷÷' ,
,
÷÷, -
year
÷÷. 2
,
÷÷2 3
moduleId
÷÷4 <
,
÷÷< =
DateTime
÷÷> F
.
÷÷F G
UtcNow
÷÷G M
)
÷÷M N
;
÷÷N O
}
◊◊ 
public
ŸŸ 
static
ŸŸ	 
IDataReader
ŸŸ !
GetBlogMonthArchive
ŸŸ /
(
ŸŸ/ 0
int
ŸŸ0 3
moduleId
ŸŸ4 <
)
ŸŸ< =
{
⁄⁄ 
return
€€ 	
DBBlog
€€
 
.
€€ !
GetBlogMonthArchive
€€ $
(
€€$ %
moduleId
€€% -
,
€€- .
DateTime
€€/ 7
.
€€7 8
UtcNow
€€8 >
)
€€> ?
;
€€? @
}
‹‹ 
public
ﬁﬁ 
static
ﬁﬁ	 
IDataReader
ﬁﬁ 
GetSingleBlog
ﬁﬁ )
(
ﬁﬁ) *
int
ﬁﬁ* -
itemId
ﬁﬁ. 4
)
ﬁﬁ4 5
{
ﬂﬂ 
return
‡‡ 	
DBBlog
‡‡
 
.
‡‡ 
GetSingleBlog
‡‡ 
(
‡‡ 
itemId
‡‡ %
,
‡‡% &
DateTime
‡‡' /
.
‡‡/ 0
UtcNow
‡‡0 6
)
‡‡6 7
;
‡‡7 8
}
·· 
public
ÙÙ 
static
ÙÙ	 
IDataReader
ÙÙ 
GetBlogComments
ÙÙ +
(
ÙÙ+ ,
int
ÙÙ, /
moduleId
ÙÙ0 8
,
ÙÙ8 9
int
ÙÙ: =
itemId
ÙÙ> D
)
ÙÙD E
{
ıı 
return
ˆˆ 	
DBBlog
ˆˆ
 
.
ˆˆ 
GetBlogComments
ˆˆ  
(
ˆˆ  !
moduleId
ˆˆ! )
,
ˆˆ) *
itemId
ˆˆ+ 1
)
ˆˆ1 2
;
ˆˆ2 3
}
˜˜ 
public
˘˘ 
static
˘˘	 
	DataTable
˘˘ "
GetBlogCommentsTable
˘˘ .
(
˘˘. /
int
˘˘/ 2
moduleId
˘˘3 ;
,
˘˘; <
int
˘˘= @
itemId
˘˘A G
)
˘˘G H
{
˙˙ 
	DataTable
˚˚ 
	dataTable
˚˚ 
=
˚˚ 
new
˚˚ 
	DataTable
˚˚ &
(
˚˚& '
)
˚˚' (
;
˚˚( )
	dataTable
˝˝ 
.
˝˝ 
Columns
˝˝ 
.
˝˝ 
Add
˝˝ 
(
˝˝ 
$str
˝˝ "
,
˝˝" #
typeof
˝˝$ *
(
˝˝* +
string
˝˝+ 1
)
˝˝1 2
)
˝˝2 3
;
˝˝3 4
	dataTable
˛˛ 
.
˛˛ 
Columns
˛˛ 
.
˛˛ 
Add
˛˛ 
(
˛˛ 
$str
˛˛ 
,
˛˛  
typeof
˛˛! '
(
˛˛' (
string
˛˛( .
)
˛˛. /
)
˛˛/ 0
;
˛˛0 1
using
ÄÄ 
(
ÄÄ	 

IDataReader
ÄÄ
 
reader
ÄÄ 
=
ÄÄ 
DBBlog
ÄÄ %
.
ÄÄ% &
GetBlogComments
ÄÄ& 5
(
ÄÄ5 6
moduleId
ÄÄ6 >
,
ÄÄ> ?
itemId
ÄÄ@ F
)
ÄÄF G
)
ÄÄG H
{
ÅÅ 
while
ÇÇ 	
(
ÇÇ
 
reader
ÇÇ 
.
ÇÇ 
Read
ÇÇ 
(
ÇÇ 
)
ÇÇ 
)
ÇÇ 
{
ÉÉ 
DataRow
ÑÑ 
row
ÑÑ 
=
ÑÑ 
	dataTable
ÑÑ 
.
ÑÑ 
NewRow
ÑÑ #
(
ÑÑ# $
)
ÑÑ$ %
;
ÑÑ% &
row
ÜÜ 
[
ÜÜ 	
$str
ÜÜ	 
]
ÜÜ 
=
ÜÜ 
reader
ÜÜ 
[
ÜÜ 
$str
ÜÜ &
]
ÜÜ& '
;
ÜÜ' (
row
áá 
[
áá 	
$str
áá	 
]
áá 
=
áá 
reader
áá 
[
áá 
$str
áá  
]
áá  !
;
áá! "
	dataTable
ââ 
.
ââ 
Rows
ââ 
.
ââ 
Add
ââ 
(
ââ 
row
ââ 
)
ââ 
;
ââ 
}
ää 
}
ãã 
return
çç 	
	dataTable
çç
 
;
çç 
}
éé 
public
êê 
static
êê	 
bool
êê 
AddBlogComment
êê #
(
êê# $
int
ëë 
moduleId
ëë 
,
ëë 
int
íí 
itemId
íí 
,
íí 
String
ìì 	
name
ìì
 
,
ìì 
String
îî 	
title
îî
 
,
îî 
String
ïï 	
url
ïï
 
,
ïï 
String
ññ 	
comment
ññ
 
,
ññ 
DateTime
óó 
dateCreated
óó 
)
óó 
{
òò 
if
ôô 
(
ôô 
name
ôô 
==
ôô 
null
ôô 
)
ôô 
{
öö 
name
õõ 
=
õõ	 

$str
õõ 
;
õõ 
}
úú 
if
ùù 
(
ùù 
name
ùù 
.
ùù 
Length
ùù 
<
ùù 
$num
ùù 
)
ùù 
{
ûû 
name
üü 
=
üü	 

$str
üü 
;
üü 
}
†† 
if
¢¢ 
(
¢¢ 
(
¢¢ 
title
¢¢ 
!=
¢¢ 
null
¢¢ 
)
¢¢ 
&&
¢¢ 
(
¢¢ 
url
¢¢ 
!=
¢¢ !
null
¢¢" &
)
¢¢& '
&&
¢¢( *
(
¢¢+ ,
comment
¢¢, 3
!=
¢¢4 6
null
¢¢7 ;
)
¢¢; <
)
¢¢< =
{
££ 
if
§§ 
(
§§ 
title
§§ 
.
§§ 
Length
§§ 
>
§§ 
$num
§§ 
)
§§ 
{
•• 
title
¶¶ 

=
¶¶ 
title
¶¶ 
.
¶¶ 
	Substring
¶¶ 
(
¶¶ 
$num
¶¶ 
,
¶¶ 
$num
¶¶  #
)
¶¶# $
;
¶¶$ %
}
ßß 
if
©© 
(
©© 
name
©© 
.
©© 
Length
©© 
>
©© 
$num
©© 
)
©© 
{
™™ 
name
´´ 	
=
´´
 
name
´´ 
.
´´ 
	Substring
´´ 
(
´´ 
$num
´´ 
,
´´ 
$num
´´ !
)
´´! "
;
´´" #
}
¨¨ 
if
ÆÆ 
(
ÆÆ 
url
ÆÆ 
.
ÆÆ 
Length
ÆÆ 
>
ÆÆ 
$num
ÆÆ 
)
ÆÆ 
{
ØØ 
url
∞∞ 
=
∞∞	 

url
∞∞ 
.
∞∞ 
	Substring
∞∞ 
(
∞∞ 
$num
∞∞ 
,
∞∞ 
$num
∞∞ 
)
∞∞  
;
∞∞  !
}
±± 
return
≥≥ 

DBBlog
≥≥ 
.
≥≥ 
AddBlogComment
≥≥  
(
≥≥  !
moduleId
¥¥ 
,
¥¥ 
itemId
µµ 
,
µµ 
name
∂∂ 	
,
∂∂	 

title
∑∑ 

,
∑∑
 
url
∏∏ 
,
∏∏ 	
comment
ππ 
,
ππ 
dateCreated
∫∫ 
)
∫∫ 
;
∫∫ 
}
ªª 
return
ΩΩ 	
false
ΩΩ
 
;
ΩΩ 
}
ææ 
public
¿¿ 
static
¿¿	 
bool
¿¿  
UpdateCommentCount
¿¿ '
(
¿¿' (
Guid
¿¿( ,
blogGuid
¿¿- 5
,
¿¿5 6
int
¿¿7 :
commentCount
¿¿; G
)
¿¿G H
{
¡¡ 
return
¬¬ 	
DBBlog
¬¬
 
.
¬¬  
UpdateCommentCount
¬¬ #
(
¬¬# $
blogGuid
¬¬$ ,
,
¬¬, -
commentCount
¬¬. :
)
¬¬: ;
;
¬¬; <
}
√√ 
public
≈≈ 
static
≈≈	 
bool
≈≈ 
DeleteBlogComment
≈≈ &
(
≈≈& '
int
≈≈' *
	commentId
≈≈+ 4
)
≈≈4 5
{
∆∆ 
return
«« 	
DBBlog
««
 
.
«« 
DeleteBlogComment
«« "
(
««" #
	commentId
««# ,
)
««, -
;
««- .
}
»» 
public
ÀÀ 
static
ÀÀ	 
int
ÀÀ 
AddBlogCategory
ÀÀ #
(
ÀÀ# $
int
ÀÀ$ '
moduleId
ÀÀ( 0
,
ÀÀ0 1
string
ÀÀ2 8
category
ÀÀ9 A
)
ÀÀA B
{
ÃÃ 
return
ÕÕ 	
DBBlog
ÕÕ
 
.
ÕÕ 
AddBlogCategory
ÕÕ  
(
ÕÕ  !
moduleId
ÕÕ! )
,
ÕÕ) *
category
ÕÕ+ 3
)
ÕÕ3 4
;
ÕÕ4 5
}
ŒŒ 
public
–– 
static
––	 
bool
––  
UpdateBlogCategory
–– '
(
––' (
int
—— 

categoryId
—— 
,
—— 
string
““ 	
category
““
 
)
““ 
{
”” 
return
‘‘ 	
DBBlog
‘‘
 
.
‘‘  
UpdateBlogCategory
‘‘ #
(
‘‘# $

categoryId
‘‘$ .
,
‘‘. /
category
‘‘0 8
)
‘‘8 9
;
‘‘9 :
}
÷÷ 
public
ŸŸ 
static
ŸŸ	 
bool
ŸŸ 
DeleteCategory
ŸŸ #
(
ŸŸ# $
int
ŸŸ$ '

categoryId
ŸŸ( 2
)
ŸŸ2 3
{
⁄⁄ 
return
€€ 	
DBBlog
€€
 
.
€€ 
DeleteCategory
€€ 
(
€€  

categoryId
€€  *
)
€€* +
;
€€+ ,
}
‹‹ 
public
ﬂﬂ 
static
ﬂﬂ	 
IDataReader
ﬂﬂ 
GetCategories
ﬂﬂ )
(
ﬂﬂ) *
int
ﬂﬂ* -
moduleId
ﬂﬂ. 6
)
ﬂﬂ6 7
{
‡‡ 
return
·· 	
DBBlog
··
 
.
·· 
GetCategories
·· 
(
·· 
moduleId
·· '
)
··' (
;
··( )
}
‚‚ 
public
‰‰ 
static
‰‰	 
IDataReader
‰‰ 
GetCategoriesList
‰‰ -
(
‰‰- .
int
‰‰. 1
moduleId
‰‰2 :
)
‰‰: ;
{
ÂÂ 
return
ÊÊ 	
DBBlog
ÊÊ
 
.
ÊÊ 
GetCategoriesList
ÊÊ "
(
ÊÊ" #
moduleId
ÊÊ# +
)
ÊÊ+ ,
;
ÊÊ, -
}
ÁÁ 
public
ÍÍ 
static
ÍÍ	 
int
ÍÍ 
AddItemCategory
ÍÍ #
(
ÍÍ# $
int
ÎÎ 
itemId
ÎÎ 
,
ÎÎ 
int
ÏÏ 

categoryId
ÏÏ 
)
ÏÏ 
{
ÌÌ 
return
ÓÓ 	
DBBlog
ÓÓ
 
.
ÓÓ !
AddBlogItemCategory
ÓÓ $
(
ÓÓ$ %
itemId
ÓÓ% +
,
ÓÓ+ ,

categoryId
ÓÓ- 7
)
ÓÓ7 8
;
ÓÓ8 9
}
ÔÔ 
public
ÒÒ 
static
ÒÒ	 
bool
ÒÒ "
DeleteItemCategories
ÒÒ )
(
ÒÒ) *
int
ÒÒ* -
itemId
ÒÒ. 4
)
ÒÒ4 5
{
ÚÚ 
return
ÛÛ 	
DBBlog
ÛÛ
 
.
ÛÛ "
DeleteItemCategories
ÛÛ %
(
ÛÛ% &
itemId
ÛÛ& ,
)
ÛÛ, -
;
ÛÛ- .
}
ÙÙ 
public
ˆˆ 
static
ˆˆ	 
IDataReader
ˆˆ 
GetItemCategories
ˆˆ -
(
ˆˆ- .
int
ˆˆ. 1
itemId
ˆˆ2 8
)
ˆˆ8 9
{
˜˜ 
return
¯¯ 	
DBBlog
¯¯
 
.
¯¯ #
GetBlogItemCategories
¯¯ &
(
¯¯& '
itemId
¯¯' -
)
¯¯- .
;
¯¯. /
}
˘˘ 
public
˚˚ 
static
˚˚	 
IDataReader
˚˚ "
GetEntriesByCategory
˚˚ 0
(
˚˚0 1
int
˚˚1 4
moduleId
˚˚5 =
,
˚˚= >
int
˚˚? B

categoryId
˚˚C M
)
˚˚M N
{
¸¸ 
return
˝˝ 	
DBBlog
˝˝
 
.
˝˝ "
GetEntriesByCategory
˝˝ %
(
˝˝% &
moduleId
˝˝& .
,
˝˝. /

categoryId
˝˝0 :
,
˝˝: ;
DateTime
˝˝< D
.
˝˝D E
UtcNow
˝˝E K
)
˝˝K L
;
˝˝L M
}
˛˛ 
public
ÄÄ 
static
ÄÄ	 
IDataReader
ÄÄ 
GetCategory
ÄÄ '
(
ÄÄ' (
int
ÄÄ( +

categoryId
ÄÄ, 6
)
ÄÄ6 7
{
ÅÅ 
return
ÇÇ 	
DBBlog
ÇÇ
 
.
ÇÇ 
GetCategory
ÇÇ 
(
ÇÇ 

categoryId
ÇÇ '
)
ÇÇ' (
;
ÇÇ( )
}
ÉÉ 
public
áá 
static
áá	 
	DataTable
áá 
GetBlogsByPage
áá (
(
áá( )
int
áá) ,
siteId
áá- 3
,
áá3 4
int
áá5 8
pageId
áá9 ?
)
áá? @
{
àà 
	DataTable
ââ 
	dataTable
ââ 
=
ââ 
new
ââ 
	DataTable
ââ &
(
ââ& '
)
ââ' (
;
ââ( )
	dataTable
ãã 
.
ãã 
Columns
ãã 
.
ãã 
Add
ãã 
(
ãã 
$str
ãã !
,
ãã! "
typeof
ãã# )
(
ãã) *
int
ãã* -
)
ãã- .
)
ãã. /
;
ãã/ 0
	dataTable
åå 
.
åå 
Columns
åå 
.
åå 
Add
åå 
(
åå 
$str
åå #
,
åå# $
typeof
åå% +
(
åå+ ,
int
åå, /
)
åå/ 0
)
åå0 1
;
åå1 2
	dataTable
çç 
.
çç 
Columns
çç 
.
çç 
Add
çç 
(
çç 
$str
çç '
,
çç' (
typeof
çç) /
(
çç/ 0
int
çç0 3
)
çç3 4
)
çç4 5
;
çç5 6
	dataTable
éé 
.
éé 
Columns
éé 
.
éé 
Add
éé 
(
éé 
$str
éé &
,
éé& '
typeof
éé( .
(
éé. /
string
éé/ 5
)
éé5 6
)
éé6 7
;
éé7 8
	dataTable
èè 
.
èè 
Columns
èè 
.
èè 
Add
èè 
(
èè 
$str
èè "
,
èè" #
typeof
èè$ *
(
èè* +
string
èè+ 1
)
èè1 2
)
èè2 3
;
èè3 4
	dataTable
êê 
.
êê 
Columns
êê 
.
êê 
Add
êê 
(
êê 
$str
êê #
,
êê# $
typeof
êê% +
(
êê+ ,
string
êê, 2
)
êê2 3
)
êê3 4
;
êê4 5
	dataTable
ëë 
.
ëë 
Columns
ëë 
.
ëë 
Add
ëë 
(
ëë 
$str
ëë "
,
ëë" #
typeof
ëë$ *
(
ëë* +
string
ëë+ 1
)
ëë1 2
)
ëë2 3
;
ëë3 4
	dataTable
íí 
.
íí 
Columns
íí 
.
íí 
Add
íí 
(
íí 
$str
íí &
,
íí& '
typeof
íí( .
(
íí. /
string
íí/ 5
)
íí5 6
)
íí6 7
;
íí7 8
	dataTable
ìì 
.
ìì 
Columns
ìì 
.
ìì 
Add
ìì 
(
ìì 
$str
ìì $
,
ìì$ %
typeof
ìì& ,
(
ìì, -
DateTime
ìì- 5
)
ìì5 6
)
ìì6 7
;
ìì7 8
	dataTable
îî 
.
îî 
Columns
îî 
.
îî 
Add
îî 
(
îî 
$str
îî "
,
îî" #
typeof
îî$ *
(
îî* +
DateTime
îî+ 3
)
îî3 4
)
îî4 5
;
îî5 6
	dataTable
ïï 
.
ïï 
Columns
ïï 
.
ïï 
Add
ïï 
(
ïï 
$str
ïï %
,
ïï% &
typeof
ïï' -
(
ïï- .
DateTime
ïï. 6
)
ïï6 7
)
ïï7 8
;
ïï8 9
	dataTable
ññ 
.
ññ 
Columns
ññ 
.
ññ 
Add
ññ 
(
ññ 
$str
ññ *
,
ññ* +
typeof
ññ, 2
(
ññ2 3
string
ññ3 9
)
ññ9 :
)
ññ: ;
;
ññ; <
	dataTable
óó 
.
óó 
Columns
óó 
.
óó 
Add
óó 
(
óó 
$str
óó '
,
óó' (
typeof
óó) /
(
óó/ 0
string
óó0 6
)
óó6 7
)
óó7 8
;
óó8 9
	dataTable
òò 
.
òò 
Columns
òò 
.
òò 
Add
òò 
(
òò 
$str
òò $
,
òò$ %
typeof
òò& ,
(
òò, -
string
òò- 3
)
òò3 4
)
òò4 5
;
òò5 6
	dataTable
ôô 
.
ôô 
Columns
ôô 
.
ôô 
Add
ôô 
(
ôô 
$str
ôô *
,
ôô* +
typeof
ôô, 2
(
ôô2 3
bool
ôô3 7
)
ôô7 8
)
ôô8 9
;
ôô9 :
	dataTable
öö 
.
öö 
Columns
öö 
.
öö 
Add
öö 
(
öö 
$str
öö 3
,
öö3 4
typeof
öö5 ;
(
öö; <
bool
öö< @
)
öö@ A
)
ööA B
;
ööB C
	dataTable
úú 
.
úú 
Columns
úú 
.
úú 
Add
úú 
(
úú 
$str
úú 
,
úú  
typeof
úú! '
(
úú' (
string
úú( .
)
úú. /
)
úú/ 0
;
úú0 1
	dataTable
ùù 
.
ùù 
Columns
ùù 
.
ùù 
Add
ùù 
(
ùù 
$str
ùù $
,
ùù$ %
typeof
ùù& ,
(
ùù, -
string
ùù- 3
)
ùù3 4
)
ùù4 5
;
ùù5 6
	dataTable
ûû 
.
ûû 
Columns
ûû 
.
ûû 
Add
ûû 
(
ûû 
$str
ûû #
,
ûû# $
typeof
ûû% +
(
ûû+ ,
string
ûû, 2
)
ûû2 3
)
ûû3 4
;
ûû4 5
using
†† 
(
††	 

IDataReader
††
 
reader
†† 
=
†† 
DBBlog
†† %
.
††% &
GetBlogsByPage
††& 4
(
††4 5
siteId
††5 ;
,
††; <
pageId
††= C
)
††C D
)
††D E
{
°° 
while
¢¢ 	
(
¢¢
 
reader
¢¢ 
.
¢¢ 
Read
¢¢ 
(
¢¢ 
)
¢¢ 
)
¢¢ 
{
££ 
DataRow
§§ 
row
§§ 
=
§§ 
	dataTable
§§ 
.
§§ 
NewRow
§§ #
(
§§# $
)
§§$ %
;
§§% &
row
¶¶ 
[
¶¶ 	
$str
¶¶	 
]
¶¶ 
=
¶¶ 
reader
¶¶ 
[
¶¶ 
$str
¶¶ $
]
¶¶$ %
;
¶¶% &
row
ßß 
[
ßß 	
$str
ßß	 
]
ßß 
=
ßß 
reader
ßß 
[
ßß 
$str
ßß (
]
ßß( )
;
ßß) *
row
®® 
[
®® 	
$str
®®	 
]
®® 
=
®® 
reader
®® !
[
®®! "
$str
®®" 0
]
®®0 1
;
®®1 2
row
©© 
[
©© 	
$str
©©	 
]
©© 
=
©© 
reader
©©  
[
©©  !
$str
©©! .
]
©©. /
;
©©/ 0
row
™™ 
[
™™ 	
$str
™™	 
]
™™ 
=
™™ 
reader
™™ 
[
™™ 
$str
™™ &
]
™™& '
;
™™' (
row
´´ 
[
´´ 	
$str
´´	 
]
´´ 
=
´´ 
reader
´´ 
[
´´ 
$str
´´ (
]
´´( )
;
´´) *
row
¨¨ 
[
¨¨ 	
$str
¨¨	 
]
¨¨ 
=
¨¨ 
reader
¨¨ 
[
¨¨ 
$str
¨¨ &
]
¨¨& '
;
¨¨' (
row
≠≠ 
[
≠≠ 	
$str
≠≠	 
]
≠≠ 
=
≠≠ 
reader
≠≠  
[
≠≠  !
$str
≠≠! .
]
≠≠. /
;
≠≠/ 0
row
ÆÆ 
[
ÆÆ 	
$str
ÆÆ	 
]
ÆÆ 
=
ÆÆ 
Convert
ÆÆ 
.
ÆÆ  

ToDateTime
ÆÆ  *
(
ÆÆ* +
reader
ÆÆ+ 1
[
ÆÆ1 2
$str
ÆÆ2 =
]
ÆÆ= >
)
ÆÆ> ?
;
ÆÆ? @
row
∞∞ 
[
∞∞ 	
$str
∞∞	 
]
∞∞ 
=
∞∞ 
reader
∞∞ 
[
∞∞ 
$str
∞∞  
]
∞∞  !
;
∞∞! "
row
±± 
[
±± 	
$str
±±	 
]
±± 
=
±± 
reader
±± 
[
±± 
$str
±± *
]
±±* +
;
±±+ ,
row
≤≤ 
[
≤≤ 	
$str
≤≤	 
]
≤≤ 
=
≤≤ 
reader
≤≤ 
[
≤≤ 
$str
≤≤ (
]
≤≤( )
;
≤≤) *
if
¥¥ 
(
¥¥ 	
reader
¥¥	 
[
¥¥ 
$str
¥¥ 
]
¥¥ 
!=
¥¥ 
DBNull
¥¥ $
.
¥¥$ %
Value
¥¥% *
)
¥¥* +
{
µµ 
row
∂∂ 	
[
∂∂	 

$str
∂∂
 
]
∂∂ 
=
∂∂ 
Convert
∂∂ 
.
∂∂ 

ToDateTime
∂∂ )
(
∂∂) *
reader
∂∂* 0
[
∂∂0 1
$str
∂∂1 :
]
∂∂: ;
)
∂∂; <
;
∂∂< =
}
∑∑ 
else
∏∏ 	
{
ππ 
row
∫∫ 	
[
∫∫	 

$str
∫∫
 
]
∫∫ 
=
∫∫ 
DateTime
∫∫ 
.
∫∫  
MaxValue
∫∫  (
;
∫∫( )
}
ªª 
if
ΩΩ 
(
ΩΩ 	
reader
ΩΩ	 
[
ΩΩ 
$str
ΩΩ 
]
ΩΩ 
!=
ΩΩ  
DBNull
ΩΩ! '
.
ΩΩ' (
Value
ΩΩ( -
)
ΩΩ- .
{
ææ 
row
øø 	
[
øø	 

$str
øø
 
]
øø 
=
øø 
Convert
øø !
.
øø! "

ToDateTime
øø" ,
(
øø, -
reader
øø- 3
[
øø3 4
$str
øø4 @
]
øø@ A
)
øøA B
;
øøB C
}
¿¿ 
else
¡¡ 	
{
¬¬ 
row
√√ 	
[
√√	 

$str
√√
 
]
√√ 
=
√√ 
Convert
√√ !
.
√√! "

ToDateTime
√√" ,
(
√√, -
reader
√√- 3
[
√√3 4
$str
√√4 ?
]
√√? @
)
√√@ A
;
√√A B
}
ƒƒ 
row
∆∆ 
[
∆∆ 	
$str
∆∆	 
]
∆∆ 
=
∆∆ 
reader
∆∆ $
[
∆∆$ %
$str
∆∆% 6
]
∆∆6 7
;
∆∆7 8
row
«« 
[
«« 	
$str
««	 
]
«« 
=
«« 
reader
«« !
[
««! "
$str
««" 0
]
««0 1
;
««1 2
row
»» 
[
»» 	
$str
»»	 
]
»» 
=
»» 
reader
»» 
[
»» 
$str
»» *
]
»»* +
;
»»+ ,
if
…… 
(
…… 	
reader
……	 
[
…… 
$str
…… !
]
……! "
!=
……# %
DBNull
……& ,
.
……, -
Value
……- 2
)
……2 3
{
   
row
ÀÀ 	
[
ÀÀ	 

$str
ÀÀ
 
]
ÀÀ 
=
ÀÀ 
Convert
ÀÀ &
.
ÀÀ& '
	ToBoolean
ÀÀ' 0
(
ÀÀ0 1
reader
ÀÀ1 7
[
ÀÀ7 8
$str
ÀÀ8 I
]
ÀÀI J
)
ÀÀJ K
;
ÀÀK L
}
ÃÃ 
else
ÕÕ 	
{
ŒŒ 
row
œœ 	
[
œœ	 

$str
œœ
 
]
œœ 
=
œœ 
true
œœ #
;
œœ# $
}
–– 
if
““ 
(
““ 	
reader
““	 
[
““ 
$str
““ *
]
““* +
!=
““, .
DBNull
““/ 5
.
““5 6
Value
““6 ;
)
““; <
{
”” 
row
‘‘ 	
[
‘‘	 

$str
‘‘
 $
]
‘‘$ %
=
‘‘& '
Convert
‘‘( /
.
‘‘/ 0
	ToBoolean
‘‘0 9
(
‘‘9 :
reader
‘‘: @
[
‘‘@ A
$str
‘‘A [
]
‘‘[ \
)
‘‘\ ]
;
‘‘] ^
}
’’ 
else
÷÷ 	
{
◊◊ 
row
ÿÿ 	
[
ÿÿ	 

$str
ÿÿ
 $
]
ÿÿ$ %
=
ÿÿ& '
false
ÿÿ( -
;
ÿÿ- .
}
ŸŸ 
	dataTable
›› 
.
›› 
Rows
›› 
.
›› 
Add
›› 
(
›› 
row
›› 
)
›› 
;
›› 
}
ﬁﬁ 
}
ﬂﬂ 
return
·· 	
	dataTable
··
 
;
·· 
}
‚‚ 
public
ÍÍ 
event
ÍÍ	 (
ContentChangedEventHandler
ÍÍ )
ContentChanged
ÍÍ* 8
;
ÍÍ8 9
	protected
ÏÏ 
void
ÏÏ 
OnContentChanged
ÏÏ !
(
ÏÏ! "%
ContentChangedEventArgs
ÏÏ" 9
e
ÏÏ: ;
)
ÏÏ; <
{
ÌÌ 
if
ÓÓ 
(
ÓÓ 
ContentChanged
ÓÓ 
!=
ÓÓ 
null
ÓÓ 
)
ÓÓ 
{
ÔÔ 
ContentChanged
 
(
 
this
 
,
 
e
 
)
 
;
 
}
ÒÒ 
}
ÚÚ 
}
¸¸ 
}˝˝ ⁄Z
yD:\Projects\DefensePoint\whitesource-testcases-csharp\CWE79\mojoportal\mojoPortal.Features.Business\Blog\BlogPostModel.cs
	namespace 	

mojoPortal
 
. 
Business 
{ 
public 
class 
BlogPostModel 
{ 
public 
Guid	 
BlogGuid 
{ 
get 
; 
set !
;! "
}# $
public 
Guid	 

ModuleGuid 
{ 
get 
; 
set  #
;# $
}% &
public		 
int			 
Id		 
{		 
get		 
;		 
set		 
;		 
}		 
public

 
int

	 
PreviousItemId

 
{

 
get

 !
;

! "
set

# &
;

& '
}

( )
public 
int	 

NextItemId 
{ 
get 
; 
set "
;" #
}$ %
public 
int	 
ModuleId 
{ 
get 
; 
set  
;  !
}" #
public 
string	 
UserName 
{ 
get 
; 
set  #
;# $
}% &
public 
Guid	 
UserGuid 
{ 
get 
; 
set !
;! "
}# $
public 
Guid	 
LastModUserGuid 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string	 
Title 
{ 
get 
; 
set  
;  !
}" #
public 
string	 
SubTitle 
{ 
get 
; 
set  #
;# $
}% &
public 
string	 
Category 
{ 
get 
; 
set  #
;# $
}% &
public 
string	 
Excerpt 
{ 
get 
; 
set "
;" #
}$ %
public 
string	 
Body 
{ 
get 
; 
set 
;  
}! "
public 
string	 
Location 
{ 
get 
; 
set  #
;# $
}% &
public 
string	 
MetaKeywords 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string	 
MetaDescription 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string	 
CompiledMeta 
{ 
get "
;" #
set$ '
;' (
}) *
public 
DateTime	 
PostDate 
{ 
get  
;  !
set" %
;% &
}' (
public 
DateTime	 
EndDate 
{ 
get 
;  
set! $
;$ %
}& '
public 
bool	 
Approved 
{ 
get 
; 
set !
;! "
}# $
public 
Guid	 

ApprovedBy 
{ 
get 
; 
set  #
;# $
}% &
public 
DateTime	 
ApprovedDate 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
bool	 
IsPublished 
{ 
get 
;  
set! $
;$ %
}& '
public 
bool	 
IsInNewsletter 
{ 
get "
;" #
set$ '
;' (
}) *
public   
bool  	 
IncludeInFeed   
{   
get   !
;  ! "
set  # &
;  & '
}  ( )
public!! 
int!!	  
AllowCommentsForDays!! !
{!!" #
get!!$ '
;!!' (
set!!) ,
;!!, -
}!!. /
public"" 
DateTime""	 

CreatedUtc"" 
{"" 
get"" "
;""" #
set""$ '
;""' (
}"") *
public## 
DateTime##	 

LastModUtc## 
{## 
get## "
;##" #
set##$ '
;##' (
}##) *
public$$ 
string$$	 
ItemUrl$$ 
{$$ 
get$$ 
;$$ 
set$$ "
;$$" #
}$$$ %
public%% 
bool%%	 
ShowAuthorName%% 
{%% 
get%% "
;%%" #
set%%$ '
;%%' (
}%%) *
public&& 
bool&&	 
ShowAuthorAvatar&& 
{&&  
get&&! $
;&&$ %
set&&& )
;&&) *
}&&+ ,
public'' 
bool''	 
ShowAuthorBio'' 
{'' 
get'' !
;''! "
set''# &
;''& '
}''( )
public(( 
bool((	 
IncludeInSearch(( 
{(( 
get((  #
;((# $
set((% (
;((( )
}((* +
public)) 
bool))	 

UseBingMap)) 
{)) 
get)) 
;)) 
set))  #
;))# $
}))% &
public** 
string**	 
	MapHeight** 
{** 
get** 
;**  
set**! $
;**$ %
}**& '
public++ 
string++	 
MapWidth++ 
{++ 
get++ 
;++ 
set++  #
;++# $
}++% &
public,, 
bool,,	 
ShowMapOptions,, 
{,, 
get,, "
;,," #
set,,$ '
;,,' (
},,) *
public-- 
bool--	 
ShowZoomTool-- 
{-- 
get--  
;--  !
set--" %
;--% &
}--' (
public.. 
bool..	 
ShowLocationInfo.. 
{..  
get..! $
;..$ %
set..& )
;..) *
}..+ ,
public// 
bool//	  
UseDrivingDirections// "
{//# $
get//% (
;//( )
set//* -
;//- .
}/// 0
public00 
string00	 
MapType00 
{00 
get00 
;00 
set00 "
;00" #
}00$ %
public11 
int11	 
MapZoom11 
{11 
get11 
;11 
set11 
;11  
}11! "
public22 
bool22	 
ShowDownloadLink22 
{22  
get22! $
;22$ %
set22& )
;22) *
}22+ ,
public33 
bool33	 
IncludeInSiteMap33 
{33  
get33! $
;33$ %
set33& )
;33) *
}33+ ,
public44 
bool44	 $
ExcludeFromRecentContent44 &
{44' (
get44) ,
;44, -
set44. 1
;441 2
}443 4
public55 
string55	 
PreviousPostUrl55 
{55  !
get55" %
;55% &
set55' *
;55* +
}55, -
public66 
string66	 
NextPostUrl66 
{66 
get66 !
;66! "
set66# &
;66& '
}66( )
public77 
string77	 
PreviousPostTitle77 !
{77" #
get77$ '
;77' (
set77) ,
;77, -
}77. /
public88 
string88	 
NextPostTitle88 
{88 
get88  #
;88# $
set88% (
;88( )
}88* +
public99 
int99	 
CommentCount99 
{99 
get99 
;99  
set99! $
;99$ %
}99& '
public:: 
int::	 
AuthorUserId:: 
{:: 
get:: 
;::  
set::! $
;::$ %
}::& '
public;; 
string;;	 
AuthorLoginName;; 
{;;  !
get;;" %
;;;% &
set;;' *
;;;* +
};;, -
public<< 
string<<	 
AuthorDisplayName<< !
{<<" #
get<<$ '
;<<' (
set<<) ,
;<<, -
}<<. /
public== 
string==	 
AuthorFirstName== 
{==  !
get==" %
;==% &
set==' *
;==* +
}==, -
public>> 
string>>	 
AuthorLastName>> 
{>>  
get>>! $
;>>$ %
set>>& )
;>>) *
}>>+ ,
public?? 
string??	 
AuthorEmail?? 
{?? 
get?? !
;??! "
set??# &
;??& '
}??( )
public@@ 
string@@	 
AuthorAvatar@@ 
{@@ 
get@@ "
;@@" #
set@@$ '
;@@' (
}@@) *
publicAA 
stringAA	 
	AuthorBioAA 
{AA 
getAA 
;AA  
setAA! $
;AA$ %
}AA& '
publicBB 
boolBB	 
IncludeInNewsBB 
{BB 
getBB !
;BB! "
setBB# &
;BB& '
}BB( )
publicCC 
stringCC	 
PubNameCC 
{CC 
getCC 
;CC 
setCC "
;CC" #
}CC$ %
publicDD 
stringDD	 
PubLanguageDD 
{DD 
getDD !
;DD! "
setDD# &
;DD& '
}DD( )
publicEE 
stringEE	 
	PubAccessEE 
{EE 
getEE 
;EE  
setEE! $
;EE$ %
}EE& '
publicFF 
stringFF	 
	PubGenresFF 
{FF 
getFF 
;FF  
setFF! $
;FF$ %
}FF& '
publicGG 
stringGG	 
PubKeyWordsGG 
{GG 
getGG !
;GG! "
setGG# &
;GG& '
}GG( )
publicHH 
stringHH	 
PubGeoLocationsHH 
{HH  !
getHH" %
;HH% &
setHH' *
;HH* +
}HH, -
publicII 
stringII	 
PubStockTickersII 
{II  !
getII" %
;II% &
setII' *
;II* +
}II, -
publicJJ 
stringJJ	 
HeadlineImageUrlJJ  
{JJ! "
getJJ# &
;JJ& '
setJJ( +
;JJ+ ,
}JJ- .
publicKK 
boolKK	 !
IncludeImageInExcerptKK #
{KK$ %
getKK& )
;KK) *
setKK+ .
;KK. /
}KK0 1
publicLL 
boolLL	 
IncludeImageInPostLL  
{LL! "
getLL# &
;LL& '
setLL( +
;LL+ ,
}LL- .
publicMM 
boolMM	 
FeaturedPostMM 
{MM 
getMM  
;MM  !
setMM" %
;MM% &
}MM' (
}NN 
}OO î
yD:\Projects\DefensePoint\whitesource-testcases-csharp\CWE79\mojoportal\mojoPortal.Features.Business\Blog\PostListModel.cs
	namespace 	

mojoPortal
 
. 
Business 
{ 
public 
class 
PostListModel 
{ 
public 
Module	 
Module 
{ 
get 
; 
set !
;! "
}# $
public 
string	 
ModuleTitle 
{ 
get !
;! "
set# &
;& '
}( )
public		 
string			 
ModulePageUrl		 
{		 
get		  #
;		# $
set		% (
;		( )
}		* +
public

 
IEnumerable

	 
<

 
BlogPostModel

 "
>

" #
Posts

$ )
{

* +
get

, /
;

/ 0
set

1 4
;

4 5
}

6 7
public 

Pagination	 

Pagination 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
public 
class 

Pagination 
{ 
public 
int	 
ItemsPerPage 
{ 
get 
;  
set! $
;$ %
}& '
} 
} ﬂ∫
ÖD:\Projects\DefensePoint\whitesource-testcases-csharp\CWE79\mojoportal\mojoPortal.Features.Business\ContactForm\ContactFormMessage.cs
	namespace 	

mojoPortal
 
. 
Business 
{ 
public 

class 
ContactFormMessage #
{ 
private 
const 
string 
featureGuid (
=) *
$str+ Q
;Q R
public 
static 
Guid 
FeatureGuid &
{ 	
get 
{ 
return 
new 
Guid !
(! "
featureGuid" -
)- .
;. /
}0 1
} 	
public"" 
ContactFormMessage"" !
(""! "
)""" #
{## 	
}##
 
public&& 
ContactFormMessage&& !
(&&! "
Guid&&" &
rowGuid&&' .
)&&. /
{'' 	!
GetContactFormMessage(( !
(((! "
rowGuid((" )
)(() *
;((* +
})) 	
private// 
Guid// 
rowGuid// 
=// 
Guid// #
.//# $
Empty//$ )
;//) *
private00 
Guid00 
siteGuid00 
=00 
Guid00  $
.00$ %
Empty00% *
;00* +
private11 
Guid11 

moduleGuid11 
=11  !
Guid11" &
.11& '
Empty11' ,
;11, -
private22 
string22 
email22 
=22 
string22 %
.22% &
Empty22& +
;22+ ,
private33 
string33 
userName33 
=33  !
string33" (
.33( )
Empty33) .
;33. /
private44 
string44 
subject44 
=44  
string44! '
.44' (
Empty44( -
;44- .
private55 
string55 
message55 
=55  
string55! '
.55' (
Empty55( -
;55- .
private66 
DateTime66 

createdUtc66 #
=66$ %
DateTime66& .
.66. /
UtcNow66/ 5
;665 6
private77 
string77  
createdFromIpAddress77 +
=77, -
string77. 4
.774 5
Empty775 :
;77: ;
private88 
Guid88 
userGuid88 
=88 
Guid88  $
.88$ %
Empty88% *
;88* +
public>> 
Guid>> 
RowGuid>> 
{?? 	
get@@ 
{@@ 
return@@ 
rowGuid@@  
;@@  !
}@@" #
setAA 
{AA 
rowGuidAA 
=AA 
valueAA !
;AA! "
}AA# $
}BB 	
publicCC 
GuidCC 
SiteGuidCC 
{DD 	
getEE 
{EE 
returnEE 
siteGuidEE !
;EE! "
}EE# $
setFF 
{FF 
siteGuidFF 
=FF 
valueFF "
;FF" #
}FF$ %
}GG 	
publicHH 
GuidHH 

ModuleGuidHH 
{II 	
getJJ 
{JJ 
returnJJ 

moduleGuidJJ #
;JJ# $
}JJ% &
setKK 
{KK 

moduleGuidKK 
=KK 
valueKK $
;KK$ %
}KK& '
}LL 	
publicMM 
stringMM 
EmailMM 
{NN 	
getOO 
{OO 
returnOO 
emailOO 
;OO 
}OO  !
setPP 
{PP 
emailPP 
=PP 
valuePP 
;PP  
}PP! "
}QQ 	
publicRR 
stringRR 
UserNameRR 
{SS 	
getTT 
{TT 
returnTT 
userNameTT !
;TT! "
}TT# $
setUU 
{UU 
userNameUU 
=UU 
valueUU "
;UU" #
}UU$ %
}VV 	
publicWW 
stringWW 
SubjectWW 
{XX 	
getYY 
{YY 
returnYY 
subjectYY  
;YY  !
}YY" #
setZZ 
{ZZ 
subjectZZ 
=ZZ 
valueZZ !
;ZZ! "
}ZZ# $
}[[ 	
public\\ 
string\\ 
Message\\ 
{]] 	
get^^ 
{^^ 
return^^ 
message^^  
;^^  !
}^^" #
set__ 
{__ 
message__ 
=__ 
value__ !
;__! "
}__# $
}`` 	
publicaa 
DateTimeaa 

CreatedUtcaa "
{bb 	
getcc 
{cc 
returncc 

createdUtccc #
;cc# $
}cc% &
setdd 
{dd 

createdUtcdd 
=dd 
valuedd $
;dd$ %
}dd& '
}ee 	
publicff 
stringff  
CreatedFromIpAddressff *
{gg 	
gethh 
{hh 
returnhh  
createdFromIpAddresshh -
;hh- .
}hh/ 0
setii 
{ii  
createdFromIpAddressii &
=ii' (
valueii) .
;ii. /
}ii0 1
}jj 	
publickk 
Guidkk 
UserGuidkk 
{ll 	
getmm 
{mm 
returnmm 
userGuidmm !
;mm! "
}mm# $
setnn 
{nn 
userGuidnn 
=nn 
valuenn "
;nn" #
}nn$ %
}oo 	
privateyy 
voidyy !
GetContactFormMessageyy *
(yy* +
Guidzz 
rowGuidzz 
)zz 
{{{ 	
using|| 
(|| 
IDataReader|| 
reader|| %
=||& ' 
DBContactFormMessage||( <
.||< =
GetOne||= C
(||C D
rowGuid||D K
)||K L
)||L M
{}} 
PopulateFromReader~~ "
(~~" #
reader~~# )
)~~) *
;~~* +
} 
}
ÅÅ 	
private
ÑÑ 
void
ÑÑ  
PopulateFromReader
ÑÑ '
(
ÑÑ' (
IDataReader
ÑÑ( 3
reader
ÑÑ4 :
)
ÑÑ: ;
{
ÖÖ 	
if
ÜÜ 
(
ÜÜ 
reader
ÜÜ 
.
ÜÜ 
Read
ÜÜ 
(
ÜÜ 
)
ÜÜ 
)
ÜÜ 
{
áá 
this
àà 
.
àà 
rowGuid
àà 
=
àà 
new
àà "
Guid
àà# '
(
àà' (
reader
àà( .
[
àà. /
$str
àà/ 8
]
àà8 9
.
àà9 :
ToString
àà: B
(
ààB C
)
ààC D
)
ààD E
;
ààE F
this
ââ 
.
ââ 
siteGuid
ââ 
=
ââ 
new
ââ  #
Guid
ââ$ (
(
ââ( )
reader
ââ) /
[
ââ/ 0
$str
ââ0 :
]
ââ: ;
.
ââ; <
ToString
ââ< D
(
ââD E
)
ââE F
)
ââF G
;
ââG H
this
ää 
.
ää 

moduleGuid
ää 
=
ää  !
new
ää" %
Guid
ää& *
(
ää* +
reader
ää+ 1
[
ää1 2
$str
ää2 >
]
ää> ?
.
ää? @
ToString
ää@ H
(
ääH I
)
ääI J
)
ääJ K
;
ääK L
this
ãã 
.
ãã 
email
ãã 
=
ãã 
reader
ãã #
[
ãã# $
$str
ãã$ +
]
ãã+ ,
.
ãã, -
ToString
ãã- 5
(
ãã5 6
)
ãã6 7
;
ãã7 8
this
åå 
.
åå 
userName
åå 
=
åå 
reader
åå  &
[
åå& '
$str
åå' ,
]
åå, -
.
åå- .
ToString
åå. 6
(
åå6 7
)
åå7 8
;
åå8 9
this
çç 
.
çç 
subject
çç 
=
çç 
reader
çç %
[
çç% &
$str
çç& /
]
çç/ 0
.
çç0 1
ToString
çç1 9
(
çç9 :
)
çç: ;
;
çç; <
this
éé 
.
éé 
message
éé 
=
éé 
reader
éé %
[
éé% &
$str
éé& /
]
éé/ 0
.
éé0 1
ToString
éé1 9
(
éé9 :
)
éé: ;
;
éé; <
this
èè 
.
èè 

createdUtc
èè 
=
èè  !
Convert
èè" )
.
èè) *

ToDateTime
èè* 4
(
èè4 5
reader
èè5 ;
[
èè; <
$str
èè< H
]
èèH I
)
èèI J
;
èèJ K
this
êê 
.
êê "
createdFromIpAddress
êê )
=
êê* +
reader
êê, 2
[
êê2 3
$str
êê3 I
]
êêI J
.
êêJ K
ToString
êêK S
(
êêS T
)
êêT U
;
êêU V
this
ëë 
.
ëë 
userGuid
ëë 
=
ëë 
new
ëë  #
Guid
ëë$ (
(
ëë( )
reader
ëë) /
[
ëë/ 0
$str
ëë0 :
]
ëë: ;
.
ëë; <
ToString
ëë< D
(
ëëD E
)
ëëE F
)
ëëF G
;
ëëG H
}
ìì 
}
ïï 	
private
õõ 
bool
õõ 
Create
õõ 
(
õõ 
)
õõ 
{
úú 	
if
ùù 
(
ùù 
rowGuid
ùù 
==
ùù 
Guid
ùù 
.
ùù  
Empty
ùù  %
)
ùù% &
rowGuid
ûû 
=
ûû 
Guid
ûû 
.
ûû 
NewGuid
ûû &
(
ûû& '
)
ûû' (
;
ûû( )
int
†† 
rowsAffected
†† 
=
†† "
DBContactFormMessage
†† 3
.
††3 4
Create
††4 :
(
††: ;
this
°° 
.
°° 
rowGuid
°° 
,
°° 
this
¢¢ 
.
¢¢ 
siteGuid
¢¢ 
,
¢¢ 
this
££ 
.
££ 

moduleGuid
££ 
,
££  
this
§§ 
.
§§ 
email
§§ 
,
§§ 
this
•• 
.
•• 
userName
•• 
,
•• 
this
¶¶ 
.
¶¶ 
subject
¶¶ 
,
¶¶ 
this
ßß 
.
ßß 
message
ßß 
,
ßß 
this
®® 
.
®® 

createdUtc
®® 
,
®®  
this
©© 
.
©© "
createdFromIpAddress
©© )
,
©©) *
this
™™ 
.
™™ 
userGuid
™™ 
)
™™ 
;
™™ 
return
¨¨ 
(
¨¨ 
rowsAffected
¨¨  
>
¨¨! "
$num
¨¨# $
)
¨¨$ %
;
¨¨% &
}
ÆÆ 	
private
µµ 
bool
µµ 
Update
µµ 
(
µµ 
)
µµ 
{
∂∂ 	
return
∏∏ "
DBContactFormMessage
∏∏ '
.
∏∏' (
Update
∏∏( .
(
∏∏. /
this
ππ 
.
ππ 
rowGuid
ππ 
,
ππ 
this
∫∫ 
.
∫∫ 
siteGuid
∫∫ 
,
∫∫ 
this
ªª 
.
ªª 

moduleGuid
ªª 
,
ªª  
this
ºº 
.
ºº 
email
ºº 
,
ºº 
this
ΩΩ 
.
ΩΩ 
userName
ΩΩ 
,
ΩΩ 
this
ææ 
.
ææ 
subject
ææ 
,
ææ 
this
øø 
.
øø 
message
øø 
,
øø 
this
¿¿ 
.
¿¿ 

createdUtc
¿¿ 
,
¿¿  
this
¡¡ 
.
¡¡ "
createdFromIpAddress
¡¡ )
,
¡¡) *
this
¬¬ 
.
¬¬ 
userGuid
¬¬ 
)
¬¬ 
;
¬¬ 
}
ƒƒ 	
public
““ 
bool
““ 
Save
““ 
(
““ 
)
““ 
{
”” 	
if
‘‘ 
(
‘‘ 
this
‘‘ 
.
‘‘ 
rowGuid
‘‘ 
!=
‘‘ 
Guid
‘‘  $
.
‘‘$ %
Empty
‘‘% *
)
‘‘* +
{
’’ 
return
÷÷ 
Update
÷÷ 
(
÷÷ 
)
÷÷ 
;
÷÷  
}
◊◊ 
else
ÿÿ 
{
ŸŸ 
return
⁄⁄ 
Create
⁄⁄ 
(
⁄⁄ 
)
⁄⁄ 
;
⁄⁄  
}
€€ 
}
‹‹ 	
public
ÍÍ 
static
ÍÍ 
bool
ÍÍ 
Delete
ÍÍ !
(
ÍÍ! "
Guid
ÍÍ" &
rowGuid
ÍÍ' .
)
ÍÍ. /
{
ÎÎ 	
return
ÏÏ "
DBContactFormMessage
ÏÏ '
.
ÏÏ' (
Delete
ÏÏ( .
(
ÏÏ. /
rowGuid
ÏÏ/ 6
)
ÏÏ6 7
;
ÏÏ7 8
}
ÌÌ 	
public
ÔÔ 
static
ÔÔ 
bool
ÔÔ 
DeleteByModule
ÔÔ )
(
ÔÔ) *
Guid
ÔÔ* .

moduleGuid
ÔÔ/ 9
)
ÔÔ9 :
{
 	
return
ÒÒ "
DBContactFormMessage
ÒÒ '
.
ÒÒ' (
DeleteByModule
ÒÒ( 6
(
ÒÒ6 7

moduleGuid
ÒÒ7 A
)
ÒÒA B
;
ÒÒB C
}
ÚÚ 	
public
ÙÙ 
static
ÙÙ 
bool
ÙÙ 
DeleteBySite
ÙÙ '
(
ÙÙ' (
int
ÙÙ( +
siteId
ÙÙ, 2
)
ÙÙ2 3
{
ıı 	
return
ˆˆ "
DBContactFormMessage
ˆˆ '
.
ˆˆ' (
DeleteBySite
ˆˆ( 4
(
ˆˆ4 5
siteId
ˆˆ5 ;
)
ˆˆ; <
;
ˆˆ< =
}
˜˜ 	
public
˝˝ 
static
˝˝ 
int
˝˝ 
GetCount
˝˝ "
(
˝˝" #
Guid
˝˝# '

moduleGuid
˝˝( 2
)
˝˝2 3
{
˛˛ 	
return
ˇˇ "
DBContactFormMessage
ˇˇ '
.
ˇˇ' (
GetCount
ˇˇ( 0
(
ˇˇ0 1

moduleGuid
ˇˇ1 ;
)
ˇˇ; <
;
ˇˇ< =
}
ÄÄ 	
private
ÇÇ 
static
ÇÇ 
List
ÇÇ 
<
ÇÇ  
ContactFormMessage
ÇÇ .
>
ÇÇ. / 
LoadListFromReader
ÇÇ0 B
(
ÇÇB C
IDataReader
ÇÇC N
reader
ÇÇO U
)
ÇÇU V
{
ÉÉ 	
List
ÑÑ 
<
ÑÑ  
ContactFormMessage
ÑÑ #
>
ÑÑ# $$
contactFormMessageList
ÑÑ% ;
=
ÑÑ< =
new
ÑÑ> A
List
ÑÑB F
<
ÑÑF G 
ContactFormMessage
ÑÑG Y
>
ÑÑY Z
(
ÑÑZ [
)
ÑÑ[ \
;
ÑÑ\ ]
try
ÖÖ 
{
ÜÜ 
while
áá 
(
áá 
reader
áá 
.
áá 
Read
áá "
(
áá" #
)
áá# $
)
áá$ %
{
àà  
ContactFormMessage
ââ & 
contactFormMessage
ââ' 9
=
ââ: ;
new
ââ< ? 
ContactFormMessage
ââ@ R
(
ââR S
)
ââS T
;
ââT U 
contactFormMessage
ää &
.
ää& '
rowGuid
ää' .
=
ää/ 0
new
ää1 4
Guid
ää5 9
(
ää9 :
reader
ää: @
[
ää@ A
$str
ääA J
]
ääJ K
.
ääK L
ToString
ääL T
(
ääT U
)
ääU V
)
ääV W
;
ääW X 
contactFormMessage
ãã &
.
ãã& '
siteGuid
ãã' /
=
ãã0 1
new
ãã2 5
Guid
ãã6 :
(
ãã: ;
reader
ãã; A
[
ããA B
$str
ããB L
]
ããL M
.
ããM N
ToString
ããN V
(
ããV W
)
ããW X
)
ããX Y
;
ããY Z 
contactFormMessage
åå &
.
åå& '

moduleGuid
åå' 1
=
åå2 3
new
åå4 7
Guid
åå8 <
(
åå< =
reader
åå= C
[
ååC D
$str
ååD P
]
ååP Q
.
ååQ R
ToString
ååR Z
(
ååZ [
)
åå[ \
)
åå\ ]
;
åå] ^ 
contactFormMessage
çç &
.
çç& '
email
çç' ,
=
çç- .
reader
çç/ 5
[
çç5 6
$str
çç6 =
]
çç= >
.
çç> ?
ToString
çç? G
(
ççG H
)
ççH I
;
ççI J 
contactFormMessage
éé &
.
éé& '
userName
éé' /
=
éé0 1
reader
éé2 8
[
éé8 9
$str
éé9 >
]
éé> ?
.
éé? @
ToString
éé@ H
(
ééH I
)
ééI J
;
ééJ K 
contactFormMessage
èè &
.
èè& '
subject
èè' .
=
èè/ 0
reader
èè1 7
[
èè7 8
$str
èè8 A
]
èèA B
.
èèB C
ToString
èèC K
(
èèK L
)
èèL M
;
èèM N 
contactFormMessage
êê &
.
êê& '
message
êê' .
=
êê/ 0
reader
êê1 7
[
êê7 8
$str
êê8 A
]
êêA B
.
êêB C
ToString
êêC K
(
êêK L
)
êêL M
;
êêM N 
contactFormMessage
ëë &
.
ëë& '

createdUtc
ëë' 1
=
ëë2 3
Convert
ëë4 ;
.
ëë; <

ToDateTime
ëë< F
(
ëëF G
reader
ëëG M
[
ëëM N
$str
ëëN Z
]
ëëZ [
)
ëë[ \
;
ëë\ ] 
contactFormMessage
íí &
.
íí& '"
createdFromIpAddress
íí' ;
=
íí< =
reader
íí> D
[
ííD E
$str
ííE [
]
íí[ \
.
íí\ ]
ToString
íí] e
(
ííe f
)
ííf g
;
ííg h 
contactFormMessage
ìì &
.
ìì& '
userGuid
ìì' /
=
ìì0 1
new
ìì2 5
Guid
ìì6 :
(
ìì: ;
reader
ìì; A
[
ììA B
$str
ììB L
]
ììL M
.
ììM N
ToString
ììN V
(
ììV W
)
ììW X
)
ììX Y
;
ììY Z$
contactFormMessageList
îî *
.
îî* +
Add
îî+ .
(
îî. / 
contactFormMessage
îî/ A
)
îîA B
;
îîB C
}
ññ 
}
óó 
finally
òò 
{
ôô 
reader
öö 
.
öö 
Close
öö 
(
öö 
)
öö 
;
öö 
}
õõ 
return
ùù $
contactFormMessageList
ùù )
;
ùù) *
}
üü 	
public
≤≤ 
static
≤≤ 
IDataReader
≤≤ !
GetPageReader
≤≤" /
(
≤≤/ 0
Guid
≥≥ 

moduleGuid
≥≥ 
,
≥≥ 
int
¥¥ 

pageNumber
¥¥ 
,
¥¥ 
int
µµ 
pageSize
µµ 
,
µµ 
out
∂∂ 
int
∂∂ 

totalPages
∂∂ 
)
∂∂ 
{
∑∑ 	

totalPages
∏∏ 
=
∏∏ 
$num
∏∏ 
;
∏∏ 
return
ππ "
DBContactFormMessage
ππ '
.
ππ' (
GetPage
ππ( /
(
ππ/ 0

moduleGuid
ππ0 :
,
ππ: ;

pageNumber
ππ< F
,
ππF G
pageSize
ππH P
,
ππP Q
out
ππR U

totalPages
ππV `
)
ππ` a
;
ππa b
}
ªª 	
public
√√ 
static
√√ 
List
√√ 
<
√√  
ContactFormMessage
√√ -
>
√√- .
GetPage
√√/ 6
(
√√6 7
Guid
ƒƒ 

moduleGuid
ƒƒ 
,
ƒƒ 
int
≈≈ 

pageNumber
≈≈ 
,
≈≈ 
int
∆∆ 
pageSize
∆∆ 
,
∆∆ 
out
«« 
int
«« 

totalPages
«« 
)
«« 
{
»» 	

totalPages
…… 
=
…… 
$num
…… 
;
…… 
IDataReader
   
reader
   
=
    "
DBContactFormMessage
  ! 5
.
  5 6
GetPage
  6 =
(
  = >

moduleGuid
  > H
,
  H I

pageNumber
  J T
,
  T U
pageSize
  V ^
,
  ^ _
out
  ` c

totalPages
  d n
)
  n o
;
  o p
return
ÀÀ  
LoadListFromReader
ÀÀ %
(
ÀÀ% &
reader
ÀÀ& ,
)
ÀÀ, -
;
ÀÀ- .
}
ÃÃ 	
public
ÿÿ 
static
ÿÿ 
int
ÿÿ 
CompareByEmail
ÿÿ (
(
ÿÿ( ) 
ContactFormMessage
ÿÿ) ;!
contactFormMessage1
ÿÿ< O
,
ÿÿO P 
ContactFormMessage
ÿÿQ c!
contactFormMessage2
ÿÿd w
)
ÿÿw x
{
ŸŸ 	
return
⁄⁄ !
contactFormMessage1
⁄⁄ &
.
⁄⁄& '
Email
⁄⁄' ,
.
⁄⁄, -
	CompareTo
⁄⁄- 6
(
⁄⁄6 7!
contactFormMessage2
⁄⁄7 J
.
⁄⁄J K
Email
⁄⁄K P
)
⁄⁄P Q
;
⁄⁄Q R
}
€€ 	
public
ﬂﬂ 
static
ﬂﬂ 
int
ﬂﬂ 
CompareByUserName
ﬂﬂ +
(
ﬂﬂ+ , 
ContactFormMessage
ﬂﬂ, >!
contactFormMessage1
ﬂﬂ? R
,
ﬂﬂR S 
ContactFormMessage
ﬂﬂT f!
contactFormMessage2
ﬂﬂg z
)
ﬂﬂz {
{
‡‡ 	
return
·· !
contactFormMessage1
·· &
.
··& '
UserName
··' /
.
··/ 0
	CompareTo
··0 9
(
··9 :!
contactFormMessage2
··: M
.
··M N
UserName
··N V
)
··V W
;
··W X
}
‚‚ 	
public
ÊÊ 
static
ÊÊ 
int
ÊÊ 
CompareBySubject
ÊÊ *
(
ÊÊ* + 
ContactFormMessage
ÊÊ+ =!
contactFormMessage1
ÊÊ> Q
,
ÊÊQ R 
ContactFormMessage
ÊÊS e!
contactFormMessage2
ÊÊf y
)
ÊÊy z
{
ÁÁ 	
return
ËË !
contactFormMessage1
ËË &
.
ËË& '
Subject
ËË' .
.
ËË. /
	CompareTo
ËË/ 8
(
ËË8 9!
contactFormMessage2
ËË9 L
.
ËËL M
Subject
ËËM T
)
ËËT U
;
ËËU V
}
ÈÈ 	
public
ÌÌ 
static
ÌÌ 
int
ÌÌ 
CompareByMessage
ÌÌ *
(
ÌÌ* + 
ContactFormMessage
ÌÌ+ =!
contactFormMessage1
ÌÌ> Q
,
ÌÌQ R 
ContactFormMessage
ÌÌS e!
contactFormMessage2
ÌÌf y
)
ÌÌy z
{
ÓÓ 	
return
ÔÔ !
contactFormMessage1
ÔÔ &
.
ÔÔ& '
Message
ÔÔ' .
.
ÔÔ. /
	CompareTo
ÔÔ/ 8
(
ÔÔ8 9!
contactFormMessage2
ÔÔ9 L
.
ÔÔL M
Message
ÔÔM T
)
ÔÔT U
;
ÔÔU V
}
 	
public
ÙÙ 
static
ÙÙ 
int
ÙÙ !
CompareByCreatedUtc
ÙÙ -
(
ÙÙ- . 
ContactFormMessage
ÙÙ. @!
contactFormMessage1
ÙÙA T
,
ÙÙT U 
ContactFormMessage
ÙÙV h!
contactFormMessage2
ÙÙi |
)
ÙÙ| }
{
ıı 	
return
ˆˆ !
contactFormMessage1
ˆˆ &
.
ˆˆ& '

CreatedUtc
ˆˆ' 1
.
ˆˆ1 2
	CompareTo
ˆˆ2 ;
(
ˆˆ; <!
contactFormMessage2
ˆˆ< O
.
ˆˆO P

CreatedUtc
ˆˆP Z
)
ˆˆZ [
;
ˆˆ[ \
}
˜˜ 	
public
˚˚ 
static
˚˚ 
int
˚˚ +
CompareByCreatedFromIpAddress
˚˚ 7
(
˚˚7 8 
ContactFormMessage
˚˚8 J!
contactFormMessage1
˚˚K ^
,
˚˚^ _ 
ContactFormMessage
˚˚` r"
contactFormMessage2˚˚s Ü
)˚˚Ü á
{
¸¸ 	
return
˝˝ !
contactFormMessage1
˝˝ &
.
˝˝& '"
CreatedFromIpAddress
˝˝' ;
.
˝˝; <
	CompareTo
˝˝< E
(
˝˝E F!
contactFormMessage2
˝˝F Y
.
˝˝Y Z"
CreatedFromIpAddress
˝˝Z n
)
˝˝n o
;
˝˝o p
}
˛˛ 	
}
ÉÉ 
}ÖÖ ¯Ñ
ÇD:\Projects\DefensePoint\whitesource-testcases-csharp\CWE79\mojoportal\mojoPortal.Features.Business\EventCalendar\CalendarEvent.cs
	namespace 	

mojoPortal
 
. 
Business 
{ 
public 

class 
CalendarEvent 
:  
IIndexableContent! 2
{ 
private 
const 
string 
featureGuid (
=) *
$str+ Q
;Q R
public 
static 
Guid 
FeatureGuid &
{ 	
get 
{ 
return 
new 
Guid !
(! "
featureGuid" -
)- .
;. /
}0 1
}   	
public$$ 
CalendarEvent$$ 
($$ 
)$$ 
{%% 	
}%%
 
public(( 
CalendarEvent(( 
((( 
int((  
itemId((! '
)((' (
{)) 	
GetCalendarEvent** 
(** 
itemId** #
)**# $
;**$ %
}++ 	
private11 
static11 
readonly11 
ILog11  $
log11% (
=11) *

LogManager11+ 5
.115 6
	GetLogger116 ?
(11? @
typeof11@ F
(11F G
CalendarEvent11G T
)11T U
)11U V
;11V W
private33 
Guid33 
itemGuid33 
=33 
Guid33  $
.33$ %
Empty33% *
;33* +
private44 
Guid44 

moduleGuid44 
=44  !
Guid44" &
.44& '
Empty44' ,
;44, -
private55 
int55 
itemID55 
=55 
-55 
$num55 
;55  
private66 
int66 
moduleID66 
=66 
-66  
$num66  !
;66! "
private77 
string77 
title77 
=77 
string77 %
.77% &
Empty77& +
;77+ ,
private88 
string88 
description88 "
=88# $
string88% +
.88+ ,
Empty88, 1
;881 2
private99 
string99 
location99 
=99  !
string99" (
.99( )
Empty99) .
;99. /
private:: 
string:: 
	imageName::  
=::! "
string::# )
.::) *
Empty::* /
;::/ 0
private;; 
DateTime;; 
	eventDate;; "
=;;# $
DateTime;;% -
.;;- .
Now;;. 1
;;;1 2
private<< 
DateTime<< 
	startTime<< "
=<<# $
DateTime<<% -
.<<- .
Now<<. 1
;<<1 2
private== 
DateTime== 
endTime==  
===! "
DateTime==# +
.==+ ,
Now==, /
.==/ 0
AddHours==0 8
(==8 9
$num==9 :
)==: ;
;==; <
private>> 
DateTime>> 
createdDate>> $
=>>% &
DateTime>>' /
.>>/ 0
UtcNow>>0 6
;>>6 7
private?? 
int?? 
userID?? 
=?? 
-?? 
$num?? 
;??  
private@@ 
Guid@@ 
userGuid@@ 
=@@ 
Guid@@  $
.@@$ %
Empty@@% *
;@@* +
privateBB 
GuidBB 
lastModUserGuidBB $
=BB% &
GuidBB' +
.BB+ ,
EmptyBB, 1
;BB1 2
privateCC 
DateTimeCC 

lastModUtcCC #
=CC$ %
DateTimeCC& .
.CC. /
UtcNowCC/ 5
;CC5 6
privateDD 
boolDD 
requiresTicketDD #
=DD$ %
falseDD& +
;DD+ ,
privateEE 
decimalEE 
ticketPriceEE #
=EE$ %
$numEE& '
;EE' (
privateGG 
intGG 
siteIdGG 
=GG 
-GG 
$numGG 
;GG  
privateHH 
stringHH 
searchIndexPathHH &
=HH' (
stringHH) /
.HH/ 0
EmptyHH0 5
;HH5 6
privateII 	
boolII
 
showMapII 
=II 
trueII 
;II 
publicOO 
GuidOO 
ItemGuidOO 
{PP 	
getQQ 
{QQ 
returnQQ 
itemGuidQQ !
;QQ! "
}QQ# $
}SS 	
publicUU 
GuidUU 

ModuleGuidUU 
{VV 	
getWW 
{WW 
returnWW 

moduleGuidWW #
;WW# $
}WW% &
setXX 
{XX 

moduleGuidXX 
=XX 
valueXX $
;XX$ %
}XX& '
}YY 	
public[[ 
Guid[[ 
UserGuid[[ 
{\\ 	
get]] 
{]] 
return]] 
userGuid]] !
;]]! "
}]]# $
set^^ 
{^^ 
userGuid^^ 
=^^ 
value^^ "
;^^" #
}^^$ %
}__ 	
publicaa 
intaa 
ItemIdaa 
{bb 	
getcc 
{cc 
returncc 
itemIDcc 
;cc  
}cc! "
setdd 
{dd 
itemIDdd 
=dd 
valuedd  
;dd  !
}dd" #
}ee 	
publicff 
intff 
ModuleIdff 
{gg 	
gethh 
{hh 
returnhh 
moduleIDhh !
;hh! "
}hh# $
setii 
{ii 
moduleIDii 
=ii 
valueii "
;ii" #
}ii$ %
}jj 	
publickk 
stringkk 
Titlekk 
{ll 	
getmm 
{mm 
returnmm 
titlemm 
;mm 
}mm  !
setnn 
{nn 
titlenn 
=nn 
valuenn 
;nn  
}nn! "
}oo 	
publicpp 
stringpp 
Descriptionpp !
{qq 	
getrr 
{rr 
returnrr 
descriptionrr $
;rr$ %
}rr& '
setss 
{ss 
descriptionss 
=ss 
valuess  %
;ss% &
}ss' (
}tt 	
publicvv 
stringvv 
Locationvv 
{ww 	
getxx 
{xx 
returnxx 
locationxx !
;xx! "
}xx# $
setyy 
{yy 
locationyy 
=yy 
valueyy "
;yy" #
}yy$ %
}zz 	
public|| 
string|| 
	ImageName|| 
{}} 	
get~~ 
{~~ 
return~~ 
	imageName~~ "
;~~" #
}~~$ %
set 
{ 
	imageName 
= 
value #
;# $
}% &
}
ÄÄ 	
public
ÅÅ 
DateTime
ÅÅ 
	EventDate
ÅÅ !
{
ÇÇ 	
get
ÉÉ 
{
ÉÉ 
return
ÉÉ 
	eventDate
ÉÉ "
;
ÉÉ" #
}
ÉÉ$ %
set
ÑÑ 
{
ÑÑ 
	eventDate
ÑÑ 
=
ÑÑ 
value
ÑÑ #
;
ÑÑ# $
}
ÑÑ% &
}
ÖÖ 	
public
ÜÜ 
DateTime
ÜÜ 
	StartTime
ÜÜ !
{
áá 	
get
àà 
{
àà 
return
àà 
	startTime
àà "
;
àà" #
}
àà$ %
set
ââ 
{
ââ 
	startTime
ââ 
=
ââ 
value
ââ #
;
ââ# $
}
ââ% &
}
ää 	
public
ãã 
DateTime
ãã 
EndTime
ãã 
{
åå 	
get
çç 
{
çç 
return
çç 
endTime
çç  
;
çç  !
}
çç" #
set
éé 
{
éé 
endTime
éé 
=
éé 
value
éé !
;
éé! "
}
éé# $
}
èè 	
public
êê 
DateTime
êê 
CreatedDate
êê #
{
ëë 	
get
íí 
{
íí 
return
íí 
createdDate
íí $
;
íí$ %
}
íí& '
set
ìì 
{
ìì 
createdDate
ìì 
=
ìì 
value
ìì  %
;
ìì% &
}
ìì' (
}
îî 	
public
ïï 
int
ïï 
UserId
ïï 
{
ññ 	
get
óó 
{
óó 
return
óó 
userID
óó 
;
óó  
}
óó! "
set
òò 
{
òò 
userID
òò 
=
òò 
value
òò  
;
òò  !
}
òò" #
}
ôô 	
public
õõ 
Guid
õõ 
LastModUserGuid
õõ #
{
úú 	
get
ùù 
{
ùù 
return
ùù 
lastModUserGuid
ùù (
;
ùù( )
}
ùù* +
set
ûû 
{
ûû 
lastModUserGuid
ûû !
=
ûû" #
value
ûû$ )
;
ûû) *
}
ûû+ ,
}
üü 	
public
°° 
DateTime
°° 

LastModUtc
°° "
{
¢¢ 	
get
££ 
{
££ 
return
££ 

lastModUtc
££ #
;
££# $
}
££% &
set
§§ 
{
§§ 

lastModUtc
§§ 
=
§§ 
value
§§ $
;
§§$ %
}
§§& '
}
•• 	
public
ßß 
bool
ßß 
RequiresTicket
ßß "
{
®® 	
get
©© 
{
©© 
return
©© 
requiresTicket
©© '
;
©©' (
}
©©) *
set
™™ 
{
™™ 
requiresTicket
™™  
=
™™! "
value
™™# (
;
™™( )
}
™™* +
}
´´ 	
public
≠≠ 
decimal
≠≠ 
TicketPrice
≠≠ "
{
ÆÆ 	
get
ØØ 
{
ØØ 
return
ØØ 
ticketPrice
ØØ $
;
ØØ$ %
}
ØØ& '
set
∞∞ 
{
∞∞ 
ticketPrice
∞∞ 
=
∞∞ 
value
∞∞  %
;
∞∞% &
}
∞∞' (
}
±± 	
public
∏∏ 
int
∏∏ 
SiteId
∏∏ 
{
ππ 	
get
∫∫ 
{
∫∫ 
return
∫∫ 
siteId
∫∫ 
;
∫∫  
}
∫∫! "
set
ªª 
{
ªª 
siteId
ªª 
=
ªª 
value
ªª  
;
ªª  !
}
ªª" #
}
ºº 	
public
√√ 
string
√√ 
SearchIndexPath
√√ %
{
ƒƒ 	
get
≈≈ 
{
≈≈ 
return
≈≈ 
searchIndexPath
≈≈ (
;
≈≈( )
}
≈≈* +
set
∆∆ 
{
∆∆ 
searchIndexPath
∆∆ !
=
∆∆" #
value
∆∆$ )
;
∆∆) *
}
∆∆+ ,
}
«« 	
public
   
bool
  	 
ShowMap
   
{
ÀÀ 
get
ÃÃ 
{
ÃÃ 
return
ÃÃ	 
showMap
ÃÃ 
;
ÃÃ 
}
ÃÃ 
set
ÕÕ 
{
ÕÕ 
showMap
ÕÕ	 
=
ÕÕ 
value
ÕÕ 
;
ÕÕ 
}
ÕÕ 
}
ŒŒ 
private
”” 
void
”” 
GetCalendarEvent
”” %
(
””% &
int
””& )
itemId
””* 0
)
””0 1
{
‘‘ 	
using
’’ 
(
’’ 
IDataReader
’’ 
reader
’’ %
=
’’& '
DBEvents
’’( 0
.
’’0 1
GetCalendarEvent
’’1 A
(
’’A B
itemId
’’B H
)
’’H I
)
’’I J
{
÷÷ 
if
◊◊ 
(
◊◊ 
reader
◊◊ 
.
◊◊ 
Read
◊◊ 
(
◊◊  
)
◊◊  !
)
◊◊! "
{
ÿÿ 
this
ŸŸ 
.
ŸŸ 
itemID
ŸŸ 
=
ŸŸ  !
Convert
ŸŸ" )
.
ŸŸ) *
ToInt32
ŸŸ* 1
(
ŸŸ1 2
reader
ŸŸ2 8
[
ŸŸ8 9
$str
ŸŸ9 A
]
ŸŸA B
,
ŸŸB C
CultureInfo
ŸŸD O
.
ŸŸO P
InvariantCulture
ŸŸP `
)
ŸŸ` a
;
ŸŸa b
this
⁄⁄ 
.
⁄⁄ 
moduleID
⁄⁄ !
=
⁄⁄" #
Convert
⁄⁄$ +
.
⁄⁄+ ,
ToInt32
⁄⁄, 3
(
⁄⁄3 4
reader
⁄⁄4 :
[
⁄⁄: ;
$str
⁄⁄; E
]
⁄⁄E F
,
⁄⁄F G
CultureInfo
⁄⁄H S
.
⁄⁄S T
InvariantCulture
⁄⁄T d
)
⁄⁄d e
;
⁄⁄e f
this
€€ 
.
€€ 
title
€€ 
=
€€  
reader
€€! '
[
€€' (
$str
€€( /
]
€€/ 0
.
€€0 1
ToString
€€1 9
(
€€9 :
)
€€: ;
;
€€; <
this
‹‹ 
.
‹‹ 
description
‹‹ $
=
‹‹% &
reader
‹‹' -
[
‹‹- .
$str
‹‹. ;
]
‹‹; <
.
‹‹< =
ToString
‹‹= E
(
‹‹E F
)
‹‹F G
;
‹‹G H
this
›› 
.
›› 
	imageName
›› "
=
››# $
reader
››% +
[
››+ ,
$str
››, 7
]
››7 8
.
››8 9
ToString
››9 A
(
››A B
)
››B C
;
››C D
this
ﬁﬁ 
.
ﬁﬁ 
	eventDate
ﬁﬁ "
=
ﬁﬁ# $
Convert
ﬁﬁ% ,
.
ﬁﬁ, -

ToDateTime
ﬁﬁ- 7
(
ﬁﬁ7 8
reader
ﬁﬁ8 >
[
ﬁﬁ> ?
$str
ﬁﬁ? J
]
ﬁﬁJ K
,
ﬁﬁK L
CultureInfo
ﬁﬁM X
.
ﬁﬁX Y
CurrentCulture
ﬁﬁY g
)
ﬁﬁg h
;
ﬁﬁh i
this
ﬂﬂ 
.
ﬂﬂ 
	startTime
ﬂﬂ "
=
ﬂﬂ# $
Convert
ﬂﬂ% ,
.
ﬂﬂ, -

ToDateTime
ﬂﬂ- 7
(
ﬂﬂ7 8
reader
ﬂﬂ8 >
[
ﬂﬂ> ?
$str
ﬂﬂ? J
]
ﬂﬂJ K
,
ﬂﬂK L
CultureInfo
ﬂﬂM X
.
ﬂﬂX Y
CurrentCulture
ﬂﬂY g
)
ﬂﬂg h
;
ﬂﬂh i
this
‡‡ 
.
‡‡ 
endTime
‡‡  
=
‡‡! "
Convert
‡‡# *
.
‡‡* +

ToDateTime
‡‡+ 5
(
‡‡5 6
reader
‡‡6 <
[
‡‡< =
$str
‡‡= F
]
‡‡F G
,
‡‡G H
CultureInfo
‡‡I T
.
‡‡T U
CurrentCulture
‡‡U c
)
‡‡c d
;
‡‡d e
this
·· 
.
·· 
createdDate
·· $
=
··% &
Convert
··' .
.
··. /

ToDateTime
··/ 9
(
··9 :
reader
··: @
[
··@ A
$str
··A N
]
··N O
,
··O P
CultureInfo
··Q \
.
··\ ]
CurrentCulture
··] k
)
··k l
;
··l m
this
‚‚ 
.
‚‚ 
userID
‚‚ 
=
‚‚  !
Convert
‚‚" )
.
‚‚) *
ToInt32
‚‚* 1
(
‚‚1 2
reader
‚‚2 8
[
‚‚8 9
$str
‚‚9 A
]
‚‚A B
,
‚‚B C
CultureInfo
‚‚D O
.
‚‚O P
InvariantCulture
‚‚P `
)
‚‚` a
;
‚‚a b
this
‰‰ 
.
‰‰ 
itemGuid
‰‰ !
=
‰‰" #
new
‰‰$ '
Guid
‰‰( ,
(
‰‰, -
reader
‰‰- 3
[
‰‰3 4
$str
‰‰4 >
]
‰‰> ?
.
‰‰? @
ToString
‰‰@ H
(
‰‰H I
)
‰‰I J
)
‰‰J K
;
‰‰K L
this
ÂÂ 
.
ÂÂ 

moduleGuid
ÂÂ #
=
ÂÂ$ %
new
ÂÂ& )
Guid
ÂÂ* .
(
ÂÂ. /
reader
ÂÂ/ 5
[
ÂÂ5 6
$str
ÂÂ6 B
]
ÂÂB C
.
ÂÂC D
ToString
ÂÂD L
(
ÂÂL M
)
ÂÂM N
)
ÂÂN O
;
ÂÂO P
this
ÊÊ 
.
ÊÊ 
location
ÊÊ !
=
ÊÊ" #
reader
ÊÊ$ *
[
ÊÊ* +
$str
ÊÊ+ 5
]
ÊÊ5 6
.
ÊÊ6 7
ToString
ÊÊ7 ?
(
ÊÊ? @
)
ÊÊ@ A
;
ÊÊA B
string
ÁÁ 
u
ÁÁ 
=
ÁÁ 
reader
ÁÁ %
[
ÁÁ% &
$str
ÁÁ& 0
]
ÁÁ0 1
.
ÁÁ1 2
ToString
ÁÁ2 :
(
ÁÁ: ;
)
ÁÁ; <
;
ÁÁ< =
if
ËË 
(
ËË 
u
ËË 
.
ËË 
Length
ËË  
==
ËË! #
$num
ËË$ &
)
ËË& '
this
ËË( ,
.
ËË, -
userGuid
ËË- 5
=
ËË6 7
new
ËË8 ;
Guid
ËË< @
(
ËË@ A
u
ËËA B
)
ËËB C
;
ËËC D
u
ÍÍ 
=
ÍÍ 
reader
ÍÍ 
[
ÍÍ 
$str
ÍÍ 0
]
ÍÍ0 1
.
ÍÍ1 2
ToString
ÍÍ2 :
(
ÍÍ: ;
)
ÍÍ; <
;
ÍÍ< =
if
ÎÎ 
(
ÎÎ 
u
ÎÎ 
.
ÎÎ 
Length
ÎÎ  
==
ÎÎ! #
$num
ÎÎ$ &
)
ÎÎ& '
this
ÎÎ( ,
.
ÎÎ, -
lastModUserGuid
ÎÎ- <
=
ÎÎ= >
new
ÎÎ? B
Guid
ÎÎC G
(
ÎÎG H
u
ÎÎH I
)
ÎÎI J
;
ÎÎJ K
if
ÌÌ 
(
ÌÌ 
reader
ÌÌ 
[
ÌÌ 
$str
ÌÌ +
]
ÌÌ+ ,
!=
ÌÌ- /
DBNull
ÌÌ0 6
.
ÌÌ6 7
Value
ÌÌ7 <
)
ÌÌ< =
{
ÓÓ 
this
ÔÔ 
.
ÔÔ 

lastModUtc
ÔÔ '
=
ÔÔ( )
Convert
ÔÔ* 1
.
ÔÔ1 2

ToDateTime
ÔÔ2 <
(
ÔÔ< =
reader
ÔÔ= C
[
ÔÔC D
$str
ÔÔD P
]
ÔÔP Q
,
ÔÔQ R
CultureInfo
ÔÔS ^
.
ÔÔ^ _
CurrentCulture
ÔÔ_ m
)
ÔÔm n
;
ÔÔn o
}
ÒÒ 
this
ÛÛ 
.
ÛÛ 
requiresTicket
ÛÛ '
=
ÛÛ( )
Convert
ÛÛ* 1
.
ÛÛ1 2
	ToBoolean
ÛÛ2 ;
(
ÛÛ; <
reader
ÛÛ< B
[
ÛÛB C
$str
ÛÛC S
]
ÛÛS T
,
ÛÛT U
CultureInfo
ÛÛV a
.
ÛÛa b
InvariantCulture
ÛÛb r
)
ÛÛr s
;
ÛÛs t
this
ÙÙ 
.
ÙÙ 
ticketPrice
ÙÙ $
=
ÙÙ% &
Convert
ÙÙ' .
.
ÙÙ. /
	ToDecimal
ÙÙ/ 8
(
ÙÙ8 9
reader
ÙÙ9 ?
[
ÙÙ? @
$str
ÙÙ@ M
]
ÙÙM N
,
ÙÙN O
CultureInfo
ÙÙP [
.
ÙÙ[ \
InvariantCulture
ÙÙ\ l
)
ÙÙl m
;
ÙÙm n
this
ıı 	
.
ıı	 

showMap
ıı
 
=
ıı 
Convert
ıı 
.
ıı 
	ToBoolean
ıı %
(
ıı% &
reader
ıı& ,
[
ıı, -
$str
ıı- 6
]
ıı6 7
,
ıı7 8
CultureInfo
ıı9 D
.
ııD E
InvariantCulture
ııE U
)
ııU V
;
ııV W
}
ˆˆ 
}
¯¯ 
}
˙˙ 	
private
¸¸ 
bool
¸¸ 
Create
¸¸ 
(
¸¸ 
)
¸¸ 
{
˝˝ 	
int
˛˛ 
newID
˛˛ 
;
˛˛ 
this
ÄÄ 
.
ÄÄ 
itemGuid
ÄÄ 
=
ÄÄ 
Guid
ÄÄ  
.
ÄÄ  !
NewGuid
ÄÄ! (
(
ÄÄ( )
)
ÄÄ) *
;
ÄÄ* +
this
ÅÅ 
.
ÅÅ 
createdDate
ÅÅ 
=
ÅÅ 
DateTime
ÅÅ '
.
ÅÅ' (
UtcNow
ÅÅ( .
;
ÅÅ. /
newID
ÉÉ 
=
ÉÉ 
DBEvents
ÉÉ 
.
ÉÉ 
AddCalendarEvent
ÉÉ -
(
ÉÉ- .
this
ÑÑ 
.
ÑÑ 
itemGuid
ÑÑ 
,
ÑÑ 
this
ÖÖ 
.
ÖÖ 

moduleGuid
ÖÖ 
,
ÖÖ  
this
ÜÜ 
.
ÜÜ 
moduleID
ÜÜ 
,
ÜÜ 
this
áá 
.
áá 
title
áá 
,
áá 
this
àà 
.
àà 
description
àà  
,
àà  !
this
ââ 
.
ââ 
	imageName
ââ 
,
ââ 
this
ää 
.
ää 
	eventDate
ää 
,
ää 
this
ãã 
.
ãã 
	startTime
ãã 
,
ãã 
this
åå 
.
åå 
endTime
åå 
,
åå 
this
çç 
.
çç 
userID
çç 
,
çç 
this
éé 
.
éé 
userGuid
éé 
,
éé 
this
èè 
.
èè 
location
èè 
,
èè 
this
êê 
.
êê 
requiresTicket
êê #
,
êê# $
this
ëë 
.
ëë 
ticketPrice
ëë  
,
ëë  !
this
íí 
.
íí 
createdDate
íí  
,
íí  !
this
ìì 
.
ìì 	
showMap
ìì	 
)
ìì 
;
ìì 
this
ïï 
.
ïï 
itemID
ïï 
=
ïï 
newID
ïï 
;
ïï  
bool
óó 
result
óó 
=
óó 
(
óó 
newID
óó  
>
óó! "
-
óó# $
$num
óó$ %
)
óó% &
;
óó& '
if
ôô 
(
ôô 
result
ôô 
)
ôô 
{
öö %
ContentChangedEventArgs
õõ '
e
õõ( )
=
õõ* +
new
õõ, /%
ContentChangedEventArgs
õõ0 G
(
õõG H
)
õõH I
;
õõI J
OnContentChanged
úú  
(
úú  !
e
úú! "
)
úú" #
;
úú# $
}
ùù 
return
üü 
result
üü 
;
üü 
}
°° 	
private
££ 
bool
££ 
Update
££ 
(
££ 
)
££ 
{
§§ 	
this
•• 
.
•• 

lastModUtc
•• 
=
•• 
DateTime
•• &
.
••& '
UtcNow
••' -
;
••- .
bool
ßß 
result
ßß 
=
ßß 
DBEvents
ßß "
.
ßß" #!
UpdateCalendarEvent
ßß# 6
(
ßß6 7
this
®® 
.
®® 
itemID
®® 
,
®® 
this
©© 
.
©© 
moduleID
©© 
,
©© 
this
™™ 
.
™™ 
title
™™ 
,
™™ 
this
´´ 
.
´´ 
description
´´  
,
´´  !
this
¨¨ 
.
¨¨ 
	imageName
¨¨ 
,
¨¨ 
this
≠≠ 
.
≠≠ 
	eventDate
≠≠ 
,
≠≠ 
this
ÆÆ 
.
ÆÆ 
	startTime
ÆÆ 
,
ÆÆ 
this
ØØ 
.
ØØ 
endTime
ØØ 
,
ØØ 
this
∞∞ 
.
∞∞ 
location
∞∞ 
,
∞∞ 
this
±± 
.
±± 
requiresTicket
±± #
,
±±# $
this
≤≤ 
.
≤≤ 
ticketPrice
≤≤  
,
≤≤  !
this
≥≥ 
.
≥≥ 

lastModUtc
≥≥ 
,
≥≥  
this
¥¥ 
.
¥¥ 
lastModUserGuid
¥¥ $
,
¥¥$ %
this
µµ 
.
µµ 	
showMap
µµ	 
)
µµ 
;
µµ 
if
∑∑ 
(
∑∑ 
result
∑∑ 
)
∑∑ 
{
∏∏ %
ContentChangedEventArgs
ππ '
e
ππ( )
=
ππ* +
new
ππ, /%
ContentChangedEventArgs
ππ0 G
(
ππG H
)
ππH I
;
ππI J
OnContentChanged
∫∫  
(
∫∫  !
e
∫∫! "
)
∫∫" #
;
∫∫# $
}
ªª 
return
ΩΩ 
result
ΩΩ 
;
ΩΩ 
}
øø 	
public
∆∆ 
bool
∆∆ 
Save
∆∆ 
(
∆∆ 
)
∆∆ 
{
«« 	
if
»» 
(
»» 
this
»» 
.
»» 
itemID
»» 
>
»» 
$num
»» 
)
»»  
{
…… 
return
   
Update
   
(
   
)
   
;
    
}
ÀÀ 
else
ÃÃ 
{
ÕÕ 
return
ŒŒ 
Create
ŒŒ 
(
ŒŒ 
)
ŒŒ 
;
ŒŒ  
}
œœ 
}
–– 	
public
““ 
bool
““ 
Delete
““ 
(
““ 
)
““ 
{
”” 	
bool
’’ 
result
’’ 
=
’’ 
DBEvents
’’ "
.
’’" #!
DeleteCalendarEvent
’’# 6
(
’’6 7
itemID
’’7 =
)
’’= >
;
’’> ?
if
◊◊ 
(
◊◊ 
result
◊◊ 
)
◊◊ 
{
ÿÿ %
ContentChangedEventArgs
ŸŸ '
e
ŸŸ( )
=
ŸŸ* +
new
ŸŸ, /%
ContentChangedEventArgs
ŸŸ0 G
(
ŸŸG H
)
ŸŸH I
;
ŸŸI J
e
⁄⁄ 
.
⁄⁄ 
	IsDeleted
⁄⁄ 
=
⁄⁄ 
true
⁄⁄ "
;
⁄⁄" #
OnContentChanged
€€  
(
€€  !
e
€€! "
)
€€" #
;
€€# $
}
‹‹ 
return
ﬁﬁ 
result
ﬁﬁ 
;
ﬁﬁ 
}
‡‡ 	
public
ÔÔ 
static
ÔÔ 
bool
ÔÔ 
DeleteByModule
ÔÔ )
(
ÔÔ) *
int
ÔÔ* -
moduleId
ÔÔ. 6
)
ÔÔ6 7
{
 	
return
ÒÒ 
DBEvents
ÒÒ 
.
ÒÒ 
DeleteByModule
ÒÒ *
(
ÒÒ* +
moduleId
ÒÒ+ 3
)
ÒÒ3 4
;
ÒÒ4 5
}
ÚÚ 	
public
ÙÙ 
static
ÙÙ 
bool
ÙÙ 
DeleteBySite
ÙÙ '
(
ÙÙ' (
int
ÙÙ( +
siteId
ÙÙ, 2
)
ÙÙ2 3
{
ıı 	
return
ˆˆ 
DBEvents
ˆˆ 
.
ˆˆ 
DeleteBySite
ˆˆ (
(
ˆˆ( )
siteId
ˆˆ) /
)
ˆˆ/ 0
;
ˆˆ0 1
}
˜˜ 	
public
˙˙ 
static
˙˙ 
DataSet
˙˙ 
	GetEvents
˙˙ '
(
˙˙' (
int
˙˙( +
moduleId
˙˙, 4
,
˙˙4 5
DateTime
˙˙6 >
	beginDate
˙˙? H
,
˙˙H I
DateTime
˙˙J R
endDate
˙˙S Z
)
˙˙Z [
{
˚˚ 	
return
¸¸ 
DBEvents
¸¸ 
.
¸¸ 
	GetEvents
¸¸ %
(
¸¸% &
moduleId
¸¸& .
,
¸¸. /
	beginDate
¸¸0 9
,
¸¸9 :
endDate
¸¸; B
)
¸¸B C
;
¸¸C D
}
˝˝ 	
public
ˇˇ 
static
ˇˇ 
	DataTable
ˇˇ 
GetEventsTable
ˇˇ  .
(
ˇˇ. /
int
ˇˇ/ 2
moduleId
ˇˇ3 ;
,
ˇˇ; <
DateTime
ˇˇ= E
	beginDate
ˇˇF O
,
ˇˇO P
DateTime
ˇˇQ Y
endDate
ˇˇZ a
)
ˇˇa b
{
ÄÄ 	
return
ÅÅ 
DBEvents
ÅÅ 
.
ÅÅ 
GetEventsTable
ÅÅ *
(
ÅÅ* +
moduleId
ÅÅ+ 3
,
ÅÅ3 4
	beginDate
ÅÅ5 >
,
ÅÅ> ?
endDate
ÅÅ@ G
)
ÅÅG H
;
ÅÅH I
}
ÇÇ 	
public
ÖÖ 
static
ÖÖ 
	DataTable
ÖÖ 
GetEventsByPage
ÖÖ  /
(
ÖÖ/ 0
int
ÖÖ0 3
siteId
ÖÖ4 :
,
ÖÖ: ;
int
ÖÖ< ?
pageId
ÖÖ@ F
)
ÖÖF G
{
ÜÜ 	
	DataTable
áá 
	dataTable
áá 
=
áá  !
new
áá" %
	DataTable
áá& /
(
áá/ 0
)
áá0 1
;
áá1 2
	dataTable
ââ 
.
ââ 
Columns
ââ 
.
ââ 
Add
ââ !
(
ââ! "
$str
ââ" *
,
ââ* +
typeof
ââ, 2
(
ââ2 3
int
ââ3 6
)
ââ6 7
)
ââ7 8
;
ââ8 9
	dataTable
ää 
.
ää 
Columns
ää 
.
ää 
Add
ää !
(
ää! "
$str
ää" ,
,
ää, -
typeof
ää. 4
(
ää4 5
int
ää5 8
)
ää8 9
)
ää9 :
;
ää: ;
	dataTable
ãã 
.
ãã 
Columns
ãã 
.
ãã 
Add
ãã !
(
ãã! "
$str
ãã" /
,
ãã/ 0
typeof
ãã1 7
(
ãã7 8
string
ãã8 >
)
ãã> ?
)
ãã? @
;
ãã@ A
	dataTable
åå 
.
åå 
Columns
åå 
.
åå 
Add
åå !
(
åå! "
$str
åå" )
,
åå) *
typeof
åå+ 1
(
åå1 2
string
åå2 8
)
åå8 9
)
åå9 :
;
åå: ;
	dataTable
çç 
.
çç 
Columns
çç 
.
çç 
Add
çç !
(
çç! "
$str
çç" /
,
çç/ 0
typeof
çç1 7
(
çç7 8
string
çç8 >
)
çç> ?
)
çç? @
;
çç@ A
	dataTable
éé 
.
éé 
Columns
éé 
.
éé 
Add
éé !
(
éé! "
$str
éé" -
,
éé- .
typeof
éé/ 5
(
éé5 6
string
éé6 <
)
éé< =
)
éé= >
;
éé> ?
	dataTable
êê 
.
êê 
Columns
êê 
.
êê 
Add
êê !
(
êê! "
$str
êê" /
,
êê/ 0
typeof
êê1 7
(
êê7 8
DateTime
êê8 @
)
êê@ A
)
êêA B
;
êêB C
	dataTable
ëë 
.
ëë 
Columns
ëë 
.
ëë 
Add
ëë !
(
ëë! "
$str
ëë" .
,
ëë. /
typeof
ëë0 6
(
ëë6 7
DateTime
ëë7 ?
)
ëë? @
)
ëë@ A
;
ëëA B
	dataTable
íí 
.
íí 
Columns
íí 
.
íí 
Add
íí 
(
íí 
$str
íí "
,
íí" #
typeof
íí$ *
(
íí* +
bool
íí+ /
)
íí/ 0
)
íí0 1
;
íí1 2
using
ìì 
(
ìì 
IDataReader
ìì 
reader
ìì %
=
ìì& '
DBEvents
ìì( 0
.
ìì0 1
GetEventsByPage
ìì1 @
(
ìì@ A
siteId
ììA G
,
ììG H
pageId
ììI O
)
ììO P
)
ììP Q
{
îî 
while
ïï 
(
ïï 
reader
ïï 
.
ïï 
Read
ïï "
(
ïï" #
)
ïï# $
)
ïï$ %
{
ññ 
DataRow
óó 
row
óó 
=
óó  !
	dataTable
óó" +
.
óó+ ,
NewRow
óó, 2
(
óó2 3
)
óó3 4
;
óó4 5
row
ôô 
[
ôô 
$str
ôô  
]
ôô  !
=
ôô" #
reader
ôô$ *
[
ôô* +
$str
ôô+ 3
]
ôô3 4
;
ôô4 5
row
öö 
[
öö 
$str
öö "
]
öö" #
=
öö$ %
reader
öö& ,
[
öö, -
$str
öö- 7
]
öö7 8
;
öö8 9
row
õõ 
[
õõ 
$str
õõ %
]
õõ% &
=
õõ' (
reader
õõ) /
[
õõ/ 0
$str
õõ0 =
]
õõ= >
;
õõ> ?
row
úú 
[
úú 
$str
úú 
]
úú  
=
úú! "
reader
úú# )
[
úú) *
$str
úú* 1
]
úú1 2
;
úú2 3
row
ùù 
[
ùù 
$str
ùù %
]
ùù% &
=
ùù' (
reader
ùù) /
[
ùù/ 0
$str
ùù0 =
]
ùù= >
;
ùù> ?
row
ûû 
[
ûû 
$str
ûû #
]
ûû# $
=
ûû% &
reader
ûû' -
[
ûû- .
$str
ûû. 9
]
ûû9 :
;
ûû: ;
row
†† 
[
†† 
$str
†† %
]
††% &
=
††' (
Convert
††) 0
.
††0 1

ToDateTime
††1 ;
(
††; <
reader
††< B
[
††B C
$str
††C P
]
††P Q
)
††Q R
;
††R S
row
°° 
[
°° 
$str
°° $
]
°°$ %
=
°°& '
Convert
°°( /
.
°°/ 0

ToDateTime
°°0 :
(
°°: ;
reader
°°; A
[
°°A B
$str
°°B N
]
°°N O
)
°°O P
;
°°P Q
row
¢¢ 
[
¢¢ 	
$str
¢¢	 
]
¢¢ 
=
¢¢ 
Convert
¢¢ 
.
¢¢ 
	ToBoolean
¢¢ '
(
¢¢' (
reader
¢¢( .
[
¢¢. /
$str
¢¢/ 8
]
¢¢8 9
)
¢¢9 :
;
¢¢: ;
	dataTable
££ 
.
££ 
Rows
££ "
.
££" #
Add
££# &
(
££& '
row
££' *
)
££* +
;
££+ ,
}
§§ 
}
•• 
return
ßß 
	dataTable
ßß 
;
ßß 
}
©© 	
public
∞∞ 
event
∞∞ (
ContentChangedEventHandler
∞∞ /
ContentChanged
∞∞0 >
;
∞∞> ?
	protected
≤≤ 
void
≤≤ 
OnContentChanged
≤≤ '
(
≤≤' (%
ContentChangedEventArgs
≤≤( ?
e
≤≤@ A
)
≤≤A B
{
≥≥ 	
if
¥¥ 
(
¥¥ 
ContentChanged
¥¥ 
!=
¥¥ !
null
¥¥" &
)
¥¥& '
{
µµ 
ContentChanged
∂∂ 
(
∂∂ 
this
∂∂ #
,
∂∂# $
e
∂∂% &
)
∂∂& '
;
∂∂' (
}
∑∑ 
}
∏∏ 	
}
ææ 
}¿¿ “â
zD:\Projects\DefensePoint\whitesource-testcases-csharp\CWE79\mojoportal\mojoPortal.Features.Business\FeedManager\RssFeed.cs
	namespace 	

mojoPortal
 
. 
Business 
{ 
public 

class 
RssFeed 
{ 
private 
const 
string 
featureGuid (
=) *
$str+ Q
;Q R
public 
static 
Guid 
FeatureGuid &
{ 	
get 
{ 
return 
new 
Guid !
(! "
featureGuid" -
)- .
;. /
}0 1
}   	
public$$ 
RssFeed$$ 
($$ 
)$$ 
{%% 	
}%%
 
public'' 
RssFeed'' 
('' 
int'' 
moduleId'' #
)''# $
{(( 	
this)) 
.)) 
moduleID)) 
=)) 
moduleId)) $
;))$ %
}** 	
public-- 
RssFeed-- 
(-- 
int-- 
moduleId-- #
,--# $
int--% (
itemId--) /
)--/ 0
{.. 	
this// 
.// 
moduleID// 
=// 
moduleId// $
;//$ %
if00 
(00 
itemId00 
>00 
$num00 
)00 
{11 

GetRssFeed22 
(22 
itemId22 !
)22! "
;22" #
}33 
}55 	
private<< 
static<< 
readonly<< 
log4net<<  '
.<<' (
ILog<<( ,
log<<- 0
=== 
log4net== 
.== 

LogManager==  
.==  !
	GetLogger==! *
(==* +
typeof==+ 1
(==1 2
RssFeed==2 9
)==9 :
)==: ;
;==; <
private?? 
Guid?? 
itemGuid?? 
=?? 
Guid??  $
.??$ %
Empty??% *
;??* +
private@@ 
Guid@@ 

moduleGuid@@ 
=@@  !
Guid@@" &
.@@& '
Empty@@' ,
;@@, -
privateAA 
GuidAA 
userGuidAA 
=AA 
GuidAA  $
.AA$ %
EmptyAA% *
;AA* +
privateBB 
GuidBB 
lastModUserGuidBB $
=BB% &
GuidBB' +
.BB+ ,
EmptyBB, 1
;BB1 2
privateCC 
DateTimeCC 

lastModUtcCC #
=CC$ %
DateTimeCC& .
.CC. /
UtcNowCC/ 5
;CC5 6
privateEE 
intEE 
itemIDEE 
=EE 
-EE 
$numEE 
;EE  
privateFF 
intFF 
moduleIDFF 
=FF 
-FF  
$numFF  !
;FF! "
privateGG 
DateTimeGG 
createdDateGG $
=GG% &
DateTimeGG' /
.GG/ 0
UtcNowGG0 6
;GG6 7
privateHH 
intHH 
userIDHH 
=HH 
-HH 
$numHH 
;HH  
privateII 
stringII 
authorII 
=II 
stringII  &
.II& '
EmptyII' ,
;II, -
privateJJ 
stringJJ 
urlJJ 
=JJ 
stringJJ #
.JJ# $
EmptyJJ$ )
;JJ) *
privateKK 
stringKK 
rssUrlKK 
=KK 
stringKK  &
.KK& '
EmptyKK' ,
;KK, -
privateLL 
stringLL 
imageUrlLL 
=LL  !
stringLL" (
.LL( )
EmptyLL) .
;LL. /
privateMM 
stringMM 
feedTypeMM 
=MM  !
$strMM" '
;MM' (
privateNN 
boolNN 
publishByDefaultNN %
=NN& '
falseNN( -
;NN- .
privateOO 
intOO 
sortRankOO 
=OO 
$numOO "
;OO" #
publicXX 
GuidXX 
ItemGuidXX 
{YY 	
getZZ 
{ZZ 
returnZZ 
itemGuidZZ !
;ZZ! "
}ZZ# $
}[[ 	
public]] 
Guid]] 

ModuleGuid]] 
{^^ 	
get__ 
{__ 
return__ 

moduleGuid__ #
;__# $
}__% &
set`` 
{`` 

moduleGuid`` 
=`` 
value`` $
;``$ %
}``& '
}aa 	
publiccc 
Guidcc 
UserGuidcc 
{dd 	
getee 
{ee 
returnee 
userGuidee !
;ee! "
}ee# $
setff 
{ff 
userGuidff 
=ff 
valueff "
;ff" #
}ff$ %
}gg 	
publicii 
Guidii 
LastModUserGuidii #
{jj 	
getkk 
{kk 
returnkk 
lastModUserGuidkk (
;kk( )
}kk* +
setll 
{ll 
lastModUserGuidll !
=ll" #
valuell$ )
;ll) *
}ll+ ,
}mm 	
publicoo 
intoo 
ItemIdoo 
{pp 	
getqq 
{qq 
returnqq 
itemIDqq 
;qq  
}qq! "
setrr 
{rr 
itemIDrr 
=rr 
valuerr  
;rr  !
}rr" #
}ss 	
publicvv 
intvv 
ModuleIdvv 
{ww 	
getxx 
{xx 
returnxx 
moduleIDxx !
;xx! "
}xx# $
setyy 
{yy 
moduleIDyy 
=yy 
valueyy "
;yy" #
}yy$ %
}zz 	
public{{ 
DateTime{{ 
CreatedDate{{ #
{|| 	
get}} 
{}} 
return}} 
createdDate}} $
;}}$ %
}}}& '
set~~ 
{~~ 
createdDate~~ 
=~~ 
value~~  %
;~~% &
}~~' (
} 	
public
ÅÅ 
DateTime
ÅÅ 

LastModUtc
ÅÅ "
{
ÇÇ 	
get
ÉÉ 
{
ÉÉ 
return
ÉÉ 

lastModUtc
ÉÉ #
;
ÉÉ# $
}
ÉÉ% &
set
ÑÑ 
{
ÑÑ 

lastModUtc
ÑÑ 
=
ÑÑ 
value
ÑÑ $
;
ÑÑ$ %
}
ÑÑ& '
}
ÖÖ 	
public
àà 
int
àà 
UserId
àà 
{
ââ 	
get
ää 
{
ää 
return
ää 
userID
ää 
;
ää  
}
ää! "
set
ãã 
{
ãã 
userID
ãã 
=
ãã 
value
ãã  
;
ãã  !
}
ãã" #
}
åå 	
public
çç 
string
çç 
Author
çç 
{
éé 	
get
èè 
{
èè 
return
èè 
author
èè 
;
èè  
}
èè! "
set
êê 
{
êê 
author
êê 
=
êê 
value
êê  
;
êê  !
}
êê" #
}
ëë 	
public
íí 
string
íí 
Url
íí 
{
ìì 	
get
îî 
{
îî 
return
îî 
url
îî 
;
îî 
}
îî 
set
ïï 
{
ïï 
url
ïï 
=
ïï 
value
ïï 
;
ïï 
}
ïï  
}
ññ 	
public
óó 
string
óó 
RssUrl
óó 
{
òò 	
get
ôô 
{
ôô 
return
ôô 
rssUrl
ôô 
;
ôô  
}
ôô! "
set
öö 
{
öö 
rssUrl
öö 
=
öö 
value
öö  
;
öö  !
}
öö" #
}
õõ 	
public
ùù 
string
ùù 
ImageUrl
ùù 
{
ûû 	
get
üü 
{
üü 
return
üü 
imageUrl
üü !
;
üü! "
}
üü# $
set
†† 
{
†† 
imageUrl
†† 
=
†† 
value
†† "
;
††" #
}
††$ %
}
°° 	
public
££ 
string
££ 
FeedType
££ 
{
§§ 	
get
•• 
{
•• 
return
•• 
feedType
•• !
;
••! "
}
••# $
set
¶¶ 
{
¶¶ 
feedType
¶¶ 
=
¶¶ 
value
¶¶ "
;
¶¶" #
}
¶¶$ %
}
ßß 	
public
©© 
bool
©© 
PublishByDefault
©© $
{
™™ 	
get
´´ 
{
´´ 
return
´´ 
publishByDefault
´´ )
;
´´) *
}
´´+ ,
set
¨¨ 
{
¨¨ 
publishByDefault
¨¨ "
=
¨¨# $
value
¨¨% *
;
¨¨* +
}
¨¨, -
}
≠≠ 	
public
ØØ 
int
ØØ 
SortRank
ØØ 
{
∞∞ 	
get
±± 
{
±± 
return
±± 
sortRank
±± !
;
±±! "
}
±±# $
set
≤≤ 
{
≤≤ 
sortRank
≤≤ 
=
≤≤ 
value
≤≤ "
;
≤≤" #
}
≤≤$ %
}
≥≥ 	
private
ππ 
void
ππ 

GetRssFeed
ππ 
(
ππ  
int
ππ  #
itemId
ππ$ *
)
ππ* +
{
∫∫ 	
using
ªª 
(
ªª 
IDataReader
ªª 
reader
ªª %
=
ªª& '
	DBRssFeed
ªª( 1
.
ªª1 2

GetRssFeed
ªª2 <
(
ªª< =
itemId
ªª= C
)
ªªC D
)
ªªD E
{
ºº 
if
ΩΩ 
(
ΩΩ 
reader
ΩΩ 
.
ΩΩ 
Read
ΩΩ 
(
ΩΩ  
)
ΩΩ  !
)
ΩΩ! "
{
ææ 
this
øø 
.
øø 
itemID
øø 
=
øø  !
Convert
øø" )
.
øø) *
ToInt32
øø* 1
(
øø1 2
reader
øø2 8
[
øø8 9
$str
øø9 A
]
øøA B
)
øøB C
;
øøC D
this
¿¿ 
.
¿¿ 
moduleID
¿¿ !
=
¿¿" #
Convert
¿¿$ +
.
¿¿+ ,
ToInt32
¿¿, 3
(
¿¿3 4
reader
¿¿4 :
[
¿¿: ;
$str
¿¿; E
]
¿¿E F
)
¿¿F G
;
¿¿G H
this
¡¡ 
.
¡¡ 
createdDate
¡¡ $
=
¡¡% &
Convert
¡¡' .
.
¡¡. /

ToDateTime
¡¡/ 9
(
¡¡9 :
reader
¡¡: @
[
¡¡@ A
$str
¡¡A N
]
¡¡N O
)
¡¡O P
;
¡¡P Q
this
¬¬ 
.
¬¬ 
userID
¬¬ 
=
¬¬  !
Convert
¬¬" )
.
¬¬) *
ToInt32
¬¬* 1
(
¬¬1 2
reader
¬¬2 8
[
¬¬8 9
$str
¬¬9 A
]
¬¬A B
)
¬¬B C
;
¬¬C D
this
√√ 
.
√√ 
author
√√ 
=
√√  !
reader
√√" (
[
√√( )
$str
√√) 1
]
√√1 2
.
√√2 3
ToString
√√3 ;
(
√√; <
)
√√< =
;
√√= >
this
ƒƒ 
.
ƒƒ 
url
ƒƒ 
=
ƒƒ 
reader
ƒƒ %
[
ƒƒ% &
$str
ƒƒ& +
]
ƒƒ+ ,
.
ƒƒ, -
ToString
ƒƒ- 5
(
ƒƒ5 6
)
ƒƒ6 7
;
ƒƒ7 8
this
≈≈ 
.
≈≈ 
rssUrl
≈≈ 
=
≈≈  !
reader
≈≈" (
[
≈≈( )
$str
≈≈) 1
]
≈≈1 2
.
≈≈2 3
ToString
≈≈3 ;
(
≈≈; <
)
≈≈< =
;
≈≈= >
this
«« 
.
«« 
imageUrl
«« !
=
««" #
reader
««$ *
[
««* +
$str
««+ 5
]
««5 6
.
««6 7
ToString
««7 ?
(
««? @
)
««@ A
;
««A B
this
»» 
.
»» 
feedType
»» !
=
»»" #
reader
»»$ *
[
»»* +
$str
»»+ 5
]
»»5 6
.
»»6 7
ToString
»»7 ?
(
»»? @
)
»»@ A
;
»»A B
this
…… 
.
…… 
publishByDefault
…… )
=
……* +
Convert
……, 3
.
……3 4
	ToBoolean
……4 =
(
……= >
reader
……> D
[
……D E
$str
……E W
]
……W X
)
……X Y
;
……Y Z
this
ÀÀ 
.
ÀÀ 
itemGuid
ÀÀ !
=
ÀÀ" #
new
ÀÀ$ '
Guid
ÀÀ( ,
(
ÀÀ, -
reader
ÀÀ- 3
[
ÀÀ3 4
$str
ÀÀ4 >
]
ÀÀ> ?
.
ÀÀ? @
ToString
ÀÀ@ H
(
ÀÀH I
)
ÀÀI J
)
ÀÀJ K
;
ÀÀK L
this
ÃÃ 
.
ÃÃ 

moduleGuid
ÃÃ #
=
ÃÃ$ %
new
ÃÃ& )
Guid
ÃÃ* .
(
ÃÃ. /
reader
ÃÃ/ 5
[
ÃÃ5 6
$str
ÃÃ6 B
]
ÃÃB C
.
ÃÃC D
ToString
ÃÃD L
(
ÃÃL M
)
ÃÃM N
)
ÃÃN O
;
ÃÃO P
string
ŒŒ 
user
ŒŒ 
=
ŒŒ  !
reader
ŒŒ" (
[
ŒŒ( )
$str
ŒŒ) 3
]
ŒŒ3 4
.
ŒŒ4 5
ToString
ŒŒ5 =
(
ŒŒ= >
)
ŒŒ> ?
;
ŒŒ? @
if
œœ 
(
œœ 
user
œœ 
.
œœ 
Length
œœ #
==
œœ$ &
$num
œœ' )
)
œœ) *
this
œœ+ /
.
œœ/ 0
userGuid
œœ0 8
=
œœ9 :
new
œœ; >
Guid
œœ? C
(
œœC D
user
œœD H
)
œœH I
;
œœI J
user
—— 
=
—— 
reader
—— !
[
——! "
$str
——" 3
]
——3 4
.
——4 5
ToString
——5 =
(
——= >
)
——> ?
;
——? @
if
““ 
(
““ 
user
““ 
.
““ 
Length
““ #
==
““$ &
$num
““' )
)
““) *
this
““+ /
.
““/ 0
lastModUserGuid
““0 ?
=
““@ A
new
““B E
Guid
““F J
(
““J K
user
““K O
)
““O P
;
““P Q
if
‘‘ 
(
‘‘ 
reader
‘‘ 
[
‘‘ 
$str
‘‘ +
]
‘‘+ ,
!=
‘‘- /
DBNull
‘‘0 6
.
‘‘6 7
Value
‘‘7 <
)
‘‘< =
this
’’ 
.
’’ 

lastModUtc
’’ '
=
’’( )
Convert
’’* 1
.
’’1 2

ToDateTime
’’2 <
(
’’< =
reader
’’= C
[
’’C D
$str
’’D P
]
’’P Q
)
’’Q R
;
’’R S
this
◊◊ 
.
◊◊ 
sortRank
◊◊ !
=
◊◊" #
Convert
◊◊$ +
.
◊◊+ ,
ToInt32
◊◊, 3
(
◊◊3 4
reader
◊◊4 :
[
◊◊: ;
$str
◊◊; E
]
◊◊E F
)
◊◊F G
;
◊◊G H
}
ŸŸ 
}
€€ 
}
›› 	
private
ﬂﬂ 
bool
ﬂﬂ 
Create
ﬂﬂ 
(
ﬂﬂ 
)
ﬂﬂ 
{
‡‡ 	
int
·· 
newID
·· 
=
·· 
-
·· 
$num
·· 
;
·· 
this
‚‚ 
.
‚‚ 
itemGuid
‚‚ 
=
‚‚ 
Guid
‚‚  
.
‚‚  !
NewGuid
‚‚! (
(
‚‚( )
)
‚‚) *
;
‚‚* +
this
„„ 
.
„„ 
createdDate
„„ 
=
„„ 
DateTime
„„ '
.
„„' (
UtcNow
„„( .
;
„„. /
this
‰‰ 
.
‰‰ 

lastModUtc
‰‰ 
=
‰‰ 
this
‰‰ "
.
‰‰" #
createdDate
‰‰# .
;
‰‰. /
newID
ÊÊ 
=
ÊÊ 
	DBRssFeed
ÊÊ 
.
ÊÊ 

AddRssFeed
ÊÊ (
(
ÊÊ( )
this
ÁÁ 
.
ÁÁ 
itemGuid
ÁÁ 
,
ÁÁ 
this
ËË 
.
ËË 

moduleGuid
ËË 
,
ËË  
this
ÈÈ 
.
ÈÈ 
userGuid
ÈÈ 
,
ÈÈ 
this
ÍÍ 
.
ÍÍ 
moduleID
ÍÍ 
,
ÍÍ 
this
ÎÎ 
.
ÎÎ 
userID
ÎÎ 
,
ÎÎ 
this
ÏÏ 
.
ÏÏ 
author
ÏÏ 
,
ÏÏ 
this
ÌÌ 
.
ÌÌ 
url
ÌÌ 
,
ÌÌ 
this
ÓÓ 
.
ÓÓ 
rssUrl
ÓÓ 
,
ÓÓ 
this
ÔÔ 
.
ÔÔ 
createdDate
ÔÔ  
,
ÔÔ  !
this
 
.
 
imageUrl
 
,
 
this
ÒÒ 
.
ÒÒ 
feedType
ÒÒ 
,
ÒÒ 
this
ÚÚ 
.
ÚÚ 
publishByDefault
ÚÚ %
,
ÚÚ% &
this
ÛÛ 
.
ÛÛ 
sortRank
ÛÛ 
)
ÛÛ 
;
ÛÛ 
this
ıı 
.
ıı 
itemID
ıı 
=
ıı 
newID
ıı 
;
ıı  
return
¯¯ 
(
¯¯ 
newID
¯¯ 
>
¯¯ 
-
¯¯ 
$num
¯¯ 
)
¯¯ 
;
¯¯  
}
˙˙ 	
private
¸¸ 
bool
¸¸ 
Update
¸¸ 
(
¸¸ 
)
¸¸ 
{
˝˝ 	
this
˛˛ 
.
˛˛ 

lastModUtc
˛˛ 
=
˛˛ 
DateTime
˛˛ &
.
˛˛& '
UtcNow
˛˛' -
;
˛˛- .
bool
ÄÄ 
result
ÄÄ 
=
ÄÄ 
	DBRssFeed
ÄÄ #
.
ÄÄ# $
UpdateRssFeed
ÄÄ$ 1
(
ÄÄ1 2
this
ÅÅ 
.
ÅÅ 
itemID
ÅÅ 
,
ÅÅ 
this
ÇÇ 
.
ÇÇ 
moduleID
ÇÇ 
,
ÇÇ 
this
ÉÉ 
.
ÉÉ 
author
ÉÉ 
,
ÉÉ 
this
ÑÑ 
.
ÑÑ 
url
ÑÑ 
,
ÑÑ 
this
ÖÖ 
.
ÖÖ 
rssUrl
ÖÖ 
,
ÖÖ 
this
ÜÜ 
.
ÜÜ 
lastModUserGuid
ÜÜ $
,
ÜÜ$ %
this
áá 
.
áá 

lastModUtc
áá 
,
áá  
this
àà 
.
àà 
imageUrl
àà 
,
àà 
this
ââ 
.
ââ 
feedType
ââ 
,
ââ 
this
ää 
.
ää 
publishByDefault
ää %
,
ää% &
this
ãã 
.
ãã 
sortRank
ãã 
)
ãã 
;
ãã 
return
èè 
result
èè 
;
èè 
}
ëë 	
public
õõ 
bool
õõ 
Save
õõ 
(
õõ 
)
õõ 
{
úú 	
if
ùù 
(
ùù 
this
ùù 
.
ùù 
itemID
ùù 
>
ùù 
$num
ùù 
)
ùù  
{
ûû 
return
üü 
Update
üü 
(
üü 
)
üü 
;
üü  
}
†† 
else
°° 
{
¢¢ 
return
££ 
Create
££ 
(
££ 
)
££ 
;
££  
}
§§ 
}
•• 	
public
≠≠ 
static
≠≠ 
bool
≠≠ 

DeleteFeed
≠≠ %
(
≠≠% &
int
≠≠& )
itemId
≠≠* 0
)
≠≠0 1
{
ÆÆ 	
return
ØØ 
	DBRssFeed
ØØ 
.
ØØ 
DeleteRssFeed
ØØ *
(
ØØ* +
itemId
ØØ+ 1
)
ØØ1 2
;
ØØ2 3
}
∞∞ 	
public
≤≤ 
static
≤≤ 
	DataTable
≤≤ 
GetFeeds
≤≤  (
(
≤≤( )
int
≤≤) ,
moduleId
≤≤- 5
)
≤≤5 6
{
≥≥ 	
	DataTable
µµ 
	dataTable
µµ 
=
µµ  !
new
µµ" %
	DataTable
µµ& /
(
µµ/ 0
)
µµ0 1
;
µµ1 2
	dataTable
∂∂ 
.
∂∂ 
Columns
∂∂ 
.
∂∂ 
Add
∂∂ !
(
∂∂! "
$str
∂∂" *
,
∂∂* +
typeof
∂∂, 2
(
∂∂2 3
int
∂∂3 6
)
∂∂6 7
)
∂∂7 8
;
∂∂8 9
	dataTable
∑∑ 
.
∑∑ 
Columns
∑∑ 
.
∑∑ 
Add
∑∑ !
(
∑∑! "
$str
∑∑" ,
,
∑∑, -
typeof
∑∑. 4
(
∑∑4 5
Guid
∑∑5 9
)
∑∑9 :
)
∑∑: ;
;
∑∑; <
	dataTable
∏∏ 
.
∏∏ 
Columns
∏∏ 
.
∏∏ 
Add
∏∏ !
(
∏∏! "
$str
∏∏" ,
,
∏∏, -
typeof
∏∏. 4
(
∏∏4 5
int
∏∏5 8
)
∏∏8 9
)
∏∏9 :
;
∏∏: ;
	dataTable
ππ 
.
ππ 
Columns
ππ 
.
ππ 
Add
ππ !
(
ππ! "
$str
ππ" .
,
ππ. /
typeof
ππ0 6
(
ππ6 7
Guid
ππ7 ;
)
ππ; <
)
ππ< =
;
ππ= >
	dataTable
∫∫ 
.
∫∫ 
Columns
∫∫ 
.
∫∫ 
Add
∫∫ !
(
∫∫! "
$str
∫∫" *
,
∫∫* +
typeof
∫∫, 2
(
∫∫2 3
string
∫∫3 9
)
∫∫9 :
)
∫∫: ;
;
∫∫; <
	dataTable
ªª 
.
ªª 
Columns
ªª 
.
ªª 
Add
ªª !
(
ªª! "
$str
ªª" '
,
ªª' (
typeof
ªª) /
(
ªª/ 0
string
ªª0 6
)
ªª6 7
)
ªª7 8
;
ªª8 9
	dataTable
ºº 
.
ºº 
Columns
ºº 
.
ºº 
Add
ºº !
(
ºº! "
$str
ºº" *
,
ºº* +
typeof
ºº, 2
(
ºº2 3
string
ºº3 9
)
ºº9 :
)
ºº: ;
;
ºº; <
	dataTable
ΩΩ 
.
ΩΩ 
Columns
ΩΩ 
.
ΩΩ 
Add
ΩΩ !
(
ΩΩ! "
$str
ΩΩ" ,
,
ΩΩ, -
typeof
ΩΩ. 4
(
ΩΩ4 5
string
ΩΩ5 ;
)
ΩΩ; <
)
ΩΩ< =
;
ΩΩ= >
	dataTable
ææ 
.
ææ 
Columns
ææ 
.
ææ 
Add
ææ !
(
ææ! "
$str
ææ" ,
,
ææ, -
typeof
ææ. 4
(
ææ4 5
string
ææ5 ;
)
ææ; <
)
ææ< =
;
ææ= >
	dataTable
øø 
.
øø 
Columns
øø 
.
øø 
Add
øø !
(
øø! "
$str
øø" 4
,
øø4 5
typeof
øø6 <
(
øø< =
bool
øø= A
)
øøA B
)
øøB C
;
øøC D
	dataTable
¿¿ 
.
¿¿ 
Columns
¿¿ 
.
¿¿ 
Add
¿¿ !
(
¿¿! "
$str
¿¿" 0
,
¿¿0 1
typeof
¿¿2 8
(
¿¿8 9
int
¿¿9 <
)
¿¿< =
)
¿¿= >
;
¿¿> ?
using
√√ 
(
√√ 
IDataReader
√√ 
reader
√√ %
=
√√& '
	DBRssFeed
√√( 1
.
√√1 2
GetFeeds
√√2 :
(
√√: ;
moduleId
√√; C
)
√√C D
)
√√D E
{
ƒƒ 
while
≈≈ 
(
≈≈ 
reader
≈≈ 
.
≈≈ 
Read
≈≈ "
(
≈≈" #
)
≈≈# $
)
≈≈$ %
{
∆∆ 
DataRow
«« 
row
«« 
=
««  !
	dataTable
««" +
.
««+ ,
NewRow
««, 2
(
««2 3
)
««3 4
;
««4 5
row
»» 
[
»» 
$str
»»  
]
»»  !
=
»»" #
reader
»»$ *
[
»»* +
$str
»»+ 3
]
»»3 4
;
»»4 5
row
…… 
[
…… 
$str
…… "
]
……" #
=
……$ %
new
……& )
Guid
……* .
(
……. /
reader
……/ 5
[
……5 6
$str
……6 @
]
……@ A
.
……A B
ToString
……B J
(
……J K
)
……K L
)
……L M
;
……M N
row
   
[
   
$str
   "
]
  " #
=
  $ %
reader
  & ,
[
  , -
$str
  - 7
]
  7 8
;
  8 9
row
ÀÀ 
[
ÀÀ 
$str
ÀÀ $
]
ÀÀ$ %
=
ÀÀ& '
new
ÀÀ( +
Guid
ÀÀ, 0
(
ÀÀ0 1
reader
ÀÀ1 7
[
ÀÀ7 8
$str
ÀÀ8 D
]
ÀÀD E
.
ÀÀE F
ToString
ÀÀF N
(
ÀÀN O
)
ÀÀO P
)
ÀÀP Q
;
ÀÀQ R
row
ÃÃ 
[
ÃÃ 
$str
ÃÃ  
]
ÃÃ  !
=
ÃÃ" #
reader
ÃÃ$ *
[
ÃÃ* +
$str
ÃÃ+ 3
]
ÃÃ3 4
;
ÃÃ4 5
row
ÕÕ 
[
ÕÕ 
$str
ÕÕ 
]
ÕÕ 
=
ÕÕ  
reader
ÕÕ! '
[
ÕÕ' (
$str
ÕÕ( -
]
ÕÕ- .
;
ÕÕ. /
row
ŒŒ 
[
ŒŒ 
$str
ŒŒ  
]
ŒŒ  !
=
ŒŒ" #
reader
ŒŒ$ *
[
ŒŒ* +
$str
ŒŒ+ 3
]
ŒŒ3 4
;
ŒŒ4 5
row
œœ 
[
œœ 
$str
œœ "
]
œœ" #
=
œœ$ %
reader
œœ& ,
[
œœ, -
$str
œœ- 7
]
œœ7 8
;
œœ8 9
row
–– 
[
–– 
$str
–– "
]
––" #
=
––$ %
reader
––& ,
[
––, -
$str
––- 7
]
––7 8
;
––8 9
row
—— 
[
—— 
$str
—— *
]
——* +
=
——, -
Convert
——. 5
.
——5 6
	ToBoolean
——6 ?
(
——? @
reader
——@ F
[
——F G
$str
——G Y
]
——Y Z
)
——Z [
;
——[ \
row
““ 
[
““ 
$str
““ &
]
““& '
=
““( )
Convert
““* 1
.
““1 2
ToInt32
““2 9
(
““9 :
reader
““: @
[
““@ A
$str
““A O
]
““O P
)
““P Q
;
““Q R
	dataTable
‘‘ 
.
‘‘ 
Rows
‘‘ "
.
‘‘" #
Add
‘‘# &
(
‘‘& '
row
‘‘' *
)
‘‘* +
;
‘‘+ ,
}
÷÷ 
}
◊◊ 
return
ŸŸ 
	dataTable
ŸŸ 
;
ŸŸ 
}
⁄⁄ 	
public
‚‚ 
static
‚‚ 
bool
‚‚ *
DeleteExpiredEntriesByModule
‚‚ 7
(
‚‚7 8
Guid
‚‚8 <

moduleGuid
‚‚= G
,
‚‚G H
DateTime
‚‚I Q
expiredDate
‚‚R ]
)
‚‚] ^
{
„„ 	
return
‰‰ 
	DBRssFeed
‰‰ 
.
‰‰ *
DeleteExpiredEntriesByModule
‰‰ 9
(
‰‰9 :

moduleGuid
‰‰: D
,
‰‰D E
expiredDate
‰‰F Q
)
‰‰Q R
;
‰‰R S
}
ÂÂ 	
public
ÏÏ 
static
ÏÏ 
bool
ÏÏ .
 DeleteUnPublishedEntriesByModule
ÏÏ ;
(
ÏÏ; <
Guid
ÏÏ< @

moduleGuid
ÏÏA K
)
ÏÏK L
{
ÌÌ 	
return
ÓÓ 
	DBRssFeed
ÓÓ 
.
ÓÓ .
 DeleteUnPublishedEntriesByModule
ÓÓ =
(
ÓÓ= >

moduleGuid
ÓÓ> H
)
ÓÓH I
;
ÓÓI J
}
ÔÔ 	
public
ˆˆ 
static
ˆˆ 
bool
ˆˆ ,
DeleteUnPublishedEntriesByFeed
ˆˆ 9
(
ˆˆ9 :
int
ˆˆ: =
feedId
ˆˆ> D
)
ˆˆD E
{
˜˜ 	
return
¯¯ 
	DBRssFeed
¯¯ 
.
¯¯ ,
DeleteUnPublishedEntriesByFeed
¯¯ ;
(
¯¯; <
feedId
¯¯< B
)
¯¯B C
;
¯¯C D
}
˘˘ 	
public
ÄÄ 
static
ÄÄ 
bool
ÄÄ !
DeleteEntriesByFeed
ÄÄ .
(
ÄÄ. /
int
ÄÄ/ 2
feedId
ÄÄ3 9
)
ÄÄ9 :
{
ÅÅ 	
return
ÇÇ 
	DBRssFeed
ÇÇ 
.
ÇÇ !
DeleteEntriesByFeed
ÇÇ 0
(
ÇÇ0 1
feedId
ÇÇ1 7
)
ÇÇ7 8
;
ÇÇ8 9
}
ÉÉ 	
public
ää 
static
ää 
bool
ää #
DeleteEntriesByModule
ää 0
(
ää0 1
Guid
ää1 5

moduleGuid
ää6 @
)
ää@ A
{
ãã 	
return
åå 
	DBRssFeed
åå 
.
åå #
DeleteEntriesByModule
åå 2
(
åå2 3

moduleGuid
åå3 =
)
åå= >
;
åå> ?
}
çç 	
public
èè 
static
èè 
bool
èè 
DeleteByModule
èè )
(
èè) *
int
èè* -
moduleId
èè. 6
)
èè6 7
{
êê 	
return
ëë 
	DBRssFeed
ëë 
.
ëë 
DeleteByModule
ëë +
(
ëë+ ,
moduleId
ëë, 4
)
ëë4 5
;
ëë5 6
}
íí 	
public
îî 
static
îî 
bool
îî 
DeleteBySite
îî '
(
îî' (
int
îî( +
siteId
îî, 2
)
îî2 3
{
ïï 	
return
ññ 
	DBRssFeed
ññ 
.
ññ 
DeleteBySite
ññ )
(
ññ) *
siteId
ññ* 0
)
ññ0 1
;
ññ1 2
}
óó 	
public
úú 
static
úú 
bool
úú 
EntryExists
úú &
(
úú& '
Guid
úú' +

moduleGuid
úú, 6
,
úú6 7
int
úú8 ;
	entryHash
úú< E
)
úúE F
{
ùù 	
return
ûû 
	DBRssFeed
ûû 
.
ûû 
EntryExists
ûû (
(
ûû( )

moduleGuid
ûû) 3
,
ûû3 4
	entryHash
ûû5 >
)
ûû> ?
;
ûû? @
}
üü 	
public
§§ 
static
§§ 
DateTime
§§ 
GetLastCacheTime
§§ /
(
§§/ 0
Guid
§§0 4

moduleGuid
§§5 ?
)
§§? @
{
•• 	
return
¶¶ 
	DBRssFeed
¶¶ 
.
¶¶ 
GetLastCacheTime
¶¶ -
(
¶¶- .

moduleGuid
¶¶. 8
)
¶¶8 9
;
¶¶9 :
}
ßß 	
public
ππ 
static
ππ 
int
ππ 
CreateEntry
ππ %
(
ππ% &
Guid
∫∫ 
rowGuid
∫∫ 
,
∫∫ 
Guid
ªª 

moduleGuid
ªª 
,
ªª 
Guid
ºº 
feedGuid
ºº 
,
ºº 
int
ΩΩ 
feedId
ΩΩ 
,
ΩΩ 
DateTime
ææ 
pubDate
ææ 
,
ææ 
string
øø 
title
øø 
,
øø 
string
¿¿ 
author
¿¿ 
,
¿¿ 
string
¡¡ 
blogUrl
¡¡ 
,
¡¡ 
string
¬¬ 
description
¬¬ 
,
¬¬ 
string
√√ 
link
√√ 
,
√√ 
bool
ƒƒ 
	confirmed
ƒƒ 
,
ƒƒ 
int
≈≈ 
	entryHash
≈≈ 
,
≈≈ 
DateTime
∆∆ 
cachedTimeUtc
∆∆ "
)
∆∆" #
{
«« 	
return
»» 
	DBRssFeed
»» 
.
»» 
CreateEntry
»» (
(
»»( )
rowGuid
…… 
,
…… 

moduleGuid
   
,
   
feedGuid
ÀÀ 
,
ÀÀ 
feedId
ÃÃ 
,
ÃÃ 
pubDate
ÕÕ 
,
ÕÕ 
title
ŒŒ 
,
ŒŒ 
author
œœ 
,
œœ 
blogUrl
–– 
,
–– 
description
—— 
,
—— 
link
““ 
,
““ 
	confirmed
”” 
,
”” 
	entryHash
‘‘ 
,
‘‘ 
cachedTimeUtc
’’ 
)
’’ 
;
’’ 
}
◊◊ 	
public
ÂÂ 
static
ÂÂ 
bool
ÂÂ 

UpdateEnry
ÂÂ %
(
ÂÂ% &
Guid
ÊÊ 

moduleGuid
ÊÊ 
,
ÊÊ 
string
ÁÁ 
title
ÁÁ 
,
ÁÁ 
string
ËË 
author
ËË 
,
ËË 
string
ÈÈ 
blogUrl
ÈÈ 
,
ÈÈ 
string
ÍÍ 
description
ÍÍ 
,
ÍÍ 
string
ÎÎ 
link
ÎÎ 
,
ÎÎ 
int
ÏÏ 
	entryHash
ÏÏ 
,
ÏÏ 
DateTime
ÌÌ 
cachedTimeUtc
ÌÌ "
)
ÌÌ" #
{
ÓÓ 	
return
ÔÔ 
	DBRssFeed
ÔÔ 
.
ÔÔ 

UpdateEnry
ÔÔ '
(
ÔÔ' (

moduleGuid
 
,
 
title
ÒÒ 
,
ÒÒ 
author
ÚÚ 
,
ÚÚ 
blogUrl
ÛÛ 
,
ÛÛ 
description
ÙÙ 
,
ÙÙ 
link
ıı 
,
ıı 
	entryHash
ˆˆ 
,
ˆˆ 
cachedTimeUtc
˜˜ 
)
˜˜ 
;
˜˜ 
}
˘˘ 	
public
ÄÄ 
static
ÄÄ 
void
ÄÄ 
Publish
ÄÄ "
(
ÄÄ" #
Guid
ÅÅ 

moduleGuid
ÅÅ 
,
ÅÅ 
int
ÇÇ 
	entryHash
ÇÇ 
)
ÇÇ 
{
ÉÉ 	
	DBRssFeed
ÖÖ 
.
ÖÖ 
UpdatePublishing
ÖÖ &
(
ÖÖ& '

moduleGuid
ÜÜ 
,
ÜÜ 
true
áá 
,
áá 
	entryHash
àà 
)
àà 
;
àà 
}
ââ 	
public
êê 
static
êê 
void
êê 
	UnPublish
êê $
(
êê$ %
Guid
ëë 

moduleGuid
ëë 
,
ëë 
int
íí 
	entryHash
íí 
)
íí 
{
ìì 	
	DBRssFeed
ïï 
.
ïï 
UpdatePublishing
ïï &
(
ïï& '

moduleGuid
ññ 
,
ññ 
false
óó 
,
óó 
	entryHash
òò 
)
òò 
;
òò 
}
ôô 	
public
üü 
static
üü 
	DataTable
üü 

GetEntries
üü  *
(
üü* +
Guid
üü+ /

moduleGuid
üü0 :
)
üü: ;
{
†† 	
return
¢¢ 
	DBRssFeed
¢¢ 
.
¢¢ 

GetEntries
¢¢ '
(
¢¢' (

moduleGuid
¢¢( 2
)
¢¢2 3
;
¢¢3 4
}
∆∆ 	
}
ÃÃ 
}ÕÕ É÷
sD:\Projects\DefensePoint\whitesource-testcases-csharp\CWE79\mojoportal\mojoPortal.Features.Business\Forums\Forum.cs
	namespace 	

mojoPortal
 
. 
Business 
{ 
public 

class 
Forum 
{ 
private 
const 
string 
featureGuid (
=) *
$str+ Q
;Q R
public 
static 
Guid 
FeatureGuid &
{ 	
get 
{ 
return 
new 
Guid !
(! "
featureGuid" -
)- .
;. /
}0 1
} 	
public   
const   
int   
NormalThreadSort   )
=  * +
$num  , /
;  / 0
public$$ 
Forum$$ 
($$ 
)$$ 
{%% 	
}%%
 
public'' 
Forum'' 
('' 
int'' 
forumId''  
)''  !
{(( 	
if)) 
()) 
forumId)) 
>)) 
-)) 
$num)) 
))) 
{** 
GetForum++ 
(++ 
forumId++  
)++  !
;++! "
},, 
}.. 	
private44 
static44 
readonly44 
ILog44  $
log44% (
=44) *

LogManager44+ 5
.445 6
	GetLogger446 ?
(44? @
typeof44@ F
(44F G
Forum44G L
)44L M
)44M N
;44N O
private66 
int66 
itemID66 
=66 
-66 
$num66 
;66  
private77 
Guid77 
	forumGuid77 
=77  
Guid77! %
.77% &
Empty77& +
;77+ ,
private88 
int88 
moduleID88 
=88 
-88  
$num88  !
;88! "
private99 
DateTime99 
createdDate99 $
=99% &
DateTime99' /
.99/ 0
UtcNow990 6
;996 7
private:: 
string:: 
	createdBy::  
=::! "
string::# )
.::) *
Empty::* /
;::/ 0
private;; 
int;; 
createdByUserID;; #
;;;# $
private<< 
string<< 
title<< 
=<< 
string<< %
.<<% &
Empty<<& +
;<<+ ,
private== 
string== 
description== "
===# $
string==% +
.==+ ,
Empty==, 1
;==1 2
private>> 
bool>> 
isModerated>>  
;>>  !
private?? 
bool?? 
isActive?? 
=?? 
true??  $
;??$ %
privateAA 
intAA 
	sortOrderAA 
=AA 
$numAA  #
;AA# $
privateBB 
intBB 
postsPerPageBB  
=BB! "
$numBB# %
;BB% &
privateCC 
intCC 
threadsPerPageCC "
=CC# $
$numCC% '
;CC' (
privateDD 
intDD 
threadCountDD 
;DD  
privateEE 
intEE 
	postCountEE 
;EE 
privateFF 
intFF 

totalPagesFF 
=FF  
$numFF! "
;FF" #
privateGG 
DateTimeGG 
mostRecentPostDateGG +
=GG, -
DateTimeGG. 6
.GG6 7
UtcNowGG7 =
;GG= >
privateHH 
stringHH 
mostRecentPostUserHH )
=HH* +
stringHH, 2
.HH2 3
EmptyHH3 8
;HH8 9
privateII 
boolII 
allowAnonymousPostsII (
=II) *
falseII+ 0
;II0 1
privateKK 
stringKK 
rolesThatCanPostKK '
=KK( )
$strKK* @
;KK@ A
publicMM 
stringMM 
RolesThatCanPostMM &
{NN 	
getOO 
{OO 
returnOO 
rolesThatCanPostOO )
;OO) *
}OO+ ,
setPP 
{PP 
rolesThatCanPostPP "
=PP# $
valuePP% *
;PP* +
}PP, -
}QQ 	
privateSS 
stringSS  
rolesThatCanModerateSS +
=SS, -
stringSS. 4
.SS4 5
EmptySS5 :
;SS: ;
publicUU 
stringUU  
RolesThatCanModerateUU *
{VV 	
getWW 
{WW 
returnWW  
rolesThatCanModerateWW -
;WW- .
}WW/ 0
setXX 
{XX  
rolesThatCanModerateXX &
=XX' (
valueXX) .
;XX. /
}XX0 1
}YY 	
private[[ 
string[[  
moderatorNotifyEmail[[ +
=[[, -
string[[. 4
.[[4 5
Empty[[5 :
;[[: ;
public]] 
string]]  
ModeratorNotifyEmail]] *
{^^ 	
get__ 
{__ 
return__  
moderatorNotifyEmail__ -
;__- .
}__/ 0
set`` 
{``  
moderatorNotifyEmail`` &
=``' (
value``) .
;``. /
}``0 1
}aa 	
privatecc 
boolcc 
includeInGoogleMapcc '
=cc( )
truecc* .
;cc. /
publicee 
boolee 
IncludeInGoogleMapee &
{ff 	
getgg 
{gg 
returngg 
includeInGoogleMapgg +
;gg+ ,
}gg- .
sethh 
{hh 
includeInGoogleMaphh $
=hh% &
valuehh' ,
;hh, -
}hh. /
}ii 	
privatekk 
boolkk 
addNoIndexMetakk #
=kk$ %
falsekk& +
;kk+ ,
publicmm 
boolmm 
AddNoIndexMetamm "
{nn 	
getoo 
{oo 
returnoo 
addNoIndexMetaoo '
;oo' (
}oo) *
setpp 
{pp 
addNoIndexMetapp  
=pp! "
valuepp# (
;pp( )
}pp* +
}qq 	
privatess 
boolss 
closedss 
=ss 
falsess #
;ss# $
publicuu 
booluu 
Closeduu 
{vv 	
getww 
{ww 
returnww 
closedww 
;ww  
}ww! "
setxx 
{xx 
closedxx 
=xx 
valuexx  
;xx  !
}xx" #
}yy 	
private{{ 
bool{{ 
visible{{ 
={{ 
true{{ #
;{{# $
public}} 
bool}} 
Visible}} 
{~~ 	
get 
{ 
return 
visible  
;  !
}" #
set
ÄÄ 
{
ÄÄ 
visible
ÄÄ 
=
ÄÄ 
value
ÄÄ !
;
ÄÄ! "
}
ÄÄ# $
}
ÅÅ 	
private
ÉÉ 
bool
ÉÉ 
requireModeration
ÉÉ &
=
ÉÉ' (
false
ÉÉ) .
;
ÉÉ. /
public
áá 
bool
áá 
RequireModeration
áá %
{
àà 	
get
ââ 
{
ââ 
return
ââ 
requireModeration
ââ *
;
ââ* +
}
ââ, -
set
ää 
{
ää 
requireModeration
ää #
=
ää$ %
value
ää& +
;
ää+ ,
}
ää- .
}
ãã 	
private
çç 
bool
çç !
requireModForNotify
çç (
=
çç) *
false
çç+ 0
;
çç0 1
public
ëë 
bool
ëë !
RequireModForNotify
ëë '
{
íí 	
get
ìì 
{
ìì 
return
ìì !
requireModForNotify
ìì ,
;
ìì, -
}
ìì. /
set
îî 
{
îî !
requireModForNotify
îî %
=
îî& '
value
îî( -
;
îî- .
}
îî/ 0
}
ïï 	
private
óó 
bool
óó %
allowTrustedDirectPosts
óó ,
=
óó- .
false
óó/ 4
;
óó4 5
public
úú 
bool
úú %
AllowTrustedDirectPosts
úú +
{
ùù 	
get
ûû 
{
ûû 
return
ûû %
allowTrustedDirectPosts
ûû 0
;
ûû0 1
}
ûû2 3
set
üü 
{
üü %
allowTrustedDirectPosts
üü )
=
üü* +
value
üü, 1
;
üü1 2
}
üü3 4
}
†† 	
private
¢¢ 
bool
¢¢ &
allowTrustedDirectNotify
¢¢ -
=
¢¢. /
false
¢¢0 5
;
¢¢5 6
public
®® 
bool
®® &
AllowTrustedDirectNotify
®® ,
{
©© 	
get
™™ 
{
™™ 
return
™™ &
allowTrustedDirectNotify
™™ 1
;
™™1 2
}
™™3 4
set
´´ 
{
´´ &
allowTrustedDirectNotify
´´ *
=
´´+ ,
value
´´- 2
;
´´2 3
}
´´4 5
}
¨¨ 	
public
≤≤ 
int
≤≤ 
ItemId
≤≤ 
{
≥≥ 	
get
¥¥ 
{
¥¥ 
return
¥¥ 
itemID
¥¥ 
;
¥¥  
}
¥¥! "
}
µµ 	
public
∑∑ 
Guid
∑∑ 
	ForumGuid
∑∑ 
{
∏∏ 	
get
ππ 
{
ππ 
return
ππ 
	forumGuid
ππ "
;
ππ" #
}
ππ$ %
}
∫∫ 	
public
ºº 
int
ºº 
ModuleId
ºº 
{
ΩΩ 	
get
ææ 
{
ææ 
return
ææ 
moduleID
ææ !
;
ææ! "
}
ææ# $
set
øø 
{
øø 
moduleID
øø 
=
øø 
value
øø "
;
øø" #
}
øø$ %
}
¿¿ 	
public
¬¬ 
DateTime
¬¬ 
CreatedDate
¬¬ #
{
√√ 	
get
ƒƒ 
{
ƒƒ 
return
ƒƒ 
createdDate
ƒƒ $
;
ƒƒ$ %
}
ƒƒ& '
set
≈≈ 
{
≈≈ 
createdDate
≈≈ 
=
≈≈ 
value
≈≈  %
;
≈≈% &
}
≈≈' (
}
∆∆ 	
public
»» 
string
»» 
	CreatedBy
»» 
{
…… 	
get
   
{
   
return
   
	createdBy
   "
;
  " #
}
  $ %
set
ÀÀ 
{
ÀÀ 
	createdBy
ÀÀ 
=
ÀÀ 
value
ÀÀ #
;
ÀÀ# $
}
ÀÀ% &
}
ÃÃ 	
public
ŒŒ 
int
ŒŒ 
CreatedByUserId
ŒŒ "
{
œœ 	
get
–– 
{
–– 
return
–– 
createdByUserID
–– (
;
––( )
}
––* +
set
—— 
{
—— 
createdByUserID
—— !
=
——" #
value
——$ )
;
——) *
}
——+ ,
}
““ 	
public
‘‘ 
string
‘‘ 
Title
‘‘ 
{
’’ 	
get
÷÷ 
{
÷÷ 
return
÷÷ 
title
÷÷ 
;
÷÷ 
}
÷÷  !
set
◊◊ 
{
◊◊ 
title
◊◊ 
=
◊◊ 
value
◊◊ 
;
◊◊  
}
◊◊! "
}
ÿÿ 	
public
⁄⁄ 
string
⁄⁄ 
Description
⁄⁄ !
{
€€ 	
get
‹‹ 
{
‹‹ 
return
‹‹ 
description
‹‹ $
;
‹‹$ %
}
‹‹& '
set
›› 
{
›› 
description
›› 
=
›› 
value
››  %
;
››% &
}
››' (
}
ﬁﬁ 	
public
‡‡ 
bool
‡‡ !
AllowAnonymousPosts
‡‡ '
{
·· 	
get
‚‚ 
{
‚‚ 
return
‚‚ !
allowAnonymousPosts
‚‚ ,
;
‚‚, -
}
‚‚. /
set
„„ 
{
„„ !
allowAnonymousPosts
„„ %
=
„„& '
value
„„( -
;
„„- .
}
„„/ 0
}
‰‰ 	
public
ÁÁ 
bool
ÁÁ 
IsModerated
ÁÁ 
{
ËË 	
get
ÈÈ 
{
ÈÈ 
return
ÈÈ 
isModerated
ÈÈ $
;
ÈÈ$ %
}
ÈÈ& '
set
ÍÍ 
{
ÍÍ 
isModerated
ÍÍ 
=
ÍÍ 
value
ÍÍ  %
;
ÍÍ% &
}
ÍÍ' (
}
ÎÎ 	
public
ÌÌ 
bool
ÌÌ 
IsActive
ÌÌ 
{
ÓÓ 	
get
ÔÔ 
{
ÔÔ 
return
ÔÔ 
isActive
ÔÔ !
;
ÔÔ! "
}
ÔÔ# $
set
 
{
 
isActive
 
=
 
value
 "
;
" #
}
$ %
}
ÒÒ 	
public
ÛÛ 
int
ÛÛ 
	SortOrder
ÛÛ 
{
ÙÙ 	
get
ıı 
{
ıı 
return
ıı 
	sortOrder
ıı "
;
ıı" #
}
ıı$ %
set
ˆˆ 
{
ˆˆ 
	sortOrder
ˆˆ 
=
ˆˆ 
value
ˆˆ #
;
ˆˆ# $
}
ˆˆ% &
}
˜˜ 	
public
˘˘ 
int
˘˘ 
PostsPerPage
˘˘ 
{
˙˙ 	
get
˚˚ 
{
˚˚ 
return
˚˚ 
postsPerPage
˚˚ %
;
˚˚% &
}
˚˚' (
set
¸¸ 
{
¸¸ 
postsPerPage
¸¸ 
=
¸¸  
value
¸¸! &
;
¸¸& '
}
¸¸( )
}
˝˝ 	
public
ˇˇ 
int
ˇˇ 
ThreadsPerPage
ˇˇ !
{
ÄÄ 	
get
ÅÅ 
{
ÅÅ 
return
ÅÅ 
threadsPerPage
ÅÅ '
;
ÅÅ' (
}
ÅÅ) *
set
ÇÇ 
{
ÇÇ 
threadsPerPage
ÇÇ  
=
ÇÇ! "
value
ÇÇ# (
;
ÇÇ( )
}
ÇÇ* +
}
ÉÉ 	
public
ÖÖ 
int
ÖÖ 
ThreadCount
ÖÖ 
{
ÜÜ 	
get
áá 
{
áá 
return
áá 
threadCount
áá $
;
áá$ %
}
áá& '
set
àà 
{
àà 
threadCount
àà 
=
àà 
value
àà  %
;
àà% &
}
àà' (
}
ââ 	
public
ãã 
int
ãã 
	PostCount
ãã 
{
åå 	
get
çç 
{
çç 
return
çç 
	postCount
çç "
;
çç" #
}
çç$ %
set
éé 
{
éé 
	postCount
éé 
=
éé 
value
éé #
;
éé# $
}
éé% &
}
èè 	
public
ëë 
int
ëë 

TotalPages
ëë 
{
íí 	
get
ìì 
{
ìì 
return
ìì 

totalPages
ìì #
;
ìì# $
}
ìì% &
}
îî 	
public
ññ 
DateTime
ññ  
MostRecentPostDate
ññ *
{
óó 	
get
òò 
{
òò 
return
òò  
mostRecentPostDate
òò +
;
òò+ ,
}
òò- .
}
ôô 	
public
õõ 
string
õõ  
MostRecentPostUser
õõ (
{
úú 	
get
ùù 
{
ùù 
return
ùù  
mostRecentPostUser
ùù +
;
ùù+ ,
}
ùù- .
}
ûû 	
private
ßß 
void
ßß 
GetForum
ßß 
(
ßß 
int
ßß !
forumId
ßß" )
)
ßß) *
{
®® 	
using
©© 
(
©© 
IDataReader
©© 
reader
©© %
=
©©& '
DBForums
©©( 0
.
©©0 1
GetForum
©©1 9
(
©©9 :
forumId
©©: A
)
©©A B
)
©©B C
{
™™ 
if
´´ 
(
´´ 
reader
´´ 
.
´´ 
Read
´´ 
(
´´  
)
´´  !
)
´´! "
{
¨¨ 
this
ÆÆ 
.
ÆÆ 
itemID
ÆÆ 
=
ÆÆ  !
int
ÆÆ" %
.
ÆÆ% &
Parse
ÆÆ& +
(
ÆÆ+ ,
reader
ÆÆ, 2
[
ÆÆ2 3
$str
ÆÆ3 ;
]
ÆÆ; <
.
ÆÆ< =
ToString
ÆÆ= E
(
ÆÆE F
)
ÆÆF G
)
ÆÆG H
;
ÆÆH I
this
ØØ 
.
ØØ 
moduleID
ØØ !
=
ØØ" #
int
ØØ$ '
.
ØØ' (
Parse
ØØ( -
(
ØØ- .
reader
ØØ. 4
[
ØØ4 5
$str
ØØ5 ?
]
ØØ? @
.
ØØ@ A
ToString
ØØA I
(
ØØI J
)
ØØJ K
)
ØØK L
;
ØØL M
this
∞∞ 
.
∞∞ 
createdDate
∞∞ $
=
∞∞% &
Convert
∞∞' .
.
∞∞. /

ToDateTime
∞∞/ 9
(
∞∞9 :
reader
∞∞: @
[
∞∞@ A
$str
∞∞A N
]
∞∞N O
)
∞∞O P
;
∞∞P Q
this
±± 
.
±± 
	createdBy
±± "
=
±±# $
reader
±±% +
[
±±+ ,
$str
±±, ;
]
±±; <
.
±±< =
ToString
±±= E
(
±±E F
)
±±F G
;
±±G H
this
≤≤ 
.
≤≤ 
title
≤≤ 
=
≤≤  
reader
≤≤! '
[
≤≤' (
$str
≤≤( /
]
≤≤/ 0
.
≤≤0 1
ToString
≤≤1 9
(
≤≤9 :
)
≤≤: ;
;
≤≤; <
this
≥≥ 
.
≥≥ 
description
≥≥ $
=
≥≥% &
reader
≥≥' -
[
≥≥- .
$str
≥≥. ;
]
≥≥; <
.
≥≥< =
ToString
≥≥= E
(
≥≥E F
)
≥≥F G
;
≥≥G H
string
µµ 
anon
µµ 
=
µµ  !
reader
µµ" (
[
µµ( )
$str
µµ) >
]
µµ> ?
.
µµ? @
ToString
µµ@ H
(
µµH I
)
µµI J
;
µµJ K
this
∂∂ 
.
∂∂ !
allowAnonymousPosts
∂∂ ,
=
∂∂- .
(
∂∂/ 0
anon
∂∂0 4
==
∂∂5 7
$str
∂∂8 >
||
∂∂? A
anon
∂∂B F
==
∂∂G I
$str
∂∂J M
)
∂∂M N
;
∂∂N O
string
∑∑ 
	moderated
∑∑ $
=
∑∑% &
reader
∑∑' -
[
∑∑- .
$str
∑∑. ;
]
∑∑; <
.
∑∑< =
ToString
∑∑= E
(
∑∑E F
)
∑∑F G
;
∑∑G H
this
∏∏ 
.
∏∏ 
isModerated
∏∏ $
=
∏∏% &
(
∏∏' (
	moderated
∏∏( 1
==
∏∏2 4
$str
∏∏5 ;
||
∏∏< >
	moderated
∏∏? H
==
∏∏I K
$str
∏∏L O
)
∏∏O P
;
∏∏P Q
string
ππ 
active
ππ !
=
ππ" #
reader
ππ$ *
[
ππ* +
$str
ππ+ 5
]
ππ5 6
.
ππ6 7
ToString
ππ7 ?
(
ππ? @
)
ππ@ A
;
ππA B
this
∫∫ 
.
∫∫ 
isActive
∫∫ !
=
∫∫" #
(
∫∫$ %
active
∫∫% +
==
∫∫, .
$str
∫∫/ 5
||
∫∫6 8
active
∫∫9 ?
==
∫∫@ B
$str
∫∫C F
)
∫∫F G
;
∫∫G H
this
ªª 
.
ªª 
	sortOrder
ªª "
=
ªª# $
int
ªª% (
.
ªª( )
Parse
ªª) .
(
ªª. /
reader
ªª/ 5
[
ªª5 6
$str
ªª6 A
]
ªªA B
.
ªªB C
ToString
ªªC K
(
ªªK L
)
ªªL M
)
ªªM N
;
ªªN O
this
ºº 
.
ºº 
postsPerPage
ºº %
=
ºº& '
int
ºº( +
.
ºº+ ,
Parse
ºº, 1
(
ºº1 2
reader
ºº2 8
[
ºº8 9
$str
ºº9 G
]
ººG H
.
ººH I
ToString
ººI Q
(
ººQ R
)
ººR S
)
ººS T
;
ººT U
this
ΩΩ 
.
ΩΩ 
threadsPerPage
ΩΩ '
=
ΩΩ( )
int
ΩΩ* -
.
ΩΩ- .
Parse
ΩΩ. 3
(
ΩΩ3 4
reader
ΩΩ4 :
[
ΩΩ: ;
$str
ΩΩ; K
]
ΩΩK L
.
ΩΩL M
ToString
ΩΩM U
(
ΩΩU V
)
ΩΩV W
)
ΩΩW X
;
ΩΩX Y
this
ææ 
.
ææ 
threadCount
ææ $
=
ææ% &
int
ææ' *
.
ææ* +
Parse
ææ+ 0
(
ææ0 1
reader
ææ1 7
[
ææ7 8
$str
ææ8 E
]
ææE F
.
ææF G
ToString
ææG O
(
ææO P
)
ææP Q
)
ææQ R
;
ææR S
this
øø 
.
øø 
	postCount
øø "
=
øø# $
int
øø% (
.
øø( )
Parse
øø) .
(
øø. /
reader
øø/ 5
[
øø5 6
$str
øø6 A
]
øøA B
.
øøB C
ToString
øøC K
(
øøK L
)
øøL M
)
øøM N
;
øøN O
if
¿¿ 
(
¿¿ 
reader
¿¿ 
[
¿¿ 
$str
¿¿ 3
]
¿¿3 4
!=
¿¿5 7
DBNull
¿¿8 >
.
¿¿> ?
Value
¿¿? D
)
¿¿D E
{
¡¡ 
this
¬¬ 
.
¬¬  
mostRecentPostDate
¬¬ /
=
¬¬0 1
Convert
¬¬2 9
.
¬¬9 :

ToDateTime
¬¬: D
(
¬¬D E
reader
¬¬E K
[
¬¬K L
$str
¬¬L `
]
¬¬` a
)
¬¬a b
;
¬¬b c
}
√√ 
this
ƒƒ 
.
ƒƒ  
mostRecentPostUser
ƒƒ +
=
ƒƒ, -
reader
ƒƒ. 4
[
ƒƒ4 5
$str
ƒƒ5 I
]
ƒƒI J
.
ƒƒJ K
ToString
ƒƒK S
(
ƒƒS T
)
ƒƒT U
;
ƒƒU V
if
∆∆ 
(
∆∆ 
this
∆∆ 
.
∆∆ 
threadCount
∆∆ (
>
∆∆) *
this
∆∆+ /
.
∆∆/ 0
threadsPerPage
∆∆0 >
)
∆∆> ?
{
«« 
this
»» 
.
»» 

totalPages
»» '
=
»»( )
this
»»* .
.
»». /
threadCount
»»/ :
/
»»; <
this
»»= A
.
»»A B
threadsPerPage
»»B P
;
»»P Q
int
…… 
	remainder
…… %
=
……& '
$num
……( )
;
……) *
Math
   
.
   
DivRem
   #
(
  # $
this
  $ (
.
  ( )
threadCount
  ) 4
,
  4 5
this
  6 :
.
  : ;
threadsPerPage
  ; I
,
  I J
out
  K N
	remainder
  O X
)
  X Y
;
  Y Z
if
ÀÀ 
(
ÀÀ 
	remainder
ÀÀ %
>
ÀÀ& '
$num
ÀÀ( )
)
ÀÀ) *
{
ÃÃ 
this
ÕÕ  
.
ÕÕ  !

totalPages
ÕÕ! +
+=
ÕÕ, .
$num
ÕÕ/ 0
;
ÕÕ0 1
}
ŒŒ 
}
œœ 
else
–– 
{
—— 
this
““ 
.
““ 

totalPages
““ '
=
““( )
$num
““* +
;
““+ ,
}
”” 
if
’’ 
(
’’ 
reader
’’ 
[
’’ 
$str
’’ *
]
’’* +
!=
’’, .
DBNull
’’/ 5
.
’’5 6
Value
’’6 ;
)
’’; <
{
÷÷ 
this
◊◊ 
.
◊◊ 
	forumGuid
◊◊ &
=
◊◊' (
new
◊◊) ,
Guid
◊◊- 1
(
◊◊1 2
reader
◊◊2 8
[
◊◊8 9
$str
◊◊9 D
]
◊◊D E
.
◊◊E F
ToString
◊◊F N
(
◊◊N O
)
◊◊O P
)
◊◊P Q
;
◊◊Q R
}
ÿÿ 
this
⁄⁄ 
.
⁄⁄ 
rolesThatCanPost
⁄⁄ )
=
⁄⁄* +
reader
⁄⁄, 2
[
⁄⁄2 3
$str
⁄⁄3 E
]
⁄⁄E F
.
⁄⁄F G
ToString
⁄⁄G O
(
⁄⁄O P
)
⁄⁄P Q
;
⁄⁄Q R
this
€€ 
.
€€ "
rolesThatCanModerate
€€ -
=
€€. /
reader
€€0 6
[
€€6 7
$str
€€7 M
]
€€M N
.
€€N O
ToString
€€O W
(
€€W X
)
€€X Y
;
€€Y Z
if
›› 
(
›› 
(
›› 
rolesThatCanPost
›› (
.
››( )
Length
››) /
>
››0 1
$num
››2 3
)
››3 4
&&
››4 6
(
››6 7
!
››7 8
rolesThatCanPost
››8 H
.
››H I
EndsWith
››I Q
(
››Q R
$str
››R U
)
››U V
)
››V W
)
››W X
{
ﬁﬁ 
rolesThatCanPost
ﬂﬂ (
+=
ﬂﬂ) +
$str
ﬂﬂ, /
;
ﬂﬂ/ 0
}
‡‡ 
if
‚‚ 
(
‚‚ 
(
‚‚ "
rolesThatCanModerate
‚‚ -
.
‚‚- .
Length
‚‚. 4
>
‚‚5 6
$num
‚‚7 8
)
‚‚8 9
&&
‚‚: <
(
‚‚= >
!
‚‚> ?"
rolesThatCanModerate
‚‚? S
.
‚‚S T
EndsWith
‚‚T \
(
‚‚\ ]
$str
‚‚] `
)
‚‚` a
)
‚‚a b
)
‚‚b c
{
„„ "
rolesThatCanModerate
‰‰ ,
+=
‰‰- /
$str
‰‰0 3
;
‰‰3 4
}
ÂÂ 
this
ÁÁ 
.
ÁÁ "
moderatorNotifyEmail
ÁÁ -
=
ÁÁ. /
reader
ÁÁ0 6
[
ÁÁ6 7
$str
ÁÁ7 M
]
ÁÁM N
.
ÁÁN O
ToString
ÁÁO W
(
ÁÁW X
)
ÁÁX Y
;
ÁÁY Z
if
ÈÈ 
(
ÈÈ 
reader
ÈÈ 
[
ÈÈ 
$str
ÈÈ 3
]
ÈÈ3 4
!=
ÈÈ5 7
DBNull
ÈÈ8 >
.
ÈÈ> ?
Value
ÈÈ? D
)
ÈÈD E
{
ÍÍ 
this
ÎÎ 
.
ÎÎ  
includeInGoogleMap
ÎÎ /
=
ÎÎ0 1
Convert
ÎÎ2 9
.
ÎÎ9 :
	ToBoolean
ÎÎ: C
(
ÎÎC D
reader
ÎÎD J
[
ÎÎJ K
$str
ÎÎK _
]
ÎÎ_ `
)
ÎÎ` a
;
ÎÎa b
}
ÏÏ 
if
ÓÓ 
(
ÓÓ 
reader
ÓÓ 
[
ÓÓ 
$str
ÓÓ /
]
ÓÓ/ 0
!=
ÓÓ1 3
DBNull
ÓÓ4 :
.
ÓÓ: ;
Value
ÓÓ; @
)
ÓÓ@ A
{
ÔÔ 
this
 
.
 
addNoIndexMeta
 +
=
, -
Convert
. 5
.
5 6
	ToBoolean
6 ?
(
? @
reader
@ F
[
F G
$str
G W
]
W X
)
X Y
;
Y Z
}
ÒÒ 
if
ÛÛ 
(
ÛÛ 
reader
ÛÛ 
[
ÛÛ 
$str
ÛÛ '
]
ÛÛ' (
!=
ÛÛ) +
DBNull
ÛÛ, 2
.
ÛÛ2 3
Value
ÛÛ3 8
)
ÛÛ8 9
{
ÙÙ 
this
ıı 
.
ıı 
closed
ıı #
=
ıı$ %
Convert
ıı& -
.
ıı- .
	ToBoolean
ıı. 7
(
ıı7 8
reader
ıı8 >
[
ıı> ?
$str
ıı? G
]
ııG H
)
ııH I
;
ııI J
}
ˆˆ 
if
¯¯ 
(
¯¯ 
reader
¯¯ 
[
¯¯ 
$str
¯¯ (
]
¯¯( )
!=
¯¯* ,
DBNull
¯¯- 3
.
¯¯3 4
Value
¯¯4 9
)
¯¯9 :
{
˘˘ 
this
˙˙ 
.
˙˙ 
visible
˙˙ $
=
˙˙% &
Convert
˙˙' .
.
˙˙. /
	ToBoolean
˙˙/ 8
(
˙˙8 9
reader
˙˙9 ?
[
˙˙? @
$str
˙˙@ I
]
˙˙I J
)
˙˙J K
;
˙˙K L
}
˚˚ 
if
˝˝ 
(
˝˝ 
reader
˝˝ 
[
˝˝ 
$str
˝˝ 2
]
˝˝2 3
!=
˝˝4 6
DBNull
˝˝7 =
.
˝˝= >
Value
˝˝> C
)
˝˝C D
{
˛˛ 
this
ˇˇ 
.
ˇˇ 
requireModeration
ˇˇ .
=
ˇˇ/ 0
Convert
ˇˇ1 8
.
ˇˇ8 9
	ToBoolean
ˇˇ9 B
(
ˇˇB C
reader
ˇˇC I
[
ˇˇI J
$str
ˇˇJ ]
]
ˇˇ] ^
)
ˇˇ^ _
;
ˇˇ_ `
}
ÄÄ 
if
ÇÇ 
(
ÇÇ 
reader
ÇÇ 
[
ÇÇ 
$str
ÇÇ 4
]
ÇÇ4 5
!=
ÇÇ6 8
DBNull
ÇÇ9 ?
.
ÇÇ? @
Value
ÇÇ@ E
)
ÇÇE F
{
ÉÉ 
this
ÑÑ 
.
ÑÑ !
requireModForNotify
ÑÑ 0
=
ÑÑ1 2
Convert
ÑÑ3 :
.
ÑÑ: ;
	ToBoolean
ÑÑ; D
(
ÑÑD E
reader
ÑÑE K
[
ÑÑK L
$str
ÑÑL a
]
ÑÑa b
)
ÑÑb c
;
ÑÑc d
}
ÖÖ 
if
áá 
(
áá 
reader
áá 
[
áá 
$str
áá 8
]
áá8 9
!=
áá: <
DBNull
áá= C
.
ááC D
Value
ááD I
)
ááI J
{
àà 
this
ââ 
.
ââ %
allowTrustedDirectPosts
ââ 4
=
ââ5 6
Convert
ââ7 >
.
ââ> ?
	ToBoolean
ââ? H
(
ââH I
reader
ââI O
[
ââO P
$str
ââP i
]
ââi j
)
ââj k
;
ââk l
}
ää 
if
åå 
(
åå 
reader
åå 
[
åå 
$str
åå 9
]
åå9 :
!=
åå; =
DBNull
åå> D
.
ååD E
Value
ååE J
)
ååJ K
{
çç 
this
éé 
.
éé &
allowTrustedDirectNotify
éé 5
=
éé6 7
Convert
éé8 ?
.
éé? @
	ToBoolean
éé@ I
(
ééI J
reader
ééJ P
[
ééP Q
$str
ééQ k
]
éék l
)
éél m
;
éém n
}
èè 
}
ëë 
else
íí 
{
ìì 
if
îî 
(
îî 
log
îî 
.
îî 
IsErrorEnabled
îî *
)
îî* +
{
ïï 
log
ññ 
.
ññ 
Error
ññ !
(
ññ! "
$str
ññ" M
)
ññM N
;
ññN O
}
óó 
}
öö 
}
õõ 
}
üü 	
private
°° 
bool
°° 
Create
°° 
(
°° 
)
°° 
{
¢¢ 	
int
££ 
newID
££ 
=
££ 
-
££ 
$num
££ 
;
££ 
if
§§ 
(
§§ 
	forumGuid
§§ 
==
§§ 
Guid
§§ !
.
§§! "
Empty
§§" '
)
§§' (
{
§§) *
	forumGuid
§§+ 4
=
§§5 6
Guid
§§7 ;
.
§§; <
NewGuid
§§< C
(
§§C D
)
§§D E
;
§§E F
}
§§G H
newID
¶¶ 
=
¶¶ 
DBForums
¶¶ 
.
¶¶ 
Create
¶¶ #
(
¶¶# $
this
ßß 
.
ßß 
	forumGuid
ßß 
,
ßß 
this
®® 
.
®® 
moduleID
®® 
,
®® 
this
©© 
.
©© 
createdByUserID
©© $
,
©©$ %
this
™™ 
.
™™ 
title
™™ 
,
™™ 
this
´´ 
.
´´ 
description
´´  
,
´´  !
this
¨¨ 
.
¨¨ 
isModerated
¨¨  
,
¨¨  !
this
≠≠ 
.
≠≠ 
isActive
≠≠ 
,
≠≠ 
this
ÆÆ 
.
ÆÆ 
	sortOrder
ÆÆ 
,
ÆÆ 
this
ØØ 
.
ØØ 
postsPerPage
ØØ !
,
ØØ! "
this
∞∞ 
.
∞∞ 
threadsPerPage
∞∞ #
,
∞∞# $
this
±± 
.
±± !
allowAnonymousPosts
±± (
,
±±( )
this
≤≤ 
.
≤≤ 
rolesThatCanPost
≤≤ %
,
≤≤% &
this
≥≥ 
.
≥≥ "
rolesThatCanModerate
≥≥ )
,
≥≥) *
this
¥¥ 
.
¥¥ "
moderatorNotifyEmail
¥¥ )
,
¥¥) *
this
µµ 
.
µµ  
includeInGoogleMap
µµ '
,
µµ' (
this
∂∂ 
.
∂∂ 
addNoIndexMeta
∂∂ #
,
∂∂# $
this
∑∑ 
.
∑∑ 
closed
∑∑ 
,
∑∑ 
this
∏∏ 
.
∏∏ 
visible
∏∏ 
,
∏∏ 
this
ππ 
.
ππ 
requireModeration
ππ &
,
ππ& '
this
∫∫ 
.
∫∫ !
requireModForNotify
∫∫ (
,
∫∫( )
this
ªª 
.
ªª %
allowTrustedDirectPosts
ªª ,
,
ªª, -
this
ºº 
.
ºº &
allowTrustedDirectNotify
ºº -
)
ºº- .
;
ºº. /
this
ææ 
.
ææ 
itemID
ææ 
=
ææ 
newID
ææ 
;
ææ  
return
¿¿ 
(
¿¿ 
newID
¿¿ 
>
¿¿ 
-
¿¿ 
$num
¿¿ 
)
¿¿ 
;
¿¿  
}
¬¬ 	
private
≈≈ 
bool
≈≈ 
Update
≈≈ 
(
≈≈ 
)
≈≈ 
{
∆∆ 	
return
»» 
DBForums
»» 
.
»» 
Update
»» "
(
»»" #
this
…… 
.
…… 
itemID
…… 
,
…… 
this
   
.
   
createdByUserID
   $
,
  $ %
this
ÀÀ 
.
ÀÀ 
title
ÀÀ 
,
ÀÀ 
this
ÃÃ 
.
ÃÃ 
description
ÃÃ  
,
ÃÃ  !
this
ÕÕ 
.
ÕÕ 
isModerated
ÕÕ  
,
ÕÕ  !
this
ŒŒ 
.
ŒŒ 
isActive
ŒŒ 
,
ŒŒ 
this
œœ 
.
œœ 
	sortOrder
œœ 
,
œœ 
this
–– 
.
–– 
postsPerPage
–– !
,
––! "
this
—— 
.
—— 
threadsPerPage
—— #
,
——# $
this
““ 
.
““ !
allowAnonymousPosts
““ (
,
““( )
this
”” 
.
”” 
rolesThatCanPost
”” %
,
””% &
this
‘‘ 
.
‘‘ "
rolesThatCanModerate
‘‘ )
,
‘‘) *
this
’’ 
.
’’ "
moderatorNotifyEmail
’’ )
,
’’) *
this
÷÷ 
.
÷÷  
includeInGoogleMap
÷÷ '
,
÷÷' (
this
◊◊ 
.
◊◊ 
addNoIndexMeta
◊◊ #
,
◊◊# $
this
ÿÿ 
.
ÿÿ 
closed
ÿÿ 
,
ÿÿ 
this
ŸŸ 
.
ŸŸ 
visible
ŸŸ 
,
ŸŸ 
this
⁄⁄ 
.
⁄⁄ 
requireModeration
⁄⁄ &
,
⁄⁄& '
this
€€ 
.
€€ !
requireModForNotify
€€ (
,
€€( )
this
‹‹ 
.
‹‹ %
allowTrustedDirectPosts
‹‹ ,
,
‹‹, -
this
›› 
.
›› &
allowTrustedDirectNotify
›› -
)
››- .
;
››. /
}
ﬁﬁ 	
public
ÂÂ 
bool
ÂÂ 
Save
ÂÂ 
(
ÂÂ 
)
ÂÂ 
{
ÊÊ 	
if
ÁÁ 
(
ÁÁ 
this
ÁÁ 
.
ÁÁ 
itemID
ÁÁ 
>
ÁÁ 
-
ÁÁ 
$num
ÁÁ  
)
ÁÁ  !
{
ËË 
return
ÈÈ 
Update
ÈÈ 
(
ÈÈ 
)
ÈÈ 
;
ÈÈ  
}
ÍÍ 
else
ÎÎ 
{
ÏÏ 
return
ÌÌ 
Create
ÌÌ 
(
ÌÌ 
)
ÌÌ 
;
ÌÌ  
}
ÓÓ 
}
ÔÔ 	
public
ÚÚ 
IDataReader
ÚÚ 

GetThreads
ÚÚ %
(
ÚÚ% &
int
ÚÚ& )

pageNumber
ÚÚ* 4
)
ÚÚ4 5
{
ÛÛ 	
return
ÙÙ 
DBForums
ÙÙ 
.
ÙÙ 

GetThreads
ÙÙ &
(
ÙÙ& '
this
ÙÙ' +
.
ÙÙ+ ,
itemID
ÙÙ, 2
,
ÙÙ2 3

pageNumber
ÙÙ4 >
)
ÙÙ> ?
;
ÙÙ? @
}
ıı 	
public
˜˜ 
bool
˜˜ 
	Subscribe
˜˜ 
(
˜˜ 
int
˜˜ !
userId
˜˜" (
)
˜˜( )
{
¯¯ 	
if
˘˘ 
(
˘˘ 
DBForums
˘˘ 
.
˘˘ %
ForumSubscriptionExists
˘˘ 0
(
˘˘0 1
this
˘˘1 5
.
˘˘5 6
itemID
˘˘6 <
,
˘˘< =
userId
˘˘> D
)
˘˘D E
)
˘˘E F
{
˘˘G H
return
˘˘I O
true
˘˘P T
;
˘˘T U
}
˘˘V W
return
˚˚ 
DBForums
˚˚ 
.
˚˚ 
AddSubscriber
˚˚ )
(
˚˚) *
this
˚˚* .
.
˚˚. /
itemID
˚˚/ 5
,
˚˚5 6
userId
˚˚7 =
,
˚˚= >
Guid
˚˚? C
.
˚˚C D
NewGuid
˚˚D K
(
˚˚K L
)
˚˚L M
)
˚˚M N
;
˚˚N O
}
¸¸ 	
public
˛˛ 
bool
˛˛ 
Unsubscribe
˛˛ 
(
˛˛  
int
˛˛  #
userId
˛˛$ *
)
˛˛* +
{
ˇˇ 	
return
ÄÄ 
DBForums
ÄÄ 
.
ÄÄ 
Unsubscribe
ÄÄ '
(
ÄÄ' (
this
ÄÄ( ,
.
ÄÄ, -
itemID
ÄÄ- 3
,
ÄÄ3 4
userId
ÄÄ5 ;
)
ÄÄ; <
;
ÄÄ< =
}
ÅÅ 	
public
îî 
static
îî 
bool
îî 
Unsubscribe
îî &
(
îî& '
Guid
îî' +
subGuid
îî, 3
)
îî3 4
{
ïï 	
return
ññ 
DBForums
ññ 
.
ññ 
Unsubscribe
ññ '
(
ññ' (
subGuid
ññ( /
)
ññ/ 0
;
ññ0 1
}
óó 	
public
ûû 
static
ûû 
bool
ûû 
UnsubscribeAll
ûû )
(
ûû) *
int
ûû* -
userId
ûû. 4
)
ûû4 5
{
üü 	
return
†† 
DBForums
†† 
.
†† 
UnsubscribeAll
†† *
(
††* +
userId
††+ 1
)
††1 2
;
††2 3
}
°° 	
public
££ 
static
££ 
IDataReader
££ !
	GetForums
££" +
(
££+ ,
int
££, /
moduleId
££0 8
,
££8 9
int
££: =
userId
££> D
)
££D E
{
§§ 	
return
•• 
DBForums
•• 
.
•• 
	GetForums
•• %
(
••% &
moduleId
••& .
,
••. /
userId
••0 6
)
••6 7
;
••7 8
}
¶¶ 	
public
©© 
static
©© 
bool
©©  
IncrementPostCount
©© -
(
©©- .
int
©©. 1
forumId
©©2 9
,
©©9 :
int
©©; >"
mostRecentPostUserId
©©? S
,
©©S T
DateTime
©©U ] 
mostRecentPostDate
©©^ p
)
©©p q
{
™™ 	
return
´´ 
DBForums
´´ 
.
´´  
IncrementPostCount
´´ .
(
´´. /
forumId
´´/ 6
,
´´6 7"
mostRecentPostUserId
´´8 L
,
´´L M 
mostRecentPostDate
´´N `
)
´´` a
;
´´a b
}
¨¨ 	
public
ÆÆ 
static
ÆÆ 
bool
ÆÆ  
IncrementPostCount
ÆÆ -
(
ÆÆ- .
int
ÆÆ. 1
forumId
ÆÆ2 9
)
ÆÆ9 :
{
ØØ 	
return
∞∞ 
DBForums
∞∞ 
.
∞∞  
IncrementPostCount
∞∞ .
(
∞∞. /
forumId
∞∞/ 6
)
∞∞6 7
;
∞∞7 8
}
±± 	
public
≥≥ 
static
≥≥ 
bool
≥≥  
DecrementPostCount
≥≥ -
(
≥≥- .
int
≥≥. 1
forumId
≥≥2 9
)
≥≥9 :
{
¥¥ 	
return
µµ 
DBForums
µµ 
.
µµ  
DecrementPostCount
µµ .
(
µµ. /
forumId
µµ/ 6
)
µµ6 7
;
µµ7 8
}
∂∂ 	
public
∏∏ 
static
∏∏ 
bool
∏∏ "
RecalculatePostStats
∏∏ /
(
∏∏/ 0
int
∏∏0 3
forumId
∏∏4 ;
)
∏∏; <
{
ππ 	
return
ªª 
DBForums
ªª 
.
ªª "
RecalculatePostStats
ªª 0
(
ªª0 1
forumId
ªª1 8
)
ªª8 9
;
ªª9 :
}
ΩΩ 	
public
øø 
static
øø 
bool
øø "
DecrementThreadCount
øø /
(
øø/ 0
int
øø0 3
forumId
øø4 ;
)
øø; <
{
¿¿ 	
return
¡¡ 
DBForums
¡¡ 
.
¡¡ "
DecrementThreadCount
¡¡ 0
(
¡¡0 1
forumId
¡¡1 8
)
¡¡8 9
;
¡¡9 :
}
¬¬ 	
public
ƒƒ 
static
ƒƒ 
bool
ƒƒ "
IncrementThreadCount
ƒƒ /
(
ƒƒ/ 0
int
ƒƒ0 3
forumId
ƒƒ4 ;
)
ƒƒ; <
{
≈≈ 	
return
∆∆ 
DBForums
∆∆ 
.
∆∆ "
IncrementThreadCount
∆∆ 0
(
∆∆0 1
forumId
∆∆1 8
)
∆∆8 9
;
∆∆9 :
}
«« 	
public
…… 
static
…… 
bool
…… 
Delete
…… !
(
……! "
int
……" %
itemId
……& ,
)
……, -
{
   	
return
ÀÀ 
DBForums
ÀÀ 
.
ÀÀ 
Delete
ÀÀ "
(
ÀÀ" #
itemId
ÀÀ# )
)
ÀÀ) *
;
ÀÀ* +
}
ÃÃ 	
public
ŒŒ 
static
ŒŒ 
bool
ŒŒ 
DeleteByModule
ŒŒ )
(
ŒŒ) *
int
ŒŒ* -
moduleId
ŒŒ. 6
)
ŒŒ6 7
{
œœ 	
return
–– 
DBForums
–– 
.
–– 
DeleteByModule
–– *
(
––* +
moduleId
––+ 3
)
––3 4
;
––4 5
}
—— 	
public
”” 
static
”” 
bool
”” 
DeleteBySite
”” '
(
””' (
int
””( +
siteId
””, 2
)
””2 3
{
‘‘ 	
return
’’ 
DBForums
’’ 
.
’’ 
DeleteBySite
’’ (
(
’’( )
siteId
’’) /
)
’’/ 0
;
’’0 1
}
÷÷ 	
public
ÿÿ 
static
ÿÿ 
bool
ÿÿ 
IsSubscribed
ÿÿ '
(
ÿÿ' (
int
ÿÿ( +
forumId
ÿÿ, 3
,
ÿÿ3 4
int
ÿÿ5 8
userId
ÿÿ9 ?
)
ÿÿ? @
{
ŸŸ 	
return
⁄⁄ 
DBForums
⁄⁄ 
.
⁄⁄ %
ForumSubscriptionExists
⁄⁄ 3
(
⁄⁄3 4
forumId
⁄⁄4 ;
,
⁄⁄; <
userId
⁄⁄= C
)
⁄⁄C D
;
⁄⁄D E
}
€€ 	
public
‚‚ 
static
‚‚ 
bool
‚‚ 
UpdateUserStats
‚‚ *
(
‚‚* +
int
‚‚+ .
userId
‚‚/ 5
)
‚‚5 6
{
„„ 	
return
‰‰ 
DBForums
‰‰ 
.
‰‰ 
UpdateUserStats
‰‰ +
(
‰‰+ ,
userId
‰‰, 2
)
‰‰2 3
;
‰‰3 4
}
ÂÂ 	
public
ÁÁ 
static
ÁÁ 
IDataReader
ÁÁ !
GetSubscriberPage
ÁÁ" 3
(
ÁÁ3 4
int
ËË 
forumId
ËË 
,
ËË 
int
ÈÈ 

pageNumber
ÈÈ 
,
ÈÈ 
int
ÍÍ 
pageSize
ÍÍ 
,
ÍÍ 
out
ÎÎ 
int
ÎÎ 

totalPages
ÎÎ 
)
ÎÎ 
{
ÏÏ 	
return
ÌÌ 
DBForums
ÌÌ 
.
ÌÌ 
GetSubscriberPage
ÌÌ -
(
ÌÌ- .
forumId
ÓÓ 
,
ÓÓ 

pageNumber
ÔÔ 
,
ÔÔ 
pageSize
 
,
 
out
ÒÒ 

totalPages
ÒÒ 
)
ÒÒ 
;
ÒÒ  
}
ÚÚ 	
public
ÙÙ 
static
ÙÙ 
bool
ÙÙ  
DeleteSubscription
ÙÙ -
(
ÙÙ- .
int
ÙÙ. 1
subscriptionId
ÙÙ2 @
)
ÙÙ@ A
{
ıı 	
return
ˆˆ 
DBForums
ˆˆ 
.
ˆˆ  
DeleteSubscription
ˆˆ .
(
ˆˆ. /
subscriptionId
ˆˆ/ =
)
ˆˆ= >
;
ˆˆ> ?
}
˜˜ 	
}
¸¸ 
}˝˝ ı≤
yD:\Projects\DefensePoint\whitesource-testcases-csharp\CWE79\mojoportal\mojoPortal.Features.Business\Forums\ForumThread.cs
	namespace 	

mojoPortal
 
. 
Business 
{ 
public 

class 
ForumThread 
: 
IIndexableContent 0
{ 
public 
ForumThread 
( 
) 
{ 	
}   	
public"" 
ForumThread"" 
("" 
int"" 
threadId"" '
)""' (
{## 	
	GetThread$$ 
($$ 
threadId$$ 
)$$ 
;$$  
}%% 	
public'' 
ForumThread'' 
('' 
int'' 
threadId'' '
,''' (
int'') ,
postId''- 3
)''3 4
{(( 	
	GetThread)) 
()) 
threadId)) 
))) 
;))  
GetPost** 
(** 
postId** 
)** 
;** 
}++ 	
private22 
static22 
readonly22 
ILog22  $
log22% (
=22) *

LogManager22+ 5
.225 6
	GetLogger226 ?
(22? @
typeof22@ F
(22F G
ForumThread22G R
)22R S
)22S T
;22T U
private55 
Guid55 

threadGuid55 
=55  !
Guid55" &
.55& '
Empty55' ,
;55, -
private66 
int66 
threadID66 
=66 
-66  
$num66  !
;66! "
private77 
int77 
forumID77 
=77 
-77 
$num77  
;77  !
private88 
int88 
moduleID88 
=88 
-88  
$num88  !
;88! "
private99 
int99 
origForumID99 
=99  !
$num99" #
;99# $
private:: 
DateTime:: 

threadDate:: #
=::$ %
DateTime::& .
.::. /
UtcNow::/ 5
;::5 6
private;; 
string;; 
	startedBy;;  
=;;! "
string;;# )
.;;) *
Empty;;* /
;;;/ 0
private<< 
int<< 
startedByUserID<< #
=<<$ %
-<<& '
$num<<' (
;<<( )
private== 
string== 
subject== 
===  
string==! '
.==' (
Empty==( -
;==- .
private>> 
int>> 

totalViews>> 
=>>  
$num>>! "
;>>" #
private?? 
int?? 
totalReplies??  
=??! "
$num??# $
;??$ %
private@@ 
bool@@ 
isLocked@@ 
=@@ 
false@@  %
;@@% &
privateBB 
intBB 
	sortOrderBB 
=BB 
$numBB  #
;BB# $
privateCC 
intCC 
forumSequenceCC !
=CC" #
$numCC$ %
;CC% &
privateDD 
DateTimeDD 
mostRecentPostDateDD +
=DD, -
DateTimeDD. 6
.DD6 7
UtcNowDD7 =
;DD= >
privateEE 
stringEE 
mostRecentPostUserEE )
=EE* +
stringEE, 2
.EE2 3
EmptyEE3 8
;EE8 9
privateFF 
intFF  
mostRecentPostUserIDFF (
=FF) *
$numFF+ ,
;FF, -
privateGG 
intGG 
postsPerPageGG  
=GG! "
$numGG# $
;GG$ %
privateHH 
intHH 

totalPagesHH 
=HH  
$numHH! "
;HH" #
privateJJ 
intJJ 
	modStatusJJ 
=JJ 
$numJJ  !
;JJ! "
publicNN 
intNN 
	ModStatusNN 
{OO 	
getPP 
{PP 
returnPP 
	ModStatusPP "
;PP" #
}PP$ %
setQQ 
{QQ 
	ModStatusQQ 
=QQ 
valueQQ #
;QQ# $
}QQ% &
}RR 	
privateTT 
stringTT 

threadTypeTT !
=TT" #
stringTT$ *
.TT* +
EmptyTT+ 0
;TT0 1
publicVV 
stringVV 

ThreadTypeVV  
{WW 	
getXX 
{XX 
returnXX 

threadTypeXX #
;XX# $
}XX% &
setYY 
{YY 

threadTypeYY 
=YY 
valueYY $
;YY$ %
}YY& '
}ZZ 	
private\\ 
Guid\\ 

assignedTo\\ 
=\\  !
Guid\\" &
.\\& '
Empty\\' ,
;\\, -
public^^ 
Guid^^ 

AssignedTo^^ 
{__ 	
get`` 
{`` 
return`` 

assignedTo`` #
;``# $
}``% &
setaa 
{aa 

assignedToaa 
=aa 
valueaa $
;aa$ %
}aa& '
}bb 	
privatedd 
Guiddd 
lockedBydd 
=dd 
Guiddd  $
.dd$ %
Emptydd% *
;dd* +
publicff 
Guidff 
LockedByff 
{gg 	
gethh 
{hh 
returnhh 
lockedByhh !
;hh! "
}hh# $
setii 
{ii 
lockedByii 
=ii 
valueii "
;ii" #
}ii$ %
}jj 	
privatell 
stringll 
lockedReasonll #
=ll$ %
stringll& ,
.ll, -
Emptyll- 2
;ll2 3
publicnn 
stringnn 
LockedReasonnn "
{oo 	
getpp 
{pp 
returnpp 
lockedReasonpp %
;pp% &
}pp' (
setqq 
{qq 
lockedReasonqq 
=qq  
valueqq! &
;qq& '
}qq( )
}rr 	
privatett 
DateTimett 
	lockedUtctt "
=tt# $
DateTimett% -
.tt- .
MaxValuett. 6
;tt6 7
publicvv 
DateTimevv 
	LockedUtcvv !
{ww 	
getxx 
{xx 
returnxx 
	lockedUtcxx "
;xx" #
}xx$ %
setyy 
{yy 
	lockedUtcyy 
=yy 
valueyy #
;yy# $
}yy% &
}zz 	
private 
int 
postID 
= 
- 
$num 
;  
private
ÄÄ 
int
ÄÄ 
threadSequence
ÄÄ "
=
ÄÄ# $
$num
ÄÄ% &
;
ÄÄ& '
private
ÅÅ 
string
ÅÅ 
postSubject
ÅÅ "
=
ÅÅ# $
string
ÅÅ% +
.
ÅÅ+ ,
Empty
ÅÅ, 1
;
ÅÅ1 2
private
ÇÇ 
string
ÇÇ 
postDate
ÇÇ 
=
ÇÇ  !
string
ÇÇ" (
.
ÇÇ( )
Empty
ÇÇ) .
;
ÇÇ. /
private
ÉÉ 
DateTime
ÉÉ 
currentPostDate
ÉÉ (
=
ÉÉ) *
DateTime
ÉÉ+ 3
.
ÉÉ3 4
UtcNow
ÉÉ4 :
;
ÉÉ: ;
private
ÑÑ 
bool
ÑÑ 

isApproved
ÑÑ 
=
ÑÑ  !
true
ÑÑ" &
;
ÑÑ& '
private
ÖÖ 
int
ÖÖ 

postUserID
ÖÖ 
=
ÖÖ  
-
ÖÖ! "
$num
ÖÖ" #
;
ÖÖ# $
private
ÜÜ 
string
ÜÜ 
postUserName
ÜÜ #
=
ÜÜ$ %
string
ÜÜ& ,
.
ÜÜ, -
Empty
ÜÜ- 2
;
ÜÜ2 3
private
áá 
int
áá 
postSortOrder
áá !
=
áá" #
$num
áá$ '
;
áá' (
private
àà 
string
àà 
postMessage
àà "
=
àà# $
string
àà% +
.
àà+ ,
Empty
àà, 1
;
àà1 2
private
ââ 
bool
ââ #
subscribeUserToThread
ââ *
=
ââ+ ,
false
ââ- 2
;
ââ2 3
private
ää 
bool
ää 
notificationSent
ää %
=
ää& '
false
ää( -
;
ää- .
public
åå 
bool
åå 
NotificationSent
åå $
{
çç 	
get
éé 
{
éé 
return
éé 
notificationSent
éé )
;
éé) *
}
éé+ ,
set
èè 
{
èè 
notificationSent
èè "
=
èè# $
value
èè% *
;
èè* +
}
èè, -
}
êê 	
private
íí 
int
íí 
postModStatus
íí !
=
íí" #
$num
íí$ %
;
íí% &
public
îî 
int
îî 
PostModStatus
îî  
{
ïï 	
get
ññ 
{
ññ 
return
ññ 
postModStatus
ññ &
;
ññ& '
}
ññ( )
set
óó 
{
óó 
postModStatus
óó 
=
óó  !
value
óó" '
;
óó' (
}
óó) *
}
òò 	
private
õõ 
int
õõ 
siteId
õõ 
=
õõ 
-
õõ 
$num
õõ 
;
õõ  
private
úú 
string
úú 
searchIndexPath
úú &
=
úú' (
string
úú) /
.
úú/ 0
Empty
úú0 5
;
úú5 6
public
©© 
int
©© 
SiteId
©© 
{
™™ 	
get
´´ 
{
´´ 
return
´´ 
siteId
´´ 
;
´´  
}
´´! "
set
¨¨ 
{
¨¨ 
siteId
¨¨ 
=
¨¨ 
value
¨¨  
;
¨¨  !
}
¨¨" #
}
≠≠ 	
public
¥¥ 
string
¥¥ 
SearchIndexPath
¥¥ %
{
µµ 	
get
∂∂ 
{
∂∂ 
return
∂∂ 
searchIndexPath
∂∂ (
;
∂∂( )
}
∂∂* +
set
∑∑ 
{
∑∑ 
searchIndexPath
∑∑ !
=
∑∑" #
value
∑∑$ )
;
∑∑) *
}
∑∑+ ,
}
∏∏ 	
public
∫∫ 
Guid
∫∫ 

ThreadGuid
∫∫ 
{
ªª 	
get
ºº 
{
ºº 
return
ºº 

threadGuid
ºº #
;
ºº# $
}
ºº% &
}
ΩΩ 	
private
øø 
bool
øø 

isQuestion
øø 
=
øø  !
true
øø" &
;
øø& '
public
¡¡ 
bool
¡¡ 

IsQuestion
¡¡ 
{
¬¬ 	
get
√√ 
{
√√ 
return
√√ 

isQuestion
√√ #
;
√√# $
}
√√% &
set
ƒƒ 
{
ƒƒ 

isQuestion
ƒƒ 
=
ƒƒ 
value
ƒƒ $
;
ƒƒ$ %
}
ƒƒ& '
}
≈≈ 	
private
«« 
bool
«« 
includeInSiteMap
«« %
=
««& '
true
««( ,
;
««, -
public
…… 
bool
…… 
IncludeInSiteMap
…… $
{
   	
get
ÀÀ 
{
ÀÀ 
return
ÀÀ 
includeInSiteMap
ÀÀ )
;
ÀÀ) *
}
ÀÀ+ ,
set
ÃÃ 
{
ÃÃ 
includeInSiteMap
ÃÃ "
=
ÃÃ# $
value
ÃÃ% *
;
ÃÃ* +
}
ÃÃ, -
}
ÕÕ 	
private
œœ 
bool
œœ 
setNoIndexMeta
œœ #
=
œœ$ %
false
œœ& +
;
œœ+ ,
public
—— 
bool
—— 
SetNoIndexMeta
—— "
{
““ 	
get
”” 
{
”” 
return
”” 
setNoIndexMeta
”” '
;
””' (
}
””) *
set
‘‘ 
{
‘‘ 
setNoIndexMeta
‘‘  
=
‘‘! "
value
‘‘# (
;
‘‘( )
}
‘‘* +
}
’’ 	
private
◊◊ 
string
◊◊ 
pageTitleOverride
◊◊ (
=
◊◊) *
string
◊◊+ 1
.
◊◊1 2
Empty
◊◊2 7
;
◊◊7 8
public
ŸŸ 
string
ŸŸ 
PageTitleOverride
ŸŸ '
{
⁄⁄ 	
get
€€ 
{
€€ 
return
€€ 
pageTitleOverride
€€ *
;
€€* +
}
€€, -
set
‹‹ 
{
‹‹ 
pageTitleOverride
‹‹ #
=
‹‹$ %
value
‹‹& +
;
‹‹+ ,
}
‹‹- .
}
›› 	
public
‡‡ 
int
‡‡ 
ThreadId
‡‡ 
{
·· 	
get
‚‚ 
{
‚‚ 
return
‚‚ 
threadID
‚‚ !
;
‚‚! "
}
‚‚# $
}
„„ 	
public
ÂÂ 
int
ÂÂ 
ForumId
ÂÂ 
{
ÊÊ 	
get
ÁÁ 
{
ÁÁ 
return
ÁÁ 
forumID
ÁÁ  
;
ÁÁ  !
}
ÁÁ" #
set
ËË 
{
ËË 
forumID
ËË 
=
ËË 
value
ËË !
;
ËË! "
}
ËË# $
}
ÈÈ 	
public
ÎÎ 
int
ÎÎ 
ModuleId
ÎÎ 
{
ÏÏ 	
get
ÌÌ 
{
ÌÌ 
return
ÌÌ 
moduleID
ÌÌ !
;
ÌÌ! "
}
ÌÌ# $
}
ÔÔ 	
public
ÒÒ 
DateTime
ÒÒ 

ThreadDate
ÒÒ "
{
ÚÚ 	
get
ÛÛ 
{
ÛÛ 
return
ÛÛ 

threadDate
ÛÛ #
;
ÛÛ# $
}
ÛÛ% &
}
ÙÙ 	
public
ˆˆ 
DateTime
ˆˆ 
CurrentPostDate
ˆˆ '
{
˜˜ 	
get
¯¯ 
{
¯¯ 
return
¯¯ 
currentPostDate
¯¯ (
;
¯¯( )
}
¯¯* +
}
˘˘ 	
public
˚˚ 
string
˚˚ 
	StartedBy
˚˚ 
{
¸¸ 	
get
˝˝ 
{
˝˝ 
return
˝˝ 
	startedBy
˝˝ "
;
˝˝" #
}
˝˝$ %
set
˛˛ 
{
˛˛ 
	startedBy
˛˛ 
=
˛˛ 
value
˛˛ #
;
˛˛# $
}
˛˛% &
}
ˇˇ 	
public
ÅÅ 
int
ÅÅ 
StartedByUserId
ÅÅ "
{
ÇÇ 	
get
ÉÉ 
{
ÉÉ 
return
ÉÉ 
startedByUserID
ÉÉ (
;
ÉÉ( )
}
ÉÉ* +
set
ÑÑ 
{
ÑÑ 
startedByUserID
ÑÑ !
=
ÑÑ" #
value
ÑÑ$ )
;
ÑÑ) *
}
ÑÑ+ ,
}
ÖÖ 	
public
áá 
string
áá 
Subject
áá 
{
àà 	
get
ââ 
{
ââ 
return
ââ 
subject
ââ  
;
ââ  !
}
ââ" #
set
ää 
{
ää 
subject
ää 
=
ää 
value
ää !
;
ää! "
}
ää# $
}
ãã 	
public
çç 
int
çç 

TotalViews
çç 
{
éé 	
get
èè 
{
èè 
return
èè 

totalViews
èè #
;
èè# $
}
èè% &
}
êê 	
public
íí 
int
íí 
TotalReplies
íí 
{
ìì 	
get
îî 
{
îî 
return
îî 
totalReplies
îî %
;
îî% &
}
îî' (
}
ïï 	
public
óó 
int
óó 

TotalPages
óó 
{
òò 	
get
ôô 
{
ôô 
return
ôô 

totalPages
ôô #
;
ôô# $
}
ôô% &
}
öö 	
public
ùù 
bool
ùù 
IsLocked
ùù 
{
ûû 	
get
üü 
{
üü 
return
üü 
isLocked
üü !
;
üü! "
}
üü# $
set
†† 
{
†† 
isLocked
†† 
=
†† 
value
†† "
;
††" #
}
††$ %
}
°° 	
public
££ 
bool
££ 
IsClosed
££ 
(
££ 
int
££  
daysOldToClose
££! /
)
££/ 0
{
§§ 	
if
•• 
(
•• 
daysOldToClose
•• 
==
•• !
-
••" #
$num
••# $
)
••$ %
{
••& '
return
••( .
false
••/ 4
;
••4 5
}
••6 7
if
ßß 
(
ßß 
this
ßß 
.
ßß  
mostRecentPostDate
ßß '
<
ßß( )
DateTime
ßß* 2
.
ßß2 3
UtcNow
ßß3 9
.
ßß9 :
AddDays
ßß: A
(
ßßA B
-
ßßB C
daysOldToClose
ßßC Q
)
ßßQ R
)
ßßR S
{
ßßT U
return
ßßV \
true
ßß] a
;
ßßa b
}
ßßc d
return
©© 
false
©© 
;
©© 
}
™™ 	
public
¨¨ 
int
¨¨ 
	SortOrder
¨¨ 
{
≠≠ 	
get
ÆÆ 
{
ÆÆ 
return
ÆÆ 
	sortOrder
ÆÆ "
;
ÆÆ" #
}
ÆÆ$ %
set
ØØ 
{
ØØ 
	sortOrder
ØØ 
=
ØØ 
value
ØØ #
;
ØØ# $
}
ØØ% &
}
∞∞ 	
public
≤≤ 
int
≤≤ 
ForumSequence
≤≤  
{
≥≥ 	
get
¥¥ 
{
¥¥ 
return
¥¥ 
forumSequence
¥¥ &
;
¥¥& '
}
¥¥( )
}
µµ 	
public
∏∏ 
DateTime
∏∏  
MostRecentPostDate
∏∏ *
{
ππ 	
get
∫∫ 
{
∫∫ 
return
∫∫  
mostRecentPostDate
∫∫ +
;
∫∫+ ,
}
∫∫- .
}
ªª 	
public
ΩΩ 
string
ΩΩ  
MostRecentPostUser
ΩΩ (
{
ææ 	
get
øø 
{
øø 
return
øø  
mostRecentPostUser
øø +
;
øø+ ,
}
øø- .
}
¿¿ 	
public
¬¬ 
int
¬¬ "
MostRecentPostUserId
¬¬ '
{
√√ 	
get
ƒƒ 
{
ƒƒ 
return
ƒƒ "
mostRecentPostUserID
ƒƒ -
;
ƒƒ- .
}
ƒƒ/ 0
}
≈≈ 	
private
…… 
Guid
…… 
postGuid
…… 
=
…… 
Guid
……  $
.
……$ %
Empty
……% *
;
……* +
public
ÀÀ 
Guid
ÀÀ 
PostGuid
ÀÀ 
{
ÃÃ 	
get
ÕÕ 
{
ÕÕ 
return
ÕÕ 
postGuid
ÕÕ !
;
ÕÕ! "
}
ÕÕ# $
}
ŒŒ 	
public
–– 
int
–– 
PostId
–– 
{
—— 	
get
““ 
{
““ 
return
““ 
postID
““ 
;
““  
}
““! "
}
”” 	
public
’’ 
int
’’ 
ThreadSequence
’’ !
{
÷÷ 	
get
◊◊ 
{
◊◊ 
return
◊◊ 
threadSequence
◊◊ '
;
◊◊' (
}
◊◊) *
}
ÿÿ 	
public
⁄⁄ 
string
⁄⁄ 
PostSubject
⁄⁄ !
{
€€ 	
get
‹‹ 
{
‹‹ 
return
‹‹ 
postSubject
‹‹ $
;
‹‹$ %
}
‹‹& '
set
›› 
{
›› 
postSubject
›› 
=
›› 
value
››  %
;
››% &
}
››' (
}
ﬁﬁ 	
public
‡‡ 
string
‡‡ 
PostDate
‡‡ 
{
·· 	
get
‚‚ 
{
‚‚ 
return
‚‚ 
postDate
‚‚ !
;
‚‚! "
}
‚‚# $
}
„„ 	
public
ÂÂ 
bool
ÂÂ 

IsApproved
ÂÂ 
{
ÊÊ 	
get
ÁÁ 
{
ÁÁ 
return
ÁÁ 

isApproved
ÁÁ #
;
ÁÁ# $
}
ÁÁ% &
set
ËË 
{
ËË 

isApproved
ËË 
=
ËË 
value
ËË $
;
ËË$ %
}
ËË& '
}
ÈÈ 	
public
ÎÎ 
int
ÎÎ 

PostUserId
ÎÎ 
{
ÏÏ 	
get
ÌÌ 
{
ÌÌ 
return
ÌÌ 

postUserID
ÌÌ #
;
ÌÌ# $
}
ÌÌ% &
set
ÓÓ 
{
ÓÓ 

postUserID
ÓÓ 
=
ÓÓ 
value
ÓÓ $
;
ÓÓ$ %
}
ÓÓ& '
}
ÔÔ 	
public
ÒÒ 
string
ÒÒ 
PostUserName
ÒÒ "
{
ÚÚ 	
get
ÛÛ 
{
ÛÛ 
return
ÛÛ 
postUserName
ÛÛ %
;
ÛÛ% &
}
ÛÛ' (
set
ÙÙ 
{
ÙÙ 
postUserName
ÙÙ 
=
ÙÙ  
value
ÙÙ! &
;
ÙÙ& '
}
ÙÙ( )
}
ıı 	
public
˜˜ 
int
˜˜ 
PostSortOrder
˜˜  
{
¯¯ 	
get
˘˘ 
{
˘˘ 
return
˘˘ 
postSortOrder
˘˘ &
;
˘˘& '
}
˘˘( )
set
˙˙ 
{
˙˙ 
postSortOrder
˙˙ 
=
˙˙  !
value
˙˙" '
;
˙˙' (
}
˙˙) *
}
˚˚ 	
public
˝˝ 
string
˝˝ 
PostMessage
˝˝ !
{
˛˛ 	
get
ˇˇ 
{
ˇˇ 
return
ˇˇ 
postMessage
ˇˇ $
;
ˇˇ$ %
}
ˇˇ& '
set
ÄÄ 
{
ÄÄ 
postMessage
ÄÄ 
=
ÄÄ 
value
ÄÄ  %
;
ÄÄ% &
}
ÄÄ' (
}
ÅÅ 	
private
ÉÉ 
int
ÉÉ 
answerVotes
ÉÉ 
=
ÉÉ  !
$num
ÉÉ" #
;
ÉÉ# $
public
ÖÖ 
int
ÖÖ 
AnswerVotes
ÖÖ 
{
ÜÜ 	
get
áá 
{
áá 
return
áá 
answerVotes
áá $
;
áá$ %
}
áá& '
set
àà 
{
àà 
answerVotes
àà 
=
àà 
value
àà  %
;
àà% &
}
àà' (
}
ââ 	
private
ãã 
Guid
ãã 

approvedBy
ãã 
=
ãã  !
Guid
ãã" &
.
ãã& '
Empty
ãã' ,
;
ãã, -
public
çç 
Guid
çç 

ApprovedBy
çç 
{
éé 	
get
èè 
{
èè 
return
èè 

approvedBy
èè #
;
èè# $
}
èè% &
set
êê 
{
êê 

approvedBy
êê 
=
êê 
value
êê $
;
êê$ %
}
êê& '
}
ëë 	
private
ìì 
DateTime
ìì 
approvedUtc
ìì $
=
ìì% &
DateTime
ìì' /
.
ìì/ 0
MinValue
ìì0 8
;
ìì8 9
public
îî 
DateTime
îî 
ApprovedUtc
îî #
{
ïï 	
get
ññ 
{
ññ 
return
ññ 
approvedUtc
ññ $
;
ññ$ %
}
ññ& '
set
óó 
{
óó 
approvedUtc
óó 
=
óó 
value
óó  %
;
óó% &
}
óó' (
}
òò 	
private
öö 
string
öö 
userIp
öö 
=
öö 
string
öö  &
.
öö& '
Empty
öö' ,
;
öö, -
public
úú 
string
úú 
UserIp
úú 
{
ùù 	
get
ûû 
{
ûû 
return
ûû 
userIp
ûû 
;
ûû  
}
ûû! "
set
üü 
{
üü 
userIp
üü 
=
üü 
value
üü  
;
üü  !
}
üü" #
}
†† 	
public
¢¢ 
bool
¢¢ #
SubscribeUserToThread
¢¢ )
{
££ 	
get
§§ 
{
§§ 
return
§§ #
subscribeUserToThread
§§ .
;
§§. /
}
§§0 1
set
•• 
{
•• #
subscribeUserToThread
•• '
=
••( )
value
••* /
;
••/ 0
}
••1 2
}
¶¶ 	
private
ÆÆ 
void
ÆÆ 
	GetThread
ÆÆ 
(
ÆÆ 
int
ÆÆ "
threadId
ÆÆ# +
)
ÆÆ+ ,
{
ØØ 	
using
∞∞ 
(
∞∞ 
IDataReader
∞∞ 
reader
∞∞ %
=
∞∞& '
DBForums
∞∞( 0
.
∞∞0 1"
ForumThreadGetThread
∞∞1 E
(
∞∞E F
threadId
∞∞F N
)
∞∞N O
)
∞∞O P
{
±± 
if
≤≤ 
(
≤≤ 
reader
≤≤ 
.
≤≤ 
Read
≤≤ 
(
≤≤  
)
≤≤  !
)
≤≤! "
{
≥≥ 
this
µµ 
.
µµ 
threadID
µµ !
=
µµ" #
int
µµ$ '
.
µµ' (
Parse
µµ( -
(
µµ- .
reader
µµ. 4
[
µµ4 5
$str
µµ5 ?
]
µµ? @
.
µµ@ A
ToString
µµA I
(
µµI J
)
µµJ K
)
µµK L
;
µµL M
if
∂∂ 
(
∂∂ 
reader
∂∂ 
[
∂∂ 
$str
∂∂ (
]
∂∂( )
!=
∂∂* ,
DBNull
∂∂- 3
.
∂∂3 4
Value
∂∂4 9
)
∂∂9 :
{
∑∑ 
this
∏∏ 
.
∏∏ 
forumID
∏∏ $
=
∏∏% &
Convert
∏∏' .
.
∏∏. /
ToInt32
∏∏/ 6
(
∏∏6 7
reader
∏∏7 =
[
∏∏= >
$str
∏∏> G
]
∏∏G H
)
∏∏H I
;
∏∏I J
this
ππ 
.
ππ 
origForumID
ππ (
=
ππ) *
forumID
ππ+ 2
;
ππ2 3
}
∫∫ 
if
ªª 
(
ªª 
reader
ªª 
[
ªª 
$str
ªª )
]
ªª) *
!=
ªª+ -
DBNull
ªª. 4
.
ªª4 5
Value
ªª5 :
)
ªª: ;
{
ºº 
this
ΩΩ 
.
ΩΩ 
moduleID
ΩΩ %
=
ΩΩ& '
Convert
ΩΩ( /
.
ΩΩ/ 0
ToInt32
ΩΩ0 7
(
ΩΩ7 8
reader
ΩΩ8 >
[
ΩΩ> ?
$str
ΩΩ? I
]
ΩΩI J
)
ΩΩJ K
;
ΩΩK L
}
ææ 
if
øø 
(
øø 
reader
øø 
[
øø 
$str
øø +
]
øø+ ,
!=
øø- /
DBNull
øø0 6
.
øø6 7
Value
øø7 <
)
øø< =
{
¿¿ 
this
¡¡ 
.
¡¡ 

threadDate
¡¡ '
=
¡¡( )
Convert
¡¡* 1
.
¡¡1 2

ToDateTime
¡¡2 <
(
¡¡< =
reader
¡¡= C
[
¡¡C D
$str
¡¡D P
]
¡¡P Q
.
¡¡Q R
ToString
¡¡R Z
(
¡¡Z [
)
¡¡[ \
)
¡¡\ ]
;
¡¡] ^
}
¬¬ 
this
√√ 
.
√√ 
	startedBy
√√ "
=
√√# $
reader
√√% +
[
√√+ ,
$str
√√, 7
]
√√7 8
.
√√8 9
ToString
√√9 A
(
√√A B
)
√√B C
;
√√C D
if
ƒƒ 
(
ƒƒ 
reader
ƒƒ 
[
ƒƒ 
$str
ƒƒ 0
]
ƒƒ0 1
!=
ƒƒ2 4
DBNull
ƒƒ5 ;
.
ƒƒ; <
Value
ƒƒ< A
)
ƒƒA B
{
≈≈ 
this
∆∆ 
.
∆∆ 
startedByUserID
∆∆ ,
=
∆∆- .
int
∆∆/ 2
.
∆∆2 3
Parse
∆∆3 8
(
∆∆8 9
reader
∆∆9 ?
[
∆∆? @
$str
∆∆@ Q
]
∆∆Q R
.
∆∆R S
ToString
∆∆S [
(
∆∆[ \
)
∆∆\ ]
)
∆∆] ^
;
∆∆^ _
}
«« 
this
…… 
.
…… 
subject
……  
=
……! "
reader
……# )
[
……) *
$str
……* 9
]
……9 :
.
……: ;
ToString
……; C
(
……C D
)
……D E
;
……E F
if
   
(
   
reader
   
[
   
$str
   +
]
  + ,
!=
  - /
DBNull
  0 6
.
  6 7
Value
  7 <
)
  < =
{
ÀÀ 
this
ÃÃ 
.
ÃÃ 

totalViews
ÃÃ '
=
ÃÃ( )
Convert
ÃÃ* 1
.
ÃÃ1 2
ToInt32
ÃÃ2 9
(
ÃÃ9 :
reader
ÃÃ: @
[
ÃÃ@ A
$str
ÃÃA M
]
ÃÃM N
)
ÃÃN O
;
ÃÃO P
}
ÕÕ 
if
œœ 
(
œœ 
reader
œœ 
[
œœ 
$str
œœ -
]
œœ- .
!=
œœ/ 1
DBNull
œœ2 8
.
œœ8 9
Value
œœ9 >
)
œœ> ?
{
–– 
this
—— 
.
—— 
totalReplies
—— )
=
——* +
Convert
——, 3
.
——3 4
ToInt32
——4 ;
(
——; <
reader
——< B
[
——B C
$str
——C Q
]
——Q R
)
——R S
;
——S T
}
““ 
if
‘‘ 
(
‘‘ 
reader
‘‘ 
[
‘‘ 
$str
‘‘ *
]
‘‘* +
!=
‘‘, .
DBNull
‘‘/ 5
.
‘‘5 6
Value
‘‘6 ;
)
‘‘; <
{
’’ 
this
÷÷ 
.
÷÷ 
	sortOrder
÷÷ &
=
÷÷' (
Convert
÷÷) 0
.
÷÷0 1
ToInt32
÷÷1 8
(
÷÷8 9
reader
÷÷9 ?
[
÷÷? @
$str
÷÷@ K
]
÷÷K L
)
÷÷L M
;
÷÷M N
}
◊◊ 
if
ÿÿ 
(
ÿÿ 
reader
ÿÿ 
[
ÿÿ 
$str
ÿÿ .
]
ÿÿ. /
!=
ÿÿ0 2
DBNull
ÿÿ3 9
.
ÿÿ9 :
Value
ÿÿ: ?
)
ÿÿ? @
{
ŸŸ 
this
⁄⁄ 
.
⁄⁄ 
forumSequence
⁄⁄ *
=
⁄⁄+ ,
Convert
⁄⁄- 4
.
⁄⁄4 5
ToInt32
⁄⁄5 <
(
⁄⁄< =
reader
⁄⁄= C
[
⁄⁄C D
$str
⁄⁄D S
]
⁄⁄S T
)
⁄⁄T U
;
⁄⁄U V
}
€€ 
if
›› 
(
›› 
reader
›› 
[
›› 
$str
›› -
]
››- .
!=
››/ 1
DBNull
››2 8
.
››8 9
Value
››9 >
)
››> ?
{
ﬁﬁ 
this
ﬂﬂ 
.
ﬂﬂ 
postsPerPage
ﬂﬂ )
=
ﬂﬂ* +
Convert
ﬂﬂ, 3
.
ﬂﬂ3 4
ToInt32
ﬂﬂ4 ;
(
ﬂﬂ; <
reader
ﬂﬂ< B
[
ﬂﬂB C
$str
ﬂﬂC Q
]
ﬂﬂQ R
)
ﬂﬂR S
;
ﬂﬂS T
}
‡‡ 
if
‚‚ 
(
‚‚ 
this
‚‚ 
.
‚‚ 
totalReplies
‚‚ )
+
‚‚* +
$num
‚‚, -
>
‚‚. /
this
‚‚0 4
.
‚‚4 5
postsPerPage
‚‚5 A
)
‚‚A B
{
„„ 
this
‰‰ 
.
‰‰ 

totalPages
‰‰ '
=
‰‰( )
this
‰‰* .
.
‰‰. /
totalReplies
‰‰/ ;
/
‰‰< =
this
‰‰> B
.
‰‰B C
postsPerPage
‰‰C O
;
‰‰O P
int
ÂÂ 
	remainder
ÂÂ %
=
ÂÂ& '
$num
ÂÂ( )
;
ÂÂ) *
int
ÊÊ 
	pageCount
ÊÊ %
=
ÊÊ& '
Math
ÊÊ( ,
.
ÊÊ, -
DivRem
ÊÊ- 3
(
ÊÊ3 4
this
ÊÊ4 8
.
ÊÊ8 9
totalReplies
ÊÊ9 E
+
ÊÊF G
$num
ÊÊH I
,
ÊÊI J
this
ÊÊK O
.
ÊÊO P
postsPerPage
ÊÊP \
,
ÊÊ\ ]
out
ÊÊ^ a
	remainder
ÊÊb k
)
ÊÊk l
;
ÊÊl m
if
ÁÁ 
(
ÁÁ 
(
ÁÁ 
	remainder
ÁÁ &
>
ÁÁ' (
$num
ÁÁ) *
)
ÁÁ* +
||
ÁÁ, .
(
ÁÁ/ 0
	pageCount
ÁÁ0 9
>
ÁÁ: ;
this
ÁÁ< @
.
ÁÁ@ A

totalPages
ÁÁA K
)
ÁÁK L
)
ÁÁL M
{
ËË 
this
ÈÈ  
.
ÈÈ  !

totalPages
ÈÈ! +
+=
ÈÈ, .
$num
ÈÈ/ 0
;
ÈÈ0 1
}
ÍÍ 
}
ÎÎ 
else
ÏÏ 
{
ÌÌ 
this
ÓÓ 
.
ÓÓ 

totalPages
ÓÓ '
=
ÓÓ( )
$num
ÓÓ* +
;
ÓÓ+ ,
}
ÔÔ 
string
ÚÚ 
locked
ÚÚ !
=
ÚÚ" #
reader
ÚÚ$ *
[
ÚÚ* +
$str
ÚÚ+ 5
]
ÚÚ5 6
.
ÚÚ6 7
ToString
ÚÚ7 ?
(
ÚÚ? @
)
ÚÚ@ A
;
ÚÚA B
this
ÛÛ 
.
ÛÛ 
isLocked
ÛÛ !
=
ÛÛ" #
(
ÛÛ$ %
locked
ÛÛ% +
==
ÛÛ, .
$str
ÛÛ/ 5
||
ÛÛ6 8
locked
ÛÛ9 ?
==
ÛÛ@ B
$str
ÛÛC F
)
ÛÛF G
;
ÛÛG H
if
ıı 
(
ıı 
reader
ıı 
[
ıı 
$str
ıı 3
]
ıı3 4
!=
ıı5 7
DBNull
ıı8 >
.
ıı> ?
Value
ıı? D
)
ııD E
{
ˆˆ 
this
˜˜ 
.
˜˜  
mostRecentPostDate
˜˜ /
=
˜˜0 1
Convert
˜˜2 9
.
˜˜9 :

ToDateTime
˜˜: D
(
˜˜D E
reader
˜˜E K
[
˜˜K L
$str
˜˜L `
]
˜˜` a
)
˜˜a b
;
˜˜b c
}
¯¯ 
this
˙˙ 
.
˙˙  
mostRecentPostUser
˙˙ +
=
˙˙, -
reader
˙˙. 4
[
˙˙4 5
$str
˙˙5 I
]
˙˙I J
.
˙˙J K
ToString
˙˙K S
(
˙˙S T
)
˙˙T U
;
˙˙U V
if
¸¸ 
(
¸¸ 
reader
¸¸ 
[
¸¸ 
$str
¸¸ 5
]
¸¸5 6
!=
¸¸7 9
DBNull
¸¸: @
.
¸¸@ A
Value
¸¸A F
)
¸¸F G
{
˝˝ 
this
˛˛ 
.
˛˛ "
mostRecentPostUserID
˛˛ 1
=
˛˛2 3
Convert
˛˛4 ;
.
˛˛; <
ToInt32
˛˛< C
(
˛˛C D
reader
˛˛D J
[
˛˛J K
$str
˛˛K a
]
˛˛a b
)
˛˛b c
;
˛˛c d
}
ˇˇ 
if
ÅÅ 
(
ÅÅ 
reader
ÅÅ 
[
ÅÅ 
$str
ÅÅ +
]
ÅÅ+ ,
!=
ÅÅ- /
DBNull
ÅÅ0 6
.
ÅÅ6 7
Value
ÅÅ7 <
)
ÅÅ< =
{
ÇÇ 
this
ÉÉ 
.
ÉÉ 

threadGuid
ÉÉ '
=
ÉÉ( )
new
ÉÉ* -
Guid
ÉÉ. 2
(
ÉÉ2 3
reader
ÉÉ3 9
[
ÉÉ9 :
$str
ÉÉ: F
]
ÉÉF G
.
ÉÉG H
ToString
ÉÉH P
(
ÉÉP Q
)
ÉÉQ R
)
ÉÉR S
;
ÉÉS T
}
ÑÑ 
if
ÜÜ 
(
ÜÜ 
reader
ÜÜ 
[
ÜÜ 
$str
ÜÜ +
]
ÜÜ+ ,
!=
ÜÜ- /
DBNull
ÜÜ0 6
.
ÜÜ6 7
Value
ÜÜ7 <
)
ÜÜ< =
{
áá 
this
àà 
.
àà 

isQuestion
àà '
=
àà( )
Convert
àà* 1
.
àà1 2
	ToBoolean
àà2 ;
(
àà; <
reader
àà< B
[
ààB C
$str
ààC O
]
ààO P
)
ààP Q
;
ààQ R
}
ââ 
if
ãã 
(
ãã 
reader
ãã 
[
ãã 
$str
ãã 1
]
ãã1 2
!=
ãã3 5
DBNull
ãã6 <
.
ãã< =
Value
ãã= B
)
ããB C
{
åå 
this
çç 
.
çç 
includeInSiteMap
çç -
=
çç. /
Convert
çç0 7
.
çç7 8
	ToBoolean
çç8 A
(
ççA B
reader
ççB H
[
ççH I
$str
ççI [
]
çç[ \
)
çç\ ]
;
çç] ^
}
éé 
if
êê 
(
êê 
reader
êê 
[
êê 
$str
êê /
]
êê/ 0
!=
êê1 3
DBNull
êê4 :
.
êê: ;
Value
êê; @
)
êê@ A
{
ëë 
this
íí 
.
íí 
setNoIndexMeta
íí +
=
íí, -
Convert
íí. 5
.
íí5 6
	ToBoolean
íí6 ?
(
íí? @
reader
íí@ F
[
ííF G
$str
ííG W
]
ííW X
)
ííX Y
;
ííY Z
}
ìì 
this
ïï 
.
ïï 
pageTitleOverride
ïï *
=
ïï+ ,
reader
ïï- 3
[
ïï3 4
$str
ïï4 D
]
ïïD E
.
ïïE F
ToString
ïïF N
(
ïïN O
)
ïïO P
;
ïïP Q
if
óó 
(
óó 
reader
óó 
[
óó 
$str
óó *
]
óó* +
!=
óó, .
DBNull
óó/ 5
.
óó5 6
Value
óó6 ;
)
óó; <
{
òò 
this
ôô 
.
ôô 
	modStatus
ôô &
=
ôô' (
Convert
ôô) 0
.
ôô0 1
ToInt32
ôô1 8
(
ôô8 9
reader
ôô9 ?
[
ôô? @
$str
ôô@ K
]
ôôK L
)
ôôL M
;
ôôM N
}
öö 
if
úú 
(
úú 
reader
úú 
[
úú 
$str
úú +
]
úú+ ,
!=
úú- /
DBNull
úú0 6
.
úú6 7
Value
úú7 <
)
úú< =
{
ùù 
this
ûû 
.
ûû 

assignedTo
ûû '
=
ûû( )
new
ûû* -
Guid
ûû. 2
(
ûû2 3
reader
ûû3 9
[
ûû9 :
$str
ûû: F
]
ûûF G
.
ûûG H
ToString
ûûH P
(
ûûP Q
)
ûûQ R
)
ûûR S
;
ûûS T
}
üü 
if
°° 
(
°° 
reader
°° 
[
°° 
$str
°° )
]
°°) *
!=
°°+ -
DBNull
°°. 4
.
°°4 5
Value
°°5 :
)
°°: ;
{
¢¢ 
this
££ 
.
££ 
lockedBy
££ %
=
££& '
new
££( +
Guid
££, 0
(
££0 1
reader
££1 7
[
££7 8
$str
££8 B
]
££B C
.
££C D
ToString
££D L
(
££L M
)
££M N
)
££N O
;
££O P
}
§§ 
this
¶¶ 
.
¶¶ 

threadType
¶¶ #
=
¶¶$ %
reader
¶¶& ,
[
¶¶, -
$str
¶¶- 9
]
¶¶9 :
.
¶¶: ;
ToString
¶¶; C
(
¶¶C D
)
¶¶D E
;
¶¶E F
this
®® 
.
®® 
LockedReason
®® %
=
®®& '
reader
®®( .
[
®®. /
$str
®®/ =
]
®®= >
.
®®> ?
ToString
®®? G
(
®®G H
)
®®H I
;
®®I J
if
™™ 
(
™™ 
reader
™™ 
[
™™ 
$str
™™ *
]
™™* +
!=
™™, .
DBNull
™™/ 5
.
™™5 6
Value
™™6 ;
)
™™; <
{
´´ 
this
¨¨ 
.
¨¨ 
	lockedUtc
¨¨ &
=
¨¨' (
Convert
¨¨) 0
.
¨¨0 1

ToDateTime
¨¨1 ;
(
¨¨; <
reader
¨¨< B
[
¨¨B C
$str
¨¨C N
]
¨¨N O
)
¨¨O P
;
¨¨P Q
}
≠≠ 
}
¥¥ 
}
∂∂ 
}
ππ 	
private
ªª 
void
ªª 
GetPost
ªª 
(
ªª 
int
ªª  
postId
ªª! '
)
ªª' (
{
ºº 	
using
ΩΩ 
(
ΩΩ 
IDataReader
ΩΩ 
reader
ΩΩ %
=
ΩΩ& '
DBForums
ΩΩ( 0
.
ΩΩ0 1 
ForumThreadGetPost
ΩΩ1 C
(
ΩΩC D
postId
ΩΩD J
)
ΩΩJ K
)
ΩΩK L
{
ææ 
if
øø 
(
øø 
reader
øø 
.
øø 
Read
øø 
(
øø  
)
øø  !
)
øø! "
{
¿¿ 
this
¡¡ 
.
¡¡ 
postID
¡¡ 
=
¡¡  !
Convert
¡¡" )
.
¡¡) *
ToInt32
¡¡* 1
(
¡¡1 2
reader
¡¡2 8
[
¡¡8 9
$str
¡¡9 A
]
¡¡A B
)
¡¡B C
;
¡¡C D
this
¬¬ 
.
¬¬ 

postUserID
¬¬ #
=
¬¬$ %
Convert
¬¬& -
.
¬¬- .
ToInt32
¬¬. 5
(
¬¬5 6
reader
¬¬6 <
[
¬¬< =
$str
¬¬= E
]
¬¬E F
)
¬¬F G
;
¬¬G H
this
√√ 
.
√√ 
postSubject
√√ $
=
√√% &
reader
√√' -
[
√√- .
$str
√√. 7
]
√√7 8
.
√√8 9
ToString
√√9 A
(
√√A B
)
√√B C
;
√√C D
this
ƒƒ 
.
ƒƒ 
postMessage
ƒƒ $
=
ƒƒ% &
reader
ƒƒ' -
[
ƒƒ- .
$str
ƒƒ. 4
]
ƒƒ4 5
.
ƒƒ5 6
ToString
ƒƒ6 >
(
ƒƒ> ?
)
ƒƒ? @
;
ƒƒ@ A
this
«« 
.
«« 

isApproved
«« #
=
««$ %
Convert
««& -
.
««- .
	ToBoolean
««. 7
(
««7 8
reader
««8 >
[
««> ?
$str
««? I
]
««I J
)
««J K
;
««K L
this
»» 
.
»» 
postSortOrder
»» &
=
»»' (
Convert
»») 0
.
»»0 1
ToInt32
»»1 8
(
»»8 9
reader
»»9 ?
[
»»? @
$str
»»@ K
]
»»K L
)
»»L M
;
»»M N
currentPostDate
…… #
=
……$ %
Convert
……& -
.
……- .

ToDateTime
……. 8
(
……8 9
reader
……9 ?
[
……? @
$str
……@ J
]
……J K
)
……K L
;
……L M
if
ÀÀ 
(
ÀÀ 
reader
ÀÀ 
[
ÀÀ 
$str
ÀÀ )
]
ÀÀ) *
!=
ÀÀ+ -
DBNull
ÀÀ. 4
.
ÀÀ4 5
Value
ÀÀ5 :
)
ÀÀ: ;
{
ÃÃ 
this
ÕÕ 
.
ÕÕ 
postGuid
ÕÕ %
=
ÕÕ& '
new
ÕÕ( +
Guid
ÕÕ, 0
(
ÕÕ0 1
reader
ÕÕ1 7
[
ÕÕ7 8
$str
ÕÕ8 B
]
ÕÕB C
.
ÕÕC D
ToString
ÕÕD L
(
ÕÕL M
)
ÕÕM N
)
ÕÕN O
;
ÕÕO P
}
ŒŒ 
if
–– 
(
–– 
reader
–– 
[
–– 
$str
–– ,
]
––, -
!=
––. 0
DBNull
––1 7
.
––7 8
Value
––8 =
)
––= >
{
—— 
this
““ 
.
““ 
answerVotes
““ (
=
““) *
Convert
““+ 2
.
““2 3
ToInt32
““3 :
(
““: ;
reader
““; A
[
““A B
$str
““B O
]
““O P
)
““P Q
;
““Q R
}
”” 
if
’’ 
(
’’ 
reader
’’ 
[
’’ 
$str
’’ +
]
’’+ ,
!=
’’- /
DBNull
’’0 6
.
’’6 7
Value
’’7 <
)
’’< =
{
÷÷ 
this
◊◊ 
.
◊◊ 

approvedBy
◊◊ '
=
◊◊( )
new
◊◊* -
Guid
◊◊. 2
(
◊◊2 3
reader
◊◊3 9
[
◊◊9 :
$str
◊◊: F
]
◊◊F G
.
◊◊G H
ToString
◊◊H P
(
◊◊P Q
)
◊◊Q R
)
◊◊R S
;
◊◊S T
}
ÿÿ 
if
⁄⁄ 
(
⁄⁄ 
reader
⁄⁄ 
[
⁄⁄ 
$str
⁄⁄ ,
]
⁄⁄, -
!=
⁄⁄. 0
DBNull
⁄⁄1 7
.
⁄⁄7 8
Value
⁄⁄8 =
)
⁄⁄= >
{
€€ 
this
‹‹ 
.
‹‹ 
approvedUtc
‹‹ (
=
‹‹) *
Convert
‹‹+ 2
.
‹‹2 3

ToDateTime
‹‹3 =
(
‹‹= >
reader
‹‹> D
[
‹‹D E
$str
‹‹E R
]
‹‹R S
)
‹‹S T
;
‹‹T U
}
›› 
this
ﬂﬂ 
.
ﬂﬂ 
userIp
ﬂﬂ 
=
ﬂﬂ  !
reader
ﬂﬂ" (
[
ﬂﬂ( )
$str
ﬂﬂ) 1
]
ﬂﬂ1 2
.
ﬂﬂ2 3
ToString
ﬂﬂ3 ;
(
ﬂﬂ; <
)
ﬂﬂ< =
;
ﬂﬂ= >
notificationSent
·· $
=
··% &
Convert
··' .
.
··. /
	ToBoolean
··/ 8
(
··8 9
reader
··9 ?
[
··? @
$str
··@ R
]
··R S
)
··S T
;
··T U
postModStatus
‚‚ !
=
‚‚" #
Convert
‚‚$ +
.
‚‚+ ,
ToInt32
‚‚, 3
(
‚‚3 4
reader
‚‚4 :
[
‚‚: ;
$str
‚‚; F
]
‚‚F G
)
‚‚G H
;
‚‚H I
}
ÊÊ 
}
ËË 
}
ÍÍ 	
private
ÌÌ 
bool
ÌÌ 
CreateThread
ÌÌ !
(
ÌÌ! "
)
ÌÌ" #
{
ÓÓ 	
int
ÔÔ 
newID
ÔÔ 
=
ÔÔ 
-
ÔÔ 
$num
ÔÔ 
;
ÔÔ 
if
ÒÒ 
(
ÒÒ 

threadGuid
ÒÒ 
==
ÒÒ 
Guid
ÒÒ "
.
ÒÒ" #
Empty
ÒÒ# (
)
ÒÒ( )
{
ÒÒ* +

threadGuid
ÒÒ, 6
=
ÒÒ7 8
Guid
ÒÒ9 =
.
ÒÒ= >
NewGuid
ÒÒ> E
(
ÒÒE F
)
ÒÒF G
;
ÒÒG H
}
ÒÒI J
newID
ÛÛ 
=
ÛÛ 
DBForums
ÛÛ 
.
ÛÛ 
ForumThreadCreate
ÛÛ .
(
ÛÛ. /
this
ÙÙ 
.
ÙÙ 
forumID
ÙÙ 
,
ÙÙ 
this
ıı 
.
ıı 
postSubject
ıı  
,
ıı  !
this
ˆˆ 
.
ˆˆ 
	sortOrder
ˆˆ 
,
ˆˆ 
this
˜˜ 
.
˜˜ 
isLocked
˜˜ 
,
˜˜ 
this
¯¯ 
.
¯¯ 

postUserID
¯¯ 
,
¯¯  
DateTime
˘˘ 
.
˘˘ 
UtcNow
˘˘ 
,
˘˘  
this
˙˙ 
.
˙˙ 

threadGuid
˙˙ 
,
˙˙  
this
˚˚ 
.
˚˚ 

isQuestion
˚˚ 
,
˚˚  
this
¸¸ 
.
¸¸ 
includeInSiteMap
¸¸ %
,
¸¸% &
this
˝˝ 
.
˝˝ 
setNoIndexMeta
˝˝ #
,
˝˝# $
this
˛˛ 
.
˛˛ 
pageTitleOverride
˛˛ &
,
˛˛& '
this
ˇˇ 
.
ˇˇ 
	modStatus
ˇˇ 
,
ˇˇ 
this
ÄÄ 
.
ÄÄ 

threadType
ÄÄ 
)
ÄÄ  
;
ÄÄ  !
this
ÉÉ 
.
ÉÉ 
threadID
ÉÉ 
=
ÉÉ 
newID
ÉÉ !
;
ÉÉ! "
Forum
ÑÑ 
.
ÑÑ "
IncrementThreadCount
ÑÑ &
(
ÑÑ& '
this
ÑÑ' +
.
ÑÑ+ ,
forumID
ÑÑ, 3
)
ÑÑ3 4
;
ÑÑ4 5
return
ÜÜ 
(
ÜÜ 
newID
ÜÜ 
>
ÜÜ 
-
ÜÜ 
$num
ÜÜ 
)
ÜÜ 
;
ÜÜ  
}
àà 	
private
ää 
bool
ää 

CreatePost
ää 
(
ää  
)
ää  !
{
ãã 	
int
åå 
newID
åå 
=
åå 
-
åå 
$num
åå 
;
åå 
bool
çç 
approved
çç 
=
çç 
false
çç !
;
çç! "
if
éé 
(
éé 
(
èè "
ConfigurationManager
èè %
.
èè% &
AppSettings
èè& 1
[
èè1 2
$str
èè2 J
]
èèJ K
!=
èèL N
null
èèO S
)
èèS T
&&
êê 
(
êê 
string
êê 
.
êê 
Equals
êê !
(
êê! ""
ConfigurationManager
êê" 6
.
êê6 7
AppSettings
êê7 B
[
êêB C
$str
êêC [
]
êê[ \
,
êê\ ]
$str
êê^ d
,
êêd e
StringComparison
êêf v
.
êêv w)
InvariantCultureIgnoreCaseêêw ë
)êêë í
)êêí ì
)
ëë 
{
íí 
approved
ìì 
=
ìì 
true
ìì 
;
ìì  
}
îî 
this
ññ 
.
ññ  
mostRecentPostDate
ññ #
=
ññ$ %
DateTime
ññ& .
.
ññ. /
UtcNow
ññ/ 5
;
ññ5 6
if
òò 
(
òò 
postGuid
òò 
==
òò 
Guid
òò  
.
òò  !
Empty
òò! &
)
òò& '
{
òò( )
postGuid
òò* 2
=
òò3 4
Guid
òò5 9
.
òò9 :
NewGuid
òò: A
(
òòA B
)
òòB C
;
òòC D
}
òòE F
newID
öö 
=
öö 
DBForums
öö 
.
öö 
ForumPostCreate
öö ,
(
öö, -
this
õõ 
.
õõ 
threadID
õõ 
,
õõ 
this
úú 
.
úú 
postSubject
úú  
,
úú  !
this
ùù 
.
ùù 
postMessage
ùù  
,
ùù  !
approved
ûû 
,
ûû 
this
üü 
.
üü 

PostUserId
üü 
,
üü  
this
†† 
.
††  
mostRecentPostDate
†† '
,
††' (
this
°° 
.
°° 
postGuid
°° 
,
°° 
this
¢¢ 
.
¢¢ 

approvedBy
¢¢ 
,
¢¢  
this
££ 
.
££ 
approvedUtc
££  
,
££  !
this
§§ 
.
§§ 
userIp
§§ 
,
§§ 
this
•• 
.
•• 
notificationSent
•• %
,
••% &
this
¶¶ 
.
¶¶ 
postModStatus
¶¶ "
)
¶¶" #
;
¶¶# $
this
®® 
.
®® 
postID
®® 
=
®® 
newID
®® 
;
®®  
Forum
©© 
.
©©  
IncrementPostCount
©© $
(
©©$ %
this
©©% )
.
©©) *
forumID
©©* 1
,
©©1 2
this
©©3 7
.
©©7 8

postUserID
©©8 B
,
©©B C
this
©©D H
.
©©H I 
mostRecentPostDate
©©I [
)
©©[ \
;
©©\ ]
SiteUser
™™ 
.
™™ !
IncrementTotalPosts
™™ (
(
™™( )
this
™™) -
.
™™- .

postUserID
™™. 8
)
™™8 9
;
™™9 :
bool
≠≠ 
result
≠≠ 
=
≠≠ 
(
≠≠ 
newID
≠≠  
>
≠≠! "
-
≠≠# $
$num
≠≠$ %
)
≠≠% &
;
≠≠& '
return
µµ 
result
µµ 
;
µµ 
}
∑∑ 	
public
ππ 
bool
ππ 

UpdatePost
ππ 
(
ππ 
)
ππ  
{
∫∫ 	
bool
ªª 
result
ªª 
=
ªª 
false
ªª 
;
ªª  
result
ΩΩ 
=
ΩΩ 
DBForums
ΩΩ 
.
ΩΩ 
ForumPostUpdate
ΩΩ -
(
ΩΩ- .
this
ææ 
.
ææ 
postID
ææ 
,
ææ 
this
øø 
.
øø 
postSubject
øø  
,
øø  !
this
¿¿ 
.
¿¿ 
postMessage
¿¿  
,
¿¿  !
this
¡¡ 
.
¡¡ 
postSortOrder
¡¡ "
,
¡¡" #
this
¬¬ 
.
¬¬ 

isApproved
¬¬ 
,
¬¬  
this
√√ 
.
√√ 

approvedBy
√√ 
,
√√  
this
ƒƒ 
.
ƒƒ 
approvedUtc
ƒƒ  
,
ƒƒ  !
this
≈≈ 
.
≈≈ 
notificationSent
≈≈ %
,
≈≈% &
this
∆∆ 
.
∆∆ 
postModStatus
∆∆ "
)
∆∆" #
;
∆∆# $
return
œœ 
result
œœ 
;
œœ 
}
—— 	
private
’’ 
bool
’’ !
IncrementReplyStats
’’ (
(
’’( )
)
’’) *
{
÷÷ 	
return
◊◊ 
DBForums
◊◊ 
.
◊◊ ,
ForumThreadIncrementReplyStats
◊◊ :
(
◊◊: ;
this
ÿÿ 
.
ÿÿ 
threadID
ÿÿ 
,
ÿÿ 
this
ŸŸ 
.
ŸŸ 

postUserID
ŸŸ 
,
ŸŸ  
this
⁄⁄ 
.
⁄⁄  
mostRecentPostDate
⁄⁄ '
)
⁄⁄' (
;
⁄⁄( )
}
‹‹ 	
private
ﬁﬁ 
void
ﬁﬁ "
ResetThreadSequences
ﬁﬁ )
(
ﬁﬁ) *
)
ﬁﬁ* +
{
ﬂﬂ 	
	DataTable
‡‡ 
	dataTable
‡‡ 
=
‡‡  !
new
‡‡" %
	DataTable
‡‡& /
(
‡‡/ 0
)
‡‡0 1
;
‡‡1 2
	dataTable
·· 
.
·· 
Columns
·· 
.
·· 
Add
·· !
(
··! "
$str
··" *
,
··* +
typeof
··, 2
(
··2 3
int
··3 6
)
··6 7
)
··7 8
;
··8 9
using
„„ 
(
„„ 
IDataReader
„„ 
reader
„„ %
=
„„& '
DBForums
„„( 0
.
„„0 1!
ForumThreadGetPosts
„„1 D
(
„„D E
this
„„E I
.
„„I J
threadID
„„J R
)
„„R S
)
„„S T
{
‰‰ 
while
ÂÂ 
(
ÂÂ 
reader
ÂÂ 
.
ÂÂ 
Read
ÂÂ "
(
ÂÂ" #
)
ÂÂ# $
)
ÂÂ$ %
{
ÊÊ 
DataRow
ÁÁ 
row
ÁÁ 
=
ÁÁ  !
	dataTable
ÁÁ" +
.
ÁÁ+ ,
NewRow
ÁÁ, 2
(
ÁÁ2 3
)
ÁÁ3 4
;
ÁÁ4 5
row
ËË 
[
ËË 
$str
ËË  
]
ËË  !
=
ËË" #
reader
ËË$ *
[
ËË* +
$str
ËË+ 3
]
ËË3 4
;
ËË4 5
	dataTable
ÈÈ 
.
ÈÈ 
Rows
ÈÈ "
.
ÈÈ" #
Add
ÈÈ# &
(
ÈÈ& '
row
ÈÈ' *
)
ÈÈ* +
;
ÈÈ+ ,
}
ÍÍ 
}
ÏÏ 
int
ÓÓ 
sequence
ÓÓ 
=
ÓÓ 
$num
ÓÓ 
;
ÓÓ 
foreach
ÔÔ 
(
ÔÔ 
DataRow
ÔÔ 
row
ÔÔ  
in
ÔÔ! #
	dataTable
ÔÔ$ -
.
ÔÔ- .
Rows
ÔÔ. 2
)
ÔÔ2 3
{
 
DBForums
ÒÒ 
.
ÒÒ +
ForumPostUpdateThreadSequence
ÒÒ 6
(
ÒÒ6 7
Convert
ÚÚ 
.
ÚÚ 
ToInt32
ÚÚ #
(
ÚÚ# $
row
ÚÚ$ '
[
ÚÚ' (
$str
ÚÚ( 0
]
ÚÚ0 1
)
ÚÚ1 2
,
ÚÚ2 3
sequence
ÛÛ 
)
ÛÛ 
;
ÛÛ 
sequence
ÙÙ 
+=
ÙÙ 
$num
ÙÙ 
;
ÙÙ 
}
ıı 
}
˜˜ 	
public
ˇˇ 
int
ˇˇ 
Post
ˇˇ 
(
ˇˇ 
)
ˇˇ 
{
ÄÄ 	
bool
ÅÅ 
	newThread
ÅÅ 
=
ÅÅ 
(
ÅÅ 
this
ÅÅ "
.
ÅÅ" #
threadID
ÅÅ# +
<
ÅÅ, -
$num
ÅÅ. /
)
ÅÅ/ 0
;
ÅÅ0 1
if
ÇÇ 
(
ÇÇ 
	newThread
ÇÇ 
)
ÇÇ 
{
ÉÉ 
this
ÑÑ 
.
ÑÑ 
CreateThread
ÑÑ !
(
ÑÑ! "
)
ÑÑ" #
;
ÑÑ# $
}
ÖÖ 
if
áá 
(
áá 
this
áá 
.
áá 
postID
áá 
>
áá 
-
áá 
$num
áá  
)
áá  !
{
àà 
this
ââ 
.
ââ 

UpdatePost
ââ 
(
ââ  
)
ââ  !
;
ââ! "
}
ää 
else
ãã 
{
åå 
this
çç 
.
çç 

CreatePost
çç 
(
çç  
)
çç  !
;
çç! "
if
éé 
(
éé 
!
éé 
	newThread
éé 
)
éé 
{
èè 
this
êê 
.
êê !
IncrementReplyStats
êê ,
(
êê, -
)
êê- .
;
êê. /
}
ëë 
}
ìì 
if
ïï 
(
ïï 
this
ïï 
.
ïï #
subscribeUserToThread
ïï *
)
ïï* +
{
ññ 
if
óó 
(
óó 
!
óó 
DBForums
óó 
.
óó %
ForumSubscriptionExists
óó 5
(
óó5 6
this
óó6 :
.
óó: ;
forumID
óó; B
,
óóB C
this
óóD H
.
óóH I

postUserID
óóI S
)
óóS T
)
óóT U
{
òò 
DBForums
ôô 
.
ôô &
ForumThreadAddSubscriber
ôô 5
(
ôô5 6
this
ôô6 :
.
ôô: ;
threadID
ôô; C
,
ôôC D
this
ôôE I
.
ôôI J

postUserID
ôôJ T
,
ôôT U
Guid
ôôV Z
.
ôôZ [
NewGuid
ôô[ b
(
ôôb c
)
ôôc d
)
ôôd e
;
ôôe f
}
öö 
}
úú 
if
ûû 
(
ûû 
this
ûû 
.
ûû 
postID
ûû 
>
ûû 
-
ûû 
$num
ûû  
)
ûû  !
{
üü %
ContentChangedEventArgs
†† '
e
††( )
=
††* +
new
††, /%
ContentChangedEventArgs
††0 G
(
††G H
)
††H I
;
††I J
OnContentChanged
°°  
(
°°  !
e
°°! "
)
°°" #
;
°°# $
}
¢¢ 
return
•• 
this
•• 
.
•• 
postID
•• 
;
•• 
}
ßß 	
public
©© 
bool
©© 

DeletePost
©© 
(
©© 
int
©© "
postId
©©# )
)
©©) *
{
™™ 	
bool
´´ 
deleted
´´ 
=
´´ 
DBForums
´´ #
.
´´# $
ForumPostDelete
´´$ 3
(
´´3 4
postId
´´4 :
)
´´: ;
;
´´; <
if
¨¨ 
(
¨¨ 
deleted
¨¨ 
)
¨¨ 
{
≠≠ 
Forum
ÆÆ 
.
ÆÆ  
DecrementPostCount
ÆÆ (
(
ÆÆ( )
this
ÆÆ) -
.
ÆÆ- .
forumID
ÆÆ. 5
)
ÆÆ5 6
;
ÆÆ6 7
if
ØØ 
(
ØØ 
this
ØØ 
.
ØØ 
totalReplies
ØØ %
>
ØØ& '
$num
ØØ( )
)
ØØ) *
{
∞∞ 
DBForums
±± 
.
±± ,
ForumThreadDecrementReplyStats
±± ;
(
±±; <
this
±±< @
.
±±@ A
threadID
±±A I
)
±±I J
;
±±J K
}
≤≤ 
Forum
≥≥ 
forum
≥≥ 
=
≥≥ 
new
≥≥ !
Forum
≥≥" '
(
≥≥' (
this
≥≥( ,
.
≥≥, -
forumID
≥≥- 4
)
≥≥4 5
;
≥≥5 6
this
µµ 
.
µµ 
moduleID
µµ 
=
µµ 
forum
µµ  %
.
µµ% &
ModuleId
µµ& .
;
µµ. /
this
∂∂ 
.
∂∂ 
postID
∂∂ 
=
∂∂ 
postId
∂∂ $
;
∂∂$ %%
ContentChangedEventArgs
∏∏ '
e
∏∏( )
=
∏∏* +
new
∏∏, /%
ContentChangedEventArgs
∏∏0 G
(
∏∏G H
)
∏∏H I
;
∏∏I J
e
ππ 
.
ππ 
	IsDeleted
ππ 
=
ππ 
true
ππ "
;
ππ" #
OnContentChanged
∫∫  
(
∫∫  !
e
∫∫! "
)
∫∫" #
;
∫∫# $
int
ºº 
threadPostCount
ºº #
=
ºº$ %
ForumThread
ºº& 1
.
ºº1 2
GetPostCount
ºº2 >
(
ºº> ?
this
ºº? C
.
ººC D
threadID
ººD L
)
ººL M
;
ººM N
if
ΩΩ 
(
ΩΩ 
threadPostCount
ΩΩ #
==
ΩΩ$ &
$num
ΩΩ' (
)
ΩΩ( )
{
ææ 
ForumThread
øø 
.
øø  
Delete
øø  &
(
øø& '
this
øø' +
.
øø+ ,
threadID
øø, 4
)
øø4 5
;
øø5 6
Forum
¿¿ 
.
¿¿ "
DecrementThreadCount
¿¿ .
(
¿¿. /
this
¿¿/ 3
.
¿¿3 4
forumID
¿¿4 ;
)
¿¿; <
;
¿¿< =
}
¬¬ "
ResetThreadSequences
ƒƒ $
(
ƒƒ$ %
)
ƒƒ% &
;
ƒƒ& '
}
≈≈ 
return
»» 
deleted
»» 
;
»» 
}
…… 	
public
ÕÕ 
bool
ÕÕ #
UpdateThreadViewStats
ÕÕ )
(
ÕÕ) *
)
ÕÕ* +
{
ŒŒ 	
return
œœ 
DBForums
œœ 
.
œœ (
ForumThreadUpdateViewStats
œœ 6
(
œœ6 7
this
œœ7 ;
.
œœ; <
threadID
œœ< D
)
œœD E
;
œœE F
}
““ 	
public
‘‘ 
IDataReader
‘‘ 
GetPosts
‘‘ #
(
‘‘# $
int
‘‘$ '

pageNumber
‘‘( 2
)
‘‘2 3
{
’’ 	
return
÷÷ 
DBForums
÷÷ 
.
÷÷ !
ForumThreadGetPosts
÷÷ /
(
÷÷/ 0
this
÷÷0 4
.
÷÷4 5
threadID
÷÷5 =
,
÷÷= >

pageNumber
÷÷? I
)
÷÷I J
;
÷÷J K
}
◊◊ 	
public
ŸŸ 
IDataReader
ŸŸ 
GetPosts
ŸŸ #
(
ŸŸ# $
)
ŸŸ$ %
{
⁄⁄ 	
return
€€ 
DBForums
€€ 
.
€€ !
ForumThreadGetPosts
€€ /
(
€€/ 0
this
€€0 4
.
€€4 5
threadID
€€5 =
)
€€= >
;
€€> ?
}
‹‹ 	
public
ﬁﬁ 
	DataTable
ﬁﬁ 
GetPostIdList
ﬁﬁ &
(
ﬁﬁ& '
)
ﬁﬁ' (
{
ﬂﬂ 	
	DataTable
‡‡ 
	dataTable
‡‡ 
=
‡‡  !
new
‡‡" %
	DataTable
‡‡& /
(
‡‡/ 0
)
‡‡0 1
;
‡‡1 2
	dataTable
·· 
.
·· 
Columns
·· 
.
·· 
Add
·· !
(
··! "
$str
··" *
,
··* +
typeof
··, 2
(
··2 3
int
··3 6
)
··6 7
)
··7 8
;
··8 9
using
„„ 
(
„„ 
IDataReader
„„ 
reader
„„ %
=
„„& '
DBForums
„„( 0
.
„„0 1!
ForumThreadGetPosts
„„1 D
(
„„D E
this
„„E I
.
„„I J
threadID
„„J R
)
„„R S
)
„„S T
{
‰‰ 
while
ÂÂ 
(
ÂÂ 
reader
ÂÂ 
.
ÂÂ 
Read
ÂÂ "
(
ÂÂ" #
)
ÂÂ# $
)
ÂÂ$ %
{
ÊÊ 
DataRow
ÁÁ 
row
ÁÁ 
=
ÁÁ  !
	dataTable
ÁÁ" +
.
ÁÁ+ ,
NewRow
ÁÁ, 2
(
ÁÁ2 3
)
ÁÁ3 4
;
ÁÁ4 5
row
ËË 
[
ËË 
$str
ËË  
]
ËË  !
=
ËË" #
reader
ËË$ *
[
ËË* +
$str
ËË+ 3
]
ËË3 4
;
ËË4 5
	dataTable
ÈÈ 
.
ÈÈ 
Rows
ÈÈ "
.
ÈÈ" #
Add
ÈÈ# &
(
ÈÈ& '
row
ÈÈ' *
)
ÈÈ* +
;
ÈÈ+ ,
}
ÎÎ 
}
ÏÏ 
return
ÓÓ 
	dataTable
ÓÓ 
;
ÓÓ 
}
 	
public
ÚÚ 
IDataReader
ÚÚ #
GetPostsReverseSorted
ÚÚ 0
(
ÚÚ0 1
)
ÚÚ1 2
{
ÛÛ 	
return
ÙÙ 
DBForums
ÙÙ 
.
ÙÙ .
 ForumThreadGetPostsReverseSorted
ÙÙ <
(
ÙÙ< =
this
ÙÙ= A
.
ÙÙA B
threadID
ÙÙB J
)
ÙÙJ K
;
ÙÙK L
}
ıı 	
public
¯¯ 
DataSet
¯¯ "
GetThreadSubscribers
¯¯ +
(
¯¯+ ,
bool
¯¯, 0 
includeCurrentUser
¯¯1 C
)
¯¯C D
{
˘˘ 	
return
˙˙ 
DBForums
˙˙ 
.
˙˙ '
ForumThreadGetSubscribers
˙˙ 5
(
˙˙5 6
this
˙˙6 :
.
˙˙: ;
forumID
˙˙; B
,
˙˙B C
this
˙˙D H
.
˙˙H I
threadID
˙˙I Q
,
˙˙Q R
this
˙˙S W
.
˙˙W X

postUserID
˙˙X b
,
˙˙b c 
includeCurrentUser
˙˙d v
)
˙˙v w
;
˙˙w x
}
˚˚ 	
public
˝˝ 
bool
˝˝ 
UpdateThread
˝˝  
(
˝˝  !
)
˝˝! "
{
˛˛ 	
bool
ˇˇ 
result
ˇˇ 
=
ˇˇ 
false
ˇˇ 
;
ˇˇ  
result
ÅÅ 
=
ÅÅ 
DBForums
ÅÅ 
.
ÅÅ 
ForumThreadUpdate
ÅÅ /
(
ÅÅ/ 0
this
ÇÇ 
.
ÇÇ 
threadID
ÇÇ 
,
ÇÇ 
this
ÉÉ 
.
ÉÉ 
forumID
ÉÉ 
,
ÉÉ 
this
ÑÑ 
.
ÑÑ 
subject
ÑÑ 
,
ÑÑ 
this
ÖÖ 
.
ÖÖ 
	sortOrder
ÖÖ 
,
ÖÖ 
this
ÜÜ 
.
ÜÜ 
isLocked
ÜÜ 
,
ÜÜ 
this
áá 
.
áá 

isQuestion
áá 
,
áá  
this
àà 
.
àà 
includeInSiteMap
àà %
,
àà% &
this
ââ 
.
ââ 
setNoIndexMeta
ââ #
,
ââ# $
this
ää 
.
ää 
pageTitleOverride
ää &
,
ää& '
this
ãã 
.
ãã 
	modStatus
ãã 
,
ãã 
this
åå 
.
åå 

threadType
åå 
,
åå  
this
çç 
.
çç 

assignedTo
çç 
,
çç  
this
éé 
.
éé 
lockedBy
éé 
,
éé 
this
èè 
.
èè 
lockedReason
èè !
,
èè! "
this
êê 
.
êê 
	lockedUtc
êê 
)
êê 
;
êê  
if
íí 
(
íí 
this
íí 
.
íí 
forumID
íí 
!=
íí 
this
íí  $
.
íí$ %
origForumID
íí% 0
)
íí0 1
{
ìì 
Forum
ïï 
.
ïï "
DecrementThreadCount
ïï *
(
ïï* +
this
ïï+ /
.
ïï/ 0
origForumID
ïï0 ;
)
ïï; <
;
ïï< =
Forum
ññ 
.
ññ "
IncrementThreadCount
ññ *
(
ññ* +
this
ññ+ /
.
ññ/ 0
forumID
ññ0 7
)
ññ7 8
;
ññ8 9"
ForumThreadMovedArgs
òò $
e
òò% &
=
òò' (
new
òò) ,"
ForumThreadMovedArgs
òò- A
(
òòA B
)
òòB C
;
òòC D
e
ôô 
.
ôô 
ForumId
ôô 
=
ôô 
forumID
ôô #
;
ôô# $
e
öö 
.
öö 
OriginalForumId
öö !
=
öö" #
origForumID
öö$ /
;
öö/ 0
OnThreadMoved
õõ 
(
õõ 
e
õõ 
)
õõ  
;
õõ  !
Forum
ûû 
.
ûû "
RecalculatePostStats
ûû *
(
ûû* +
this
ûû+ /
.
ûû/ 0
origForumID
ûû0 ;
)
ûû; <
;
ûû< =
Forum
üü 
.
üü "
RecalculatePostStats
üü *
(
üü* +
this
üü+ /
.
üü/ 0
forumID
üü0 7
)
üü7 8
;
üü8 9
}
†† 
return
¢¢ 
result
¢¢ 
;
¢¢ 
}
££ 	
public
≠≠ 
static
≠≠ 
bool
≠≠ 
Unsubscribe
≠≠ &
(
≠≠& '
int
≠≠' *
threadId
≠≠+ 3
,
≠≠3 4
int
≠≠5 8
userId
≠≠9 ?
)
≠≠? @
{
ÆÆ 	
return
ØØ 
DBForums
ØØ 
.
ØØ $
ForumThreadUNSubscribe
ØØ 2
(
ØØ2 3
threadId
ØØ3 ;
,
ØØ; <
userId
ØØ= C
)
ØØC D
;
ØØD E
}
∞∞ 	
public
≤≤ 
static
≤≤ 
bool
≤≤ 
UnsubscribeAll
≤≤ )
(
≤≤) *
int
≤≤* -
userId
≤≤. 4
)
≤≤4 5
{
≥≥ 	
return
¥¥ 
DBForums
¥¥ 
.
¥¥ '
ForumThreadUnsubscribeAll
¥¥ 5
(
¥¥5 6
userId
¥¥6 <
)
¥¥< =
;
¥¥= >
}
µµ 	
public
∑∑ 
static
∑∑ 
bool
∑∑ 
Unsubscribe
∑∑ &
(
∑∑& '
Guid
∑∑' +
subGuid
∑∑, 3
)
∑∑3 4
{
∏∏ 	
return
ππ 
DBForums
ππ 
.
ππ $
ForumThreadUnSubscribe
ππ 2
(
ππ2 3
subGuid
ππ3 :
)
ππ: ;
;
ππ; <
}
∫∫ 	
public
ºº 
static
ºº 
bool
ºº 
UnsubscribeAll
ºº )
(
ºº) *
Guid
ºº* .
subGuid
ºº/ 6
)
ºº6 7
{
ΩΩ 	
int
ææ 
userId
ææ 
=
ææ &
GetUserIdForSubscription
ææ 1
(
ææ1 2
subGuid
ææ2 9
)
ææ9 :
;
ææ: ;
return
øø 
DBForums
øø 
.
øø '
ForumThreadUnsubscribeAll
øø 5
(
øø5 6
userId
øø6 <
)
øø< =
;
øø= >
}
¿¿ 	
public
¬¬ 
static
¬¬ 
int
¬¬ &
GetUserIdForSubscription
¬¬ 2
(
¬¬2 3
Guid
¬¬3 7
subGuid
¬¬8 ?
)
¬¬? @
{
√√ 	
int
ƒƒ 
userId
ƒƒ 
=
ƒƒ 
-
ƒƒ 
$num
ƒƒ 
;
ƒƒ 
using
∆∆ 
(
∆∆ 
IDataReader
∆∆ 
reader
∆∆ %
=
∆∆& '
DBForums
∆∆( 0
.
∆∆0 1&
ForumThreadGetSubscriber
∆∆1 I
(
∆∆I J
subGuid
∆∆J Q
)
∆∆Q R
)
∆∆R S
{
«« 
if
»» 
(
»» 
reader
»» 
.
»» 
Read
»» 
(
»»  
)
»»  !
)
»»! "
{
…… 
userId
   
=
   
Convert
   $
.
  $ %
ToInt32
  % ,
(
  , -
reader
  - 3
[
  3 4
$str
  4 <
]
  < =
)
  = >
;
  > ?
}
ÀÀ 
}
ÃÃ 
return
œœ 
userId
œœ 
;
œœ 
}
—— 	
public
”” 
static
”” 
bool
”” 
Delete
”” !
(
””! "
int
””" %
threadId
””& .
)
””. /
{
‘‘ 	
bool
’’ 
status
’’ 
=
’’ 
false
’’ 
;
’’  
ForumThread
◊◊ 
forumThread
◊◊ #
=
◊◊$ %
new
◊◊& )
ForumThread
◊◊* 5
(
◊◊5 6
threadId
◊◊6 >
)
◊◊> ?
;
◊◊? @
	DataTable
ŸŸ 
	dataTable
ŸŸ 
=
ŸŸ  !
new
ŸŸ" %
	DataTable
ŸŸ& /
(
ŸŸ/ 0
)
ŸŸ0 1
;
ŸŸ1 2
	dataTable
⁄⁄ 
.
⁄⁄ 
Columns
⁄⁄ 
.
⁄⁄ 
Add
⁄⁄ !
(
⁄⁄! "
$str
⁄⁄" *
,
⁄⁄* +
typeof
⁄⁄, 2
(
⁄⁄2 3
int
⁄⁄3 6
)
⁄⁄6 7
)
⁄⁄7 8
;
⁄⁄8 9
using
‹‹ 
(
‹‹ 
IDataReader
‹‹ 
reader
‹‹ %
=
‹‹& '
DBForums
‹‹( 0
.
‹‹0 1!
ForumThreadGetPosts
‹‹1 D
(
‹‹D E
threadId
‹‹E M
)
‹‹M N
)
‹‹N O
{
›› 
while
ﬁﬁ 
(
ﬁﬁ 
reader
ﬁﬁ 
.
ﬁﬁ 
Read
ﬁﬁ "
(
ﬁﬁ" #
)
ﬁﬁ# $
)
ﬁﬁ$ %
{
ﬂﬂ 
DataRow
‡‡ 
row
‡‡ 
=
‡‡  !
	dataTable
‡‡" +
.
‡‡+ ,
NewRow
‡‡, 2
(
‡‡2 3
)
‡‡3 4
;
‡‡4 5
row
·· 
[
·· 
$str
··  
]
··  !
=
··" #
reader
··$ *
[
··* +
$str
··+ 3
]
··3 4
;
··4 5
	dataTable
‚‚ 
.
‚‚ 
Rows
‚‚ "
.
‚‚" #
Add
‚‚# &
(
‚‚& '
row
‚‚' *
)
‚‚* +
;
‚‚+ ,
}
„„ 
}
‰‰ 
foreach
ÊÊ 
(
ÊÊ 
DataRow
ÊÊ 
row
ÊÊ  
in
ÊÊ! #
	dataTable
ÊÊ$ -
.
ÊÊ- .
Rows
ÊÊ. 2
)
ÊÊ2 3
{
ÁÁ 
forumThread
ËË 
.
ËË 

DeletePost
ËË &
(
ËË& '
Convert
ËË' .
.
ËË. /
ToInt32
ËË/ 6
(
ËË6 7
row
ËË7 :
[
ËË: ;
$str
ËË; C
]
ËËC D
)
ËËD E
)
ËËE F
;
ËËF G
}
ÈÈ 
status
ÎÎ 
=
ÎÎ 
DBForums
ÎÎ 
.
ÎÎ 
ForumThreadDelete
ÎÎ /
(
ÎÎ/ 0
threadId
ÎÎ0 8
)
ÎÎ8 9
;
ÎÎ9 :
return
ÌÌ 
status
ÌÌ 
;
ÌÌ 
}
ÓÓ 	
public
 
static
 
int
 
GetPostCount
 &
(
& '
int
' *
threadId
+ 3
)
3 4
{
ÒÒ 	
return
ÚÚ 
DBForums
ÚÚ 
.
ÚÚ %
ForumThreadGetPostCount
ÚÚ 3
(
ÚÚ3 4
threadId
ÚÚ4 <
)
ÚÚ< =
;
ÚÚ= >
}
ÛÛ 	
public
ˆˆ 
static
ˆˆ 
	DataTable
ˆˆ 
GetPostsByPage
ˆˆ  .
(
ˆˆ. /
int
ˆˆ/ 2
siteId
ˆˆ3 9
,
ˆˆ9 :
int
ˆˆ; >
pageId
ˆˆ? E
)
ˆˆE F
{
˜˜ 	
	DataTable
¯¯ 
	dataTable
¯¯ 
=
¯¯  !
new
¯¯" %
	DataTable
¯¯& /
(
¯¯/ 0
)
¯¯0 1
;
¯¯1 2
	dataTable
˘˘ 
.
˘˘ 
Columns
˘˘ 
.
˘˘ 
Add
˘˘ !
(
˘˘! "
$str
˘˘" *
,
˘˘* +
typeof
˘˘, 2
(
˘˘2 3
int
˘˘3 6
)
˘˘6 7
)
˘˘7 8
;
˘˘8 9
	dataTable
˙˙ 
.
˙˙ 
Columns
˙˙ 
.
˙˙ 
Add
˙˙ !
(
˙˙! "
$str
˙˙" *
,
˙˙* +
typeof
˙˙, 2
(
˙˙2 3
int
˙˙3 6
)
˙˙6 7
)
˙˙7 8
;
˙˙8 9
	dataTable
˚˚ 
.
˚˚ 
Columns
˚˚ 
.
˚˚ 
Add
˚˚ !
(
˚˚! "
$str
˚˚" ,
,
˚˚, -
typeof
˚˚. 4
(
˚˚4 5
int
˚˚5 8
)
˚˚8 9
)
˚˚9 :
;
˚˚: ;
	dataTable
¸¸ 
.
¸¸ 
Columns
¸¸ 
.
¸¸ 
Add
¸¸ !
(
¸¸! "
$str
¸¸" ,
,
¸¸, -
typeof
¸¸. 4
(
¸¸4 5
int
¸¸5 8
)
¸¸8 9
)
¸¸9 :
;
¸¸: ;
	dataTable
˝˝ 
.
˝˝ 
Columns
˝˝ 
.
˝˝ 
Add
˝˝ !
(
˝˝! "
$str
˝˝" /
,
˝˝/ 0
typeof
˝˝1 7
(
˝˝7 8
string
˝˝8 >
)
˝˝> ?
)
˝˝? @
;
˝˝@ A
	dataTable
˛˛ 
.
˛˛ 
Columns
˛˛ 
.
˛˛ 
Add
˛˛ !
(
˛˛! "
$str
˛˛" +
,
˛˛+ ,
typeof
˛˛- 3
(
˛˛3 4
string
˛˛4 :
)
˛˛: ;
)
˛˛; <
;
˛˛< =
	dataTable
ˇˇ 
.
ˇˇ 
Columns
ˇˇ 
.
ˇˇ 
Add
ˇˇ !
(
ˇˇ! "
$str
ˇˇ" (
,
ˇˇ( )
typeof
ˇˇ* 0
(
ˇˇ0 1
string
ˇˇ1 7
)
ˇˇ7 8
)
ˇˇ8 9
;
ˇˇ9 :
	dataTable
ÄÄ 
.
ÄÄ 
Columns
ÄÄ 
.
ÄÄ 
Add
ÄÄ !
(
ÄÄ! "
$str
ÄÄ" -
,
ÄÄ- .
typeof
ÄÄ/ 5
(
ÄÄ5 6
string
ÄÄ6 <
)
ÄÄ< =
)
ÄÄ= >
;
ÄÄ> ?
using
ÇÇ 
(
ÇÇ 
IDataReader
ÇÇ 
reader
ÇÇ %
=
ÇÇ& '
DBForums
ÇÇ( 0
.
ÇÇ0 1'
ForumThreadGetPostsByPage
ÇÇ1 J
(
ÇÇJ K
siteId
ÇÇK Q
,
ÇÇQ R
pageId
ÇÇS Y
)
ÇÇY Z
)
ÇÇZ [
{
ÉÉ 
while
ÑÑ 
(
ÑÑ 
reader
ÑÑ 
.
ÑÑ 
Read
ÑÑ "
(
ÑÑ" #
)
ÑÑ# $
)
ÑÑ$ %
{
ÖÖ 
DataRow
ÜÜ 
row
ÜÜ 
=
ÜÜ  !
	dataTable
ÜÜ" +
.
ÜÜ+ ,
NewRow
ÜÜ, 2
(
ÜÜ2 3
)
ÜÜ3 4
;
ÜÜ4 5
row
áá 
[
áá 
$str
áá  
]
áá  !
=
áá" #
reader
áá$ *
[
áá* +
$str
áá+ 3
]
áá3 4
;
áá4 5
row
àà 
[
àà 
$str
àà  
]
àà  !
=
àà" #
reader
àà$ *
[
àà* +
$str
àà+ 3
]
àà3 4
;
àà4 5
row
ââ 
[
ââ 
$str
ââ "
]
ââ" #
=
ââ$ %
reader
ââ& ,
[
ââ, -
$str
ââ- 7
]
ââ7 8
;
ââ8 9
row
ää 
[
ää 
$str
ää "
]
ää" #
=
ää$ %
reader
ää& ,
[
ää, -
$str
ää- 7
]
ää7 8
;
ää8 9
row
ãã 
[
ãã 
$str
ãã %
]
ãã% &
=
ãã' (
reader
ãã) /
[
ãã/ 0
$str
ãã0 =
]
ãã= >
;
ãã> ?
row
åå 
[
åå 
$str
åå !
]
åå! "
=
åå# $
reader
åå% +
[
åå+ ,
$str
åå, 5
]
åå5 6
;
åå6 7
row
çç 
[
çç 
$str
çç 
]
çç 
=
çç  !
reader
çç" (
[
çç( )
$str
çç) /
]
çç/ 0
;
çç0 1
row
éé 
[
éé 
$str
éé #
]
éé# $
=
éé% &
reader
éé' -
[
éé- .
$str
éé. 9
]
éé9 :
;
éé: ;
	dataTable
êê 
.
êê 
Rows
êê "
.
êê" #
Add
êê# &
(
êê& '
row
êê' *
)
êê* +
;
êê+ ,
}
íí 
}
ìì 
return
ïï 
	dataTable
ïï 
;
ïï 
}
ññ 	
public
òò 
static
òò 
	DataTable
òò 
GetThreadsByPage
òò  0
(
òò0 1
int
òò1 4
siteId
òò5 ;
,
òò; <
int
òò= @
pageId
òòA G
)
òòG H
{
ôô 	
	DataTable
öö 
	dataTable
öö 
=
öö  !
new
öö" %
	DataTable
öö& /
(
öö/ 0
)
öö0 1
;
öö1 2
	dataTable
úú 
.
úú 
Columns
úú 
.
úú 
Add
úú !
(
úú! "
$str
úú" *
,
úú* +
typeof
úú, 2
(
úú2 3
int
úú3 6
)
úú6 7
)
úú7 8
;
úú8 9
	dataTable
ùù 
.
ùù 
Columns
ùù 
.
ùù 
Add
ùù !
(
ùù! "
$str
ùù" ,
,
ùù, -
typeof
ùù. 4
(
ùù4 5
int
ùù5 8
)
ùù8 9
)
ùù9 :
;
ùù: ;
	dataTable
ûû 
.
ûû 
Columns
ûû 
.
ûû 
Add
ûû !
(
ûû! "
$str
ûû" ,
,
ûû, -
typeof
ûû. 4
(
ûû4 5
int
ûû5 8
)
ûû8 9
)
ûû9 :
;
ûû: ;
	dataTable
üü 
.
üü 
Columns
üü 
.
üü 
Add
üü !
(
üü! "
$str
üü" /
,
üü/ 0
typeof
üü1 7
(
üü7 8
string
üü8 >
)
üü> ?
)
üü? @
;
üü@ A
	dataTable
†† 
.
†† 
Columns
†† 
.
†† 
Add
†† !
(
††! "
$str
††" +
,
††+ ,
typeof
††- 3
(
††3 4
string
††4 :
)
††: ;
)
††; <
;
††< =
	dataTable
°° 
.
°° 
Columns
°° 
.
°° 
Add
°° !
(
°°! "
$str
°°" (
,
°°( )
typeof
°°* 0
(
°°0 1
string
°°1 7
)
°°7 8
)
°°8 9
;
°°9 :
	dataTable
¢¢ 
.
¢¢ 
Columns
¢¢ 
.
¢¢ 
Add
¢¢ !
(
¢¢! "
$str
¢¢" -
,
¢¢- .
typeof
¢¢/ 5
(
¢¢5 6
string
¢¢6 <
)
¢¢< =
)
¢¢= >
;
¢¢> ?
	dataTable
££ 
.
££ 
Columns
££ 
.
££ 
Add
££ !
(
££! "
$str
££" .
,
££. /
typeof
££0 6
(
££6 7
DateTime
££7 ?
)
££? @
)
££@ A
;
££A B
	dataTable
§§ 
.
§§ 
Columns
§§ 
.
§§ 
Add
§§ !
(
§§! "
$str
§§" 6
,
§§6 7
typeof
§§8 >
(
§§> ?
DateTime
§§? G
)
§§G H
)
§§H I
;
§§I J
using
¶¶ 
(
¶¶ 
IDataReader
¶¶ 
reader
¶¶ %
=
¶¶& '
DBForums
¶¶( 0
.
¶¶0 1)
ForumThreadGetThreadsByPage
¶¶1 L
(
¶¶L M
siteId
¶¶M S
,
¶¶S T
pageId
¶¶U [
)
¶¶[ \
)
¶¶\ ]
{
ßß 
while
®® 
(
®® 
reader
®® 
.
®® 
Read
®® "
(
®®" #
)
®®# $
)
®®$ %
{
©© 
DataRow
™™ 
row
™™ 
=
™™  !
	dataTable
™™" +
.
™™+ ,
NewRow
™™, 2
(
™™2 3
)
™™3 4
;
™™4 5
row
¨¨ 
[
¨¨ 
$str
¨¨  
]
¨¨  !
=
¨¨" #
reader
¨¨$ *
[
¨¨* +
$str
¨¨+ 3
]
¨¨3 4
;
¨¨4 5
row
≠≠ 
[
≠≠ 
$str
≠≠ "
]
≠≠" #
=
≠≠$ %
reader
≠≠& ,
[
≠≠, -
$str
≠≠- 7
]
≠≠7 8
;
≠≠8 9
row
ÆÆ 
[
ÆÆ 
$str
ÆÆ "
]
ÆÆ" #
=
ÆÆ$ %
reader
ÆÆ& ,
[
ÆÆ, -
$str
ÆÆ- 7
]
ÆÆ7 8
;
ÆÆ8 9
row
ØØ 
[
ØØ 
$str
ØØ %
]
ØØ% &
=
ØØ' (
reader
ØØ) /
[
ØØ/ 0
$str
ØØ0 =
]
ØØ= >
;
ØØ> ?
row
∞∞ 
[
∞∞ 
$str
∞∞ !
]
∞∞! "
=
∞∞# $
reader
∞∞% +
[
∞∞+ ,
$str
∞∞, ;
]
∞∞; <
;
∞∞< =
row
≤≤ 
[
≤≤ 
$str
≤≤ #
]
≤≤# $
=
≤≤% &
reader
≤≤' -
[
≤≤- .
$str
≤≤. 9
]
≤≤9 :
;
≤≤: ;
row
≥≥ 
[
≥≥ 
$str
≥≥ $
]
≥≥$ %
=
≥≥& '
reader
≥≥( .
[
≥≥. /
$str
≥≥/ ;
]
≥≥; <
;
≥≥< =
row
¥¥ 
[
¥¥ 
$str
¥¥ ,
]
¥¥, -
=
¥¥. /
reader
¥¥0 6
[
¥¥6 7
$str
¥¥7 K
]
¥¥K L
;
¥¥L M
	dataTable
∂∂ 
.
∂∂ 
Rows
∂∂ "
.
∂∂" #
Add
∂∂# &
(
∂∂& '
row
∂∂' *
)
∂∂* +
;
∂∂+ ,
}
∏∏ 
}
ππ 
return
ªª 
	dataTable
ªª 
;
ªª 
}
ºº 	
public
øø 
static
øø 
	DataTable
øø 
GetPostsByThread
øø  0
(
øø0 1
int
øø1 4
threadId
øø5 =
)
øø= >
{
¿¿ 	
	DataTable
¡¡ 
	dataTable
¡¡ 
=
¡¡  !
new
¡¡" %
	DataTable
¡¡& /
(
¡¡/ 0
)
¡¡0 1
;
¡¡1 2
	dataTable
¬¬ 
.
¬¬ 
Columns
¬¬ 
.
¬¬ 
Add
¬¬ !
(
¬¬! "
$str
¬¬" *
,
¬¬* +
typeof
¬¬, 2
(
¬¬2 3
int
¬¬3 6
)
¬¬6 7
)
¬¬7 8
;
¬¬8 9
	dataTable
ƒƒ 
.
ƒƒ 
Columns
ƒƒ 
.
ƒƒ 
Add
ƒƒ !
(
ƒƒ! "
$str
ƒƒ" ,
,
ƒƒ, -
typeof
ƒƒ. 4
(
ƒƒ4 5
int
ƒƒ5 8
)
ƒƒ8 9
)
ƒƒ9 :
;
ƒƒ: ;
	dataTable
«« 
.
«« 
Columns
«« 
.
«« 
Add
«« !
(
««! "
$str
««" +
,
««+ ,
typeof
««- 3
(
««3 4
string
««4 :
)
««: ;
)
««; <
;
««< =
	dataTable
»» 
.
»» 
Columns
»» 
.
»» 
Add
»» !
(
»»! "
$str
»»" (
,
»»( )
typeof
»»* 0
(
»»0 1
string
»»1 7
)
»»7 8
)
»»8 9
;
»»9 :
using
ÀÀ 
(
ÀÀ 
IDataReader
ÀÀ 
reader
ÀÀ %
=
ÀÀ& '
DBForums
ÀÀ( 0
.
ÀÀ0 1!
ForumThreadGetPosts
ÀÀ1 D
(
ÀÀD E
threadId
ÀÀE M
)
ÀÀM N
)
ÀÀN O
{
ÃÃ 
while
ÕÕ 
(
ÕÕ 
reader
ÕÕ 
.
ÕÕ 
Read
ÕÕ "
(
ÕÕ" #
)
ÕÕ# $
)
ÕÕ$ %
{
ŒŒ 
DataRow
œœ 
row
œœ 
=
œœ  !
	dataTable
œœ" +
.
œœ+ ,
NewRow
œœ, 2
(
œœ2 3
)
œœ3 4
;
œœ4 5
row
–– 
[
–– 
$str
––  
]
––  !
=
––" #
reader
––$ *
[
––* +
$str
––+ 3
]
––3 4
;
––4 5
row
”” 
[
”” 
$str
”” "
]
””" #
=
””$ %
reader
””& ,
[
””, -
$str
””- 7
]
””7 8
;
””8 9
row
’’ 
[
’’ 
$str
’’ !
]
’’! "
=
’’# $
reader
’’% +
[
’’+ ,
$str
’’, 5
]
’’5 6
;
’’6 7
row
÷÷ 
[
÷÷ 
$str
÷÷ 
]
÷÷ 
=
÷÷  !
reader
÷÷" (
[
÷÷( )
$str
÷÷) /
]
÷÷/ 0
;
÷÷0 1
	dataTable
ŸŸ 
.
ŸŸ 
Rows
ŸŸ "
.
ŸŸ" #
Add
ŸŸ# &
(
ŸŸ& '
row
ŸŸ' *
)
ŸŸ* +
;
ŸŸ+ ,
}
€€ 
}
‹‹ 
return
ﬁﬁ 
	dataTable
ﬁﬁ 
;
ﬁﬁ 
}
‡‡ 	
public
„„ 
static
„„ 
IDataReader
„„ !
GetPageByUser
„„" /
(
„„/ 0
int
‰‰ 
userId
‰‰ 
,
‰‰ 
int
ÂÂ 
siteId
ÂÂ 
,
ÂÂ 
int
ÊÊ 

pageNumber
ÊÊ 
,
ÊÊ 
int
ÁÁ 
pageSize
ÁÁ 
,
ÁÁ 
out
ËË 
int
ËË 

totalPages
ËË 
)
ËË 
{
ÈÈ 	
return
ÎÎ 
DBForums
ÎÎ 
.
ÎÎ !
GetThreadPageByUser
ÎÎ /
(
ÎÎ/ 0
userId
ÏÏ 
,
ÏÏ 
siteId
ÌÌ 
,
ÌÌ 

pageNumber
ÓÓ 
,
ÓÓ 
pageSize
ÔÔ 
,
ÔÔ 
out
 

totalPages
 
)
 
;
  
}
ÚÚ 	
public
ˆˆ 
static
ˆˆ 
bool
ˆˆ 
IsSubscribed
ˆˆ '
(
ˆˆ' (
int
ˆˆ( +
threadId
ˆˆ, 4
,
ˆˆ4 5
int
ˆˆ6 9
userId
ˆˆ: @
)
ˆˆ@ A
{
˜˜ 	
return
¯¯ 
DBForums
¯¯ 
.
¯¯ +
ForumThreadSubscriptionExists
¯¯ 9
(
¯¯9 :
threadId
¯¯: B
,
¯¯B C
userId
¯¯D J
)
¯¯J K
;
¯¯K L
}
˘˘ 	
public
˚˚ 
static
˚˚ 
IDataReader
˚˚ !"
GetThreadsForSiteMap
˚˚" 6
(
˚˚6 7
int
˚˚7 :
siteId
˚˚; A
)
˚˚A B
{
¸¸ 	
return
˝˝ 
DBForums
˝˝ 
.
˝˝ "
GetThreadsForSiteMap
˝˝ 0
(
˝˝0 1
siteId
˝˝1 7
)
˝˝7 8
;
˝˝8 9
}
˛˛ 	
public
Ö	Ö	 
event
Ö	Ö	 (
ContentChangedEventHandler
Ö	Ö	 /
ContentChanged
Ö	Ö	0 >
;
Ö	Ö	> ?
	protected
á	á	 
void
á	á	 
OnContentChanged
á	á	 '
(
á	á	' (%
ContentChangedEventArgs
á	á	( ?
e
á	á	@ A
)
á	á	A B
{
à	à	 	
if
â	â	 
(
â	â	 
ContentChanged
â	â	 
!=
â	â	 !
null
â	â	" &
)
â	â	& '
{
ä	ä	 
ContentChanged
ã	ã	 
(
ã	ã	 
this
ã	ã	 #
,
ã	ã	# $
e
ã	ã	% &
)
ã	ã	& '
;
ã	ã	' (
}
å	å	 
}
ç	ç	 	
public
í	í	 
delegate
í	í	 
void
í	í	 %
ThreadMovedEventHandler
í	í	 4
(
í	í	4 5
object
í	í	5 ;
sender
í	í	< B
,
í	í	B C"
ForumThreadMovedArgs
í	í	D X
e
í	í	Y Z
)
í	í	Z [
;
í	í	[ \
public
î	î	 
event
î	î	 %
ThreadMovedEventHandler
î	î	 ,
ThreadMoved
î	î	- 8
;
î	î	8 9
	protected
ñ	ñ	 
void
ñ	ñ	 
OnThreadMoved
ñ	ñ	 $
(
ñ	ñ	$ %"
ForumThreadMovedArgs
ñ	ñ	% 9
e
ñ	ñ	: ;
)
ñ	ñ	; <
{
ó	ó	 	
if
ò	ò	 
(
ò	ò	 
ThreadMoved
ò	ò	 
!=
ò	ò	 
null
ò	ò	 #
)
ò	ò	# $
{
ô	ô	 
ThreadMoved
ö	ö	 
(
ö	ö	 
this
ö	ö	  
,
ö	ö	  !
e
ö	ö	" #
)
ö	ö	# $
;
ö	ö	$ %
}
õ	õ	 
}
ú	ú	 	
}
û	û	 
}ü	ü	 Ù
ÇD:\Projects\DefensePoint\whitesource-testcases-csharp\CWE79\mojoportal\mojoPortal.Features.Business\Forums\ForumThreadMovedArgs.cs
	namespace 	

mojoPortal
 
. 
Business 
{ 
public 

class  
ForumThreadMovedArgs %
{ 
private		 
int		 
forumID		 
;		 
private

 
int

 
originalForumID

 #
;

# $
public 
int 
ForumId 
{ 	
get 
{ 
return 
forumID  
;  !
}" #
set 
{ 
forumID 
= 
value !
;! "
}# $
} 	
public 
int 
OriginalForumId "
{ 	
get 
{ 
return 
originalForumID (
;( )
}* +
set 
{ 
originalForumID !
=" #
value$ )
;) *
}+ ,
} 	
} 
} ª
vD:\Projects\DefensePoint\whitesource-testcases-csharp\CWE79\mojoportal\mojoPortal.Features.Business\Forums\RSSForum.cs
	namespace 	

mojoPortal
 
. 
Business 
{ 
public 

class 
RssForum 
{ 
public 
RssForum 
( 
) 
{ 	
}
 
private$$ 
int$$ 
siteID$$ 
=$$ 
-$$ 
$num$$ 
;$$  
private%% 
int%% 
pageID%% 
=%% 
-%% 
$num%% 
;%%  
private&& 
int&& 
moduleID&& 
=&& 
-&&  
$num&&  !
;&&! "
private'' 
int'' 
itemID'' 
='' 
-'' 
$num'' 
;''  
private(( 
int(( 
threadID(( 
=(( 
-((  
$num((  !
;((! "
private)) 
int)) 
maximumDays)) 
=))  !
-))" #
$num))# $
;))$ %
private** 
DateTime** 
createdDate** $
;**$ %
public00 
int00 
ItemId00 
{11 	
get22 
{22 
return22 
itemID22 
;22  
}22! "
set33 
{33 
itemID33 
=33 
value33  
;33  !
}33" #
}44 	
public55 
int55 
ModuleId55 
{66 	
get77 
{77 
return77 
moduleID77 !
;77! "
}77# $
set88 
{88 
moduleID88 
=88 
value88 "
;88" #
}88$ %
}99 	
public:: 
DateTime:: 
CreatedDate:: #
{;; 	
get<< 
{<< 
return<< 
createdDate<< $
;<<$ %
}<<& '
set== 
{== 
createdDate== 
=== 
value==  %
;==% &
}==' (
}>> 	
public?? 
int?? 
PageId?? 
{@@ 	
getAA 
{AA 
returnAA 
pageIDAA 
;AA  
}AA! "
setBB 
{BB 
pageIDBB 
=BB 
valueBB  
;BB  !
}BB" #
}CC 	
publicDD 
intDD 
SiteIdDD 
{EE 	
getFF 
{FF 
returnFF 
siteIDFF 
;FF  
}FF! "
setGG 
{GG 
siteIDGG 
=GG 
valueGG  
;GG  !
}GG" #
}HH 	
publicII 
intII 
ThreadIdII 
{JJ 	
getKK 
{KK 
returnKK 
threadIDKK !
;KK! "
}KK# $
setLL 
{LL 
threadIDLL 
=LL 
valueLL "
;LL" #
}LL$ %
}MM 	
publicNN 
intNN 
MaximumDaysNN 
{OO 	
getPP 
{PP 
returnPP 
maximumDaysPP $
;PP$ %
}PP& '
setQQ 
{QQ 
maximumDaysQQ 
=QQ 
valueQQ  %
;QQ% &
}QQ' (
}RR 	
publicXX 
IDataReaderXX 
GetPostsForRssXX )
(XX) *
)XX* +
{YY 	
returnZZ 
DBForumsZZ 
.ZZ %
ForumThreadGetPostsForRssZZ 5
(ZZ5 6
SiteIdZZ6 <
,ZZ< =
PageIdZZ> D
,ZZD E
ModuleIdZZF N
,ZZN O
ItemIdZZP V
,ZZV W
ThreadIdZZX `
,ZZ` a
MaximumDaysZZb m
)ZZm n
;ZZn o
}[[ 	
}^^ 
}__ Ä
{D:\Projects\DefensePoint\whitesource-testcases-csharp\CWE79\mojoportal\mojoPortal.Features.Business\ImageGallery\Gallery.cs
	namespace		 	

mojoPortal		
 
.		 
Business		 
{

 
public 

class 
Gallery 
{ 
private 
const 
string 
featureGuid (
=) *
$str+ Q
;Q R
public 
static 
Guid 
FeatureGuid &
{ 	
get 
{ 
return 
new 
Guid !
(! "
featureGuid" -
)- .
;. /
}0 1
} 	
public 
Gallery 
( 
int 
moduleId #
)# $
{ 	
this 
. 
	galleryID 
= 
moduleId %
;% &
} 	
private 
int 
	galleryID 
= 
$num  !
;! "
public 
IDataReader 
GetAllImages '
(' (
)( )
{ 	
return   
	DBGallery   
.   
GetAllImages   )
(  ) *
this  * .
.  . /
	galleryID  / 8
)  8 9
;  9 :
}!! 	
public## 
	DataTable## 
GetThumbsByPage## (
(##( )
int##) ,

pageNumber##- 7
,##7 8
int##9 <
thumbsPerPage##= J
)##J K
{$$ 	
return%% 
	DBGallery%% 
.%% 
GetThumbsByPage%% ,
(%%, -
this%%- 1
.%%1 2
	galleryID%%2 ;
,%%; <

pageNumber%%= G
,%%G H
thumbsPerPage%%I V
)%%V W
;%%W X
}'' 	
public// 
	DataTable// 
GetWebImageByPage// *
(//* +
int//+ .

pageNumber/// 9
)//9 :
{00 	
return11 
	DBGallery11 
.11 
GetWebImageByPage11 .
(11. /
this11/ 3
.113 4
	galleryID114 =
,11= >

pageNumber11? I
)11I J
;11J K
}22 	
public:: 
static:: 
IDataReader:: !
GetAllImages::" .
(::. /
int::/ 2
moduleId::3 ;
)::; <
{;; 	
return<< 
	DBGallery<< 
.<< 
GetAllImages<< )
(<<) *
moduleId<<* 2
)<<2 3
;<<3 4
}== 	
public?? 
static?? 
bool?? 
DeleteBySite?? '
(??' (
int??( +
siteId??, 2
)??2 3
{@@ 	
returnAA 
	DBGalleryAA 
.AA 
DeleteBySiteAA )
(AA) *
siteIdAA* 0
)AA0 1
;AA1 2
}BB 	
publicDD 
staticDD 
boolDD 
DeleteByModuleDD )
(DD) *
intDD* -
moduleIdDD. 6
)DD6 7
{EE 	
returnFF 
	DBGalleryFF 
.FF 
DeleteByModuleFF +
(FF+ ,
moduleIdFF, 4
)FF4 5
;FF5 6
}GG 	
}II 
}JJ ≥›
ÄD:\Projects\DefensePoint\whitesource-testcases-csharp\CWE79\mojoportal\mojoPortal.Features.Business\ImageGallery\GalleryImage.cs
	namespace 	

mojoPortal
 
. 
Business 
{ 
public 

class 
GalleryImage 
: 
IIndexableContent  1
{ 
public 
GalleryImage 
( 
) 
{ 	
this 
. 
	imageFile 
= 
ModuleId %
.% &
ToString& .
(. /
)/ 0
+1 2
$str3 :
+; <
Guid= A
.A B
NewGuidB I
(I J
)J K
.K L
ToStringL T
(T U
)U V
+W X
$strY _
;_ `
this   
.   
webImageFile   
=   
ModuleId    (
.  ( )
ToString  ) 1
(  1 2
)  2 3
+  4 5
$str  6 <
+  = >
Guid  ? C
.  C D
NewGuid  D K
(  K L
)  L M
.  M N
ToString  N V
(  V W
)  W X
+  Y Z
$str  [ a
;  a b
this!! 
.!! 
thumbnailFile!! 
=!!  
ModuleId!!! )
.!!) *
ToString!!* 2
(!!2 3
)!!3 4
+!!5 6
$str!!7 ?
+!!@ A
Guid!!B F
.!!F G
NewGuid!!G N
(!!N O
)!!O P
.!!P Q
ToString!!Q Y
(!!Y Z
)!!Z [
+!!\ ]
$str!!^ d
;!!d e
}## 	
public%% 
GalleryImage%% 
(%% 
int%% 
	galleryId%%  )
)%%) *
{&& 	
this'' 
.'' 
moduleID'' 
='' 
	galleryId'' %
;''% &
this(( 
.(( 
metaData(( 
=(( 
new(( 
XmlDocument((  +
(((+ ,
)((, -
;((- .
this)) 
.)) 
metaData)) 
.)) 
AppendChild)) %
())% &
this))& *
.))* +
metaData))+ 3
.))3 4
CreateElement))4 A
())A B
$str))B L
)))L M
)))M N
;))N O
this++ 
.++ 
	imageFile++ 
=++ 
moduleID++ %
.++% &
ToString++& .
(++. /
)++/ 0
+++1 2
$str++3 :
+++; <
Guid++= A
.++A B
NewGuid++B I
(++I J
)++J K
.++K L
ToString++L T
(++T U
)++U V
+++W X
$str++Y _
;++_ `
this,, 
.,, 
webImageFile,, 
=,, 
moduleID,,  (
.,,( )
ToString,,) 1
(,,1 2
),,2 3
+,,4 5
$str,,6 <
+,,= >
Guid,,? C
.,,C D
NewGuid,,D K
(,,K L
),,L M
.,,M N
ToString,,N V
(,,V W
),,W X
+,,Y Z
$str,,[ a
;,,a b
this-- 
.-- 
thumbnailFile-- 
=--  
moduleID--! )
.--) *
ToString--* 2
(--2 3
)--3 4
+--5 6
$str--7 ?
+--@ A
Guid--B F
.--F G
NewGuid--G N
(--N O
)--O P
.--P Q
ToString--Q Y
(--Y Z
)--Z [
+--\ ]
$str--^ d
;--d e
}.. 	
public11 
GalleryImage11 
(11 
int11 
	galleryId11  )
,11) *
int11+ .
itemId11/ 5
)115 6
{22 	
this33 
.33 
moduleID33 
=33 
	galleryId33 %
;33% &
GetGalleryImage55 
(55 
itemId55 "
)55" #
;55# $
}66 	
private<< 
static<< 
readonly<< 
ILog<<  $
log<<% (
=<<) *

LogManager<<+ 5
.<<5 6
	GetLogger<<6 ?
(<<? @
typeof<<@ F
(<<F G
GalleryImage<<G S
)<<S T
)<<T U
;<<U V
private>> 
Guid>> 
itemGuid>> 
=>> 
Guid>>  $
.>>$ %
Empty>>% *
;>>* +
private?? 
Guid?? 

moduleGuid?? 
=??  !
Guid??" &
.??& '
Empty??' ,
;??, -
private@@ 
Guid@@ 
userGuid@@ 
=@@ 
Guid@@  $
.@@$ %
Empty@@% *
;@@* +
privateAA 
intAA 
itemIDAA 
=AA 
-AA 
$numAA 
;AA  
privateBB 
intBB 
moduleIDBB 
=BB 
-BB  
$numBB  !
;BB! "
privateCC 
intCC 
displayOrderCC  
=CC! "
$numCC# &
;CC& '
privateDD 
stringDD 
captionDD 
=DD  
stringDD! '
.DD' (
EmptyDD( -
;DD- .
privateEE 
stringEE 
descriptionEE "
=EE# $
stringEE% +
.EE+ ,
EmptyEE, 1
;EE1 2
privateFF 
XmlDocumentFF 
metaDataFF $
;FF$ %
privateGG 
stringGG 
metaDataXmlGG "
=GG# $
stringGG% +
.GG+ ,
EmptyGG, 1
;GG1 2
privateHH 
stringHH 
	imageFileHH  
=HH! "
stringHH# )
.HH) *
EmptyHH* /
;HH/ 0
privateII 
stringII 
webImageFileII #
=II$ %
stringII& ,
.II, -
EmptyII- 2
;II2 3
privateJJ 
stringJJ 
thumbnailFileJJ $
=JJ% &
stringJJ' -
.JJ- .
EmptyJJ. 3
;JJ3 4
privateKK 
DateTimeKK 

uploadDateKK #
=KK$ %
DateTimeKK& .
.KK. /
UtcNowKK/ 5
;KK5 6
privateLL 
stringLL 

uploadUserLL !
=LL" #
stringLL$ *
.LL* +
EmptyLL+ 0
;LL0 1
privateNN 
intNN 
thumbNailHeightNN #
=NN$ %
$numNN& (
;NN( )
privateOO 
intOO 
thumbNailWidthOO "
=OO# $
$numOO% (
;OO( )
privatePP 
intPP 
webImageHeightPP "
=PP# $
$numPP% (
;PP( )
privateQQ 
intQQ 
webImageWidthQQ !
=QQ" #
$numQQ$ '
;QQ' (
publicXX 
GuidXX 
ItemGuidXX 
{YY 	
getZZ 
{ZZ 
returnZZ 
itemGuidZZ !
;ZZ! "
}ZZ# $
}[[ 	
public]] 
Guid]] 

ModuleGuid]] 
{^^ 	
get__ 
{__ 
return__ 

moduleGuid__ #
;__# $
}__% &
set`` 
{`` 

moduleGuid`` 
=`` 
value`` $
;``$ %
}``& '
}aa 	
publiccc 
Guidcc 
UserGuidcc 
{dd 	
getee 
{ee 
returnee 
userGuidee !
;ee! "
}ee# $
setff 
{ff 
userGuidff 
=ff 
valueff "
;ff" #
}ff$ %
}gg 	
publicii 
intii 
ItemIdii 
{jj 	
getkk 
{kk 
returnkk 
itemIDkk 
;kk  
}kk! "
setll 
{ll 
itemIDll 
=ll 
valuell  
;ll  !
}ll" #
}mm 	
publicoo 
intoo 
ModuleIdoo 
{pp 	
getqq 
{qq 
returnqq 
moduleIDqq !
;qq! "
}qq# $
setrr 
{rr 
moduleIDrr 
=rr 
valuerr "
;rr" #
}rr$ %
}ss 	
publicuu 
intuu 
DisplayOrderuu 
{vv 	
getww 
{ww 
returnww 
displayOrderww %
;ww% &
}ww' (
setxx 
{xx 
displayOrderxx 
=xx  
valuexx! &
;xx& '
}xx( )
}yy 	
public{{ 
int{{ 
ThumbNailHeight{{ "
{|| 	
get}} 
{}} 
return}} 
thumbNailHeight}} (
;}}( )
}}}* +
set~~ 
{~~ 
thumbNailHeight~~ !
=~~" #
value~~$ )
;~~) *
}~~+ ,
} 	
public
ÅÅ 
int
ÅÅ 
ThumbNailWidth
ÅÅ !
{
ÇÇ 	
get
ÉÉ 
{
ÉÉ 
return
ÉÉ 
thumbNailWidth
ÉÉ '
;
ÉÉ' (
}
ÉÉ) *
set
ÑÑ 
{
ÑÑ 
thumbNailWidth
ÑÑ  
=
ÑÑ! "
value
ÑÑ# (
;
ÑÑ( )
}
ÑÑ* +
}
ÖÖ 	
public
áá 
int
áá 
WebImageHeight
áá !
{
àà 	
get
ââ 
{
ââ 
return
ââ 
webImageHeight
ââ '
;
ââ' (
}
ââ) *
set
ää 
{
ää 
webImageHeight
ää  
=
ää! "
value
ää# (
;
ää( )
}
ää* +
}
ãã 	
public
çç 
int
çç 
WebImageWidth
çç  
{
éé 	
get
èè 
{
èè 
return
èè 
webImageWidth
èè &
;
èè& '
}
èè( )
set
êê 
{
êê 
webImageWidth
êê 
=
êê  !
value
êê" '
;
êê' (
}
êê) *
}
ëë 	
public
ìì 
string
ìì 
Caption
ìì 
{
îî 	
get
ïï 
{
ïï 
return
ïï 
caption
ïï  
;
ïï  !
}
ïï" #
set
ññ 
{
ññ 
caption
ññ 
=
ññ 
value
ññ !
;
ññ! "
}
ññ# $
}
óó 	
public
òò 
string
òò 
Description
òò !
{
ôô 	
get
öö 
{
öö 
return
öö 
description
öö $
;
öö$ %
}
öö& '
set
õõ 
{
õõ 
description
õõ 
=
õõ 
value
õõ  %
;
õõ% &
}
õõ' (
}
úú 	
public
ùù 
string
ùù 
MetaDataXml
ùù !
{
ûû 	
get
üü 
{
üü 
return
üü 
metaDataXml
üü $
;
üü$ %
}
üü& '
set
†† 
{
†† 
metaDataXml
†† 
=
†† 
value
††  %
;
††% &
}
††' (
}
°° 	
public
ßß 
string
ßß 
	ImageFile
ßß 
{
®® 	
get
©© 
{
©© 
return
©© 
	imageFile
©© "
;
©©" #
}
©©$ %
set
™™ 
{
™™ 
	imageFile
™™ 
=
™™ 
value
™™ #
;
™™# $
}
™™% &
}
´´ 	
public
¨¨ 
string
¨¨ 
WebImageFile
¨¨ "
{
≠≠ 	
get
ÆÆ 
{
ÆÆ 
return
ÆÆ 
webImageFile
ÆÆ %
;
ÆÆ% &
}
ÆÆ' (
set
ØØ 
{
ØØ 
webImageFile
ØØ 
=
ØØ  
value
ØØ! &
;
ØØ& '
}
ØØ( )
}
∞∞ 	
public
±± 
string
±± 
ThumbnailFile
±± #
{
≤≤ 	
get
≥≥ 
{
≥≥ 
return
≥≥ 
thumbnailFile
≥≥ &
;
≥≥& '
}
≥≥( )
set
¥¥ 
{
¥¥ 
thumbnailFile
¥¥ 
=
¥¥  !
value
¥¥" '
;
¥¥' (
}
¥¥) *
}
µµ 	
public
∂∂ 
DateTime
∂∂ 

UploadDate
∂∂ "
{
∑∑ 	
get
∏∏ 
{
∏∏ 
return
∏∏ 

uploadDate
∏∏ #
;
∏∏# $
}
∏∏% &
set
ππ 
{
ππ 

uploadDate
ππ 
=
ππ 
value
ππ $
;
ππ$ %
}
ππ& '
}
∫∫ 	
public
ªª 
string
ªª 

UploadUser
ªª  
{
ºº 	
get
ΩΩ 
{
ΩΩ 
return
ΩΩ 

uploadUser
ΩΩ #
;
ΩΩ# $
}
ΩΩ% &
set
ææ 
{
ææ 

uploadUser
ææ 
=
ææ 
value
ææ $
;
ææ$ %
}
ææ& '
}
øø 	
private
≈≈ 
void
≈≈ 
GetGalleryImage
≈≈ $
(
≈≈$ %
int
≈≈% (
itemId
≈≈) /
)
≈≈/ 0
{
∆∆ 	
using
«« 
(
«« 
IDataReader
«« 
reader
«« %
=
««& '
	DBGallery
««( 1
.
««1 2
GetGalleryImage
««2 A
(
««A B
itemId
««B H
)
««H I
)
««I J
{
»» 
if
…… 
(
…… 
reader
…… 
.
…… 
Read
…… 
(
……  
)
……  !
)
……! "
{
   
this
ÀÀ 
.
ÀÀ 
itemID
ÀÀ 
=
ÀÀ  !
Convert
ÀÀ" )
.
ÀÀ) *
ToInt32
ÀÀ* 1
(
ÀÀ1 2
reader
ÀÀ2 8
[
ÀÀ8 9
$str
ÀÀ9 A
]
ÀÀA B
)
ÀÀB C
;
ÀÀC D
this
ÃÃ 
.
ÃÃ 
moduleID
ÃÃ !
=
ÃÃ" #
Convert
ÃÃ$ +
.
ÃÃ+ ,
ToInt32
ÃÃ, 3
(
ÃÃ3 4
reader
ÃÃ4 :
[
ÃÃ: ;
$str
ÃÃ; E
]
ÃÃE F
)
ÃÃF G
;
ÃÃG H
this
ÕÕ 
.
ÕÕ 
displayOrder
ÕÕ %
=
ÕÕ& '
Convert
ÕÕ( /
.
ÕÕ/ 0
ToInt32
ÕÕ0 7
(
ÕÕ7 8
reader
ÕÕ8 >
[
ÕÕ> ?
$str
ÕÕ? M
]
ÕÕM N
)
ÕÕN O
;
ÕÕO P
this
ŒŒ 
.
ŒŒ 
caption
ŒŒ  
=
ŒŒ! "
reader
ŒŒ# )
[
ŒŒ) *
$str
ŒŒ* 3
]
ŒŒ3 4
.
ŒŒ4 5
ToString
ŒŒ5 =
(
ŒŒ= >
)
ŒŒ> ?
;
ŒŒ? @
this
œœ 
.
œœ 
description
œœ $
=
œœ% &
reader
œœ' -
[
œœ- .
$str
œœ. ;
]
œœ; <
.
œœ< =
ToString
œœ= E
(
œœE F
)
œœF G
;
œœG H
this
–– 
.
–– 
metaDataXml
–– $
=
––% &
reader
––' -
[
––- .
$str
––. ;
]
––; <
.
––< =
ToString
––= E
(
––E F
)
––F G
;
––G H
this
—— 
.
—— 
	imageFile
—— "
=
——# $
reader
——% +
[
——+ ,
$str
——, 7
]
——7 8
.
——8 9
ToString
——9 A
(
——A B
)
——B C
;
——C D
this
““ 
.
““ 
webImageFile
““ %
=
““& '
reader
““( .
[
““. /
$str
““/ =
]
““= >
.
““> ?
ToString
““? G
(
““G H
)
““H I
;
““I J
this
”” 
.
”” 
thumbnailFile
”” &
=
””' (
reader
””) /
[
””/ 0
$str
””0 ?
]
””? @
.
””@ A
ToString
””A I
(
””I J
)
””J K
;
””K L
this
‘‘ 
.
‘‘ 

uploadDate
‘‘ #
=
‘‘$ %
Convert
‘‘& -
.
‘‘- .

ToDateTime
‘‘. 8
(
‘‘8 9
reader
‘‘9 ?
[
‘‘? @
$str
‘‘@ L
]
‘‘L M
)
‘‘M N
;
‘‘N O
this
’’ 
.
’’ 

uploadUser
’’ #
=
’’$ %
reader
’’& ,
[
’’, -
$str
’’- 9
]
’’9 :
.
’’: ;
ToString
’’; C
(
’’C D
)
’’D E
;
’’E F
this
◊◊ 
.
◊◊ 
itemGuid
◊◊ !
=
◊◊" #
new
◊◊$ '
Guid
◊◊( ,
(
◊◊, -
reader
◊◊- 3
[
◊◊3 4
$str
◊◊4 >
]
◊◊> ?
.
◊◊? @
ToString
◊◊@ H
(
◊◊H I
)
◊◊I J
)
◊◊J K
;
◊◊K L
this
ÿÿ 
.
ÿÿ 

moduleGuid
ÿÿ #
=
ÿÿ$ %
new
ÿÿ& )
Guid
ÿÿ* .
(
ÿÿ. /
reader
ÿÿ/ 5
[
ÿÿ5 6
$str
ÿÿ6 B
]
ÿÿB C
.
ÿÿC D
ToString
ÿÿD L
(
ÿÿL M
)
ÿÿM N
)
ÿÿN O
;
ÿÿO P
string
ŸŸ 
user
ŸŸ 
=
ŸŸ  !
reader
ŸŸ" (
[
ŸŸ( )
$str
ŸŸ) 3
]
ŸŸ3 4
.
ŸŸ4 5
ToString
ŸŸ5 =
(
ŸŸ= >
)
ŸŸ> ?
;
ŸŸ? @
if
⁄⁄ 
(
⁄⁄ 
user
⁄⁄ 
.
⁄⁄ 
Length
⁄⁄ #
==
⁄⁄$ &
$num
⁄⁄' )
)
⁄⁄) *
this
⁄⁄+ /
.
⁄⁄/ 0
userGuid
⁄⁄0 8
=
⁄⁄9 :
new
⁄⁄; >
Guid
⁄⁄? C
(
⁄⁄C D
user
⁄⁄D H
)
⁄⁄H I
;
⁄⁄I J
}
‹‹ 
}
›› 
}
ﬂﬂ 	
private
·· 
bool
·· 
Create
·· 
(
·· 
)
·· 
{
‚‚ 	
int
„„ 
newID
„„ 
=
„„ 
-
„„ 
$num
„„ 
;
„„ 
this
‰‰ 
.
‰‰ 
itemGuid
‰‰ 
=
‰‰ 
Guid
‰‰  
.
‰‰  !
NewGuid
‰‰! (
(
‰‰( )
)
‰‰) *
;
‰‰* +
newID
ÊÊ 
=
ÊÊ 
	DBGallery
ÊÊ 
.
ÊÊ 
AddGalleryImage
ÊÊ -
(
ÊÊ- .
this
ÁÁ 
.
ÁÁ 
itemGuid
ÁÁ 
,
ÁÁ 
this
ËË 
.
ËË 

moduleGuid
ËË 
,
ËË  
this
ÈÈ 
.
ÈÈ 
moduleID
ÈÈ 
,
ÈÈ 
this
ÍÍ 
.
ÍÍ 
displayOrder
ÍÍ !
,
ÍÍ! "
this
ÎÎ 
.
ÎÎ 
caption
ÎÎ 
,
ÎÎ 
this
ÏÏ 
.
ÏÏ 
description
ÏÏ  
,
ÏÏ  !
this
ÌÌ 
.
ÌÌ 
metaDataXml
ÌÌ  
,
ÌÌ  !
this
ÓÓ 
.
ÓÓ 
	imageFile
ÓÓ 
,
ÓÓ 
this
ÔÔ 
.
ÔÔ 
webImageFile
ÔÔ !
,
ÔÔ! "
this
 
.
 
thumbnailFile
 "
,
" #
this
ÒÒ 
.
ÒÒ 

uploadDate
ÒÒ 
,
ÒÒ  
this
ÚÚ 
.
ÚÚ 

uploadUser
ÚÚ 
,
ÚÚ  
this
ÛÛ 
.
ÛÛ 
userGuid
ÛÛ 
)
ÛÛ 
;
ÛÛ 
this
ıı 
.
ıı 
itemID
ıı 
=
ıı 
newID
ıı 
;
ıı  
bool
˜˜ 
result
˜˜ 
=
˜˜ 
(
˜˜ 
newID
˜˜  
>
˜˜! "
-
˜˜# $
$num
˜˜$ %
)
˜˜% &
;
˜˜& '
if
˘˘ 
(
˘˘ 
result
˘˘ 
)
˘˘ 
{
˙˙ %
ContentChangedEventArgs
˚˚ '
e
˚˚( )
=
˚˚* +
new
˚˚, /%
ContentChangedEventArgs
˚˚0 G
(
˚˚G H
)
˚˚H I
;
˚˚I J
OnContentChanged
¸¸  
(
¸¸  !
e
¸¸! "
)
¸¸" #
;
¸¸# $
}
˝˝ 
return
ÅÅ 
result
ÅÅ 
;
ÅÅ 
}
ÉÉ 	
private
ÖÖ 
bool
ÖÖ 
Update
ÖÖ 
(
ÖÖ 
)
ÖÖ 
{
ÜÜ 	
bool
àà 
result
àà 
=
àà 
	DBGallery
àà #
.
àà# $ 
UpdateGalleryImage
àà$ 6
(
àà6 7
this
ââ 
.
ââ 
itemID
ââ 
,
ââ 
this
ää 
.
ää 
moduleID
ää 
,
ää 
this
ãã 
.
ãã 
displayOrder
ãã !
,
ãã! "
this
åå 
.
åå 
caption
åå 
,
åå 
this
çç 
.
çç 
description
çç  
,
çç  !
this
éé 
.
éé 
metaDataXml
éé  
,
éé  !
this
èè 
.
èè 
	imageFile
èè 
,
èè 
this
êê 
.
êê 
webImageFile
êê !
,
êê! "
this
ëë 
.
ëë 
thumbnailFile
ëë "
,
ëë" #
this
íí 
.
íí 

uploadDate
íí 
,
íí  
this
ìì 
.
ìì 

uploadUser
ìì 
)
ìì  
;
ìì  !
if
ññ 
(
ññ 
result
ññ 
)
ññ 
{
óó %
ContentChangedEventArgs
òò '
e
òò( )
=
òò* +
new
òò, /%
ContentChangedEventArgs
òò0 G
(
òòG H
)
òòH I
;
òòI J
OnContentChanged
ôô  
(
ôô  !
e
ôô! "
)
ôô" #
;
ôô# $
}
öö 
return
úú 
result
úú 
;
úú 
}
ûû 	
public
ßß 
bool
ßß 
Save
ßß 
(
ßß 
)
ßß 
{
®® 	
if
©© 
(
©© 
this
©© 
.
©© 
itemID
©© 
>
©© 
-
©© 
$num
©©  
)
©©  !
{
™™ 
return
´´ 
Update
´´ 
(
´´ 
)
´´ 
;
´´  
}
¨¨ 
else
≠≠ 
{
ÆÆ 
return
ØØ 
Create
ØØ 
(
ØØ 
)
ØØ 
;
ØØ  
}
∞∞ 
}
≥≥ 	
public
ππ 
bool
ππ 
Delete
ππ 
(
ππ 
)
ππ 
{
∫∫ 	
bool
ªª 
result
ªª 
=
ªª 
false
ªª 
;
ªª  
result
ΩΩ 
=
ΩΩ 
	DBGallery
ΩΩ 
.
ΩΩ  
DeleteGalleryImage
ΩΩ 1
(
ΩΩ1 2
itemID
ΩΩ2 8
)
ΩΩ8 9
;
ΩΩ9 :
if
øø 
(
øø 
result
øø 
)
øø 
{
¿¿ %
ContentChangedEventArgs
¡¡ '
e
¡¡( )
=
¡¡* +
new
¡¡, /%
ContentChangedEventArgs
¡¡0 G
(
¡¡G H
)
¡¡H I
;
¡¡I J
e
¬¬ 
.
¬¬ 
	IsDeleted
¬¬ 
=
¬¬ 
true
¬¬ "
;
¬¬" #
OnContentChanged
√√  
(
√√  !
e
√√! "
)
√√" #
;
√√# $
}
ƒƒ 
return
∆∆ 
result
∆∆ 
;
∆∆ 
}
»» 	
public
ÿÿ 
static
ÿÿ 
	DataTable
ÿÿ 
GetImagesByPage
ÿÿ  /
(
ÿÿ/ 0
int
ÿÿ0 3
siteId
ÿÿ4 :
,
ÿÿ: ;
int
ÿÿ< ?
pageId
ÿÿ@ F
)
ÿÿF G
{
ŸŸ 	
	DataTable
⁄⁄ 
	dataTable
⁄⁄ 
=
⁄⁄  !
new
⁄⁄" %
	DataTable
⁄⁄& /
(
⁄⁄/ 0
)
⁄⁄0 1
;
⁄⁄1 2
	dataTable
‹‹ 
.
‹‹ 
Columns
‹‹ 
.
‹‹ 
Add
‹‹ !
(
‹‹! "
$str
‹‹" *
,
‹‹* +
typeof
‹‹, 2
(
‹‹2 3
int
‹‹3 6
)
‹‹6 7
)
‹‹7 8
;
‹‹8 9
	dataTable
›› 
.
›› 
Columns
›› 
.
›› 
Add
›› !
(
››! "
$str
››" ,
,
››, -
typeof
››. 4
(
››4 5
int
››5 8
)
››8 9
)
››9 :
;
››: ;
	dataTable
ﬁﬁ 
.
ﬁﬁ 
Columns
ﬁﬁ 
.
ﬁﬁ 
Add
ﬁﬁ !
(
ﬁﬁ! "
$str
ﬁﬁ" /
,
ﬁﬁ/ 0
typeof
ﬁﬁ1 7
(
ﬁﬁ7 8
string
ﬁﬁ8 >
)
ﬁﬁ> ?
)
ﬁﬁ? @
;
ﬁﬁ@ A
	dataTable
ﬂﬂ 
.
ﬂﬂ 
Columns
ﬂﬂ 
.
ﬂﬂ 
Add
ﬂﬂ !
(
ﬂﬂ! "
$str
ﬂﬂ" +
,
ﬂﬂ+ ,
typeof
ﬂﬂ- 3
(
ﬂﬂ3 4
string
ﬂﬂ4 :
)
ﬂﬂ: ;
)
ﬂﬂ; <
;
ﬂﬂ< =
	dataTable
‡‡ 
.
‡‡ 
Columns
‡‡ 
.
‡‡ 
Add
‡‡ !
(
‡‡! "
$str
‡‡" /
,
‡‡/ 0
typeof
‡‡1 7
(
‡‡7 8
string
‡‡8 >
)
‡‡> ?
)
‡‡? @
;
‡‡@ A
	dataTable
·· 
.
·· 
Columns
·· 
.
·· 
Add
·· !
(
··! "
$str
··" -
,
··- .
typeof
··/ 5
(
··5 6
string
··6 <
)
··< =
)
··= >
;
··> ?
	dataTable
‚‚ 
.
‚‚ 
Columns
‚‚ 
.
‚‚ 
Add
‚‚ !
(
‚‚! "
$str
‚‚" .
,
‚‚. /
typeof
‚‚0 6
(
‚‚6 7
DateTime
‚‚7 ?
)
‚‚? @
)
‚‚@ A
;
‚‚A B
using
‰‰ 
(
‰‰ 
IDataReader
‰‰ 
reader
‰‰ %
=
‰‰& '
	DBGallery
‰‰( 1
.
‰‰1 2
GetImagesByPage
‰‰2 A
(
‰‰A B
siteId
‰‰B H
,
‰‰H I
pageId
‰‰J P
)
‰‰P Q
)
‰‰Q R
{
ÂÂ 
while
ÊÊ 
(
ÊÊ 
reader
ÊÊ 
.
ÊÊ 
Read
ÊÊ "
(
ÊÊ" #
)
ÊÊ# $
)
ÊÊ$ %
{
ÁÁ 
DataRow
ËË 
row
ËË 
=
ËË  !
	dataTable
ËË" +
.
ËË+ ,
NewRow
ËË, 2
(
ËË2 3
)
ËË3 4
;
ËË4 5
row
ÍÍ 
[
ÍÍ 
$str
ÍÍ  
]
ÍÍ  !
=
ÍÍ" #
reader
ÍÍ$ *
[
ÍÍ* +
$str
ÍÍ+ 3
]
ÍÍ3 4
;
ÍÍ4 5
row
ÎÎ 
[
ÎÎ 
$str
ÎÎ "
]
ÎÎ" #
=
ÎÎ$ %
reader
ÎÎ& ,
[
ÎÎ, -
$str
ÎÎ- 7
]
ÎÎ7 8
;
ÎÎ8 9
row
ÏÏ 
[
ÏÏ 
$str
ÏÏ %
]
ÏÏ% &
=
ÏÏ' (
reader
ÏÏ) /
[
ÏÏ/ 0
$str
ÏÏ0 =
]
ÏÏ= >
;
ÏÏ> ?
row
ÌÌ 
[
ÌÌ 
$str
ÌÌ !
]
ÌÌ! "
=
ÌÌ# $
reader
ÌÌ% +
[
ÌÌ+ ,
$str
ÌÌ, 5
]
ÌÌ5 6
;
ÌÌ6 7
row
ÓÓ 
[
ÓÓ 
$str
ÓÓ %
]
ÓÓ% &
=
ÓÓ' (
reader
ÓÓ) /
[
ÓÓ/ 0
$str
ÓÓ0 =
]
ÓÓ= >
;
ÓÓ> ?
row
ÔÔ 
[
ÔÔ 
$str
ÔÔ #
]
ÔÔ# $
=
ÔÔ% &
reader
ÔÔ' -
[
ÔÔ- .
$str
ÔÔ. 9
]
ÔÔ9 :
;
ÔÔ: ;
row
 
[
 
$str
 $
]
$ %
=
& '
Convert
( /
.
/ 0

ToDateTime
0 :
(
: ;
reader
; A
[
A B
$str
B N
]
N O
)
O P
;
P Q
	dataTable
ÚÚ 
.
ÚÚ 
Rows
ÚÚ "
.
ÚÚ" #
Add
ÚÚ# &
(
ÚÚ& '
row
ÚÚ' *
)
ÚÚ* +
;
ÚÚ+ ,
}
ÛÛ 
}
ÙÙ 
return
ˆˆ 
	dataTable
ˆˆ 
;
ˆˆ 
}
¯¯ 	
public
ˇˇ 
event
ˇˇ (
ContentChangedEventHandler
ˇˇ /
ContentChanged
ˇˇ0 >
;
ˇˇ> ?
	protected
ÅÅ 
void
ÅÅ 
OnContentChanged
ÅÅ '
(
ÅÅ' (%
ContentChangedEventArgs
ÅÅ( ?
e
ÅÅ@ A
)
ÅÅA B
{
ÇÇ 	
if
ÉÉ 
(
ÉÉ 
ContentChanged
ÉÉ 
!=
ÉÉ !
null
ÉÉ" &
)
ÉÉ& '
{
ÑÑ 
ContentChanged
ÖÖ 
(
ÖÖ 
this
ÖÖ #
,
ÖÖ# $
e
ÖÖ% &
)
ÖÖ& '
;
ÖÖ' (
}
ÜÜ 
}
áá 	
}
èè 
}ëë €D
~D:\Projects\DefensePoint\whitesource-testcases-csharp\CWE79\mojoportal\mojoPortal.Features.Business\KDMediaPlayer\MediaFile.cs
	namespace 	

mojoPortal
 
. 
Features 
. 
Business &
{ 
public 

class 
	MediaFile 
{ 
public 
	MediaFile 
( 
) 
{ 	
} 	
private 
int 
fileId 
= 
- 
$num 
;  
public## 
int## 
FileId## 
{$$ 	
get%% 
{%% 
return%% 
fileId%% 
;%%  
}%%! "
set&& 
{&& 
fileId&& 
=&& 
value&&  
;&&  !
}&&" #
}'' 	
private)) 
int)) 
trackId)) 
=)) 
-)) 
$num))  
;))  !
public-- 
int-- 
TrackId-- 
{.. 	
get// 
{// 
return// 
trackId//  
;//  !
}//" #
set00 
{00 
trackId00 
=00 
value00 !
;00! "
}00# $
}11 	
private33 
string33 
filePath33 
=33  !
string33" (
.33( )
Empty33) .
;33. /
public77 
string77 
FilePath77 
{88 	
get99 
{99 
return99 
filePath99 !
;99! "
}99# $
set:: 
{:: 
filePath:: 
=:: 
value:: "
;::" #
}::$ %
};; 	
private== 
DateTime== 
	addedDate== "
===# $
DateTime==% -
.==- .
UtcNow==. 4
;==4 5
publicAA 
DateTimeAA 
	AddedDateAA !
{BB 	
getCC 
{CC 
returnCC 
	addedDateCC "
;CC" #
}CC$ %
setDD 
{DD 
	addedDateDD 
=DD 
valueDD #
;DD# $
}DD% &
}EE 	
privateGG 
GuidGG 
userGuidGG 
=GG 
GuidGG  $
.GG$ %
EmptyGG% *
;GG* +
publicKK 
GuidKK 
UserGuidKK 
{LL 	
getMM 
{MM 
returnMM 
userGuidMM !
;MM! "
}MM# $
setNN 
{NN 
userGuidNN 
=NN 
valueNN "
;NN" #
}NN$ %
}OO 	
publicXX 
staticXX 
intXX 
AddXX 
(XX 
	MediaFileXX '
	mediaFileXX( 1
)XX1 2
{YY 	
	mediaFileZZ 
.ZZ 
trackIdZZ 
=ZZ 
DBMediaFileZZ  +
.ZZ+ ,
InsertZZ, 2
(ZZ2 3
	mediaFileZZ3 <
.ZZ< =
TrackIdZZ= D
,ZZD E
	mediaFileZZF O
.ZZO P
FilePathZZP X
,ZZX Y
	mediaFileZZZ c
.ZZc d
UserGuidZZd l
)ZZl m
;ZZm n
return[[ 
	mediaFile[[ 
.[[ 
trackId[[ $
;[[$ %
}\\ 	
privatecc 
staticcc 
Listcc 
<cc 
	MediaFilecc %
>cc% &
LoadListFromReadercc' 9
(cc9 :
IDataReadercc: E
readerccF L
)ccL M
{dd 	
Listee 
<ee 
	MediaFileee 
>ee 
mediaFileListee )
=ee* +
newee, /
Listee0 4
<ee4 5
	MediaFileee5 >
>ee> ?
(ee? @
)ee@ A
;eeA B
trygg 
{hh 
whileii 
(ii 
readerii 
.ii 
Readii "
(ii" #
)ii# $
)ii$ %
{jj 
	MediaFilekk 
	mediaFilekk '
=kk( )
newkk* -
	MediaFilekk. 7
(kk7 8
)kk8 9
;kk9 :
	mediaFilell 
.ll 
FileIdll $
=ll% &
Convertll' .
.ll. /
ToInt32ll/ 6
(ll6 7
readerll7 =
[ll= >
$strll> F
]llF G
)llG H
;llH I
	mediaFilemm 
.mm 
TrackIdmm %
=mm& '
Convertmm( /
.mm/ 0
ToInt32mm0 7
(mm7 8
readermm8 >
[mm> ?
$strmm? H
]mmH I
)mmI J
;mmJ K
	mediaFilenn 
.nn 
FilePathnn &
=nn' (
readernn) /
[nn/ 0
$strnn0 :
]nn: ;
.nn; <
ToStringnn< D
(nnD E
)nnE F
;nnF G
	mediaFileoo 
.oo 
	AddedDateoo '
=oo( )
Convertoo* 1
.oo1 2

ToDateTimeoo2 <
(oo< =
readeroo= C
[ooC D
$strooD O
]ooO P
)ooP Q
;ooQ R
	mediaFilepp 
.pp 
UserGuidpp &
=pp' (
newpp) ,
Guidpp- 1
(pp1 2
readerpp2 8
[pp8 9
$strpp9 C
]ppC D
.ppD E
ToStringppE M
(ppM N
)ppN O
)ppO P
;ppP Q
mediaFileListqq !
.qq! "
Addqq" %
(qq% &
	mediaFileqq& /
)qq/ 0
;qq0 1
}ss 
}tt 
finallyuu 
{vv 
readerww 
.ww 
Closeww 
(ww 
)ww 
;ww 
}xx 
returnzz 
mediaFileListzz  
;zz  !
}{{ 	
public
ÇÇ 
static
ÇÇ 
	MediaFile
ÇÇ 
Get
ÇÇ  #
(
ÇÇ# $
int
ÇÇ$ '
fileId
ÇÇ( .
)
ÇÇ. /
{
ÉÉ 	
List
ÑÑ 
<
ÑÑ 
	MediaFile
ÑÑ 
>
ÑÑ 
fileList
ÑÑ $
=
ÑÑ% & 
LoadListFromReader
ÑÑ' 9
(
ÑÑ9 :
DBMediaFile
ÑÑ: E
.
ÑÑE F
Select
ÑÑF L
(
ÑÑL M
fileId
ÑÑM S
)
ÑÑS T
)
ÑÑT U
;
ÑÑU V
if
ÜÜ 
(
ÜÜ 
fileList
ÜÜ 
.
ÜÜ 
Count
ÜÜ 
>
ÜÜ  
$num
ÜÜ! "
)
ÜÜ" #
{
áá 
return
àà 
fileList
àà 
[
àà  
$num
àà  !
]
àà! "
;
àà" #
}
ââ 
return
èè 
null
èè 
;
èè 
}
êê 	
public
ìì 
static
ìì 
List
ìì 
<
ìì 
	MediaFile
ìì $
>
ìì$ %
GetForTrack
ìì& 1
(
ìì1 2
int
ìì2 5
trackId
ìì6 =
)
ìì= >
{
îî 	
return
ïï  
LoadListFromReader
ïï %
(
ïï% &
DBMediaFile
ïï& 1
.
ïï1 2
SelectByTrack
ïï2 ?
(
ïï? @
trackId
ïï@ G
)
ïïG H
)
ïïH I
;
ïïI J
}
ññ 	
public
òò 
static
òò 
List
òò 
<
òò 
	MediaFile
òò $
>
òò$ %
GetForPlayer
òò& 2
(
òò2 3
int
òò3 6
playerId
òò7 ?
)
òò? @
{
ôô 	
return
öö  
LoadListFromReader
öö %
(
öö% &
DBMediaFile
öö& 1
.
öö1 2
SelectByPlayer
öö2 @
(
öö@ A
playerId
ööA I
)
ööI J
)
ööJ K
;
ööK L
}
õõ 	
public
¢¢ 
static
¢¢ 
int
¢¢ 
GetCountByTrack
¢¢ )
(
¢¢) *
int
¢¢* -
trackId
¢¢. 5
)
¢¢5 6
{
££ 	
return
§§ 
DBMediaFile
§§ 
.
§§ 
GetCountByTrack
§§ .
(
§§. /
trackId
§§/ 6
)
§§6 7
;
§§7 8
}
•• 	
public
¨¨ 
static
¨¨ 
bool
¨¨ 
Remove
¨¨ !
(
¨¨! "
int
¨¨" %
fileId
¨¨& ,
)
¨¨, -
{
≠≠ 	
return
ÆÆ 
DBMediaFile
ÆÆ 
.
ÆÆ 
Delete
ÆÆ %
(
ÆÆ% &
fileId
ÆÆ& ,
)
ÆÆ, -
;
ÆÆ- .
}
ØØ 	
public
∂∂ 
static
∂∂ 
bool
∂∂ 
Remove
∂∂ !
(
∂∂! "
	MediaFile
∂∂" +
	mediaFile
∂∂, 5
)
∂∂5 6
{
∑∑ 	
return
∏∏ 
Remove
∏∏ 
(
∏∏ 
	mediaFile
∏∏ #
.
∏∏# $
FileId
∏∏$ *
)
∏∏* +
;
∏∏+ ,
}
ππ 	
}
ªª 
}ºº ËÖ
ÄD:\Projects\DefensePoint\whitesource-testcases-csharp\CWE79\mojoportal\mojoPortal.Features.Business\KDMediaPlayer\MediaPlayer.cs
	namespace 	

mojoPortal
 
. 
Features 
. 
Business &
{ 
public 

class 
MediaPlayer 
{ 
private 
const 
string "
audioPlayerFeatureGuid 3
=4 5
$str6 \
;\ ]
private 
const 
string "
videoPlayerFeatureGuid 3
=4 5
$str6 \
;\ ]
public 
static 
Guid "
AudioPlayerFeatureGuid 1
{ 	
get 
{ 
return 
new 
Guid !
(! ""
audioPlayerFeatureGuid" 8
)8 9
;9 :
}; <
} 	
public 
static 
Guid "
VideoPlayerFeatureGuid 1
{   	
get!! 
{!! 
return!! 
new!! 
Guid!! !
(!!! ""
videoPlayerFeatureGuid!!" 8
)!!8 9
;!!9 :
}!!; <
}"" 	
private77 
int77 
playerId77 
=77 
-77  
$num77  !
;77! "
public;; 
int;; 
PlayerId;; 
{<< 	
get== 
{== 
return== 
playerId== !
;==! "
}==# $
set>> 
{>> 
playerId>> 
=>> 
value>> "
;>>" #
}>>$ %
}?? 	
privateAA 
intAA 
moduleIdAA 
=AA 
-AA  
$numAA  !
;AA! "
publicEE 
intEE 
ModuleIdEE 
{FF 	
getGG 
{GG 
returnGG 
moduleIdGG !
;GG! "
}GG# $
setHH 
{HH 
moduleIdHH 
=HH 
valueHH "
;HH" #
}HH$ %
}II 	
privateKK 
	MediaTypeKK 

playerTypeKK $
=KK% &
	MediaTypeKK' 0
.KK0 1
UnknownKK1 8
;KK8 9
publicOO 
	MediaTypeOO 

PlayerTypeOO #
{PP 	
getQQ 
{QQ 
returnQQ 

playerTypeQQ #
;QQ# $
}QQ% &
setRR 
{RR 

playerTypeRR 
=RR 
valueRR $
;RR$ %
}RR& '
}SS 	
privateUU 
StringUU 
skinNameUU 
=UU  !
StringUU" (
.UU( )
EmptyUU) .
;UU. /
publicYY 
StringYY 
SkinNameYY 
{ZZ 	
get[[ 
{[[ 
return[[ 
skinName[[ !
;[[! "
}[[# $
set\\ 
{\\ 
skinName\\ 
=\\ 
value\\ "
;\\" #
}\\$ %
}]] 	
private__ 
DateTime__ 
createdDate__ $
=__% &
DateTime__' /
.__/ 0
UtcNow__0 6
;__6 7
publiccc 
DateTimecc 
CreatedDatecc #
{dd 	
getee 
{ee 
returnee 
createdDateee $
;ee$ %
}ee& '
setff 
{ff 
createdDateff 
=ff 
valueff  %
;ff% &
}ff' (
}gg 	
privateii 
Guidii 
userGuidii 
=ii 
Guidii  $
.ii$ %
Emptyii% *
;ii* +
publicmm 
Guidmm 
UserGuidmm 
{nn 	
getoo 
{oo 
returnoo 
userGuidoo !
;oo! "
}oo# $
setpp 
{pp 
userGuidpp 
=pp 
valuepp "
;pp" #
}pp$ %
}qq 	
privatess 
Guidss 

moduleGuidss 
=ss  !
Guidss" &
.ss& '
Emptyss' ,
;ss, -
publicww 
Guidww 

ModuleGuidww 
{xx 	
getyy 
{yy 
returnyy 

moduleGuidyy #
;yy# $
}yy% &
setzz 
{zz 

moduleGuidzz 
=zz 
valuezz $
;zz$ %
}zz& '
}{{ 	
private}} 
List}} 
<}} 

MediaTrack}} 
>}}  
mediaTracks}}! ,
=}}- .
new}}/ 2
List}}3 7
<}}7 8

MediaTrack}}8 B
>}}B C
(}}C D
)}}D E
;}}E F
public
ÅÅ 
List
ÅÅ 
<
ÅÅ 

MediaTrack
ÅÅ 
>
ÅÅ 
MediaTracks
ÅÅ  +
{
ÇÇ 	
get
ÉÉ 
{
ÉÉ 
return
ÉÉ 
mediaTracks
ÉÉ $
;
ÉÉ$ %
}
ÉÉ& '
set
ÑÑ 
{
ÑÑ 
mediaTracks
ÑÑ 
=
ÑÑ 
value
ÑÑ  %
;
ÑÑ% &
}
ÑÑ' (
}
ÖÖ 	
public
éé 
static
éé 
int
éé 
Add
éé 
(
éé 
MediaPlayer
éé )
mediaPlayer
éé* 5
)
éé5 6
{
èè 	
int
ëë 
playerId
ëë 
=
ëë 
DBMediaPlayer
ëë (
.
ëë( )
Insert
ëë) /
(
ëë/ 0
mediaPlayer
íí 
.
íí 
ModuleId
íí $
,
íí$ %
mediaPlayer
ìì 
.
ìì 

PlayerType
ìì &
.
ìì& '
ToString
ìì' /
(
ìì/ 0
)
ìì0 1
,
ìì1 2
mediaPlayer
îî 
.
îî 
SkinName
îî $
,
îî$ %
mediaPlayer
ïï 
.
ïï 
UserGuid
ïï $
,
ïï$ %
mediaPlayer
ññ 
.
ññ 

ModuleGuid
ññ &
)
ññ& '
;
ññ' (
mediaPlayer
òò 
.
òò 
playerId
òò  
=
òò! "
playerId
òò# +
;
òò+ ,
foreach
õõ 
(
õõ 

MediaTrack
õõ 
track
õõ  %
in
õõ& (
mediaPlayer
õõ) 4
.
õõ4 5
MediaTracks
õõ5 @
)
õõ@ A
{
úú 
track
ùù 
.
ùù 
PlayerId
ùù 
=
ùù  
playerId
ùù! )
;
ùù) *

MediaTrack
ûû 
.
ûû 
Add
ûû 
(
ûû 
track
ûû $
)
ûû$ %
;
ûû% &
}
üü 
return
°° 
playerId
°° 
;
°° 
}
¢¢ 	
public
§§ 
static
§§ 
bool
§§ 
Update
§§ !
(
§§! "
MediaPlayer
§§" -
mediaPlayer
§§. 9
)
§§9 :
{
•• 	
MediaPlayer
ßß 
currentPlayer
ßß %
=
ßß& '
Get
ßß( +
(
ßß+ ,
mediaPlayer
ßß, 7
.
ßß7 8
PlayerId
ßß8 @
)
ßß@ A
;
ßßA B
bool
™™ 
	isUpdated
™™ 
=
™™ 
DBMediaPlayer
™™ *
.
™™* +
Update
™™+ 1
(
™™1 2
mediaPlayer
´´ 
.
´´ 
PlayerId
´´ $
,
´´$ %
mediaPlayer
¨¨ 
.
¨¨ 
ModuleId
¨¨ $
,
¨¨$ %
mediaPlayer
≠≠ 
.
≠≠ 

PlayerType
≠≠ &
.
≠≠& '
ToString
≠≠' /
(
≠≠/ 0
)
≠≠0 1
,
≠≠1 2
mediaPlayer
ÆÆ 
.
ÆÆ 
SkinName
ÆÆ $
,
ÆÆ$ %
mediaPlayer
ØØ 
.
ØØ 
UserGuid
ØØ $
,
ØØ$ %
mediaPlayer
∞∞ 
.
∞∞ 

ModuleGuid
∞∞ &
)
∞∞& '
;
∞∞' (
if
≥≥ 
(
≥≥ 
	isUpdated
≥≥ 
)
≥≥ 
{
¥¥ 
foreach
∂∂ 
(
∂∂ 

MediaTrack
∂∂ #
currentTrack
∂∂$ 0
in
∂∂1 3
currentPlayer
∂∂4 A
.
∂∂A B
MediaTracks
∂∂B M
)
∂∂M N
{
∑∑ 
bool
∏∏ 

matchFound
∏∏ #
=
∏∏$ %
false
∏∏& +
;
∏∏+ ,
foreach
ππ 
(
ππ 

MediaTrack
ππ '
updatedTrack
ππ( 4
in
ππ5 7
mediaPlayer
ππ8 C
.
ππC D
MediaTracks
ππD O
)
ππO P
{
∫∫ 
if
ªª 
(
ªª 
currentTrack
ªª (
.
ªª( )
TrackId
ªª) 0
==
ªª1 3
updatedTrack
ªª4 @
.
ªª@ A
TrackId
ªªA H
)
ªªH I
{
ºº 

matchFound
ΩΩ &
=
ΩΩ' (
true
ΩΩ) -
;
ΩΩ- .
break
ææ !
;
ææ! "
}
øø 
}
¿¿ 
if
¬¬ 
(
¬¬ 
!
¬¬ 

matchFound
¬¬ #
)
¬¬# $
{
√√ 

MediaTrack
ƒƒ "
.
ƒƒ" #
Remove
ƒƒ# )
(
ƒƒ) *
currentTrack
ƒƒ* 6
)
ƒƒ6 7
;
ƒƒ7 8
}
≈≈ 
}
∆∆ 
foreach
…… 
(
…… 

MediaTrack
…… #
updatedTrack
……$ 0
in
……1 3
mediaPlayer
……4 ?
.
……? @
MediaTracks
……@ K
)
……K L
{
   
if
ÀÀ 
(
ÀÀ 
updatedTrack
ÀÀ $
.
ÀÀ$ %
TrackId
ÀÀ% ,
<=
ÀÀ- /
$num
ÀÀ0 1
)
ÀÀ1 2
{
ÃÃ 
updatedTrack
ÕÕ $
.
ÕÕ$ %
TrackId
ÕÕ% ,
=
ÕÕ- .

MediaTrack
ÕÕ/ 9
.
ÕÕ9 :
Add
ÕÕ: =
(
ÕÕ= >
updatedTrack
ÕÕ> J
)
ÕÕJ K
;
ÕÕK L
}
ŒŒ 
}
œœ 
}
–– 
return
““ 
	isUpdated
““ 
;
““ 
}
”” 	
public
⁄⁄ 
static
⁄⁄ 
bool
⁄⁄ 
Remove
⁄⁄ !
(
⁄⁄! "
int
⁄⁄" %
playerId
⁄⁄& .
)
⁄⁄. /
{
€€ 	
return
‹‹ 
DBMediaPlayer
‹‹  
.
‹‹  !
Delete
‹‹! '
(
‹‹' (
playerId
‹‹( 0
)
‹‹0 1
;
‹‹1 2
}
›› 	
public
‰‰ 
static
‰‰ 
bool
‰‰ 
RemoveByModule
‰‰ )
(
‰‰) *
int
‰‰* -
moduleId
‰‰. 6
)
‰‰6 7
{
ÂÂ 	
return
ÊÊ 
DBMediaPlayer
ÊÊ  
.
ÊÊ  !
DeleteByModule
ÊÊ! /
(
ÊÊ/ 0
moduleId
ÊÊ0 8
)
ÊÊ8 9
;
ÊÊ9 :
}
ÁÁ 	
public
ÈÈ 
static
ÈÈ 
bool
ÈÈ 
RemoveBySite
ÈÈ '
(
ÈÈ' (
int
ÈÈ( +
siteId
ÈÈ, 2
)
ÈÈ2 3
{
ÍÍ 	
return
ÎÎ 
DBMediaPlayer
ÎÎ  
.
ÎÎ  !
DeleteBySite
ÎÎ! -
(
ÎÎ- .
siteId
ÎÎ. 4
)
ÎÎ4 5
;
ÎÎ5 6
}
ÏÏ 	
public
ÙÙ 
static
ÙÙ 
MediaPlayer
ÙÙ !
Get
ÙÙ" %
(
ÙÙ% &
int
ÙÙ& )
playerId
ÙÙ* 2
)
ÙÙ2 3
{
ıı 	
List
˜˜ 
<
˜˜ 
MediaPlayer
˜˜ 
>
˜˜ 

playerList
˜˜ (
=
˜˜) * 
LoadListFromReader
˜˜+ =
(
˜˜= >
DBMediaPlayer
˜˜> K
.
˜˜K L
Select
˜˜L R
(
˜˜R S
playerId
˜˜S [
)
˜˜[ \
)
˜˜\ ]
;
˜˜] ^
if
˚˚ 
(
˚˚ 

playerList
˚˚ 
.
˚˚ 
Count
˚˚  
>
˚˚! "
$num
˚˚# $
)
˚˚$ %
{
¸¸ 
MediaPlayer
˝˝ 
player
˝˝ "
=
˝˝# $

playerList
˝˝% /
[
˝˝/ 0
$num
˝˝0 1
]
˝˝1 2
;
˝˝2 3
player
ˇˇ 
.
ˇˇ 
MediaTracks
ˇˇ "
=
ˇˇ# $

MediaTrack
ˇˇ% /
.
ˇˇ/ 0
GetForPlayer
ˇˇ0 <
(
ˇˇ< =
player
ˇˇ= C
.
ˇˇC D
PlayerId
ˇˇD L
)
ˇˇL M
;
ˇˇM N
return
ÅÅ 
player
ÅÅ 
;
ÅÅ 
}
ÇÇ 
return
ãã 
null
ãã 
;
ãã 
}
åå 	
public
ìì 
static
ìì 
MediaPlayer
ìì !
GetForModule
ìì" .
(
ìì. /
int
ìì/ 2
moduleId
ìì3 ;
)
ìì; <
{
îî 	
List
ññ 
<
ññ 
MediaPlayer
ññ 
>
ññ 

playerList
ññ (
=
ññ) * 
LoadListFromReader
ññ+ =
(
ññ= >
DBMediaPlayer
ññ> K
.
ññK L
SelectByModule
ññL Z
(
ññZ [
moduleId
ññ[ c
)
ññc d
)
ññd e
;
ññe f
if
ôô 
(
ôô 

playerList
ôô 
.
ôô 
Count
ôô  
>
ôô! "
$num
ôô# $
)
ôô$ %
{
öö 
MediaPlayer
õõ 
mediaPlayer
õõ '
=
õõ( )

playerList
õõ* 4
[
õõ4 5
$num
õõ5 6
]
õõ6 7
;
õõ7 8
mediaPlayer
ùù 
.
ùù 
MediaTracks
ùù '
=
ùù( )

MediaTrack
ùù* 4
.
ùù4 5
GetForPlayer
ùù5 A
(
ùùA B
mediaPlayer
ùùB M
.
ùùM N
PlayerId
ùùN V
)
ùùV W
;
ùùW X
return
ûû 
mediaPlayer
ûû "
;
ûû" #
}
üü 
return
°° 
null
°° 
;
°° 
}
££ 	
private
™™ 
static
™™ 
List
™™ 
<
™™ 
MediaPlayer
™™ '
>
™™' ( 
LoadListFromReader
™™) ;
(
™™; <
IDataReader
™™< G
reader
™™H N
)
™™N O
{
´´ 	
List
¨¨ 
<
¨¨ 
MediaPlayer
¨¨ 
>
¨¨ 

playerList
¨¨ (
=
¨¨) *
new
¨¨+ .
List
¨¨/ 3
<
¨¨3 4
MediaPlayer
¨¨4 ?
>
¨¨? @
(
¨¨@ A
)
¨¨A B
;
¨¨B C
try
ÆÆ 
{
ØØ 
while
∞∞ 
(
∞∞ 
reader
∞∞ 
.
∞∞ 
Read
∞∞ "
(
∞∞" #
)
∞∞# $
)
∞∞$ %
{
±± 
MediaPlayer
≤≤ 
player
≤≤  &
=
≤≤' (
new
≤≤) ,
MediaPlayer
≤≤- 8
(
≤≤8 9
)
≤≤9 :
;
≤≤: ;
player
≥≥ 
.
≥≥ 
PlayerId
≥≥ #
=
≥≥$ %
Convert
≥≥& -
.
≥≥- .
ToInt32
≥≥. 5
(
≥≥5 6
reader
≥≥6 <
[
≥≥< =
$str
≥≥= G
]
≥≥G H
)
≥≥H I
;
≥≥I J
player
¥¥ 
.
¥¥ 
ModuleId
¥¥ #
=
¥¥$ %
Convert
¥¥& -
.
¥¥- .
ToInt32
¥¥. 5
(
¥¥5 6
reader
¥¥6 <
[
¥¥< =
$str
¥¥= G
]
¥¥G H
)
¥¥H I
;
¥¥I J
player
µµ 
.
µµ 

PlayerType
µµ %
=
µµ& '
(
µµ( )
	MediaType
µµ) 2
)
µµ2 3
Enum
µµ3 7
.
µµ7 8
Parse
µµ8 =
(
µµ= >
typeof
µµ> D
(
µµD E
	MediaType
µµE N
)
µµN O
,
µµO P
reader
µµQ W
[
µµW X
$str
µµX d
]
µµd e
.
µµe f
ToString
µµf n
(
µµn o
)
µµo p
)
µµp q
;
µµq r
player
∂∂ 
.
∂∂ 
SkinName
∂∂ #
=
∂∂$ %
reader
∂∂& ,
[
∂∂, -
$str
∂∂- 3
]
∂∂3 4
.
∂∂4 5
ToString
∂∂5 =
(
∂∂= >
)
∂∂> ?
;
∂∂? @
player
∑∑ 
.
∑∑ 
CreatedDate
∑∑ &
=
∑∑' (
Convert
∑∑) 0
.
∑∑0 1

ToDateTime
∑∑1 ;
(
∑∑; <
reader
∑∑< B
[
∑∑B C
$str
∑∑C P
]
∑∑P Q
)
∑∑Q R
;
∑∑R S
player
∏∏ 
.
∏∏ 
UserGuid
∏∏ #
=
∏∏$ %
new
∏∏& )
Guid
∏∏* .
(
∏∏. /
reader
∏∏/ 5
[
∏∏5 6
$str
∏∏6 @
]
∏∏@ A
.
∏∏A B
ToString
∏∏B J
(
∏∏J K
)
∏∏K L
)
∏∏L M
;
∏∏M N
player
ππ 
.
ππ 

ModuleGuid
ππ %
=
ππ& '
new
ππ( +
Guid
ππ, 0
(
ππ0 1
reader
ππ1 7
[
ππ7 8
$str
ππ8 D
]
ππD E
.
ππE F
ToString
ππF N
(
ππN O
)
ππO P
)
ππP Q
;
ππQ R

playerList
∫∫ 
.
∫∫ 
Add
∫∫ "
(
∫∫" #
player
∫∫# )
)
∫∫) *
;
∫∫* +
}
ªª 
}
ºº 
finally
ΩΩ 
{
ææ 
reader
øø 
.
øø 
Close
øø 
(
øø 
)
øø 
;
øø 
}
¿¿ 
return
¬¬ 

playerList
¬¬ 
;
¬¬ 
}
ƒƒ 	
}
∆∆ 
}«« ¿º
D:\Projects\DefensePoint\whitesource-testcases-csharp\CWE79\mojoportal\mojoPortal.Features.Business\KDMediaPlayer\MediaTrack.cs
	namespace 	

mojoPortal
 
. 
Features 
. 
Business &
{ 
public 

class 

MediaTrack 
{ 
public 

MediaTrack 
( 
) 
{ 	
} 	
private 
int 
trackId 
= 
- 
$num  
;  !
public"" 
int"" 
TrackId"" 
{## 	
get$$ 
{$$ 
return$$ 
trackId$$  
;$$  !
}$$" #
set%% 
{%% 
trackId%% 
=%% 
value%% !
;%%! "
}%%# $
}&& 	
private(( 
int(( 
playerId(( 
=(( 
-((  
$num((  !
;((! "
public,, 
int,, 
PlayerId,, 
{-- 	
get.. 
{.. 
return.. 
playerId.. !
;..! "
}..# $
set// 
{// 
playerId// 
=// 
value// "
;//" #
}//$ %
}00 	
private22 
	MediaType22 
	trackType22 #
=22$ %
	MediaType22& /
.22/ 0
Unknown220 7
;227 8
public66 
	MediaType66 
	TrackType66 "
{77 	
get88 
{88 
return88 
	trackType88 "
;88" #
}88$ %
set99 
{99 
	trackType99 
=99 
value99 #
;99# $
}99% &
}:: 	
private<< 
int<< 

trackOrder<< 
=<<  
-<<! "
$num<<" #
;<<# $
public@@ 
int@@ 

TrackOrder@@ 
{AA 	
getBB 
{BB 
returnBB 

trackOrderBB #
;BB# $
}BB% &
setCC 
{CC 

trackOrderCC 
=CC 
valueCC $
;CC$ %
}CC& '
}DD 	
privateFF 
stringFF 
nameFF 
=FF 
stringFF $
.FF$ %
EmptyFF% *
;FF* +
publicJJ 
stringJJ 
NameJJ 
{KK 	
getLL 
{LL 
returnLL 
nameLL 
;LL 
}LL  
setMM 
{MM 
nameMM 
=MM 
valueMM 
;MM 
}MM  !
}NN 	
privatePP 
stringPP 
artistPP 
=PP 
stringPP  &
.PP& '
EmptyPP' ,
;PP, -
publicTT 
stringTT 
ArtistTT 
{UU 	
getVV 
{VV 
returnVV 
artistVV 
;VV  
}VV! "
setWW 
{WW 
artistWW 
=WW 
valueWW  
;WW  !
}WW" #
}XX 	
privateZZ 
DateTimeZZ 
createdDateZZ $
=ZZ% &
DateTimeZZ' /
.ZZ/ 0
UtcNowZZ0 6
;ZZ6 7
public^^ 
DateTime^^ 
CreatedDate^^ #
{__ 	
get`` 
{`` 
return`` 
createdDate`` $
;``$ %
}``& '
setaa 
{aa 
createdDateaa 
=aa 
valueaa  %
;aa% &
}aa' (
}bb 	
privatedd 
Guiddd 
userGuiddd 
=dd 
Guiddd  $
.dd$ %
Emptydd% *
;dd* +
publichh 
Guidhh 
UserGuidhh 
{ii 	
getjj 
{jj 
returnjj 
userGuidjj !
;jj! "
}jj# $
setkk 
{kk 
userGuidkk 
=kk 
valuekk "
;kk" #
}kk$ %
}ll 	
privatenn 
Listnn 
<nn 
	MediaFilenn 
>nn 

mediaFilesnn  *
=nn+ ,
newnn- 0
Listnn1 5
<nn5 6
	MediaFilenn6 ?
>nn? @
(nn@ A
)nnA B
;nnB C
publicrr 
Listrr 
<rr 
	MediaFilerr 
>rr 

MediaFilesrr )
{ss 	
gettt 
{tt 
returntt 

mediaFilestt #
;tt# $
}tt% &
setuu 
{uu 

mediaFilesuu 
=uu 
valueuu $
;uu$ %
}uu& '
}vv 	
public
ÄÄ 
bool
ÄÄ 
ContainsFileType
ÄÄ $
(
ÄÄ$ %
String
ÄÄ% +
fileExt
ÄÄ, 3
)
ÄÄ3 4
{
ÅÅ 	
foreach
ÇÇ 
(
ÇÇ 
	MediaFile
ÇÇ 
file
ÇÇ #
in
ÇÇ$ &

mediaFiles
ÇÇ' 1
)
ÇÇ1 2
{
ÉÉ 
String
ÑÑ 
existingExt
ÑÑ "
=
ÑÑ# $
System
ÑÑ% +
.
ÑÑ+ ,
IO
ÑÑ, .
.
ÑÑ. /
Path
ÑÑ/ 3
.
ÑÑ3 4
GetExtension
ÑÑ4 @
(
ÑÑ@ A
file
ÑÑA E
.
ÑÑE F
FilePath
ÑÑF N
)
ÑÑN O
;
ÑÑO P
if
ÖÖ 
(
ÖÖ 
fileExt
ÖÖ 
==
ÖÖ 
existingExt
ÖÖ *
)
ÖÖ* +
{
ÜÜ 
return
áá 
true
áá 
;
áá  
}
àà 
}
ââ 
return
ãã 
false
ãã 
;
ãã 
}
åå 	
public
ïï 
static
ïï 
int
ïï 
Add
ïï 
(
ïï 

MediaTrack
ïï (

mediaTrack
ïï) 3
)
ïï3 4
{
ññ 	
int
òò 
trackId
òò 
=
òò 
DBMediaTrack
òò &
.
òò& '
Insert
òò' -
(
òò- .

mediaTrack
ôô 
.
ôô 
PlayerId
ôô #
,
ôô# $

mediaTrack
öö 
.
öö 
	TrackType
öö $
.
öö$ %
ToString
öö% -
(
öö- .
)
öö. /
,
öö/ 0

mediaTrack
õõ 
.
õõ 

TrackOrder
õõ %
,
õõ% &

mediaTrack
úú 
.
úú 
Name
úú 
,
úú  

mediaTrack
ùù 
.
ùù 
Artist
ùù !
,
ùù! "

mediaTrack
ûû 
.
ûû 
UserGuid
ûû #
)
üü 
;
üü 

mediaTrack
°° 
.
°° 
trackId
°° 
=
°°  
trackId
°°! (
;
°°( )
foreach
§§ 
(
§§ 
	MediaFile
§§ 
file
§§ #
in
§§$ &

mediaTrack
§§' 1
.
§§1 2

MediaFiles
§§2 <
)
§§< =
{
•• 
file
¶¶ 
.
¶¶ 
TrackId
¶¶ 
=
¶¶ 
trackId
¶¶ &
;
¶¶& '
	MediaFile
ßß 
.
ßß 
Add
ßß 
(
ßß 
file
ßß "
)
ßß" #
;
ßß# $
}
®® 
return
™™ 
trackId
™™ 
;
™™ 
}
´´ 	
public
≤≤ 
static
≤≤ 
bool
≤≤ 
Update
≤≤ !
(
≤≤! "

MediaTrack
≤≤" ,

mediaTrack
≤≤- 7
)
≤≤7 8
{
≥≥ 	

MediaTrack
µµ 
currentTrack
µµ #
=
µµ$ %
Get
µµ& )
(
µµ) *

mediaTrack
µµ* 4
.
µµ4 5
TrackId
µµ5 <
)
µµ< =
;
µµ= >
bool
∏∏ 
	isUpdated
∏∏ 
=
∏∏ 
DBMediaTrack
∏∏ )
.
∏∏) *
Update
∏∏* 0
(
∏∏0 1

mediaTrack
ππ 
.
ππ 
TrackId
ππ "
,
ππ" #

mediaTrack
∫∫ 
.
∫∫ 
PlayerId
∫∫ #
,
∫∫# $

mediaTrack
ªª 
.
ªª 
	TrackType
ªª $
.
ªª$ %
ToString
ªª% -
(
ªª- .
)
ªª. /
,
ªª/ 0

mediaTrack
ºº 
.
ºº 

TrackOrder
ºº %
,
ºº% &

mediaTrack
ΩΩ 
.
ΩΩ 
Name
ΩΩ 
,
ΩΩ  

mediaTrack
ææ 
.
ææ 
Artist
ææ !
,
ææ! "

mediaTrack
øø 
.
øø 
UserGuid
øø #
)
øø# $
;
øø$ %
if
¬¬ 
(
¬¬ 
	isUpdated
¬¬ 
)
¬¬ 
{
√√ 
foreach
≈≈ 
(
≈≈ 
	MediaFile
≈≈ "
currentFile
≈≈# .
in
≈≈/ 1
currentTrack
≈≈2 >
.
≈≈> ?

MediaFiles
≈≈? I
)
≈≈I J
{
∆∆ 
bool
«« 

matchFound
«« #
=
««$ %
false
««& +
;
««+ ,
foreach
»» 
(
»» 
	MediaFile
»» &
updatedFile
»»' 2
in
»»3 5

mediaTrack
»»6 @
.
»»@ A

MediaFiles
»»A K
)
»»K L
{
…… 
if
   
(
   
currentFile
   '
.
  ' (
FileId
  ( .
==
  / 1
updatedFile
  2 =
.
  = >
FileId
  > D
)
  D E
{
ÀÀ 

matchFound
ÃÃ &
=
ÃÃ' (
true
ÃÃ) -
;
ÃÃ- .
break
ÕÕ !
;
ÕÕ! "
}
ŒŒ 
}
œœ 
if
—— 
(
—— 
!
—— 

matchFound
—— #
)
——# $
{
““ 
	MediaFile
”” !
.
””! "
Remove
””" (
(
””( )
currentFile
””) 4
)
””4 5
;
””5 6
}
‘‘ 
}
’’ 
foreach
ÿÿ 
(
ÿÿ 
	MediaFile
ÿÿ "
updatedFile
ÿÿ# .
in
ÿÿ/ 1

mediaTrack
ÿÿ2 <
.
ÿÿ< =

MediaFiles
ÿÿ= G
)
ÿÿG H
{
ŸŸ 
if
⁄⁄ 
(
⁄⁄ 
updatedFile
⁄⁄ #
.
⁄⁄# $
FileId
⁄⁄$ *
<=
⁄⁄+ -
$num
⁄⁄. /
)
⁄⁄/ 0
{
€€ 
updatedFile
‹‹ #
.
‹‹# $
FileId
‹‹$ *
=
‹‹+ ,
	MediaFile
‹‹- 6
.
‹‹6 7
Add
‹‹7 :
(
‹‹: ;
updatedFile
‹‹; F
)
‹‹F G
;
‹‹G H
}
›› 
}
ﬁﬁ 
}
ﬂﬂ 
return
·· 
	isUpdated
·· 
;
·· 
}
‚‚ 	
private
ÈÈ 
static
ÈÈ 
List
ÈÈ 
<
ÈÈ 

MediaTrack
ÈÈ &
>
ÈÈ& ' 
LoadListFromReader
ÈÈ( :
(
ÈÈ: ;
IDataReader
ÈÈ; F
reader
ÈÈG M
)
ÈÈM N
{
ÍÍ 	
List
ÎÎ 
<
ÎÎ 

MediaTrack
ÎÎ 
>
ÎÎ 
mediaTrackList
ÎÎ +
=
ÎÎ, -
new
ÎÎ. 1
List
ÎÎ2 6
<
ÎÎ6 7

MediaTrack
ÎÎ7 A
>
ÎÎA B
(
ÎÎB C
)
ÎÎC D
;
ÎÎD E
try
ÌÌ 
{
ÓÓ 
while
ÔÔ 
(
ÔÔ 
reader
ÔÔ 
.
ÔÔ 
Read
ÔÔ "
(
ÔÔ" #
)
ÔÔ# $
)
ÔÔ$ %
{
 

MediaTrack
ÒÒ 

mediaTrack
ÒÒ )
=
ÒÒ* +
new
ÒÒ, /

MediaTrack
ÒÒ0 :
(
ÒÒ: ;
)
ÒÒ; <
;
ÒÒ< =

mediaTrack
ÚÚ 
.
ÚÚ 
TrackId
ÚÚ &
=
ÚÚ' (
Convert
ÚÚ) 0
.
ÚÚ0 1
ToInt32
ÚÚ1 8
(
ÚÚ8 9
reader
ÚÚ9 ?
[
ÚÚ? @
$str
ÚÚ@ I
]
ÚÚI J
)
ÚÚJ K
;
ÚÚK L

mediaTrack
ÛÛ 
.
ÛÛ 
PlayerId
ÛÛ '
=
ÛÛ( )
Convert
ÛÛ* 1
.
ÛÛ1 2
ToInt32
ÛÛ2 9
(
ÛÛ9 :
reader
ÛÛ: @
[
ÛÛ@ A
$str
ÛÛA K
]
ÛÛK L
)
ÛÛL M
;
ÛÛM N

mediaTrack
ÙÙ 
.
ÙÙ 
	TrackType
ÙÙ (
=
ÙÙ) *
(
ÙÙ+ ,
	MediaType
ÙÙ, 5
)
ÙÙ5 6
Enum
ÙÙ6 :
.
ÙÙ: ;
Parse
ÙÙ; @
(
ÙÙ@ A
typeof
ÙÙA G
(
ÙÙG H
	MediaType
ÙÙH Q
)
ÙÙQ R
,
ÙÙR S
reader
ÙÙT Z
[
ÙÙZ [
$str
ÙÙ[ f
]
ÙÙf g
.
ÙÙg h
ToString
ÙÙh p
(
ÙÙp q
)
ÙÙq r
)
ÙÙr s
;
ÙÙs t

mediaTrack
ıı 
.
ıı 

TrackOrder
ıı )
=
ıı* +
Convert
ıı, 3
.
ıı3 4
ToInt32
ıı4 ;
(
ıı; <
reader
ıı< B
[
ııB C
$str
ııC O
]
ııO P
)
ııP Q
;
ııQ R

mediaTrack
ˆˆ 
.
ˆˆ 
Name
ˆˆ #
=
ˆˆ$ %
reader
ˆˆ& ,
[
ˆˆ, -
$str
ˆˆ- 3
]
ˆˆ3 4
.
ˆˆ4 5
ToString
ˆˆ5 =
(
ˆˆ= >
)
ˆˆ> ?
;
ˆˆ? @

mediaTrack
˜˜ 
.
˜˜ 
Artist
˜˜ %
=
˜˜& '
reader
˜˜( .
[
˜˜. /
$str
˜˜/ 7
]
˜˜7 8
.
˜˜8 9
ToString
˜˜9 A
(
˜˜A B
)
˜˜B C
;
˜˜C D

mediaTrack
¯¯ 
.
¯¯ 
CreatedDate
¯¯ *
=
¯¯+ ,
Convert
¯¯- 4
.
¯¯4 5

ToDateTime
¯¯5 ?
(
¯¯? @
reader
¯¯@ F
[
¯¯F G
$str
¯¯G T
]
¯¯T U
)
¯¯U V
;
¯¯V W

mediaTrack
˘˘ 
.
˘˘ 
UserGuid
˘˘ '
=
˘˘( )
new
˘˘* -
Guid
˘˘. 2
(
˘˘2 3
reader
˘˘3 9
[
˘˘9 :
$str
˘˘: D
]
˘˘D E
.
˘˘E F
ToString
˘˘F N
(
˘˘N O
)
˘˘O P
)
˘˘P Q
;
˘˘Q R
mediaTrackList
˙˙ "
.
˙˙" #
Add
˙˙# &
(
˙˙& '

mediaTrack
˙˙' 1
)
˙˙1 2
;
˙˙2 3
}
˚˚ 
}
¸¸ 
finally
˝˝ 
{
˛˛ 
reader
ˇˇ 
.
ˇˇ 
Close
ˇˇ 
(
ˇˇ 
)
ˇˇ 
;
ˇˇ 
}
ÄÄ 
return
ÇÇ 
mediaTrackList
ÇÇ !
;
ÇÇ! "
}
ÑÑ 	
public
ãã 
static
ãã 

MediaTrack
ãã  
Get
ãã! $
(
ãã$ %
int
ãã% (
trackId
ãã) 0
)
ãã0 1
{
åå 	
List
éé 
<
éé 

MediaTrack
éé 
>
éé 
	trackList
éé &
=
éé' ( 
LoadListFromReader
éé) ;
(
éé; <
DBMediaTrack
éé< H
.
ééH I
Select
ééI O
(
ééO P
trackId
ééP W
)
ééW X
)
ééX Y
;
ééY Z

MediaTrack
èè 

mediaTrack
èè !
=
èè" #
new
èè$ '

MediaTrack
èè( 2
(
èè2 3
)
èè3 4
;
èè4 5
if
íí 
(
íí 
	trackList
íí 
.
íí 
Count
íí 
>
íí  !
$num
íí" #
)
íí# $
{
ìì 

mediaTrack
îî 
=
îî 
	trackList
îî &
[
îî& '
$num
îî' (
]
îî( )
;
îî) *

mediaTrack
ññ 
.
ññ 

MediaFiles
ññ %
=
ññ& '
	MediaFile
ññ( 1
.
ññ1 2
GetForTrack
ññ2 =
(
ññ= >
trackId
ññ> E
)
ññE F
;
ññF G
return
óó 

mediaTrack
óó !
;
óó! "
}
òò 
return
õõ 
null
õõ 
;
õõ 
}
úú 	
public
££ 
static
££ 
List
££ 
<
££ 

MediaTrack
££ %
>
££% &
GetForPlayer
££' 3
(
££3 4
int
££4 7
playerId
££8 @
)
££@ A
{
§§ 	
List
¶¶ 
<
¶¶ 

MediaTrack
¶¶ 
>
¶¶ 
mediaTracks
¶¶ (
=
¶¶) * 
LoadListFromReader
¶¶+ =
(
¶¶= >
DBMediaTrack
¶¶> J
.
¶¶J K
SelectByPlayer
¶¶K Y
(
¶¶Y Z
playerId
¶¶Z b
)
¶¶b c
)
¶¶c d
;
¶¶d e
List
≥≥ 
<
≥≥ 
	MediaFile
≥≥ 
>
≥≥ 

mediaFiles
≥≥ &
=
≥≥' (
	MediaFile
≥≥) 2
.
≥≥2 3
GetForPlayer
≥≥3 ?
(
≥≥? @
playerId
≥≥@ H
)
≥≥H I
;
≥≥I J
foreach
µµ 
(
µµ 

MediaTrack
µµ 
track
µµ  %
in
µµ& (
mediaTracks
µµ) 4
)
µµ4 5
{
∂∂ 
foreach
∑∑ 
(
∑∑ 
	MediaFile
∑∑ "
file
∑∑# '
in
∑∑( *

mediaFiles
∑∑+ 5
)
∑∑5 6
{
∏∏ 
if
ππ 
(
ππ 
file
ππ 
.
ππ 
TrackId
ππ $
==
ππ% '
track
ππ( -
.
ππ- .
trackId
ππ. 5
)
ππ5 6
{
∫∫ 
track
ªª 
.
ªª 

MediaFiles
ªª (
.
ªª( )
Add
ªª) ,
(
ªª, -
file
ªª- 1
)
ªª1 2
;
ªª2 3
}
ºº 
}
ΩΩ 
}
ææ 
return
¿¿ 
mediaTracks
¿¿ 
;
¿¿ 
}
¡¡ 	
public
»» 
static
»» 
int
»» 
GetCountForPlayer
»» +
(
»»+ ,
int
»», /
playerId
»»0 8
)
»»8 9
{
…… 	
return
   
DBMediaTrack
   
.
    
GetCountByPlayer
    0
(
  0 1
playerId
  1 9
)
  9 :
;
  : ;
}
ÀÀ 	
public
““ 
static
““ 
void
““ 
MoveTrackUp
““ &
(
““& '
int
““' *
playerId
““+ 3
,
““3 4
int
““5 8

trackOrder
““9 C
)
““C D
{
”” 	
if
‘‘ 
(
‘‘ 

trackOrder
‘‘ 
>
‘‘ 
$num
‘‘ 
)
‘‘ 
{
’’ 
List
÷÷ 
<
÷÷ 

MediaTrack
÷÷ 
>
÷÷  
tracks
÷÷! '
=
÷÷( )
GetForPlayer
÷÷* 6
(
÷÷6 7
playerId
÷÷7 ?
)
÷÷? @
;
÷÷@ A

MediaTrack
ŸŸ 
upTrack
ŸŸ "
=
ŸŸ# $
new
ŸŸ% (

MediaTrack
ŸŸ) 3
(
ŸŸ3 4
)
ŸŸ4 5
;
ŸŸ5 6
foreach
⁄⁄ 
(
⁄⁄ 

MediaTrack
⁄⁄ #
mt
⁄⁄$ &
in
⁄⁄' )
tracks
⁄⁄* 0
)
⁄⁄0 1
{
€€ 
if
‹‹ 
(
‹‹ 
mt
‹‹ 
.
‹‹ 

TrackOrder
‹‹ %
==
‹‹& (

trackOrder
‹‹) 3
)
‹‹3 4
{
›› 
upTrack
ﬁﬁ 
=
ﬁﬁ  !
mt
ﬁﬁ" $
;
ﬁﬁ$ %
}
ﬂﬂ 
}
‡‡ 

MediaTrack
„„ 
	downTrack
„„ $
=
„„% &
new
„„' *

MediaTrack
„„+ 5
(
„„5 6
)
„„6 7
;
„„7 8
foreach
‰‰ 
(
‰‰ 

MediaTrack
‰‰ #
mt
‰‰$ &
in
‰‰' )
tracks
‰‰* 0
)
‰‰0 1
{
ÂÂ 
if
ÊÊ 
(
ÊÊ 
mt
ÊÊ 
.
ÊÊ 

TrackOrder
ÊÊ %
==
ÊÊ& (
upTrack
ÊÊ) 0
.
ÊÊ0 1

TrackOrder
ÊÊ1 ;
-
ÊÊ< =
$num
ÊÊ> ?
)
ÊÊ? @
{
ÁÁ 
	downTrack
ËË !
=
ËË" #
mt
ËË$ &
;
ËË& '
}
ÈÈ 
}
ÍÍ 
upTrack
ÌÌ 
.
ÌÌ 

TrackOrder
ÌÌ "
--
ÌÌ" $
;
ÌÌ$ %
	downTrack
ÓÓ 
.
ÓÓ 

TrackOrder
ÓÓ $
++
ÓÓ$ &
;
ÓÓ& '
Update
 
(
 
upTrack
 
)
 
;
  
Update
ÒÒ 
(
ÒÒ 
	downTrack
ÒÒ  
)
ÒÒ  !
;
ÒÒ! "
}
ÚÚ 
}
ÙÙ 	
public
˚˚ 
static
˚˚ 
void
˚˚ 
MoveTrackDown
˚˚ (
(
˚˚( )
int
˚˚) ,
playerId
˚˚- 5
,
˚˚5 6
int
˚˚7 :

trackOrder
˚˚; E
)
˚˚E F
{
¸¸ 	
if
˝˝ 
(
˝˝ 

trackOrder
˝˝ 
<
˝˝ 
GetCountForPlayer
˝˝ .
(
˝˝. /
playerId
˝˝/ 7
)
˝˝7 8
)
˝˝8 9
{
˛˛ 
List
ˇˇ 
<
ˇˇ 

MediaTrack
ˇˇ 
>
ˇˇ  
tracks
ˇˇ! '
=
ˇˇ( )
GetForPlayer
ˇˇ* 6
(
ˇˇ6 7
playerId
ˇˇ7 ?
)
ˇˇ? @
;
ˇˇ@ A

MediaTrack
ÇÇ 
	downTrack
ÇÇ $
=
ÇÇ% &
new
ÇÇ' *

MediaTrack
ÇÇ+ 5
(
ÇÇ5 6
)
ÇÇ6 7
;
ÇÇ7 8
foreach
ÉÉ 
(
ÉÉ 

MediaTrack
ÉÉ #
mt
ÉÉ$ &
in
ÉÉ' )
tracks
ÉÉ* 0
)
ÉÉ0 1
{
ÑÑ 
if
ÖÖ 
(
ÖÖ 
mt
ÖÖ 
.
ÖÖ 

TrackOrder
ÖÖ %
==
ÖÖ& (

trackOrder
ÖÖ) 3
)
ÖÖ3 4
{
ÜÜ 
	downTrack
áá !
=
áá" #
mt
áá$ &
;
áá& '
}
àà 
}
ââ 

MediaTrack
åå 
upTrack
åå "
=
åå# $
new
åå% (

MediaTrack
åå) 3
(
åå3 4
)
åå4 5
;
åå5 6
foreach
çç 
(
çç 

MediaTrack
çç #
mt
çç$ &
in
çç' )
tracks
çç* 0
)
çç0 1
{
éé 
if
èè 
(
èè 
mt
èè 
.
èè 

TrackOrder
èè %
==
èè& (
	downTrack
èè) 2
.
èè2 3

TrackOrder
èè3 =
+
èè> ?
$num
èè@ A
)
èèA B
{
êê 
upTrack
ëë 
=
ëë  !
mt
ëë" $
;
ëë$ %
}
íí 
}
ìì 
upTrack
ññ 
.
ññ 

TrackOrder
ññ "
--
ññ" $
;
ññ$ %
	downTrack
óó 
.
óó 

TrackOrder
óó $
++
óó$ &
;
óó& '
Update
ôô 
(
ôô 
upTrack
ôô 
)
ôô 
;
ôô  
Update
öö 
(
öö 
	downTrack
öö  
)
öö  !
;
öö! "
}
õõ 
}
ùù 	
public
§§ 
static
§§ 
bool
§§ 
Remove
§§ !
(
§§! "
int
§§" %
trackId
§§& -
)
§§- .
{
•• 	
return
¶¶ 
Remove
¶¶ 
(
¶¶ 
Get
¶¶ 
(
¶¶ 
trackId
¶¶ %
)
¶¶% &
)
¶¶& '
;
¶¶' (
}
ßß 	
public
ÆÆ 
static
ÆÆ 
bool
ÆÆ 
Remove
ÆÆ !
(
ÆÆ! "

MediaTrack
ÆÆ" ,

mediaTrack
ÆÆ- 7
)
ÆÆ7 8
{
ØØ 	
bool
±± 
successfulRemove
±± !
=
±±" #
DBMediaTrack
±±$ 0
.
±±0 1
Delete
±±1 7
(
±±7 8

mediaTrack
±±8 B
.
±±B C
TrackId
±±C J
)
±±J K
;
±±K L
if
¥¥ 
(
¥¥ 
successfulRemove
¥¥  
)
¥¥  !
{
µµ 
DBMediaTrack
∂∂ 
.
∂∂ (
AdjustTrackOrdersForDelete
∂∂ 7
(
∂∂7 8

mediaTrack
∂∂8 B
.
∂∂B C
PlayerId
∂∂C K
,
∂∂K L

mediaTrack
∂∂M W
.
∂∂W X

TrackOrder
∂∂X b
)
∂∂b c
;
∂∂c d
}
∑∑ 
return
ππ 
successfulRemove
ππ #
;
ππ# $
}
∫∫ 	
public
¡¡ 
static
¡¡ 
bool
¡¡ 
RemoveForPlayer
¡¡ *
(
¡¡* +
int
¡¡+ .
playerId
¡¡/ 7
)
¡¡7 8
{
¬¬ 	
return
√√ 
DBMediaTrack
√√ 
.
√√  
DeleteByPlayer
√√  .
(
√√. /
playerId
√√/ 7
)
√√7 8
;
√√8 9
}
ƒƒ 	
}
∆∆ 
}«« ®
~D:\Projects\DefensePoint\whitesource-testcases-csharp\CWE79\mojoportal\mojoPortal.Features.Business\KDMediaPlayer\MediaType.cs
	namespace 	

mojoPortal
 
. 
Features 
. 
Business &
{ 
public 

enum 
	MediaType 
{ 
Unknown		 
=		 
$num		 
,		 
Audio

 
=

 
$num

 
,

 
Video 
= 
$num 
} 
} ´∫
wD:\Projects\DefensePoint\whitesource-testcases-csharp\CWE79\mojoportal\mojoPortal.Features.Business\LinkModule\Links.cs
	namespace 	

mojoPortal
 
. 
Business 
{ 
public 

class 
Link 
: 
IIndexableContent )
{ 
private 
const 
string 
featureGuid (
=) *
$str+ Q
;Q R
public 
static 
Guid 
FeatureGuid &
{ 	
get 
{ 
return 
new 
Guid !
(! "
featureGuid" -
)- .
;. /
}0 1
} 	
public## 
Link## 
(## 
)## 
{$$ 	
}$$
 
public'' 
Link'' 
('' 
int'' 
itemId'' 
)'' 
{(( 	
if)) 
()) 
itemId)) 
>)) 
-)) 
$num)) 
))) 
{** 
GetLink++ 
(++ 
itemId++ 
)++ 
;++  
},, 
}.. 	
private44 
static44 
readonly44 
ILog44  $
log44% (
=44) *

LogManager44+ 5
.445 6
	GetLogger446 ?
(44? @
typeof44@ F
(44F G
Link44G K
)44K L
)44L M
;44M N
private66 
Guid66 
itemGuid66 
=66 
Guid66  $
.66$ %
Empty66% *
;66* +
private77 
Guid77 

moduleGuid77 
=77  !
Guid77" &
.77& '
Empty77' ,
;77, -
private88 
Int3288 
itemID88 
=88 
-88  
$num88  !
;88! "
private99 
Int3299 
moduleID99 
=99  
-99! "
$num99" #
;99# $
private:: 
Int32:: 
createdByUser:: #
=::$ %
-::& '
$num::' (
;::( )
private;; 
DateTime;; 
createdDate;; $
=;;% &
DateTime;;' /
.;;/ 0
Now;;0 3
;;;3 4
private<< 
String<< 
title<< 
=<< 
string<< %
.<<% &
Empty<<& +
;<<+ ,
private== 
String== 
url== 
=== 
string== #
.==# $
Empty==$ )
;==) *
private>> 
String>> 
target>> 
=>> 
String>>  &
.>>& '
Empty>>' ,
;>>, -
private?? 
Int32?? 
	viewOrder?? 
=??  !
$num??" %
;??% &
private@@ 
String@@ 
description@@ "
=@@# $
string@@% +
.@@+ ,
Empty@@, 1
;@@1 2
privateAA 
GuidAA 
userGuidAA 
=AA 
GuidAA  $
.AA$ %
EmptyAA% *
;AA* +
publicHH 
GuidHH 
ItemGuidHH 
{II 	
getJJ 
{JJ 
returnJJ 
itemGuidJJ !
;JJ! "
}JJ# $
}KK 	
publicMM 
GuidMM 

ModuleGuidMM 
{NN 	
getOO 
{OO 
returnOO 

moduleGuidOO #
;OO# $
}OO% &
setPP 
{PP 

moduleGuidPP 
=PP 
valuePP $
;PP$ %
}PP& '
}QQ 	
publicSS 
Int32SS 
ItemIdSS 
{TT 	
getUU 
{UU 
returnUU 
itemIDUU 
;UU  
}UU! "
setVV 
{VV 
itemIDVV 
=VV 
valueVV  
;VV  !
}VV" #
}WW 	
publicYY 
Int32YY 
ModuleIdYY 
{ZZ 	
get[[ 
{[[ 
return[[ 
moduleID[[ !
;[[! "
}[[# $
set\\ 
{\\ 
moduleID\\ 
=\\ 
value\\ "
;\\" #
}\\$ %
}]] 	
public__ 
Int32__ 
CreatedByUser__ "
{`` 	
getaa 
{aa 
returnaa 
createdByUseraa &
;aa& '
}aa( )
setbb 
{bb 
createdByUserbb 
=bb  !
valuebb" '
;bb' (
}bb) *
}cc 	
publicee 
Guidee 
UserGuidee 
{ff 	
getgg 
{gg 
returngg 
userGuidgg !
;gg! "
}gg# $
sethh 
{hh 
userGuidhh 
=hh 
valuehh "
;hh" #
}hh$ %
}ii 	
publickk 
DateTimekk 
CreatedDatekk #
{ll 	
getmm 
{mm 
returnmm 
createdDatemm $
;mm$ %
}mm& '
setnn 
{nn 
createdDatenn 
=nn 
valuenn  %
;nn% &
}nn' (
}oo 	
publicqq 
Stringqq 
Titleqq 
{rr 	
getss 
{ss 
returnss 
titless 
;ss 
}ss  !
settt 
{tt 
titlett 
=tt 
valuett 
;tt  
}tt! "
}uu 	
publicww 
Stringww 
Urlww 
{xx 	
getyy 
{yy 
returnyy 
urlyy 
;yy 
}yy 
setzz 
{zz 
urlzz 
=zz 
valuezz 
;zz 
}zz  
}{{ 	
public}} 
String}} 
Target}} 
{~~ 	
get 
{ 
return 
target 
;  
}! "
set
ÄÄ 
{
ÄÄ 
target
ÄÄ 
=
ÄÄ 
value
ÄÄ  
.
ÄÄ  !
Trim
ÄÄ! %
(
ÄÄ% &
)
ÄÄ& '
;
ÄÄ' (
}
ÄÄ) *
}
ÅÅ 	
public
ÉÉ 
Int32
ÉÉ 
	ViewOrder
ÉÉ 
{
ÑÑ 	
get
ÖÖ 
{
ÖÖ 
return
ÖÖ 
	viewOrder
ÖÖ "
;
ÖÖ" #
}
ÖÖ$ %
set
ÜÜ 
{
ÜÜ 
	viewOrder
ÜÜ 
=
ÜÜ 
value
ÜÜ #
;
ÜÜ# $
}
ÜÜ% &
}
áá 	
public
ââ 
String
ââ 
Description
ââ !
{
ää 	
get
ãã 
{
ãã 
return
ãã 
description
ãã $
;
ãã$ %
}
ãã& '
set
åå 
{
åå 
description
åå 
=
åå 
value
åå  %
;
åå% &
}
åå' (
}
çç 	
private
îî 
void
îî 
GetLink
îî 
(
îî 
Int32
îî "
itemId
îî# )
)
îî) *
{
ïï 	
using
ññ 
(
ññ 
IDataReader
ññ 
reader
ññ %
=
ññ& '
DBLinks
ññ( /
.
ññ/ 0
GetLink
ññ0 7
(
ññ7 8
itemId
ññ8 >
)
ññ> ?
)
ññ? @
{
óó 
if
òò 
(
òò 
reader
òò 
.
òò 
Read
òò 
(
òò  
)
òò  !
)
òò! "
{
ôô 
this
öö 
.
öö 
itemID
öö 
=
öö  !
Convert
öö" )
.
öö) *
ToInt32
öö* 1
(
öö1 2
reader
öö2 8
[
öö8 9
$str
öö9 A
]
ööA B
,
ööB C
CultureInfo
ööD O
.
ööO P
InvariantCulture
ööP `
)
öö` a
;
ööa b
this
õõ 
.
õõ 
moduleID
õõ !
=
õõ" #
Convert
õõ$ +
.
õõ+ ,
ToInt32
õõ, 3
(
õõ3 4
reader
õõ4 :
[
õõ: ;
$str
õõ; E
]
õõE F
,
õõF G
CultureInfo
õõH S
.
õõS T
InvariantCulture
õõT d
)
õõd e
;
õõe f
this
úú 
.
úú 
createdByUser
úú &
=
úú' (
Convert
úú) 0
.
úú0 1
ToInt32
úú1 8
(
úú8 9
reader
úú9 ?
[
úú? @
$str
úú@ K
]
úúK L
,
úúL M
CultureInfo
úúN Y
.
úúY Z
InvariantCulture
úúZ j
)
úúj k
;
úúk l
this
ùù 
.
ùù 
createdDate
ùù $
=
ùù% &
Convert
ùù' .
.
ùù. /

ToDateTime
ùù/ 9
(
ùù9 :
reader
ùù: @
[
ùù@ A
$str
ùùA N
]
ùùN O
,
ùùO P
CultureInfo
ùùQ \
.
ùù\ ]
CurrentCulture
ùù] k
)
ùùk l
;
ùùl m
this
ûû 
.
ûû 
title
ûû 
=
ûû  
reader
ûû! '
[
ûû' (
$str
ûû( /
]
ûû/ 0
.
ûû0 1
ToString
ûû1 9
(
ûû9 :
)
ûû: ;
;
ûû; <
this
üü 
.
üü 
url
üü 
=
üü 
reader
üü %
[
üü% &
$str
üü& +
]
üü+ ,
.
üü, -
ToString
üü- 5
(
üü5 6
)
üü6 7
;
üü7 8
this
†† 
.
†† 
	viewOrder
†† "
=
††# $
Convert
††% ,
.
††, -
ToInt32
††- 4
(
††4 5
reader
††5 ;
[
††; <
$str
††< G
]
††G H
)
††H I
;
††I J
this
°° 
.
°° 
description
°° $
=
°°% &
reader
°°' -
[
°°- .
$str
°°. ;
]
°°; <
.
°°< =
ToString
°°= E
(
°°E F
)
°°F G
;
°°G H
this
¢¢ 
.
¢¢ 
target
¢¢ 
=
¢¢  !
reader
¢¢" (
[
¢¢( )
$str
¢¢) 1
]
¢¢1 2
.
¢¢2 3
ToString
¢¢3 ;
(
¢¢; <
)
¢¢< =
;
¢¢= >
string
§§ 
test
§§ 
=
§§  !
reader
§§" (
[
§§( )
$str
§§) 3
]
§§3 4
.
§§4 5
ToString
§§5 =
(
§§= >
)
§§> ?
;
§§? @
this
¶¶ 
.
¶¶ 
itemGuid
¶¶ !
=
¶¶" #
new
¶¶$ '
Guid
¶¶( ,
(
¶¶, -
reader
¶¶- 3
[
¶¶3 4
$str
¶¶4 >
]
¶¶> ?
.
¶¶? @
ToString
¶¶@ H
(
¶¶H I
)
¶¶I J
)
¶¶J K
;
¶¶K L
this
ßß 
.
ßß 

moduleGuid
ßß #
=
ßß$ %
new
ßß& )
Guid
ßß* .
(
ßß. /
reader
ßß/ 5
[
ßß5 6
$str
ßß6 B
]
ßßB C
.
ßßC D
ToString
ßßD L
(
ßßL M
)
ßßM N
)
ßßN O
;
ßßO P
string
®® 
user
®® 
=
®®  !
reader
®®" (
[
®®( )
$str
®®) 3
]
®®3 4
.
®®4 5
ToString
®®5 =
(
®®= >
)
®®> ?
;
®®? @
if
©© 
(
©© 
user
©© 
.
©© 
Length
©© #
==
©©$ &
$num
©©' )
)
©©) *
this
©©+ /
.
©©/ 0
userGuid
©©0 8
=
©©9 :
new
©©; >
Guid
©©? C
(
©©C D
user
©©D H
)
©©H I
;
©©I J
}
´´ 
}
≠≠ 
}
ØØ 	
private
±± 
bool
±± 
Create
±± 
(
±± 
)
±± 
{
≤≤ 	
int
≥≥ 
newID
≥≥ 
=
≥≥ 
-
≥≥ 
$num
≥≥ 
;
≥≥ 
this
¥¥ 
.
¥¥ 
itemGuid
¥¥ 
=
¥¥ 
Guid
¥¥  
.
¥¥  !
NewGuid
¥¥! (
(
¥¥( )
)
¥¥) *
;
¥¥* +
newID
∂∂ 
=
∂∂ 
DBLinks
∂∂ 
.
∂∂ 
AddLink
∂∂ #
(
∂∂# $
this
∑∑ 
.
∑∑ 
itemGuid
∑∑ 
,
∑∑ 
this
∏∏ 
.
∏∏ 

moduleGuid
∏∏ 
,
∏∏  
this
ππ 
.
ππ 
moduleID
ππ 
,
ππ 
this
∫∫ 
.
∫∫ 
title
∫∫ 
,
∫∫ 
this
ªª 
.
ªª 
url
ªª 
,
ªª 
this
ºº 
.
ºº 
	viewOrder
ºº 
,
ºº 
this
ΩΩ 
.
ΩΩ 
description
ΩΩ  
,
ΩΩ  !
this
ææ 
.
ææ 
createdDate
ææ  
,
ææ  !
this
øø 
.
øø 
createdByUser
øø "
,
øø" #
this
¿¿ 
.
¿¿ 
target
¿¿ 
,
¿¿ 
this
¡¡ 
.
¡¡ 
userGuid
¡¡ 
)
¡¡ 
;
¡¡ 
this
√√ 
.
√√ 
itemID
√√ 
=
√√ 
newID
√√ 
;
√√  
bool
≈≈ 
result
≈≈ 
=
≈≈ 
(
≈≈ 
newID
≈≈  
>
≈≈! "
$num
≈≈# $
)
≈≈$ %
;
≈≈% &
if
»» 
(
»» 
result
»» 
)
»» 
{
…… %
ContentChangedEventArgs
   '
e
  ( )
=
  * +
new
  , /%
ContentChangedEventArgs
  0 G
(
  G H
)
  H I
;
  I J
OnContentChanged
ÀÀ  
(
ÀÀ  !
e
ÀÀ! "
)
ÀÀ" #
;
ÀÀ# $
}
ÃÃ 
return
ŒŒ 
result
ŒŒ 
;
ŒŒ 
}
–– 	
private
““ 
bool
““ 
Update
““ 
(
““ 
)
““ 
{
”” 	
bool
’’ 
result
’’ 
=
’’ 
DBLinks
’’ !
.
’’! "

UpdateLink
’’" ,
(
’’, -
this
÷÷ 
.
÷÷ 
itemID
÷÷ 
,
÷÷ 
this
◊◊ 
.
◊◊ 
moduleID
◊◊ 
,
◊◊ 
this
ÿÿ 
.
ÿÿ 
title
ÿÿ 
,
ÿÿ 
this
ŸŸ 
.
ŸŸ 
url
ŸŸ 
,
ŸŸ 
this
⁄⁄ 
.
⁄⁄ 
	viewOrder
⁄⁄ 
,
⁄⁄ 
this
€€ 
.
€€ 
description
€€  
,
€€  !
this
‹‹ 
.
‹‹ 
createdDate
‹‹  
,
‹‹  !
this
›› 
.
›› 
target
›› 
,
›› 
this
ﬁﬁ 
.
ﬁﬁ 
createdByUser
ﬁﬁ "
)
ﬁﬁ" #
;
ﬁﬁ# $
if
·· 
(
·· 
result
·· 
)
·· 
{
‚‚ %
ContentChangedEventArgs
„„ '
e
„„( )
=
„„* +
new
„„, /%
ContentChangedEventArgs
„„0 G
(
„„G H
)
„„H I
;
„„I J
OnContentChanged
‰‰  
(
‰‰  !
e
‰‰! "
)
‰‰" #
;
‰‰# $
}
ÂÂ 
return
ÁÁ 
result
ÁÁ 
;
ÁÁ 
}
ÈÈ 	
public
ÚÚ 
bool
ÚÚ 
Save
ÚÚ 
(
ÚÚ 
)
ÚÚ 
{
ÛÛ 	
if
ÙÙ 
(
ÙÙ 
this
ÙÙ 
.
ÙÙ 
itemID
ÙÙ 
>
ÙÙ 
-
ÙÙ 
$num
ÙÙ  
)
ÙÙ  !
{
ıı 
return
ˆˆ 
Update
ˆˆ 
(
ˆˆ 
)
ˆˆ 
;
ˆˆ  
}
˜˜ 
else
¯¯ 
{
˘˘ 
return
˙˙ 
Create
˙˙ 
(
˙˙ 
)
˙˙ 
;
˙˙  
}
˚˚ 
}
¸¸ 	
public
˛˛ 
bool
˛˛ 
Delete
˛˛ 
(
˛˛ 
)
˛˛ 
{
ˇˇ 	
bool
ÄÄ 
result
ÄÄ 
=
ÄÄ 
DBLinks
ÄÄ !
.
ÄÄ! "

DeleteLink
ÄÄ" ,
(
ÄÄ, -
itemID
ÄÄ- 3
)
ÄÄ3 4
;
ÄÄ4 5
if
ÇÇ 
(
ÇÇ 
result
ÇÇ 
)
ÇÇ 
{
ÉÉ %
ContentChangedEventArgs
ÑÑ '
e
ÑÑ( )
=
ÑÑ* +
new
ÑÑ, /%
ContentChangedEventArgs
ÑÑ0 G
(
ÑÑG H
)
ÑÑH I
;
ÑÑI J
e
ÖÖ 
.
ÖÖ 
	IsDeleted
ÖÖ 
=
ÖÖ 
true
ÖÖ "
;
ÖÖ" #
OnContentChanged
ÜÜ  
(
ÜÜ  !
e
ÜÜ! "
)
ÜÜ" #
;
ÜÜ# $
}
áá 
return
ää 
result
ää 
;
ää 
}
ãã 	
public
ëë 
static
ëë 
IDataReader
ëë !
GetLinks
ëë" *
(
ëë* +
Int32
ëë+ 0
moduleId
ëë1 9
)
ëë9 :
{
íí 	
return
ìì 
DBLinks
ìì 
.
ìì 
GetLinks
ìì #
(
ìì# $
moduleId
ìì$ ,
)
ìì, -
;
ìì- .
}
îî 	
public
ññ 
static
ññ 
IDataReader
ññ !
GetPage
ññ" )
(
ññ) *
int
óó 
moduleId
óó 
,
óó 
int
òò 

pageNumber
òò 
,
òò 
int
ôô 
pageSize
ôô 
,
ôô 
out
öö 
int
öö 

totalPages
öö 
)
öö 
{
õõ 	
return
úú 
DBLinks
úú 
.
úú 
GetPage
úú "
(
úú" #
moduleId
úú# +
,
úú+ ,

pageNumber
úú- 7
,
úú7 8
pageSize
úú9 A
,
úúA B
out
úúC F

totalPages
úúG Q
)
úúQ R
;
úúR S
}
ùù 	
public
¢¢ 
static
¢¢ 
	DataTable
¢¢ 
GetLinksByPage
¢¢  .
(
¢¢. /
int
¢¢/ 2
siteId
¢¢3 9
,
¢¢9 :
int
¢¢; >
pageId
¢¢? E
)
¢¢E F
{
££ 	
	DataTable
§§ 
	dataTable
§§ 
=
§§  !
new
§§" %
	DataTable
§§& /
(
§§/ 0
)
§§0 1
;
§§1 2
	dataTable
¶¶ 
.
¶¶ 
Columns
¶¶ 
.
¶¶ 
Add
¶¶ !
(
¶¶! "
$str
¶¶" *
,
¶¶* +
typeof
¶¶, 2
(
¶¶2 3
int
¶¶3 6
)
¶¶6 7
)
¶¶7 8
;
¶¶8 9
	dataTable
ßß 
.
ßß 
Columns
ßß 
.
ßß 
Add
ßß !
(
ßß! "
$str
ßß" ,
,
ßß, -
typeof
ßß. 4
(
ßß4 5
int
ßß5 8
)
ßß8 9
)
ßß9 :
;
ßß: ;
	dataTable
®® 
.
®® 
Columns
®® 
.
®® 
Add
®® !
(
®®! "
$str
®®" /
,
®®/ 0
typeof
®®1 7
(
®®7 8
string
®®8 >
)
®®> ?
)
®®? @
;
®®@ A
	dataTable
©© 
.
©© 
Columns
©© 
.
©© 
Add
©© !
(
©©! "
$str
©©" )
,
©©) *
typeof
©©+ 1
(
©©1 2
string
©©2 8
)
©©8 9
)
©©9 :
;
©©: ;
	dataTable
™™ 
.
™™ 
Columns
™™ 
.
™™ 
Add
™™ !
(
™™! "
$str
™™" /
,
™™/ 0
typeof
™™1 7
(
™™7 8
string
™™8 >
)
™™> ?
)
™™? @
;
™™@ A
	dataTable
´´ 
.
´´ 
Columns
´´ 
.
´´ 
Add
´´ !
(
´´! "
$str
´´" -
,
´´- .
typeof
´´/ 5
(
´´5 6
string
´´6 <
)
´´< =
)
´´= >
;
´´> ?
	dataTable
¨¨ 
.
¨¨ 
Columns
¨¨ 
.
¨¨ 
Add
¨¨ !
(
¨¨! "
$str
¨¨" /
,
¨¨/ 0
typeof
¨¨1 7
(
¨¨7 8
DateTime
¨¨8 @
)
¨¨@ A
)
¨¨A B
;
¨¨B C
using
ÆÆ 
(
ÆÆ 
IDataReader
ÆÆ 
reader
ÆÆ %
=
ÆÆ& '
DBLinks
ÆÆ( /
.
ÆÆ/ 0
GetLinksByPage
ÆÆ0 >
(
ÆÆ> ?
siteId
ÆÆ? E
,
ÆÆE F
pageId
ÆÆG M
)
ÆÆM N
)
ÆÆN O
{
ØØ 
while
∞∞ 
(
∞∞ 
reader
∞∞ 
.
∞∞ 
Read
∞∞ "
(
∞∞" #
)
∞∞# $
)
∞∞$ %
{
±± 
DataRow
≤≤ 
row
≤≤ 
=
≤≤  !
	dataTable
≤≤" +
.
≤≤+ ,
NewRow
≤≤, 2
(
≤≤2 3
)
≤≤3 4
;
≤≤4 5
row
¥¥ 
[
¥¥ 
$str
¥¥  
]
¥¥  !
=
¥¥" #
reader
¥¥$ *
[
¥¥* +
$str
¥¥+ 3
]
¥¥3 4
;
¥¥4 5
row
µµ 
[
µµ 
$str
µµ "
]
µµ" #
=
µµ$ %
reader
µµ& ,
[
µµ, -
$str
µµ- 7
]
µµ7 8
;
µµ8 9
row
∂∂ 
[
∂∂ 
$str
∂∂ %
]
∂∂% &
=
∂∂' (
reader
∂∂) /
[
∂∂/ 0
$str
∂∂0 =
]
∂∂= >
;
∂∂> ?
row
∑∑ 
[
∑∑ 
$str
∑∑ 
]
∑∑  
=
∑∑! "
reader
∑∑# )
[
∑∑) *
$str
∑∑* 1
]
∑∑1 2
;
∑∑2 3
row
∏∏ 
[
∏∏ 
$str
∏∏ %
]
∏∏% &
=
∏∏' (
reader
∏∏) /
[
∏∏/ 0
$str
∏∏0 =
]
∏∏= >
;
∏∏> ?
row
ππ 
[
ππ 
$str
ππ #
]
ππ# $
=
ππ% &
reader
ππ' -
[
ππ- .
$str
ππ. 9
]
ππ9 :
;
ππ: ;
row
∫∫ 
[
∫∫ 
$str
∫∫ %
]
∫∫% &
=
∫∫' (
Convert
∫∫) 0
.
∫∫0 1

ToDateTime
∫∫1 ;
(
∫∫; <
reader
∫∫< B
[
∫∫B C
$str
∫∫C P
]
∫∫P Q
)
∫∫Q R
;
∫∫R S
	dataTable
ºº 
.
ºº 
Rows
ºº "
.
ºº" #
Add
ºº# &
(
ºº& '
row
ºº' *
)
ºº* +
;
ºº+ ,
}
ΩΩ 
}
ææ 
return
¿¿ 
	dataTable
¿¿ 
;
¿¿ 
}
¡¡ 	
public
ƒƒ 
static
ƒƒ 
bool
ƒƒ 
DeleteByModule
ƒƒ )
(
ƒƒ) *
int
ƒƒ* -
moduleId
ƒƒ. 6
)
ƒƒ6 7
{
≈≈ 	
return
∆∆ 
DBLinks
∆∆ 
.
∆∆ 
DeleteByModule
∆∆ )
(
∆∆) *
moduleId
∆∆* 2
)
∆∆2 3
;
∆∆3 4
}
«« 	
public
…… 
static
…… 
bool
…… 
DeleteBySite
…… '
(
……' (
int
……( +
siteId
……, 2
)
……2 3
{
   	
return
ÀÀ 
DBLinks
ÀÀ 
.
ÀÀ 
DeleteBySite
ÀÀ '
(
ÀÀ' (
siteId
ÀÀ( .
)
ÀÀ. /
;
ÀÀ/ 0
}
ÃÃ 	
public
‘‘ 
event
‘‘ (
ContentChangedEventHandler
‘‘ /
ContentChanged
‘‘0 >
;
‘‘> ?
	protected
÷÷ 
void
÷÷ 
OnContentChanged
÷÷ '
(
÷÷' (%
ContentChangedEventArgs
÷÷( ?
e
÷÷@ A
)
÷÷A B
{
◊◊ 	
if
ÿÿ 
(
ÿÿ 
ContentChanged
ÿÿ 
!=
ÿÿ !
null
ÿÿ" &
)
ÿÿ& '
{
ŸŸ 
ContentChanged
⁄⁄ 
(
⁄⁄ 
this
⁄⁄ #
,
⁄⁄# $
e
⁄⁄% &
)
⁄⁄& '
;
⁄⁄' (
}
€€ 
}
‹‹ 	
}
‰‰ 
}ÊÊ ∑
pD:\Projects\DefensePoint\whitesource-testcases-csharp\CWE79\mojoportal\mojoPortal.Features.Business\Poll\Poll.cs
	namespace 	
PollFeature
 
. 
Business 
{ 
public 

class 
Poll 
{ 
private 
const 
string 
featureGuid (
=) *
$str+ Q
;Q R
public 
static 
Guid 
FeatureGuid &
{ 	
get 
{ 
return 
new 
Guid !
(! "
featureGuid" -
)- .
;. /
}0 1
} 	
public$$ 
Poll$$ 
($$ 
)$$ 
{%% 	
}%%
 
public'' 
Poll'' 
('' 
Guid'' 
pollGuid'' !
)''! "
{(( 	
if)) 
()) 
pollGuid)) 
!=)) 
Guid))  
.))  !
Empty))! &
)))& '
{** 
GetPoll++ 
(++ 
pollGuid++  
)++  !
;++! "
},, 
}-- 	
public// 
Poll// 
(// 
int// 
moduleID//  
)//  !
{00 	
if11 
(11 
moduleID11 
>=11 
$num11 
)11 
{22 
GetPoll33 
(33 
moduleID33  
)33  !
;33! "
}44 
}55 	
private;; 
Guid;; 
pollGuid;; 
=;; 
Guid;;  $
.;;$ %
Empty;;% *
;;;* +
private<< 
Guid<< 
siteGuid<< 
=<< 
Guid<<  $
.<<$ %
Empty<<% *
;<<* +
private== 
string== 
question== 
===  !
String==" (
.==( )
Empty==) .
;==. /
private>> 
bool>> 
	activated>> 
=>>  
true>>! %
;>>% &
private?? 
int?? 

totalVotes?? 
=??  
$num??! "
;??" #
private@@ 
bool@@ 
anonymousVoting@@ $
=@@% &
false@@' ,
;@@, -
privateAA 
boolAA +
allowViewingResultsBeforeVotingAA 4
=AA5 6
falseAA7 <
;AA< =
privateBB 
boolBB 
showOrderNumbersBB %
=BB& '
falseBB( -
;BB- .
privateCC 
boolCC &
showResultsWhenDeactivatedCC /
=CC0 1
falseCC2 7
;CC7 8
privateDD 
DateTimeDD 

activeFromDD #
=DD$ %
DateTimeDD& .
.DD. /
UtcNowDD/ 5
;DD5 6
privateEE 
DateTimeEE 
activeToEE !
=EE" #
DateTimeEE$ ,
.EE, -
UtcNowEE- 3
.EE3 4
AddYearsEE4 <
(EE< =
$numEE= >
)EE> ?
;EE? @
privateFF 
GuidFF 
newPollGuidFF  
=FF! "
GuidFF# '
.FF' (
NewGuidFF( /
(FF/ 0
)FF0 1
;FF1 2
publicLL 
GuidLL 
PollGuidLL 
{MM 	
getNN 
{NN 
returnNN 
pollGuidNN !
;NN! "
}NN# $
}OO 	
publicQQ 
GuidQQ 
SiteGuidQQ 
{RR 	
getSS 
{SS 
returnSS 
siteGuidSS !
;SS! "
}SS# $
setTT 
{TT 
siteGuidTT 
=TT 
valueTT "
;TT" #
}TT$ %
}UU 	
publicWW 
stringWW 
QuestionWW 
{XX 	
getYY 
{YY 
returnYY 
questionYY !
;YY! "
}YY# $
setZZ 
{ZZ 
questionZZ 
=ZZ 
valueZZ "
;ZZ" #
}ZZ$ %
}[[ 	
public]] 
bool]] 
IsActive]] 
{^^ 	
get__ 
{`` 
ifaa 
(aa 
DateTimeaa 
.aa 
UtcNowaa #
<aa$ %

activeFromaa& 0
)aa0 1
returnaa2 8
falseaa9 >
;aa> ?
ifbb 
(bb 
DateTimebb 
.bb 
UtcNowbb #
>bb$ %
activeTobb& .
)bb. /
returnbb0 6
falsebb7 <
;bb< =
returncc 
	activatedcc  
;cc  !
}dd 
}ee 	
publicgg 
intgg 

TotalVotesgg 
{hh 	
getii 
{ii 
returnii 

totalVotesii #
;ii# $
}ii% &
}jj 	
publicll 
boolll 
AnonymousVotingll #
{mm 	
getnn 
{nn 
returnnn 
anonymousVotingnn (
;nn( )
}nn* +
setoo 
{oo 
anonymousVotingoo !
=oo" #
valueoo$ )
;oo) *
}oo+ ,
}pp 	
publicrr 
boolrr +
AllowViewingResultsBeforeVotingrr 3
{ss 	
gettt 
{tt 
returntt +
allowViewingResultsBeforeVotingtt 8
;tt8 9
}tt: ;
setuu 
{uu +
allowViewingResultsBeforeVotinguu 1
=uu2 3
valueuu4 9
;uu9 :
}uu; <
}vv 	
publicxx 
boolxx 
ShowOrderNumbersxx $
{yy 	
getzz 
{zz 
returnzz 
showOrderNumberszz )
;zz) *
}zz+ ,
set{{ 
{{{ 
showOrderNumbers{{ "
={{# $
value{{% *
;{{* +
}{{, -
}|| 	
public~~ 
bool~~ &
ShowResultsWhenDeactivated~~ .
{ 	
get
ÄÄ 
{
ÄÄ 
return
ÄÄ (
showResultsWhenDeactivated
ÄÄ 3
;
ÄÄ3 4
}
ÄÄ5 6
set
ÅÅ 
{
ÅÅ (
showResultsWhenDeactivated
ÅÅ ,
=
ÅÅ- .
value
ÅÅ/ 4
;
ÅÅ4 5
}
ÅÅ6 7
}
ÇÇ 	
public
ÑÑ 
DateTime
ÑÑ 

ActiveFrom
ÑÑ "
{
ÖÖ 	
get
ÜÜ 
{
ÜÜ 
return
ÜÜ 

activeFrom
ÜÜ #
;
ÜÜ# $
}
ÜÜ% &
set
áá 
{
áá 

activeFrom
áá 
=
áá 
value
áá $
;
áá$ %
}
áá& '
}
àà 	
public
ää 
DateTime
ää 
ActiveTo
ää  
{
ãã 	
get
åå 
{
åå 
return
åå 
activeTo
åå !
;
åå! "
}
åå# $
set
çç 
{
çç 
activeTo
çç 
=
çç 
value
çç "
;
çç" #
}
çç$ %
}
éé 	
public
êê 
bool
êê 
	Activated
êê 
{
ëë 	
get
íí 
{
íí 
return
íí 
	activated
íí "
;
íí" #
}
íí$ %
set
ìì 
{
ìì 
	activated
ìì 
=
ìì 
value
ìì #
;
ìì# $
}
ìì% &
}
îî 	
private
õõ 
void
õõ 
GetPoll
õõ 
(
õõ 
Guid
õõ !
pollGuid
õõ" *
)
õõ* +
{
úú 	
using
ùù 
(
ùù 
IDataReader
ùù 
reader
ùù %
=
ùù& '
DBPoll
ùù( .
.
ùù. /
GetPoll
ùù/ 6
(
ùù6 7
pollGuid
ùù7 ?
)
ùù? @
)
ùù@ A
{
ûû 
GetPoll
üü 
(
üü 
reader
üü 
)
üü 
;
üü  
}
†† 
}
°° 	
private
££ 
void
££ 
GetPoll
££ 
(
££ 
int
££  
moduleID
££! )
)
££) *
{
§§ 	
using
•• 
(
•• 
IDataReader
•• 
reader
•• %
=
••& '
DBPoll
••( .
.
••. /
GetPollByModuleID
••/ @
(
••@ A
moduleID
••A I
)
••I J
)
••J K
{
¶¶ 
GetPoll
ßß 
(
ßß 
reader
ßß 
)
ßß 
;
ßß  
}
®® 
}
©© 	
private
´´ 
void
´´ 
GetPoll
´´ 
(
´´ 
IDataReader
´´ (
reader
´´) /
)
´´/ 0
{
¨¨ 	
if
≠≠ 
(
≠≠ 
reader
≠≠ 
.
≠≠ 
Read
≠≠ 
(
≠≠ 
)
≠≠ 
)
≠≠ 
{
ÆÆ 
this
ØØ 
.
ØØ 
pollGuid
ØØ 
=
ØØ 
new
ØØ  #
Guid
ØØ$ (
(
ØØ( )
reader
ØØ) /
[
ØØ/ 0
$str
ØØ0 :
]
ØØ: ;
.
ØØ; <
ToString
ØØ< D
(
ØØD E
)
ØØE F
)
ØØF G
;
ØØG H
this
∞∞ 
.
∞∞ 
siteGuid
∞∞ 
=
∞∞ 
new
∞∞  #
Guid
∞∞$ (
(
∞∞( )
reader
∞∞) /
[
∞∞/ 0
$str
∞∞0 :
]
∞∞: ;
.
∞∞; <
ToString
∞∞< D
(
∞∞D E
)
∞∞E F
)
∞∞F G
;
∞∞G H
this
±± 
.
±± 
question
±± 
=
±± 
reader
±±  &
[
±±& '
$str
±±' 1
]
±±1 2
.
±±2 3
ToString
±±3 ;
(
±±; <
)
±±< =
;
±±= >
this
≤≤ 
.
≤≤ 
	activated
≤≤ 
=
≤≤  
Convert
≤≤! (
.
≤≤( )
	ToBoolean
≤≤) 2
(
≤≤2 3
reader
≤≤3 9
[
≤≤9 :
$str
≤≤: B
]
≤≤B C
)
≤≤C D
;
≤≤D E
this
≥≥ 
.
≥≥ 
anonymousVoting
≥≥ $
=
≥≥% &
Convert
≥≥' .
.
≥≥. /
	ToBoolean
≥≥/ 8
(
≥≥8 9
reader
≥≥9 ?
[
≥≥? @
$str
≥≥@ Q
]
≥≥Q R
)
≥≥R S
;
≥≥S T
this
¥¥ 
.
¥¥ -
allowViewingResultsBeforeVoting
¥¥ 4
=
¥¥5 6
Convert
¥¥7 >
.
¥¥> ?
	ToBoolean
¥¥? H
(
¥¥H I
reader
¥¥I O
[
¥¥O P
$str
¥¥P q
]
¥¥q r
)
¥¥r s
;
¥¥s t
this
µµ 
.
µµ 
showOrderNumbers
µµ %
=
µµ& '
Convert
µµ( /
.
µµ/ 0
	ToBoolean
µµ0 9
(
µµ9 :
reader
µµ: @
[
µµ@ A
$str
µµA S
]
µµS T
)
µµT U
;
µµU V
this
∂∂ 
.
∂∂ (
showResultsWhenDeactivated
∂∂ /
=
∂∂0 1
Convert
∂∂2 9
.
∂∂9 :
	ToBoolean
∂∂: C
(
∂∂C D
reader
∂∂D J
[
∂∂J K
$str
∂∂K g
]
∂∂g h
)
∂∂h i
;
∂∂i j
this
∑∑ 
.
∑∑ 
	activated
∑∑ 
=
∑∑  
Convert
∑∑! (
.
∑∑( )
	ToBoolean
∑∑) 2
(
∑∑2 3
reader
∑∑3 9
[
∑∑9 :
$str
∑∑: B
]
∑∑B C
)
∑∑C D
;
∑∑D E
this
∏∏ 
.
∏∏ 

activeFrom
∏∏ 
=
∏∏  !
Convert
∏∏" )
.
∏∏) *

ToDateTime
∏∏* 4
(
∏∏4 5
reader
∏∏5 ;
[
∏∏; <
$str
∏∏< H
]
∏∏H I
)
∏∏I J
;
∏∏J K
this
ππ 
.
ππ 
activeTo
ππ 
=
ππ 
Convert
ππ  '
.
ππ' (

ToDateTime
ππ( 2
(
ππ2 3
reader
ππ3 9
[
ππ9 :
$str
ππ: D
]
ππD E
)
ππE F
;
ππF G
try
∫∫ 
{
ªª 
this
ºº 
.
ºº 

totalVotes
ºº #
=
ºº$ %
int
ºº& )
.
ºº) *
Parse
ºº* /
(
ºº/ 0
reader
ºº0 6
[
ºº6 7
$str
ºº7 C
]
ººC D
.
ººD E
ToString
ººE M
(
ººM N
)
ººN O
)
ººO P
;
ººP Q
}
ΩΩ 
catch
ææ 
(
ææ 
FormatException
ææ &
)
ææ& '
{
ææ( )
}
ææ* +
}
øø 
}
¡¡ 	
private
√√ 
bool
√√ 
Create
√√ 
(
√√ 
)
√√ 
{
ƒƒ 	
pollGuid
≈≈ 
=
≈≈ 
newPollGuid
≈≈ "
;
≈≈" #
int
«« 
rowsAffected
«« 
=
«« 
DBPoll
«« %
.
««% &
Add
««& )
(
««) *
this
»» 
.
»» 
pollGuid
»» 
,
»» 
this
…… 
.
…… 
siteGuid
…… 
,
…… 
this
   
.
   
question
   
,
   
this
ÀÀ 
.
ÀÀ 
anonymousVoting
ÀÀ $
,
ÀÀ$ %
this
ÃÃ 
.
ÃÃ -
allowViewingResultsBeforeVoting
ÃÃ 4
,
ÃÃ4 5
this
ÕÕ 
.
ÕÕ 
showOrderNumbers
ÕÕ %
,
ÕÕ% &
this
ŒŒ 
.
ŒŒ (
showResultsWhenDeactivated
ŒŒ /
,
ŒŒ/ 0
this
œœ 
.
œœ 
	activated
œœ 
,
œœ 
this
–– 
.
–– 

activeFrom
–– 
,
––  
this
—— 
.
—— 
activeTo
—— 
)
—— 
;
—— 
return
”” 
(
”” 
rowsAffected
””  
>
””! "
$num
””# $
)
””$ %
;
””% &
}
‘‘ 	
private
÷÷ 
bool
÷÷ 
Update
÷÷ 
(
÷÷ 
)
÷÷ 
{
◊◊ 	
return
ÿÿ 
DBPoll
ÿÿ 
.
ÿÿ 
Update
ÿÿ  
(
ÿÿ  !
this
ŸŸ 
.
ŸŸ 
pollGuid
ŸŸ 
,
ŸŸ 
this
⁄⁄ 
.
⁄⁄ 
question
⁄⁄ 
,
⁄⁄ 
this
€€ 
.
€€ 
anonymousVoting
€€ $
,
€€$ %
this
‹‹ 
.
‹‹ -
allowViewingResultsBeforeVoting
‹‹ 4
,
‹‹4 5
this
›› 
.
›› 
showOrderNumbers
›› %
,
››% &
this
ﬁﬁ 
.
ﬁﬁ (
showResultsWhenDeactivated
ﬁﬁ /
,
ﬁﬁ/ 0
this
ﬂﬂ 
.
ﬂﬂ 
	activated
ﬂﬂ 
,
ﬂﬂ 
this
‡‡ 
.
‡‡ 

activeFrom
‡‡ 
,
‡‡  
this
·· 
.
·· 
activeTo
·· 
)
·· 
;
·· 
}
‚‚ 	
public
ÈÈ 
bool
ÈÈ 
Save
ÈÈ 
(
ÈÈ 
)
ÈÈ 
{
ÍÍ 	
if
ÎÎ 
(
ÎÎ 
pollGuid
ÎÎ 
==
ÎÎ 
Guid
ÎÎ  
.
ÎÎ  !
Empty
ÎÎ! &
)
ÎÎ& '
return
ÎÎ( .
Create
ÎÎ/ 5
(
ÎÎ5 6
)
ÎÎ6 7
;
ÎÎ7 8
return
ÏÏ 
Update
ÏÏ 
(
ÏÏ 
)
ÏÏ 
;
ÏÏ 
}
ÌÌ 	
public
ÔÔ 
bool
ÔÔ 

ClearVotes
ÔÔ 
(
ÔÔ 
)
ÔÔ  
{
 	
if
ÒÒ 
(
ÒÒ 

totalVotes
ÒÒ 
<=
ÒÒ 
$num
ÒÒ 
)
ÒÒ  
return
ÒÒ! '
true
ÒÒ( ,
;
ÒÒ, -
return
ÛÛ 
DBPoll
ÛÛ 
.
ÛÛ 

ClearVotes
ÛÛ $
(
ÛÛ$ %
pollGuid
ÛÛ% -
)
ÛÛ- .
;
ÛÛ. /
}
ÙÙ 	
public
ˆˆ 
bool
ˆˆ 
Delete
ˆˆ 
(
ˆˆ 
)
ˆˆ 
{
˜˜ 	
if
¯¯ 
(
¯¯ 
pollGuid
¯¯ 
==
¯¯ 
Guid
¯¯  
.
¯¯  !
Empty
¯¯! &
)
¯¯& '
return
¯¯( .
false
¯¯/ 4
;
¯¯4 5
return
˙˙ 
DBPoll
˙˙ 
.
˙˙ 
Delete
˙˙  
(
˙˙  !
pollGuid
˙˙! )
)
˙˙) *
;
˙˙* +
}
˚˚ 	
public
˝˝ 
bool
˝˝ 
Activate
˝˝ 
(
˝˝ 
)
˝˝ 
{
˛˛ 	
if
ˇˇ 
(
ˇˇ 
pollGuid
ˇˇ 
==
ˇˇ 
Guid
ˇˇ  
.
ˇˇ  !
Empty
ˇˇ! &
)
ˇˇ& '
return
ˇˇ( .
false
ˇˇ/ 4
;
ˇˇ4 5
if
ÄÄ 
(
ÄÄ 
DateTime
ÄÄ 
.
ÄÄ 
UtcNow
ÄÄ 
<
ÄÄ  !

activeFrom
ÄÄ" ,
)
ÄÄ, -
return
ÄÄ. 4
false
ÄÄ5 :
;
ÄÄ: ;
if
ÅÅ 
(
ÅÅ 
DateTime
ÅÅ 
.
ÅÅ 
UtcNow
ÅÅ 
>
ÅÅ  !
activeTo
ÅÅ" *
)
ÅÅ* +
return
ÅÅ, 2
false
ÅÅ3 8
;
ÅÅ8 9
	activated
ÇÇ 
=
ÇÇ 
true
ÇÇ 
;
ÇÇ 
return
ÉÉ 
true
ÉÉ 
;
ÉÉ 
}
ÑÑ 	
public
ÜÜ 
bool
ÜÜ 

Deactivate
ÜÜ 
(
ÜÜ 
)
ÜÜ  
{
áá 	
if
àà 
(
àà 
pollGuid
àà 
==
àà 
Guid
àà  
.
àà  !
Empty
àà! &
)
àà& '
return
àà( .
false
àà/ 4
;
àà4 5
	activated
ââ 
=
ââ 
false
ââ 
;
ââ 
return
ää 
true
ää 
;
ää 
}
ãã 	
public
çç 
bool
çç 
UserHasVoted
çç  
(
çç  !
SiteUser
çç! )
user
çç* .
)
çç. /
{
éé 	
if
èè 
(
èè 
user
èè 
==
èè 
null
èè 
)
èè 
return
èè $
false
èè% *
;
èè* +
return
íí 
DBPoll
íí 
.
íí 
UserHasVoted
íí &
(
íí& '
pollGuid
íí' /
,
íí/ 0
user
íí1 5
.
íí5 6
UserGuid
íí6 >
)
íí> ?
;
íí? @
}
ìì 	
public
ïï 
bool
ïï 
AddToModule
ïï 
(
ïï  
int
ïï  #
moduleID
ïï$ ,
)
ïï, -
{
ññ 	
return
óó 
DBPoll
óó 
.
óó 
AddToModule
óó %
(
óó% &
pollGuid
óó& .
,
óó. /
moduleID
óó0 8
)
óó8 9
;
óó9 :
}
òò 	
public
öö 
bool
öö 
CopyToNewPoll
öö !
(
öö! "
out
öö" %
Poll
öö& *
newPoll
öö+ 2
)
öö2 3
{
õõ 	
newPoll
úú 
=
úú 
new
úú 
Poll
úú 
(
úú 
)
úú  
;
úú  !
newPoll
ùù 
.
ùù -
AllowViewingResultsBeforeVoting
ùù 3
=
ùù4 5-
allowViewingResultsBeforeVoting
ùù6 U
;
ùùU V
newPoll
ûû 
.
ûû 
AnonymousVoting
ûû #
=
ûû$ %
anonymousVoting
ûû& 5
;
ûû5 6
newPoll
üü 
.
üü 
Question
üü 
=
üü 
question
üü '
;
üü' (
newPoll
†† 
.
†† 
ShowOrderNumbers
†† $
=
††% &
showOrderNumbers
††' 7
;
††7 8
newPoll
°° 
.
°° (
ShowResultsWhenDeactivated
°° .
=
°°/ 0(
showResultsWhenDeactivated
°°1 K
;
°°K L
newPoll
¢¢ 
.
¢¢ 
SiteGuid
¢¢ 
=
¢¢ 
siteGuid
¢¢ '
;
¢¢' (
bool
§§ 
result
§§ 
=
§§ 
newPoll
§§ !
.
§§! "
Save
§§" &
(
§§& '
)
§§' (
;
§§( )
if
¶¶ 
(
¶¶ 
result
¶¶ 
)
¶¶ 
{
ßß 

PollOption
®® 
option
®® !
;
®®! "
List
©© 
<
©© 

PollOption
©© 
>
©©  
pollOptions
©©! ,
=
©©- .

PollOption
©©/ 9
.
©©9 :"
GetOptionsByPollGuid
©©: N
(
©©N O
pollGuid
©©O W
)
©©W X
;
©©X Y
foreach
™™ 
(
™™ 

PollOption
™™ #
optionToCopy
™™$ 0
in
™™1 3
pollOptions
™™4 ?
)
™™? @
{
´´ 
option
¨¨ 
=
¨¨ 
new
¨¨  

PollOption
¨¨! +
(
¨¨+ ,
)
¨¨, -
;
¨¨- .
option
≠≠ 
.
≠≠ 
Answer
≠≠ !
=
≠≠" #
optionToCopy
≠≠$ 0
.
≠≠0 1
Answer
≠≠1 7
;
≠≠7 8
option
ÆÆ 
.
ÆÆ 
Order
ÆÆ  
=
ÆÆ! "
optionToCopy
ÆÆ# /
.
ÆÆ/ 0
Order
ÆÆ0 5
;
ÆÆ5 6
option
ØØ 
.
ØØ 
PollGuid
ØØ #
=
ØØ$ %
newPoll
ØØ& -
.
ØØ- .
PollGuid
ØØ. 6
;
ØØ6 7
option
∞∞ 
.
∞∞ 
Save
∞∞ 
(
∞∞  
)
∞∞  !
;
∞∞! "
}
±± 
}
≤≤ 
return
¥¥ 
result
¥¥ 
;
¥¥ 
}
µµ 	
public
ªª 
static
ªª 
IDataReader
ªª !
GetPolls
ªª" *
(
ªª* +
Guid
ªª+ /
siteGuid
ªª0 8
)
ªª8 9
{
ºº 	
return
ΩΩ 
DBPoll
ΩΩ 
.
ΩΩ 
GetPolls
ΩΩ "
(
ΩΩ" #
siteGuid
ΩΩ# +
)
ΩΩ+ ,
;
ΩΩ, -
}
ææ 	
public
¿¿ 
static
¿¿ 
IDataReader
¿¿ !
GetActivePolls
¿¿" 0
(
¿¿0 1
Guid
¿¿1 5
siteGuid
¿¿6 >
)
¿¿> ?
{
¡¡ 	
return
¬¬ 
DBPoll
¬¬ 
.
¬¬ 
GetActivePolls
¬¬ (
(
¬¬( )
siteGuid
¬¬) 1
)
¬¬1 2
;
¬¬2 3
}
√√ 	
public
≈≈ 
static
≈≈ 
IDataReader
≈≈ !
GetPollsByUser
≈≈" 0
(
≈≈0 1
Guid
≈≈1 5
userGuid
≈≈6 >
)
≈≈> ?
{
∆∆ 	
if
«« 
(
«« 
userGuid
«« 
==
«« 
Guid
««  
.
««  !
Empty
««! &
)
««& '
return
««( .
null
««/ 3
;
««3 4
return
»» 
DBPoll
»» 
.
»»  
GetPollsByUserGuid
»» ,
(
»», -
userGuid
»»- 5
)
»»5 6
;
»»6 7
}
…… 	
public
ÀÀ 
static
ÀÀ 
bool
ÀÀ 
RemoveFromModule
ÀÀ +
(
ÀÀ+ ,
int
ÀÀ, /
moduleID
ÀÀ0 8
)
ÀÀ8 9
{
ÃÃ 	
return
ÕÕ 
DBPoll
ÕÕ 
.
ÕÕ 
RemoveFromModule
ÕÕ *
(
ÕÕ* +
moduleID
ÕÕ+ 3
)
ÕÕ3 4
;
ÕÕ4 5
}
ŒŒ 	
public
““ 
static
““ 
bool
““ 
DeleteBySite
““ '
(
““' (
int
““( +
siteId
““, 2
)
““2 3
{
”” 	
return
‘‘ 
DBPoll
‘‘ 
.
‘‘ 
DeleteBySite
‘‘ &
(
‘‘& '
siteId
‘‘' -
)
‘‘- .
;
‘‘. /
}
’’ 	
}
ÿÿ 
}ŸŸ Œ]
vD:\Projects\DefensePoint\whitesource-testcases-csharp\CWE79\mojoportal\mojoPortal.Features.Business\Poll\PollOption.cs
	namespace 	
PollFeature
 
. 
Business 
{ 
public 

class 

PollOption 
{ 
public 

PollOption 
( 
) 
{ 	
}
 
public 

PollOption 
( 
Guid 

optionGuid )
)) *
{   	
if!! 
(!! 

optionGuid!! 
!=!! 
Guid!! "
.!!" #
Empty!!# (
)!!( )
{"" 
GetPollOption## 
(## 

optionGuid## (
)##( )
;##) *
}$$ 
}%% 	
private,, 
Guid,, 
pollGuid,, 
=,, 
Guid,,  $
.,,$ %
Empty,,% *
;,,* +
private-- 
Poll-- 
poll-- 
=-- 
null--  
;--  !
private.. 
Guid.. 

optionGuid.. 
=..  !
Guid.." &
...& '
Empty..' ,
;.., -
private// 
String// 
answer// 
=// 
String//  &
.//& '
Empty//' ,
;//, -
private00 
int00 
votes00 
=00 
$num00 
;00 
private11 
int11 
order11 
=11 
$num11 
;11 
private22 
Guid22 
newOptionGuid22 "
=22# $
Guid22% )
.22) *
NewGuid22* 1
(221 2
)222 3
;223 4
public99 
Guid99 
PollGuid99 
{:: 	
get;; 
{;; 
return;; 
pollGuid;; !
;;;! "
};;# $
set<< 
{<< 
pollGuid<< 
=<< 
value<< "
;<<" #
}<<$ %
}== 	
public?? 
Guid?? 

OptionGuid?? 
{@@ 	
getAA 
{AA 
returnAA 

optionGuidAA #
;AA# $
}AA% &
}BB 	
publicDD 
StringDD 
AnswerDD 
{EE 	
getFF 
{FF 
returnFF 
answerFF 
;FF  
}FF! "
setGG 
{GG 
answerGG 
=GG 
valueGG  
;GG  !
}GG" #
}HH 	
publicJJ 
intJJ 
VotesJJ 
{KK 	
getLL 
{LL 
returnLL 
votesLL 
;LL 
}LL  !
}MM 	
publicOO 
doubleOO 
?OO 
VotePercentageOO %
{PP 	
getQQ 
{RR 
ifSS 
(SS 
PollSS 
.SS 

TotalVotesSS #
==SS$ &
$numSS' (
)SS( )
returnSS* 0
nullSS1 5
;SS5 6
returnUU 
(UU 
doubleUU 
)UU 
votesUU $
/UU% &
(UU' (
doubleUU( .
)UU. /
PollUU/ 3
.UU3 4

TotalVotesUU4 >
*UU? @
$numUUA D
;UUD E
}VV 
}XX 	
publicZZ 
intZZ 
OrderZZ 
{[[ 	
get\\ 
{\\ 
return\\ 
order\\ 
;\\ 
}\\  !
set]] 
{]] 
order]] 
=]] 
value]] 
;]]  
}]]! "
}^^ 	
public`` 
Poll`` 
Poll`` 
{aa 	
getbb 
{cc 
ifdd 
(dd 
polldd 
==dd 
nulldd  
)dd  !
polldd" &
=dd' (
newdd) ,
Polldd- 1
(dd1 2
pollGuiddd2 :
)dd: ;
;dd; <
returnee 
pollee 
;ee 
}ff 
}gg 	
privatenn 
voidnn 
GetPollOptionnn "
(nn" #
Guidnn# '

optionGuidnn( 2
)nn2 3
{oo 	
usingpp 
(pp 
IDataReaderpp 
readerpp %
=pp& '
DBPollOptionpp( 4
.pp4 5
GetPollOptionpp5 B
(ppB C

optionGuidppC M
)ppM N
)ppN O
{qq 
ifrr 
(rr 
readerrr 
.rr 
Readrr 
(rr  
)rr  !
)rr! "
{ss 
thistt 
.tt 
pollGuidtt !
=tt" #
newtt$ '
Guidtt( ,
(tt, -
readertt- 3
[tt3 4
$strtt4 >
]tt> ?
.tt? @
ToStringtt@ H
(ttH I
)ttI J
)ttJ K
;ttK L
thisuu 
.uu 
answeruu 
=uu  !
readeruu" (
[uu( )
$struu) 1
]uu1 2
.uu2 3
ToStringuu3 ;
(uu; <
)uu< =
;uu= >
thisvv 
.vv 
ordervv 
=vv  
intvv! $
.vv$ %
Parsevv% *
(vv* +
readervv+ 1
[vv1 2
$strvv2 9
]vv9 :
.vv: ;
ToStringvv; C
(vvC D
)vvD E
)vvE F
;vvF G
thisww 
.ww 
votesww 
=ww  
intww! $
.ww$ %
Parseww% *
(ww* +
readerww+ 1
[ww1 2
$strww2 9
]ww9 :
.ww: ;
ToStringww; C
(wwC D
)wwD E
)wwE F
;wwF G
thisyy 
.yy 

optionGuidyy #
=yy$ %

optionGuidyy& 0
;yy0 1
}zz 
}{{ 
}|| 	
private~~ 
bool~~ 
Create~~ 
(~~ 
)~~ 
{ 	

optionGuid
ÄÄ 
=
ÄÄ 
newOptionGuid
ÄÄ &
;
ÄÄ& '
int
ÇÇ 
rowsAffected
ÇÇ 
=
ÇÇ 
DBPollOption
ÇÇ +
.
ÇÇ+ ,
Add
ÇÇ, /
(
ÇÇ/ 0

optionGuid
ÉÉ 
,
ÉÉ 
pollGuid
ÑÑ 
,
ÑÑ 
answer
ÖÖ 
,
ÖÖ 
order
ÜÜ 
)
ÜÜ 
;
ÜÜ 
return
àà 
(
àà 
rowsAffected
àà  
>
àà! "
$num
àà# $
)
àà$ %
;
àà% &
}
ââ 	
private
ãã 
bool
ãã 
Update
ãã 
(
ãã 
)
ãã 
{
åå 	
return
çç 
DBPollOption
çç 
.
çç  
Update
çç  &
(
çç& '

optionGuid
éé 
,
éé 
answer
èè 
,
èè 
order
êê 
)
êê 
;
êê 
}
ëë 	
public
òò 
bool
òò 
Save
òò 
(
òò 
)
òò 
{
ôô 	
if
öö 
(
öö 

optionGuid
öö 
==
öö 
Guid
öö "
.
öö" #
Empty
öö# (
)
öö( )
return
öö* 0
Create
öö1 7
(
öö7 8
)
öö8 9
;
öö9 :
return
õõ 
Update
õõ 
(
õõ 
)
õõ 
;
õõ 
}
úú 	
public
ûû 
bool
ûû 
IncrementVotes
ûû "
(
ûû" #
Guid
ûû# '
userGuid
ûû( 0
)
ûû0 1
{
üü 	
if
†† 
(
†† 

optionGuid
†† 
==
†† 
Guid
†† "
.
††" #
Empty
††# (
)
††( )
return
††* 0
false
††1 6
;
††6 7
return
¢¢ 
DBPollOption
¢¢ 
.
¢¢  
IncrementVotes
¢¢  .
(
¢¢. /
pollGuid
¢¢/ 7
,
¢¢7 8

optionGuid
¢¢9 C
,
¢¢C D
userGuid
¢¢E M
)
¢¢M N
;
¢¢N O
}
££ 	
public
•• 
bool
•• 
Delete
•• 
(
•• 
)
•• 
{
¶¶ 	
if
ßß 
(
ßß 

optionGuid
ßß 
==
ßß 
Guid
ßß "
.
ßß" #
Empty
ßß# (
)
ßß( )
return
ßß* 0
false
ßß1 6
;
ßß6 7
return
©© 
DBPollOption
©© 
.
©©  
Delete
©©  &
(
©©& '

optionGuid
©©' 1
)
©©1 2
;
©©2 3
}
™™ 	
private
∞∞ 
static
∞∞ 
List
∞∞ 
<
∞∞ 

PollOption
∞∞ &
>
∞∞& ' 
LoadListFromReader
∞∞( :
(
∞∞: ;
IDataReader
∞∞; F
reader
∞∞G M
)
∞∞M N
{
±± 	
List
≤≤ 
<
≤≤ 

PollOption
≤≤ 
>
≤≤ 
pollOptionList
≤≤ +
=
≤≤, -
new
≤≤. 1
List
≤≤2 6
<
≤≤6 7

PollOption
≤≤7 A
>
≤≤A B
(
≤≤B C
)
≤≤C D
;
≤≤D E
try
≥≥ 
{
¥¥ 
while
µµ 
(
µµ 
reader
µµ 
.
µµ 
Read
µµ "
(
µµ" #
)
µµ# $
)
µµ$ %
{
∂∂ 

PollOption
∑∑ 

pollOption
∑∑ )
=
∑∑* +
new
∑∑, /

PollOption
∑∑0 :
(
∑∑: ;
)
∑∑; <
;
∑∑< =

pollOption
∏∏ 
.
∏∏ 

optionGuid
∏∏ )
=
∏∏* +
new
∏∏, /
Guid
∏∏0 4
(
∏∏4 5
reader
∏∏5 ;
[
∏∏; <
$str
∏∏< H
]
∏∏H I
.
∏∏I J
ToString
∏∏J R
(
∏∏R S
)
∏∏S T
)
∏∏T U
;
∏∏U V

pollOption
ππ 
.
ππ 
pollGuid
ππ '
=
ππ( )
new
ππ* -
Guid
ππ. 2
(
ππ2 3
reader
ππ3 9
[
ππ9 :
$str
ππ: D
]
ππD E
.
ππE F
ToString
ππF N
(
ππN O
)
ππO P
)
ππP Q
;
ππQ R

pollOption
∫∫ 
.
∫∫ 
answer
∫∫ %
=
∫∫& '
reader
∫∫( .
[
∫∫. /
$str
∫∫/ 7
]
∫∫7 8
.
∫∫8 9
ToString
∫∫9 A
(
∫∫A B
)
∫∫B C
;
∫∫C D

pollOption
ªª 
.
ªª 
votes
ªª $
=
ªª% &
Convert
ªª' .
.
ªª. /
ToInt32
ªª/ 6
(
ªª6 7
reader
ªª7 =
[
ªª= >
$str
ªª> E
]
ªªE F
)
ªªF G
;
ªªG H

pollOption
ºº 
.
ºº 
order
ºº $
=
ºº% &
Convert
ºº' .
.
ºº. /
ToInt32
ºº/ 6
(
ºº6 7
reader
ºº7 =
[
ºº= >
$str
ºº> E
]
ººE F
)
ººF G
;
ººG H
pollOptionList
ΩΩ "
.
ΩΩ" #
Add
ΩΩ# &
(
ΩΩ& '

pollOption
ΩΩ' 1
)
ΩΩ1 2
;
ΩΩ2 3
}
øø 
}
¿¿ 
finally
¡¡ 
{
¬¬ 
reader
√√ 
.
√√ 
Close
√√ 
(
√√ 
)
√√ 
;
√√ 
}
ƒƒ 
return
∆∆ 
pollOptionList
∆∆ !
;
∆∆! "
}
»» 	
public
   
static
   
List
   
<
   

PollOption
   %
>
  % &"
GetOptionsByPollGuid
  ' ;
(
  ; <
Guid
  < @
pollGuid
  A I
)
  I J
{
ÀÀ 	
IDataReader
ÃÃ 
reader
ÃÃ 
=
ÃÃ  
DBPollOption
ÃÃ! -
.
ÃÃ- .
GetPollOptions
ÃÃ. <
(
ÃÃ< =
pollGuid
ÃÃ= E
)
ÃÃE F
;
ÃÃF G
return
ÕÕ  
LoadListFromReader
ÕÕ %
(
ÕÕ% &
reader
ÕÕ& ,
)
ÕÕ, -
;
ÕÕ- .
}
ŒŒ 	
}
““ 
}”” ©
~D:\Projects\DefensePoint\whitesource-testcases-csharp\CWE79\mojoportal\mojoPortal.Features.Business\Properties\AssemblyInfo.cs
[ 
assembly 	
:	 

AssemblyTitle 
( 
$str 7
)7 8
]8 9
[		 
assembly		 	
:			 

AssemblyDescription		 
(		 
$str		 !
)		! "
]		" #
[

 
assembly

 	
:

	 
!
AssemblyConfiguration

  
(

  !
$str

! #
)

# $
]

$ %
[ 
assembly 	
:	 

AssemblyCompany 
( 
$str &
)& '
]' (
[ 
assembly 	
:	 

AssemblyProduct 
( 
$str 9
)9 :
]: ;
[ 
assembly 	
:	 

AssemblyCopyright 
( 
$str 9
)9 :
]: ;
[ 
assembly 	
:	 

AssemblyTrademark 
( 
$str 
)  
]  !
[ 
assembly 	
:	 

AssemblyCulture 
( 
$str 
) 
] 
[ 
assembly 	
:	 


ComVisible 
( 
false 
) 
] 
[ 
assembly 	
:	 

Guid 
( 
$str 6
)6 7
]7 8
[## 
assembly## 	
:##	 

AssemblyVersion## 
(## 
$str## $
)##$ %
]##% &
[$$ 
assembly$$ 	
:$$	 

AssemblyFileVersion$$ 
($$ 
$str$$ (
)$$( )
]$$) *Ú
~D:\Projects\DefensePoint\whitesource-testcases-csharp\CWE79\mojoportal\mojoPortal.Features.Business\SharedFiles\Models\File.cs
	namespace 	

mojoPortal
 
. 
Features 
. 
Business &
.& '
SharedFiles' 2
.2 3
Models3 9
{ 
public 
class 
File 
{ 
public 
int	 
ID 
{ 
get 
; 
set 
; 
} 
public		 
int			 
ModuleID		 
{		 
get		 
;		 
set		  
;		  !
}		" #
public

 
int

	 
UploadUserID

 
{

 
get

 
;

  
set

! $
;

$ %
}

& '
public 
string	 
Name 
{ 
get 
; 
set 
;  
}! "
public 
string	 
OriginalFileName  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string	 
ServerFileName 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
int	 
SizeInKB 
{ 
get 
; 
set  
;  !
}" #
public 
DateTime	 

UploadDate 
{ 
get "
;" #
set$ '
;' (
}) *
public 
int	 
FolderID 
{ 
get 
; 
set  
;  !
}" #
public 
Guid	 
ItemGuid 
{ 
get 
; 
set !
;! "
}# $
public 
Guid	 

ModuleGuid 
{ 
get 
; 
set  #
;# $
}% &
public 
Guid	 
UserGuid 
{ 
get 
; 
set !
;! "
}# $
public 
Guid	 

FolderGuid 
{ 
get 
; 
set  #
;# $
}% &
public 
string	 
Description 
{ 
get !
;! "
set# &
;& '
}( )
public 
int	 
DownloadCount 
{ 
get  
;  !
set" %
;% &
}' (
public 
string	 
	ViewRoles 
{ 
get 
;  
set! $
;$ %
}& '
} 
} Ü
ÄD:\Projects\DefensePoint\whitesource-testcases-csharp\CWE79\mojoportal\mojoPortal.Features.Business\SharedFiles\Models\Folder.cs
	namespace 	

mojoPortal
 
. 
Features 
. 
Business &
.& '
SharedFiles' 2
.2 3
Models3 9
{ 
public 
class 
Folder 
{ 
public 
int	 
ID 
{ 
get 
; 
set 
; 
} 
public 
int	 
ModuleID 
{ 
get 
; 
set  
;  !
}" #
public		 
string			 
Name		 
{		 
get		 
;		 
set		 
;		  
}		! "
public

 
int

	 
ParentID

 
{

 
get

 
;

 
set

  
;

  !
}

" #
public 
Guid	 

ModuleGuid 
{ 
get 
; 
set  #
;# $
}% &
public 
Guid	 

FolderGuid 
{ 
get 
; 
set  #
;# $
}% &
public 
Guid	 

ParentGuid 
{ 
get 
; 
set  #
;# $
}% &
public 
string	 
	ViewRoles 
{ 
get 
;  
set! $
;$ %
}& '
} 
} ¸
âD:\Projects\DefensePoint\whitesource-testcases-csharp\CWE79\mojoportal\mojoPortal.Features.Business\SharedFiles\Models\FoldersAndFiles.cs
	namespace 	

mojoPortal
 
. 
Features 
. 
Business &
.& '
SharedFiles' 2
.2 3
Models3 9
{ 
public 
class 
FoldersAndFiles 
{ 
public 
List	 
< 
Folder 
> 
Folders 
{ 
get  #
;# $
set% (
;( )
}* +
=, -
new. 1
List2 6
<6 7
Folder7 =
>= >
(> ?
)? @
;@ A
public 
List	 
< 
File 
> 
Files 
{ 
get 
;  
set! $
;$ %
}& '
=( )
new* -
List. 2
<2 3
File3 7
>7 8
(8 9
)9 :
;: ;
}		 
}

 ˇ
}D:\Projects\DefensePoint\whitesource-testcases-csharp\CWE79\mojoportal\mojoPortal.Features.Business\SharedFiles\SharedFile.cs
	namespace 	

mojoPortal
 
. 
Business 
{ 
public 
class 

SharedFile 
: 
IIndexableContent ,
{ 
private 	
const
 
string 
featureGuid "
=# $
$str% K
;K L
public 
static	 
Guid 
FeatureGuid  
{ 
get 
{ 
return	 
new 
Guid 
( 
featureGuid $
)$ %
;% &
}' (
} 
public"" 

SharedFile""	 
("" 
)"" 
{## 
}## 
public&& 

SharedFile&&	 
(&& 
int&& 
moduleId&&  
,&&  !
int&&" %
itemId&&& ,
)&&, -
{'' 
GetSharedFile(( 
((( 
itemId(( 
)(( 
;(( 
})) 
private00 	
static00
 
readonly00 
ILog00 
log00 "
=00# $

LogManager00% /
.00/ 0
	GetLogger000 9
(009 :
typeof00: @
(00@ A

SharedFile00A K
)00K L
)00L M
;00M N
private22 	
Guid22
 
itemGuid22 
=22 
Guid22 
.22 
Empty22 $
;22$ %
private33 	
Guid33
 

moduleGuid33 
=33 
Guid33  
.33  !
Empty33! &
;33& '
private44 	
Guid44
 
userGuid44 
=44 
Guid44 
.44 
Empty44 $
;44$ %
private55 	
Guid55
 

folderGuid55 
=55 
Guid55  
.55  !
Empty55! &
;55& '
private66 	
int66
 
itemID66 
=66 
-66 
$num66 
;66 
private77 	
int77
 
moduleID77 
=77 
-77 
$num77 
;77 
private88 	
int88
 
uploadUserID88 
;88 
private99 	
string99
 
friendlyName99 
=99 
string99  &
.99& '
Empty99' ,
;99, -
private:: 	
string::
 
originalFileName:: !
=::" #
string::$ *
.::* +
Empty::+ 0
;::0 1
private;; 	
string;;
 
serverFileName;; 
=;;  !
string;;" (
.;;( )
Empty;;) .
;;;. /
private<< 	
int<<
 
sizeInKB<< 
=<< 
$num<< 
;<< 
private== 	
DateTime==
 

uploadDate== 
=== 
DateTime==  (
.==( )
UtcNow==) /
;==/ 0
private>> 	
int>>
 
folderID>> 
=>> 
->> 
$num>> 
;>> 
private?? 	
string??
 
description?? 
=?? 
string?? %
.??% &
Empty??& +
;??+ ,
private@@ 	
int@@
 
downloadCount@@ 
=@@ 
$num@@ 
;@@  
privateAA 	
stringAA
 
	viewRolesAA 
=AA 
$strAA (
;AA( )
publicHH 
GuidHH	 
ItemGuidHH 
{II 
getJJ 
{JJ 
returnJJ	 
itemGuidJJ 
;JJ 
}JJ 
}KK 
publicLL 
GuidLL	 

ModuleGuidLL 
{MM 
getNN 
{NN 
returnNN	 

moduleGuidNN 
;NN 
}NN 
setOO 
{OO 

moduleGuidOO	 
=OO 
valueOO 
;OO 
}OO 
}PP 
publicQQ 
GuidQQ	 

FolderGuidQQ 
{RR 
getSS 
{SS 
returnSS	 

folderGuidSS 
;SS 
}SS 
setTT 
{TT 

folderGuidTT	 
=TT 
valueTT 
;TT 
}TT 
}UU 
publicVV 
GuidVV	 
UserGuidVV 
{WW 
getXX 
{XX 
returnXX	 
userGuidXX 
;XX 
}XX 
setYY 
{YY 
userGuidYY	 
=YY 
valueYY 
;YY 
}YY 
}ZZ 
public[[ 
int[[	 
ItemId[[ 
{\\ 
get]] 
{]] 
return]]	 
itemID]] 
;]] 
}]] 
set^^ 
{^^ 
itemID^^	 
=^^ 
value^^ 
;^^ 
}^^ 
}__ 
public`` 
int``	 
ModuleId`` 
{aa 
getbb 
{bb 
returnbb	 
moduleIDbb 
;bb 
}bb 
setcc 
{cc 
moduleIDcc	 
=cc 
valuecc 
;cc 
}cc 
}dd 
publicee 
intee	 
UploadUserIdee 
{ff 
getgg 
{gg 
returngg	 
uploadUserIDgg 
;gg 
}gg 
sethh 
{hh 
uploadUserIDhh	 
=hh 
valuehh 
;hh 
}hh  
}ii 
publicjj 
intjj	 
DownloadCountjj 
{kk 
getll 
{ll 
returnll	 
downloadCountll 
;ll 
}ll  
}mm 
publicnn 
stringnn	 
FriendlyNamenn 
{oo 
getpp 
{pp 
returnpp	 
friendlyNamepp 
;pp 
}pp 
setqq 
{qq 
friendlyNameqq	 
=qq 
valueqq 
;qq 
}qq  
}rr 
publicss 
stringss	 
OriginalFileNamess  
{tt 
getuu 
{uu 
returnuu	 
originalFileNameuu  
;uu  !
}uu" #
setvv 
{vv 
originalFileNamevv	 
=vv 
valuevv !
;vv! "
}vv# $
}ww 
publicxx 
stringxx	 
ServerFileNamexx 
{yy 
getzz 
{zz 
returnzz	 
serverFileNamezz 
;zz 
}zz  !
set{{ 
{{{ 
serverFileName{{	 
={{ 
value{{ 
;{{  
}{{! "
}|| 
public}} 
string}}	 
Description}} 
{~~ 
get 
{ 
return	 
description 
; 
} 
set
ÄÄ 
{
ÄÄ 
description
ÄÄ	 
=
ÄÄ 
value
ÄÄ 
;
ÄÄ 
}
ÄÄ 
}
ÅÅ 
public
ÇÇ 
int
ÇÇ	 
SizeInKB
ÇÇ 
{
ÉÉ 
get
ÑÑ 
{
ÑÑ 
return
ÑÑ	 
sizeInKB
ÑÑ 
;
ÑÑ 
}
ÑÑ 
set
ÖÖ 
{
ÖÖ 
sizeInKB
ÖÖ	 
=
ÖÖ 
value
ÖÖ 
;
ÖÖ 
}
ÖÖ 
}
ÜÜ 
public
áá 
DateTime
áá	 

UploadDate
áá 
{
àà 
get
ââ 
{
ââ 
return
ââ	 

uploadDate
ââ 
;
ââ 
}
ââ 
set
ää 
{
ää 

uploadDate
ää	 
=
ää 
value
ää 
;
ää 
}
ää 
}
ãã 
public
åå 
int
åå	 
FolderId
åå 
{
çç 
get
éé 
{
éé 
return
éé	 
folderID
éé 
;
éé 
}
éé 
set
èè 
{
èè 
folderID
èè	 
=
èè 
value
èè 
;
èè 
}
èè 
}
êê 
public
ëë 
string
ëë	 
	ViewRoles
ëë 
{
íí 
get
ìì 
{
ìì 
return
ìì	 
	viewRoles
ìì 
;
ìì 
}
ìì 
set
îî 
{
îî 
	viewRoles
îî	 
=
îî 
value
îî 
;
îî 
}
îî 
}
ïï 
private
úú 	
void
úú
 
GetSharedFile
úú 
(
úú 
int
úú  
itemId
úú! '
)
úú' (
{
ùù 
using
ûû 
(
ûû	 

IDataReader
ûû
 
reader
ûû 
=
ûû 
DBSharedFiles
ûû ,
.
ûû, -
GetSharedFile
ûû- :
(
ûû: ;
itemId
ûû; A
)
ûûA B
)
ûûB C
{
üü 
if
†† 
(
†† 
reader
†† 
.
†† 
Read
†† 
(
†† 
)
†† 
)
†† 
{
°° 
itemID
¢¢ 
=
¢¢ 
Convert
¢¢ 
.
¢¢ 
ToInt32
¢¢ 
(
¢¢ 
reader
¢¢ $
[
¢¢$ %
$str
¢¢% -
]
¢¢- .
)
¢¢. /
;
¢¢/ 0
moduleID
££ 
=
££ 
Convert
££ 
.
££ 
ToInt32
££ 
(
££  
reader
££  &
[
££& '
$str
££' 1
]
££1 2
)
££2 3
;
££3 4
uploadUserID
§§ 
=
§§ 
Convert
§§ 
.
§§ 
ToInt32
§§ #
(
§§# $
reader
§§$ *
[
§§* +
$str
§§+ 9
]
§§9 :
)
§§: ;
;
§§; <
friendlyName
•• 
=
•• 
reader
•• 
[
•• 
$str
•• )
]
••) *
.
••* +
ToString
••+ 3
(
••3 4
)
••4 5
;
••5 6
originalFileName
¶¶ 
=
¶¶ 
reader
¶¶ 
[
¶¶ 
$str
¶¶ 1
]
¶¶1 2
.
¶¶2 3
ToString
¶¶3 ;
(
¶¶; <
)
¶¶< =
;
¶¶= >
serverFileName
ßß 
=
ßß 
reader
ßß 
[
ßß 
$str
ßß -
]
ßß- .
.
ßß. /
ToString
ßß/ 7
(
ßß7 8
)
ßß8 9
;
ßß9 :
sizeInKB
®® 
=
®® 
Convert
®® 
.
®® 
ToInt32
®® 
(
®®  
reader
®®  &
[
®®& '
$str
®®' 1
]
®®1 2
)
®®2 3
;
®®3 4

uploadDate
©© 
=
©© 
Convert
©© 
.
©© 

ToDateTime
©© $
(
©©$ %
reader
©©% +
[
©©+ ,
$str
©©, 8
]
©©8 9
)
©©9 :
;
©©: ;
folderID
™™ 
=
™™ 
Convert
™™ 
.
™™ 
ToInt32
™™ 
(
™™  
reader
™™  &
[
™™& '
$str
™™' 1
]
™™1 2
)
™™2 3
;
™™3 4

moduleGuid
´´ 
=
´´ 
new
´´ 
Guid
´´ 
(
´´ 
reader
´´ !
[
´´! "
$str
´´" .
]
´´. /
.
´´/ 0
ToString
´´0 8
(
´´8 9
)
´´9 :
)
´´: ;
;
´´; <
string
≠≠ 
u
≠≠ 
=
≠≠ 
reader
≠≠ 
[
≠≠ 
$str
≠≠ !
]
≠≠! "
.
≠≠" #
ToString
≠≠# +
(
≠≠+ ,
)
≠≠, -
;
≠≠- .
if
ØØ 
(
ØØ 	
u
ØØ	 

.
ØØ
 
Length
ØØ 
==
ØØ 
$num
ØØ 
)
ØØ 
{
∞∞ 
userGuid
±± 
=
±± 
new
±± 
Guid
±± 
(
±± 
u
±± 
)
±± 
;
±± 
}
≤≤ 
u
¥¥ 
=
¥¥ 
reader
¥¥	 
[
¥¥ 
$str
¥¥ 
]
¥¥ 
.
¥¥ 
ToString
¥¥ &
(
¥¥& '
)
¥¥' (
;
¥¥( )
if
∂∂ 
(
∂∂ 	
u
∂∂	 

.
∂∂
 
Length
∂∂ 
==
∂∂ 
$num
∂∂ 
)
∂∂ 
{
∑∑ 

folderGuid
∏∏ 
=
∏∏ 
new
∏∏ 
Guid
∏∏ 
(
∏∏ 
u
∏∏ 
)
∏∏ 
;
∏∏ 
}
ππ 
description
ªª 
=
ªª 
reader
ªª 
[
ªª 
$str
ªª '
]
ªª' (
.
ªª( )
ToString
ªª) 1
(
ªª1 2
)
ªª2 3
;
ªª3 4
downloadCount
ºº 
=
ºº 
Convert
ºº 
.
ºº 
ToInt32
ºº $
(
ºº$ %
reader
ºº% +
[
ºº+ ,
$str
ºº, ;
]
ºº; <
)
ºº< =
;
ºº= >
	viewRoles
ΩΩ 
=
ΩΩ 
reader
ΩΩ 
[
ΩΩ 
$str
ΩΩ #
]
ΩΩ# $
.
ΩΩ$ %
ToString
ΩΩ% -
(
ΩΩ- .
)
ΩΩ. /
;
ΩΩ/ 0
}
ææ 
}
øø 
}
¿¿ 
private
√√ 	
bool
√√
 
Create
√√ 
(
√√ 
)
√√ 
{
ƒƒ 
int
≈≈ 
newID
≈≈ 
=
≈≈ 
$num
≈≈ 
;
≈≈ 
if
«« 
(
«« 
serverFileName
«« 
.
«« 
Length
«« 
==
«« 
$num
««  !
)
««! "
{
»» 
serverFileName
…… 
=
…… 
Guid
…… 
.
…… 
NewGuid
…… !
(
……! "
)
……" #
.
……# $
ToString
……$ ,
(
……, -
)
……- .
+
……/ 0
$str
……1 :
;
……: ;
}
   
itemGuid
ÃÃ 
=
ÃÃ 
Guid
ÃÃ 
.
ÃÃ 
NewGuid
ÃÃ 
(
ÃÃ 
)
ÃÃ 
;
ÃÃ 
newID
ŒŒ 
=
ŒŒ	 

DBSharedFiles
ŒŒ 
.
ŒŒ 
AddSharedFile
ŒŒ &
(
ŒŒ& '
itemGuid
œœ 
,
œœ 

moduleGuid
–– 
,
–– 
userGuid
—— 
,
—— 

folderGuid
““ 
,
““ 
moduleID
”” 
,
”” 
uploadUserID
‘‘ 
,
‘‘ 
friendlyName
’’ 
,
’’ 
originalFileName
÷÷ 
,
÷÷ 
serverFileName
◊◊ 
,
◊◊ 
sizeInKB
ÿÿ 
,
ÿÿ 

uploadDate
ŸŸ 
,
ŸŸ 
folderID
⁄⁄ 
,
⁄⁄ 
description
€€ 
,
€€ 
	viewRoles
‹‹ 
)
›› 
;
›› 
itemID
ﬂﬂ 	
=
ﬂﬂ
 
newID
ﬂﬂ 
;
ﬂﬂ 
bool
·· 
result
·· 
=
·· 
(
·· 
newID
·· 
>
·· 
$num
·· 
)
·· 
;
·· 
if
„„ 
(
„„ 
result
„„ 
)
„„ 
{
‰‰ %
ContentChangedEventArgs
ÂÂ 
e
ÂÂ 
=
ÂÂ 
new
ÂÂ  #%
ContentChangedEventArgs
ÂÂ$ ;
(
ÂÂ; <
)
ÂÂ< =
;
ÂÂ= >
OnContentChanged
ÊÊ 
(
ÊÊ 
e
ÊÊ 
)
ÊÊ 
;
ÊÊ 
}
ÁÁ 
return
ÈÈ 	
result
ÈÈ
 
;
ÈÈ 
}
ÍÍ 
private
ÌÌ 	
bool
ÌÌ
 
Update
ÌÌ 
(
ÌÌ 
)
ÌÌ 
{
ÓÓ 
bool
ÔÔ 
result
ÔÔ 
=
ÔÔ 
DBSharedFiles
ÔÔ 
.
ÔÔ 
UpdateSharedFile
ÔÔ /
(
ÔÔ/ 0
itemID
 

,

 
moduleID
ÒÒ 
,
ÒÒ 
uploadUserID
ÚÚ 
,
ÚÚ 
friendlyName
ÛÛ 
,
ÛÛ 
originalFileName
ÙÙ 
,
ÙÙ 
serverFileName
ıı 
,
ıı 
sizeInKB
ˆˆ 
,
ˆˆ 

uploadDate
˜˜ 
,
˜˜ 
folderID
¯¯ 
,
¯¯ 

folderGuid
˘˘ 
,
˘˘ 
userGuid
˙˙ 
,
˙˙ 
description
˚˚ 
,
˚˚ 
	viewRoles
¸¸ 
)
˝˝ 
;
˝˝ 
if
ˇˇ 
(
ˇˇ 
result
ˇˇ 
)
ˇˇ 
{
ÄÄ %
ContentChangedEventArgs
ÅÅ 
e
ÅÅ 
=
ÅÅ 
new
ÅÅ  #%
ContentChangedEventArgs
ÅÅ$ ;
(
ÅÅ; <
)
ÅÅ< =
;
ÅÅ= >
OnContentChanged
ÇÇ 
(
ÇÇ 
e
ÇÇ 
)
ÇÇ 
;
ÇÇ 
}
ÉÉ 
return
ÖÖ 	
result
ÖÖ
 
;
ÖÖ 
}
ÜÜ 
public
çç 
bool
çç	 
Save
çç 
(
çç 
)
çç 
{
éé 
if
èè 
(
èè 
itemID
èè 
>
èè 
$num
èè 
)
èè 
{
êê 
return
ëë 

Update
ëë 
(
ëë 
)
ëë 
;
ëë 
}
íí 
else
ìì 
{
îî 
return
ïï 

Create
ïï 
(
ïï 
)
ïï 
;
ïï 
}
ññ 
}
óó 
public
öö 
IDataReader
öö	 

GetHistory
öö 
(
öö  
)
öö  !
{
õõ 
return
úú 	
DBSharedFiles
úú
 
.
úú 

GetHistory
úú "
(
úú" #
moduleID
úú# +
,
úú+ ,
itemID
úú- 3
)
úú3 4
;
úú4 5
}
ùù 
public
†† 
bool
††	 
Delete
†† 
(
†† 
)
†† 
{
°° 
bool
¢¢ 
result
¢¢ 
=
¢¢ 
false
¢¢ 
;
¢¢ 
if
§§ 
(
§§ 
itemID
§§ 
==
§§ 
-
§§ 
$num
§§ 
)
§§ 
{
•• 
return
¶¶ 

result
¶¶ 
;
¶¶ 
}
ßß 

SharedFile
©© 

sharedFile
©© 
=
©© 
new
©© 

SharedFile
©© )
(
©©) *
moduleID
©©* 2
,
©©2 3
itemID
©©4 :
)
©©: ;
;
©©; <
DBSharedFiles
´´ 
.
´´ #
DeleteHistoryByItemID
´´ &
(
´´& '
itemID
´´' -
)
´´- .
;
´´. /
result
ÆÆ 	
=
ÆÆ
 
DBSharedFiles
ÆÆ 
.
ÆÆ 
DeleteSharedFile
ÆÆ *
(
ÆÆ* +
itemID
ÆÆ+ 1
)
ÆÆ1 2
;
ÆÆ2 3
if
∞∞ 
(
∞∞ 
result
∞∞ 
)
∞∞ 
{
±± %
ContentChangedEventArgs
≤≤ 
e
≤≤ 
=
≤≤ 
new
≤≤  #%
ContentChangedEventArgs
≤≤$ ;
(
≤≤; <
)
≤≤< =
;
≤≤= >
e
≥≥ 
.
≥≥ 
	IsDeleted
≥≥ 
=
≥≥ 
true
≥≥ 
;
≥≥ 
OnContentChanged
¥¥ 
(
¥¥ 
e
¥¥ 
)
¥¥ 
;
¥¥ 
}
µµ 
return
∑∑ 	
result
∑∑
 
;
∑∑ 
}
∏∏ 
public
øø 
static
øø	 
bool
øø $
IncrementDownloadCount
øø +
(
øø+ ,
int
øø, /
itemId
øø0 6
)
øø6 7
{
¿¿ 
return
¡¡ 	
DBSharedFiles
¡¡
 
.
¡¡ $
IncrementDownloadCount
¡¡ .
(
¡¡. /
itemId
¡¡/ 5
)
¡¡5 6
;
¡¡6 7
}
¬¬ 
public
≈≈ 
static
≈≈	 
bool
≈≈ 

AddHistory
≈≈ 
(
≈≈  
Guid
∆∆ 	
itemGuid
∆∆
 
,
∆∆ 
Guid
«« 	

moduleGuid
««
 
,
«« 
Guid
»» 	
userGuid
»»
 
,
»» 
int
…… 
itemId
……	 
,
…… 
int
   
moduleId
  	 
,
   
string
ÀÀ 
friendlyName
ÀÀ 
,
ÀÀ 
string
ÃÃ 
originalFileName
ÃÃ 
,
ÃÃ 
string
ÕÕ 
serverFileName
ÕÕ 
,
ÕÕ 
int
ŒŒ 
sizeInKB
ŒŒ	 
,
ŒŒ 
DateTime
œœ 

uploadDate
œœ 
,
œœ 
int
–– 
uploadUserId
––	 
,
–– 
string
—— 
	viewRoles
—— 
)
—— 
{
““ 
return
”” 	
DBSharedFiles
””
 
.
”” 

AddHistory
”” "
(
””" #
itemGuid
‘‘ 
,
‘‘ 

moduleGuid
’’ 
,
’’ 
userGuid
÷÷ 
,
÷÷ 
itemId
◊◊ 

,
◊◊
 
moduleId
ÿÿ 
,
ÿÿ 
friendlyName
ŸŸ 
,
ŸŸ 
originalFileName
⁄⁄ 
,
⁄⁄ 
serverFileName
€€ 
,
€€ 
sizeInKB
‹‹ 
,
‹‹ 

uploadDate
›› 
,
›› 
uploadUserId
ﬁﬁ 
,
ﬁﬁ 
DateTime
ﬂﬂ 
.
ﬂﬂ 
UtcNow
ﬂﬂ 
,
ﬂﬂ 
	viewRoles
‡‡ 
)
·· 
;
·· 
}
‚‚ 
public
ÂÂ 
static
ÂÂ	 
SharedFileHistory
ÂÂ !
GetHistoryFile
ÂÂ" 0
(
ÂÂ0 1
int
ÂÂ1 4
historyFileId
ÂÂ5 B
)
ÂÂB C
{
ÊÊ 
SharedFileHistory
ÁÁ 
historyFile
ÁÁ  
=
ÁÁ! "
null
ÁÁ# '
;
ÁÁ' (
using
ÈÈ 
(
ÈÈ	 

IDataReader
ÈÈ
 
reader
ÈÈ 
=
ÈÈ 
DBSharedFiles
ÈÈ ,
.
ÈÈ, -
GetHistoryFile
ÈÈ- ;
(
ÈÈ; <
historyFileId
ÈÈ< I
)
ÈÈI J
)
ÈÈJ K
{
ÍÍ 
if
ÎÎ 
(
ÎÎ 
reader
ÎÎ 
.
ÎÎ 
Read
ÎÎ 
(
ÎÎ 
)
ÎÎ 
)
ÎÎ 
{
ÏÏ 
historyFile
ÌÌ 
=
ÌÌ 
new
ÌÌ 
SharedFileHistory
ÌÌ (
(
ÌÌ( )
)
ÌÌ) *
;
ÌÌ* +
historyFile
ÓÓ 
.
ÓÓ 
FriendlyName
ÓÓ 
=
ÓÓ 
reader
ÓÓ  &
[
ÓÓ& '
$str
ÓÓ' 5
]
ÓÓ5 6
.
ÓÓ6 7
ToString
ÓÓ7 ?
(
ÓÓ? @
)
ÓÓ@ A
;
ÓÓA B
historyFile
ÔÔ 
.
ÔÔ 
ServerFileName
ÔÔ 
=
ÔÔ  !
reader
ÔÔ" (
[
ÔÔ( )
$str
ÔÔ) 9
]
ÔÔ9 :
.
ÔÔ: ;
ToString
ÔÔ; C
(
ÔÔC D
)
ÔÔD E
;
ÔÔE F
}
 
}
ÒÒ 
return
ÛÛ 	
historyFile
ÛÛ
 
;
ÛÛ 
}
ÙÙ 
public
˜˜ 
static
˜˜	 
IDataReader
˜˜ )
GetHistoryFileAsIDataReader
˜˜ 7
(
˜˜7 8
int
˜˜8 ;
id
˜˜< >
)
˜˜> ?
{
¯¯ 
return
˘˘ 	
DBSharedFiles
˘˘
 
.
˘˘ 
GetHistoryFile
˘˘ &
(
˘˘& '
id
˘˘' )
)
˘˘) *
;
˘˘* +
}
˙˙ 
public
˝˝ 
static
˝˝	 
bool
˝˝ 
DeleteByModule
˝˝ #
(
˝˝# $
int
˝˝$ '
moduleId
˝˝( 0
)
˝˝0 1
{
˛˛ 
return
ˇˇ 	
DBSharedFiles
ˇˇ
 
.
ˇˇ 
DeleteByModule
ˇˇ &
(
ˇˇ& '
moduleId
ˇˇ' /
)
ˇˇ/ 0
;
ˇˇ0 1
}
ÄÄ 
public
ÉÉ 
static
ÉÉ	 
bool
ÉÉ 
DeleteBySite
ÉÉ !
(
ÉÉ! "
int
ÉÉ" %
siteId
ÉÉ& ,
)
ÉÉ, -
{
ÑÑ 
return
ÖÖ 	
DBSharedFiles
ÖÖ
 
.
ÖÖ 
DeleteBySite
ÖÖ $
(
ÖÖ$ %
siteId
ÖÖ% +
)
ÖÖ+ ,
;
ÖÖ, -
}
ÜÜ 
public
ââ 
static
ââ	 
bool
ââ 
DeleteHistory
ââ "
(
ââ" #
int
ââ# &
id
ââ' )
)
ââ) *
{
ää 
return
åå 	
DBSharedFiles
åå
 
.
åå 
DeleteHistory
åå %
(
åå% &
id
åå& (
)
åå( )
;
åå) *
}
çç 
public
êê 
static
êê	 
IDataReader
êê 
GetSharedFiles
êê *
(
êê* +
int
êê+ .
moduleId
êê/ 7
,
êê7 8
int
êê9 <
folderId
êê= E
)
êêE F
{
ëë 
return
íí 	
DBSharedFiles
íí
 
.
íí 
GetSharedFiles
íí &
(
íí& '
moduleId
íí' /
,
íí/ 0
folderId
íí1 9
)
íí9 :
;
íí: ;
}
ìì 
public
ññ 
static
ññ	 
	DataTable
ññ "
GetSharedFilesByPage
ññ .
(
ññ. /
int
ññ/ 2
siteId
ññ3 9
,
ññ9 :
int
ññ; >
pageId
ññ? E
)
ññE F
{
óó 
	DataTable
òò 
	dataTable
òò 
=
òò 
new
òò 
	DataTable
òò &
(
òò& '
)
òò' (
;
òò( )
	dataTable
öö 
.
öö 
Columns
öö 
.
öö 
Add
öö 
(
öö 
$str
öö !
,
öö! "
typeof
öö# )
(
öö) *
int
öö* -
)
öö- .
)
öö. /
;
öö/ 0
	dataTable
õõ 
.
õõ 
Columns
õõ 
.
õõ 
Add
õõ 
(
õõ 
$str
õõ #
,
õõ# $
typeof
õõ% +
(
õõ+ ,
int
õõ, /
)
õõ/ 0
)
õõ0 1
;
õõ1 2
	dataTable
úú 
.
úú 
Columns
úú 
.
úú 
Add
úú 
(
úú 
$str
úú &
,
úú& '
typeof
úú( .
(
úú. /
string
úú/ 5
)
úú5 6
)
úú6 7
;
úú7 8
	dataTable
ùù 
.
ùù 
Columns
ùù 
.
ùù 
Add
ùù 
(
ùù 
$str
ùù '
,
ùù' (
typeof
ùù) /
(
ùù/ 0
string
ùù0 6
)
ùù6 7
)
ùù7 8
;
ùù8 9
	dataTable
ûû 
.
ûû 
Columns
ûû 
.
ûû 
Add
ûû 
(
ûû 
$str
ûû $
,
ûû$ %
typeof
ûû& ,
(
ûû, -
string
ûû- 3
)
ûû3 4
)
ûû4 5
;
ûû5 6
	dataTable
üü 
.
üü 
Columns
üü 
.
üü 
Add
üü 
(
üü 
$str
üü &
,
üü& '
typeof
üü( .
(
üü. /
string
üü/ 5
)
üü5 6
)
üü6 7
;
üü7 8
	dataTable
†† 
.
†† 
Columns
†† 
.
†† 
Add
†† 
(
†† 
$str
†† %
,
††% &
typeof
††' -
(
††- .
DateTime
††. 6
)
††6 7
)
††7 8
;
††8 9
using
¢¢ 
(
¢¢	 

IDataReader
¢¢
 
reader
¢¢ 
=
¢¢ 
DBSharedFiles
¢¢ ,
.
¢¢, -"
GetSharedFilesByPage
¢¢- A
(
¢¢A B
siteId
¢¢B H
,
¢¢H I
pageId
¢¢J P
)
¢¢P Q
)
¢¢Q R
{
££ 
while
§§ 	
(
§§
 
reader
§§ 
.
§§ 
Read
§§ 
(
§§ 
)
§§ 
)
§§ 
{
•• 
DataRow
¶¶ 
row
¶¶ 
=
¶¶ 
	dataTable
¶¶ 
.
¶¶ 
NewRow
¶¶ #
(
¶¶# $
)
¶¶$ %
;
¶¶% &
row
®® 
[
®® 	
$str
®®	 
]
®® 
=
®® 
reader
®® 
[
®® 
$str
®® $
]
®®$ %
;
®®% &
row
©© 
[
©© 	
$str
©©	 
]
©© 
=
©© 
reader
©© 
[
©© 
$str
©© (
]
©©( )
;
©©) *
row
™™ 
[
™™ 	
$str
™™	 
]
™™ 
=
™™ 
reader
™™  
[
™™  !
$str
™™! .
]
™™. /
;
™™/ 0
row
´´ 
[
´´ 	
$str
´´	 
]
´´ 
=
´´ 
reader
´´ !
[
´´! "
$str
´´" 0
]
´´0 1
;
´´1 2
row
¨¨ 
[
¨¨ 	
$str
¨¨	 
]
¨¨ 
=
¨¨ 
reader
¨¨ 
[
¨¨ 
$str
¨¨ *
]
¨¨* +
;
¨¨+ ,
row
≠≠ 
[
≠≠ 	
$str
≠≠	 
]
≠≠ 
=
≠≠ 
reader
≠≠  
[
≠≠  !
$str
≠≠! .
]
≠≠. /
;
≠≠/ 0
row
ÆÆ 
[
ÆÆ 	
$str
ÆÆ	 
]
ÆÆ 
=
ÆÆ 
Convert
ÆÆ  
.
ÆÆ  !

ToDateTime
ÆÆ! +
(
ÆÆ+ ,
reader
ÆÆ, 2
[
ÆÆ2 3
$str
ÆÆ3 ?
]
ÆÆ? @
)
ÆÆ@ A
;
ÆÆA B
	dataTable
∞∞ 
.
∞∞ 
Rows
∞∞ 
.
∞∞ 
Add
∞∞ 
(
∞∞ 
row
∞∞ 
)
∞∞ 
;
∞∞ 
}
±± 
}
≤≤ 
return
¥¥ 	
	dataTable
¥¥
 
;
¥¥ 
}
µµ 
public
∏∏ 
static
∏∏	 
IDataReader
∏∏ 
GetSharedFiles
∏∏ *
(
∏∏* +
int
∏∏+ .
moduleId
∏∏/ 7
)
∏∏7 8
{
ππ 
return
∫∫ 	
DBSharedFiles
∫∫
 
.
∫∫ 
GetSharedFiles
∫∫ &
(
∫∫& '
moduleId
∫∫' /
)
∫∫/ 0
;
∫∫0 1
}
ªª 
public
ææ 
static
ææ	 
IDataReader
ææ  
GetHistoryByModule
ææ .
(
ææ. /
int
ææ/ 2
moduleId
ææ3 ;
)
ææ; <
{
øø 
return
¿¿ 	
DBSharedFiles
¿¿
 
.
¿¿  
GetHistoryByModule
¿¿ *
(
¿¿* +
moduleId
¿¿+ 3
)
¿¿3 4
;
¿¿4 5
}
¡¡ 
public
»» 
event
»»	 (
ContentChangedEventHandler
»» )
ContentChanged
»»* 8
;
»»8 9
	protected
   
void
   
OnContentChanged
   !
(
  ! "%
ContentChangedEventArgs
  " 9
e
  : ;
)
  ; <
{
ÀÀ 
ContentChanged
ÃÃ 
?
ÃÃ 
.
ÃÃ 
Invoke
ÃÃ 
(
ÃÃ 
this
ÃÃ 
,
ÃÃ 
e
ÃÃ  !
)
ÃÃ! "
;
ÃÃ" #
}
ÕÕ 
}
–– 
}—— ÿ˜
ÉD:\Projects\DefensePoint\whitesource-testcases-csharp\CWE79\mojoportal\mojoPortal.Features.Business\SharedFiles\SharedFileFolder.cs
	namespace 	

mojoPortal
 
. 
Business 
{ 
public 
class 
SharedFileFolder 
{ 
public 
SharedFileFolder	 
( 
) 
{ 
} 
public 
SharedFileFolder	 
( 
int 
moduleId &
,& '
int( +
folderId, 4
)4 5
{   
moduleID!! 
=!! 
moduleId!! 
;!! 
GetSharedFileFolder"" 
("" 
folderId"" 
)""  
;""  !
}## 
private** 	
static**
 
readonly** 
ILog** 
log** "
=**# $

LogManager**% /
.**/ 0
	GetLogger**0 9
(**9 :
typeof**: @
(**@ A
SharedFileFolder**A Q
)**Q R
)**R S
;**S T
private++ 	
Guid++
 

folderGuid++ 
=++ 
Guid++  
.++  !
Empty++! &
;++& '
private,, 	
Guid,,
 

moduleGuid,, 
=,, 
Guid,,  
.,,  !
Empty,,! &
;,,& '
private-- 	
Guid--
 

parentGuid-- 
=-- 
Guid--  
.--  !
Empty--! &
;--& '
private.. 	
int..
 
folderID.. 
=.. 
-.. 
$num.. 
;.. 
private// 	
int//
 
moduleID// 
=// 
-// 
$num// 
;// 
private00 	
string00
 

folderName00 
=00 
string00 $
.00$ %
Empty00% *
;00* +
private11 	
int11
 
parentID11 
=11 
-11 
$num11 
;11 
private22 	
string22
 
	viewRoles22 
=22 
string22 #
.22# $
Empty22$ )
;22) *
public99 
Guid99	 

FolderGuid99 
{:: 
get;; 
{;; 
return;;	 

folderGuid;; 
;;; 
};; 
}<< 
public== 
Guid==	 

ModuleGuid== 
{>> 
get?? 
{?? 
return??	 

moduleGuid?? 
;?? 
}?? 
set@@ 
{@@ 

moduleGuid@@	 
=@@ 
value@@ 
;@@ 
}@@ 
}AA 
publicBB 
GuidBB	 

ParentGuidBB 
{CC 
getDD 
{DD 
returnDD	 

parentGuidDD 
;DD 
}DD 
setEE 
{EE 

parentGuidEE	 
=EE 
valueEE 
;EE 
}EE 
}FF 
publicGG 
intGG	 
FolderIdGG 
{HH 
getII 
{II 
returnII	 
folderIDII 
;II 
}II 
setJJ 
{JJ 
folderIDJJ	 
=JJ 
valueJJ 
;JJ 
}JJ 
}KK 
publicLL 
intLL	 
ModuleIdLL 
{MM 
getNN 
{NN 
returnNN	 
moduleIDNN 
;NN 
}NN 
setOO 
{OO 
moduleIDOO	 
=OO 
valueOO 
;OO 
}OO 
}PP 
publicQQ 
stringQQ	 

FolderNameQQ 
{RR 
getSS 
{SS 
returnSS	 

folderNameSS 
;SS 
}SS 
setTT 
{TT 

folderNameTT	 
=TT 
valueTT 
;TT 
}TT 
}UU 
publicVV 
intVV	 
ParentIdVV 
{WW 
getXX 
{XX 
returnXX	 
parentIDXX 
;XX 
}XX 
setYY 
{YY 
parentIDYY	 
=YY 
valueYY 
;YY 
}YY 
}ZZ 
public[[ 
string[[	 
	ViewRoles[[ 
{\\ 
get]] 
{]] 
return]]	 
	viewRoles]] 
;]] 
}]] 
set^^ 
{^^ 
	viewRoles^^	 
=^^ 
value^^ 
;^^ 
}^^ 
}__ 
privateff 	
voidff
 
GetSharedFileFolderff "
(ff" #
intff# &
folderIdff' /
)ff/ 0
{gg 
usinghh 
(hh	 

IDataReaderhh
 
readerhh 
=hh 
DBSharedFileshh ,
.hh, -
GetSharedFileFolderhh- @
(hh@ A
folderIdhhA I
)hhI J
)hhJ K
{ii 
ifjj 
(jj 
readerjj 
.jj 
Readjj 
(jj 
)jj 
)jj 
{kk 
folderIDll 
=ll 
Convertll 
.ll 
ToInt32ll 
(ll  
readerll  &
[ll& '
$strll' 1
]ll1 2
)ll2 3
;ll3 4
moduleIDmm 
=mm 
Convertmm 
.mm 
ToInt32mm 
(mm  
readermm  &
[mm& '
$strmm' 1
]mm1 2
)mm2 3
;mm3 4

folderNamenn 
=nn 
readernn 
[nn 
$strnn %
]nn% &
.nn& '
ToStringnn' /
(nn/ 0
)nn0 1
;nn1 2
parentIDoo 
=oo 
Convertoo 
.oo 
ToInt32oo 
(oo  
readeroo  &
[oo& '
$stroo' 1
]oo1 2
)oo2 3
;oo3 4

folderGuidpp 
=pp 
newpp 
Guidpp 
(pp 
readerpp !
[pp! "
$strpp" .
]pp. /
.pp/ 0
ToStringpp0 8
(pp8 9
)pp9 :
)pp: ;
;pp; <

moduleGuidqq 
=qq 
newqq 
Guidqq 
(qq 
readerqq !
[qq! "
$strqq" .
]qq. /
.qq/ 0
ToStringqq0 8
(qq8 9
)qq9 :
)qq: ;
;qq; <
	viewRolesrr 
=rr 
readerrr 
[rr 
$strrr #
]rr# $
.rr$ %
ToStringrr% -
(rr- .
)rr. /
;rr/ 0
stringtt 
ptt 
=tt 
readertt 
[tt 
$strtt #
]tt# $
.tt$ %
ToStringtt% -
(tt- .
)tt. /
;tt/ 0
ifvv 
(vv 	
pvv	 

.vv
 
Lengthvv 
==vv 
$numvv 
)vv 
{ww 

parentGuidxx 
=xx 
newxx 
Guidxx 
(xx 
pxx 
)xx 
;xx 
}yy 
}zz 
}{{ 
}|| 
private 	
bool
 
Create 
( 
) 
{
ÄÄ 

folderGuid
ÅÅ 
=
ÅÅ 
Guid
ÅÅ 
.
ÅÅ 
NewGuid
ÅÅ 
(
ÅÅ 
)
ÅÅ 
;
ÅÅ 
int
ÉÉ 
newID
ÉÉ 
=
ÉÉ 
DBSharedFiles
ÉÉ 
.
ÉÉ !
AddSharedFileFolder
ÉÉ 0
(
ÉÉ0 1

folderGuid
ÑÑ 
,
ÑÑ 

moduleGuid
ÖÖ 
,
ÖÖ 

parentGuid
ÜÜ 
,
ÜÜ 
moduleID
áá 
,
áá 

folderName
àà 
,
àà 
parentID
ââ 
,
ââ 
	viewRoles
ää 
)
ãã 
;
ãã 
folderID
çç 
=
çç 
newID
çç 
;
çç 
return
èè 	
(
èè
 
newID
èè 
>
èè 
$num
èè 
)
èè 
;
èè 
}
êê 
private
ìì 	
bool
ìì
 
Update
ìì 
(
ìì 
)
ìì 
{
îî 
return
ïï 	
DBSharedFiles
ïï
 
.
ïï $
UpdateSharedFileFolder
ïï .
(
ïï. /
folderID
ññ 
,
ññ 
moduleID
óó 
,
óó 

folderName
òò 
,
òò 
parentID
ôô 
,
ôô 

parentGuid
öö 
,
öö 
	viewRoles
õõ 
)
úú 
;
úú 
}
ùù 
public
§§ 
bool
§§	 
Save
§§ 
(
§§ 
)
§§ 
{
•• 
if
¶¶ 
(
¶¶ 
folderID
¶¶ 
>
¶¶ 
-
¶¶ 
$num
¶¶ 
)
¶¶ 
{
ßß 
return
®® 

Update
®® 
(
®® 
)
®® 
;
®® 
}
©© 
else
™™ 
{
´´ 
return
¨¨ 

Create
¨¨ 
(
¨¨ 
)
¨¨ 
;
¨¨ 
}
≠≠ 
}
ÆÆ 
public
µµ 
static
µµ	 
bool
µµ $
DeleteSharedFileFolder
µµ +
(
µµ+ ,
int
µµ, /
folderId
µµ0 8
)
µµ8 9
{
∂∂ 
return
∑∑ 	
DBSharedFiles
∑∑
 
.
∑∑ $
DeleteSharedFileFolder
∑∑ .
(
∑∑. /
folderId
∑∑/ 7
)
∑∑7 8
;
∑∑8 9
}
∏∏ 
public
ªª 
static
ªª	 
IDataReader
ªª $
GetSharedModuleFolders
ªª 2
(
ªª2 3
int
ªª3 6
moduleId
ªª7 ?
)
ªª? @
{
ºº 
return
ΩΩ 	
DBSharedFiles
ΩΩ
 
.
ΩΩ $
GetSharedModuleFolders
ΩΩ .
(
ΩΩ. /
moduleId
ΩΩ/ 7
)
ΩΩ7 8
;
ΩΩ8 9
}
ææ 
public
¡¡ 
static
¡¡	 
List
¡¡ 
<
¡¡ 
SharedFileFolder
¡¡ %
>
¡¡% &'
GetSharedModuleFolderList
¡¡' @
(
¡¡@ A
int
¡¡A D
moduleId
¡¡E M
)
¡¡M N
{
¬¬ 
return
√√ 	 
LoadListFromReader
√√
 
(
√√ 
DBSharedFiles
√√ *
.
√√* +$
GetSharedModuleFolders
√√+ A
(
√√A B
moduleId
√√B J
)
√√J K
)
√√K L
;
√√L M
}
ƒƒ 
public
«« 
static
««	 
IDataReader
«« 
GetSharedFolders
«« ,
(
««, -
int
««- 0
moduleId
««1 9
,
««9 :
int
««; >
parentId
««? G
)
««G H
{
»» 
return
…… 	
DBSharedFiles
……
 
.
…… 
GetSharedFolders
…… (
(
……( )
moduleId
……) 1
,
……1 2
parentId
……3 ;
)
……; <
;
……< =
}
   
private
ÕÕ 	
static
ÕÕ
 
List
ÕÕ 
<
ÕÕ 
SharedFileFolder
ÕÕ &
>
ÕÕ& ' 
LoadListFromReader
ÕÕ( :
(
ÕÕ: ;
IDataReader
ÕÕ; F
reader
ÕÕG M
)
ÕÕM N
{
ŒŒ 
List
œœ 
<
œœ 
SharedFileFolder
œœ 
>
œœ "
sharedFileFolderList
œœ .
=
œœ/ 0
new
œœ1 4
List
œœ5 9
<
œœ9 :
SharedFileFolder
œœ: J
>
œœJ K
(
œœK L
)
œœL M
;
œœM N
try
–– 
{
—— 
while
““ 	
(
““
 
reader
““ 
.
““ 
Read
““ 
(
““ 
)
““ 
)
““ 
{
”” 
SharedFileFolder
‘‘ 
sharedFileFolder
‘‘ &
=
‘‘' (
new
‘‘) ,
SharedFileFolder
‘‘- =
(
‘‘= >
)
‘‘> ?
;
‘‘? @
sharedFileFolder
’’ 
.
’’ 
folderID
’’ 
=
’’  
Convert
’’! (
.
’’( )
ToInt32
’’) 0
(
’’0 1
reader
’’1 7
[
’’7 8
$str
’’8 B
]
’’B C
)
’’C D
;
’’D E
sharedFileFolder
÷÷ 
.
÷÷ 
moduleID
÷÷ 
=
÷÷  
Convert
÷÷! (
.
÷÷( )
ToInt32
÷÷) 0
(
÷÷0 1
reader
÷÷1 7
[
÷÷7 8
$str
÷÷8 B
]
÷÷B C
)
÷÷C D
;
÷÷D E
sharedFileFolder
◊◊ 
.
◊◊ 

folderName
◊◊  
=
◊◊! "
reader
◊◊# )
[
◊◊) *
$str
◊◊* 6
]
◊◊6 7
.
◊◊7 8
ToString
◊◊8 @
(
◊◊@ A
)
◊◊A B
;
◊◊B C
sharedFileFolder
ÿÿ 
.
ÿÿ 
parentID
ÿÿ 
=
ÿÿ  
Convert
ÿÿ! (
.
ÿÿ( )
ToInt32
ÿÿ) 0
(
ÿÿ0 1
reader
ÿÿ1 7
[
ÿÿ7 8
$str
ÿÿ8 B
]
ÿÿB C
)
ÿÿC D
;
ÿÿD E
sharedFileFolder
ŸŸ 
.
ŸŸ 

moduleGuid
ŸŸ  
=
ŸŸ! "
new
ŸŸ# &
Guid
ŸŸ' +
(
ŸŸ+ ,
reader
ŸŸ, 2
[
ŸŸ2 3
$str
ŸŸ3 ?
]
ŸŸ? @
.
ŸŸ@ A
ToString
ŸŸA I
(
ŸŸI J
)
ŸŸJ K
)
ŸŸK L
;
ŸŸL M
sharedFileFolder
⁄⁄ 
.
⁄⁄ 

folderGuid
⁄⁄  
=
⁄⁄! "
new
⁄⁄# &
Guid
⁄⁄' +
(
⁄⁄+ ,
reader
⁄⁄, 2
[
⁄⁄2 3
$str
⁄⁄3 ?
]
⁄⁄? @
.
⁄⁄@ A
ToString
⁄⁄A I
(
⁄⁄I J
)
⁄⁄J K
)
⁄⁄K L
;
⁄⁄L M
sharedFileFolder
€€ 
.
€€ 
	viewRoles
€€ 
=
€€  !
reader
€€" (
[
€€( )
$str
€€) 4
]
€€4 5
.
€€5 6
ToString
€€6 >
(
€€> ?
)
€€? @
;
€€@ A
if
›› 
(
›› 	
reader
››	 
[
›› 
$str
›› 
]
›› 
!=
››  
DBNull
››! '
.
››' (
Value
››( -
)
››- .
{
ﬁﬁ 
sharedFileFolder
ﬂﬂ 
.
ﬂﬂ 

parentGuid
ﬂﬂ !
=
ﬂﬂ" #
new
ﬂﬂ$ '
Guid
ﬂﬂ( ,
(
ﬂﬂ, -
reader
ﬂﬂ- 3
[
ﬂﬂ3 4
$str
ﬂﬂ4 @
]
ﬂﬂ@ A
.
ﬂﬂA B
ToString
ﬂﬂB J
(
ﬂﬂJ K
)
ﬂﬂK L
)
ﬂﬂL M
;
ﬂﬂM N
}
‡‡ "
sharedFileFolderList
‚‚ 
.
‚‚ 
Add
‚‚ 
(
‚‚ 
sharedFileFolder
‚‚ .
)
‚‚. /
;
‚‚/ 0
}
„„ 
}
‰‰ 
finally
ÂÂ 

{
ÊÊ 
reader
ÁÁ 

.
ÁÁ
 
Close
ÁÁ 
(
ÁÁ 
)
ÁÁ 
;
ÁÁ 
}
ËË 
return
ÍÍ 	"
sharedFileFolderList
ÍÍ
 
;
ÍÍ 
}
ÎÎ 
public
ÓÓ 
static
ÓÓ	 
	DataTable
ÓÓ  
GetFoldersAndFiles
ÓÓ ,
(
ÓÓ, -
int
ÓÓ- 0
moduleId
ÓÓ1 9
,
ÓÓ9 :
int
ÓÓ; >
parentId
ÓÓ? G
)
ÓÓG H
{
ÔÔ 
	DataTable
 
dt
 
=
 
new
 
	DataTable
 
(
  
)
  !
;
! "
dt
ÚÚ 
.
ÚÚ 
Columns
ÚÚ 
.
ÚÚ 
Add
ÚÚ 
(
ÚÚ 
$str
ÚÚ 
,
ÚÚ 
typeof
ÚÚ 
(
ÚÚ 
string
ÚÚ %
)
ÚÚ% &
)
ÚÚ& '
;
ÚÚ' (
dt
ÛÛ 
.
ÛÛ 
Columns
ÛÛ 
.
ÛÛ 
Add
ÛÛ 
(
ÛÛ 
$str
ÛÛ 
,
ÛÛ 
typeof
ÛÛ $
(
ÛÛ$ %
string
ÛÛ% +
)
ÛÛ+ ,
)
ÛÛ, -
;
ÛÛ- .
dt
ÙÙ 
.
ÙÙ 
Columns
ÙÙ 
.
ÙÙ 
Add
ÙÙ 
(
ÙÙ 
$str
ÙÙ $
,
ÙÙ$ %
typeof
ÙÙ& ,
(
ÙÙ, -
string
ÙÙ- 3
)
ÙÙ3 4
)
ÙÙ4 5
;
ÙÙ5 6
dt
ıı 
.
ıı 
Columns
ıı 
.
ıı 
Add
ıı 
(
ıı 
$str
ıı 
,
ıı  
typeof
ıı! '
(
ıı' (
string
ıı( .
)
ıı. /
)
ıı/ 0
;
ıı0 1
dt
ˆˆ 
.
ˆˆ 
Columns
ˆˆ 
.
ˆˆ 
Add
ˆˆ 
(
ˆˆ 
$str
ˆˆ 
,
ˆˆ 
typeof
ˆˆ  
(
ˆˆ  !
int
ˆˆ! $
)
ˆˆ$ %
)
ˆˆ% &
;
ˆˆ& '
dt
˜˜ 
.
˜˜ 
Columns
˜˜ 
.
˜˜ 
Add
˜˜ 
(
˜˜ 
$str
˜˜ 
,
˜˜ 
typeof
˜˜  
(
˜˜  !
string
˜˜! '
)
˜˜' (
)
˜˜( )
;
˜˜) *
dt
¯¯ 
.
¯¯ 
Columns
¯¯ 
.
¯¯ 
Add
¯¯ 
(
¯¯ 
$str
¯¯ !
,
¯¯! "
typeof
¯¯# )
(
¯¯) *
string
¯¯* 0
)
¯¯0 1
)
¯¯1 2
;
¯¯2 3
dt
˘˘ 
.
˘˘ 
Columns
˘˘ 
.
˘˘ 
Add
˘˘ 
(
˘˘ 
$str
˘˘ 
,
˘˘ 
typeof
˘˘ $
(
˘˘$ %
DateTime
˘˘% -
)
˘˘- .
)
˘˘. /
;
˘˘/ 0
dt
˙˙ 
.
˙˙ 
Columns
˙˙ 
.
˙˙ 
Add
˙˙ 
(
˙˙ 
$str
˙˙ 
,
˙˙ 
typeof
˙˙ $
(
˙˙$ %
string
˙˙% +
)
˙˙+ ,
)
˙˙, -
;
˙˙- .
dt
˚˚ 
.
˚˚ 
Columns
˚˚ 
.
˚˚ 
Add
˚˚ 
(
˚˚ 
$str
˚˚ 
,
˚˚ 
typeof
˚˚ %
(
˚˚% &
string
˚˚& ,
)
˚˚, -
)
˚˚- .
;
˚˚. /
DataRow
˝˝ 

dr
˝˝ 
;
˝˝ 
using
ˇˇ 
(
ˇˇ	 

IDataReader
ˇˇ
 
reader
ˇˇ 
=
ˇˇ 
GetSharedFolders
ˇˇ /
(
ˇˇ/ 0
moduleId
ˇˇ0 8
,
ˇˇ8 9
parentId
ˇˇ: B
)
ˇˇB C
)
ˇˇC D
{
ÄÄ 
while
ÅÅ 	
(
ÅÅ
 
reader
ÅÅ 
.
ÅÅ 
Read
ÅÅ 
(
ÅÅ 
)
ÅÅ 
)
ÅÅ 
{
ÇÇ 
dr
ÉÉ 
=
ÉÉ 	
dt
ÉÉ
 
.
ÉÉ 
NewRow
ÉÉ 
(
ÉÉ 
)
ÉÉ 
;
ÉÉ 
dr
ÖÖ 
[
ÖÖ 
$str
ÖÖ 
]
ÖÖ 
=
ÖÖ 
reader
ÖÖ 
[
ÖÖ 
$str
ÖÖ !
]
ÖÖ! "
.
ÖÖ" #
ToString
ÖÖ# +
(
ÖÖ+ ,
)
ÖÖ, -
+
ÖÖ. /
$str
ÖÖ0 9
;
ÖÖ9 :
dr
ÜÜ 
[
ÜÜ 
$str
ÜÜ 
]
ÜÜ 
=
ÜÜ 
reader
ÜÜ 
[
ÜÜ 
$str
ÜÜ )
]
ÜÜ) *
;
ÜÜ* +
dr
áá 
[
áá 
$str
áá 
]
áá 
=
áá 
string
áá $
.
áá$ %
Empty
áá% *
;
áá* +
dr
àà 
[
àà 
$str
àà 
]
àà 
=
àà 
string
àà 
.
àà  
Empty
àà  %
;
àà% &
dr
ââ 
[
ââ 
$str
ââ 
]
ââ 
=
ââ 
reader
ââ 
[
ââ 
$str
ââ #
]
ââ# $
.
ââ$ %
ToString
ââ% -
(
ââ- .
)
ââ. /
;
ââ/ 0
dr
ää 
[
ää 
$str
ää 
]
ää 
=
ää 
$str
ää 
;
ää 
dr
ãã 
[
ãã 
$str
ãã 
]
ãã 
=
ãã 
string
ãã !
.
ãã! "
Empty
ãã" '
;
ãã' (
dr
åå 
[
åå 
$str
åå 
]
åå 
=
åå 
reader
åå 
[
åå 
$str
åå )
]
åå) *
.
åå* +
ToString
åå+ 3
(
åå3 4
)
åå4 5
;
åå5 6
dt
éé 
.
éé 
Rows
éé 
.
éé 
Add
éé 
(
éé 
dr
éé 
)
éé 
;
éé 
}
èè 
}
êê 
using
íí 
(
íí	 

IDataReader
íí
 
reader
íí 
=
íí 

SharedFile
íí )
.
íí) *
GetSharedFiles
íí* 8
(
íí8 9
moduleId
íí9 A
,
ííA B
parentId
ííC K
)
ííK L
)
ííL M
{
ìì 
while
îî 	
(
îî
 
reader
îî 
.
îî 
Read
îî 
(
îî 
)
îî 
)
îî 
{
ïï 
dr
ññ 
=
ññ 	
dt
ññ
 
.
ññ 
NewRow
ññ 
(
ññ 
)
ññ 
;
ññ 
dr
òò 
[
òò 
$str
òò 
]
òò 
=
òò 
reader
òò 
[
òò 
$str
òò 
]
òò  
.
òò  !
ToString
òò! )
(
òò) *
)
òò* +
+
òò, -
$str
òò. 5
;
òò5 6
dr
ôô 
[
ôô 
$str
ôô 
]
ôô 
=
ôô 
reader
ôô 
[
ôô 
$str
ôô +
]
ôô+ ,
;
ôô, -
dr
öö 
[
öö 
$str
öö 
]
öö 
=
öö 
reader
öö $
[
öö$ %
$str
öö% 7
]
öö7 8
;
öö8 9
dr
õõ 
[
õõ 
$str
õõ 
]
õõ 
=
õõ 
reader
õõ 
[
õõ  
$str
õõ  -
]
õõ- .
;
õõ. /
dr
úú 
[
úú 
$str
úú 
]
úú 
=
úú 
reader
úú 
[
úú 
$str
úú #
]
úú# $
.
úú$ %
ToString
úú% -
(
úú- .
)
úú. /
;
úú/ 0
dr
ùù 
[
ùù 
$str
ùù 
]
ùù 
=
ùù 
$str
ùù 
;
ùù 
dr
ûû 
[
ûû 
$str
ûû 
]
ûû 
=
ûû 
Convert
ûû 
.
ûû 

ToDateTime
ûû (
(
ûû( )
reader
ûû) /
[
ûû/ 0
$str
ûû0 <
]
ûû< =
)
ûû= >
;
ûû> ?
dr
üü 
[
üü 
$str
üü 
]
üü 
=
üü 
reader
üü 
[
üü 
$str
üü '
]
üü' (
.
üü( )
ToString
üü) 1
(
üü1 2
)
üü2 3
;
üü3 4
dr
†† 
[
†† 
$str
†† 
]
†† 
=
†† 
reader
†† !
[
††! "
$str
††" 1
]
††1 2
.
††2 3
ToString
††3 ;
(
††; <
)
††< =
;
††= >
dr
°° 
[
°° 
$str
°° 
]
°° 
=
°° 
reader
°° 
[
°° 
$str
°° )
]
°°) *
.
°°* +
ToString
°°+ 3
(
°°3 4
)
°°4 5
;
°°5 6
dt
££ 
.
££ 
Rows
££ 
.
££ 
Add
££ 
(
££ 
dr
££ 
)
££ 
;
££ 
}
§§ 
}
•• 
dt
ßß 
.
ßß 
AcceptChanges
ßß 
(
ßß 
)
ßß 
;
ßß 
return
©© 	
dt
©©
 
;
©© 
}
™™ 
public
¨¨ 
static
¨¨	 
FoldersAndFiles
¨¨ %
GetFoldersAndFilesModel
¨¨  7
(
¨¨7 8
int
¨¨8 ;
moduleId
¨¨< D
,
¨¨D E
int
¨¨F I
parentId
¨¨J R
)
¨¨R S
{
≠≠ 
FoldersAndFiles
ÆÆ 
foldersAndFiles
ÆÆ "
=
ÆÆ# $
new
ÆÆ% (
FoldersAndFiles
ÆÆ) 8
(
ÆÆ8 9
)
ÆÆ9 :
;
ÆÆ: ;
using
∞∞ 
(
∞∞	 

IDataReader
∞∞
 
reader
∞∞ 
=
∞∞ 
GetSharedFolders
∞∞ /
(
∞∞/ 0
moduleId
∞∞0 8
,
∞∞8 9
parentId
∞∞: B
)
∞∞B C
)
∞∞C D
{
±± 
while
≤≤ 	
(
≤≤
 
reader
≤≤ 
.
≤≤ 
Read
≤≤ 
(
≤≤ 
)
≤≤ 
)
≤≤ 
{
≥≥ 
Folder
¥¥ 
	newFolder
¥¥ 
=
¥¥ 
new
¥¥ 
Folder
¥¥ "
{
µµ 
ID
∂∂ 
=
∂∂	 

Convert
∂∂ 
.
∂∂ 
ToInt32
∂∂ 
(
∂∂ 
reader
∂∂ !
[
∂∂! "
$str
∂∂" ,
]
∂∂, -
)
∂∂- .
,
∂∂. /
ModuleID
∑∑ 
=
∑∑ 
Convert
∑∑ 
.
∑∑ 
ToInt32
∑∑  
(
∑∑  !
reader
∑∑! '
[
∑∑' (
$str
∑∑( 2
]
∑∑2 3
)
∑∑3 4
,
∑∑4 5
Name
∏∏ 

=
∏∏ 
reader
∏∏ 
[
∏∏ 
$str
∏∏  
]
∏∏  !
.
∏∏! "
ToString
∏∏" *
(
∏∏* +
)
∏∏+ ,
,
∏∏, -
ParentID
ππ 
=
ππ 
Convert
ππ 
.
ππ 
ToInt32
ππ  
(
ππ  !
reader
ππ! '
[
ππ' (
$str
ππ( 2
]
ππ2 3
)
ππ3 4
,
ππ4 5

ModuleGuid
∫∫ 
=
∫∫ 
new
∫∫ 
Guid
∫∫ 
(
∫∫ 
reader
∫∫ "
[
∫∫" #
$str
∫∫# /
]
∫∫/ 0
.
∫∫0 1
ToString
∫∫1 9
(
∫∫9 :
)
∫∫: ;
)
∫∫; <
,
∫∫< =

FolderGuid
ªª 
=
ªª 
new
ªª 
Guid
ªª 
(
ªª 
reader
ªª "
[
ªª" #
$str
ªª# /
]
ªª/ 0
.
ªª0 1
ToString
ªª1 9
(
ªª9 :
)
ªª: ;
)
ªª; <
,
ªª< =

ParentGuid
ºº 
=
ºº 
new
ºº 
Guid
ºº 
(
ºº 
reader
ºº "
[
ºº" #
$str
ºº# /
]
ºº/ 0
.
ºº0 1
ToString
ºº1 9
(
ºº9 :
)
ºº: ;
)
ºº; <
,
ºº< =
	ViewRoles
ΩΩ 
=
ΩΩ 
reader
ΩΩ 
[
ΩΩ 
$str
ΩΩ $
]
ΩΩ$ %
.
ΩΩ% &
ToString
ΩΩ& .
(
ΩΩ. /
)
ΩΩ/ 0
}
ææ 
;
ææ 
foldersAndFiles
¿¿ 
.
¿¿ 
Folders
¿¿ 
.
¿¿ 
Add
¿¿  
(
¿¿  !
	newFolder
¿¿! *
)
¿¿* +
;
¿¿+ ,
}
¡¡ 
}
¬¬ 
using
ƒƒ 
(
ƒƒ	 

IDataReader
ƒƒ
 
reader
ƒƒ 
=
ƒƒ 

SharedFile
ƒƒ )
.
ƒƒ) *
GetSharedFiles
ƒƒ* 8
(
ƒƒ8 9
moduleId
ƒƒ9 A
,
ƒƒA B
parentId
ƒƒC K
)
ƒƒK L
)
ƒƒL M
{
≈≈ 
while
∆∆ 	
(
∆∆
 
reader
∆∆ 
.
∆∆ 
Read
∆∆ 
(
∆∆ 
)
∆∆ 
)
∆∆ 
{
«« 
File
»» 	
newFile
»»
 
=
»» 
new
»» 
File
»» 
{
…… 
ID
   
=
  	 

Convert
   
.
   
ToInt32
   
(
   
reader
   !
[
  ! "
$str
  " *
]
  * +
)
  + ,
,
  , -
ModuleID
ÀÀ 
=
ÀÀ 
Convert
ÀÀ 
.
ÀÀ 
ToInt32
ÀÀ  
(
ÀÀ  !
reader
ÀÀ! '
[
ÀÀ' (
$str
ÀÀ( 2
]
ÀÀ2 3
)
ÀÀ3 4
,
ÀÀ4 5
UploadUserID
ÃÃ 
=
ÃÃ 
Convert
ÃÃ 
.
ÃÃ 
ToInt32
ÃÃ $
(
ÃÃ$ %
reader
ÃÃ% +
[
ÃÃ+ ,
$str
ÃÃ, :
]
ÃÃ: ;
)
ÃÃ; <
,
ÃÃ< =
Name
ÕÕ 

=
ÕÕ 
reader
ÕÕ 
[
ÕÕ 
$str
ÕÕ "
]
ÕÕ" #
.
ÕÕ# $
ToString
ÕÕ$ ,
(
ÕÕ, -
)
ÕÕ- .
,
ÕÕ. /
OriginalFileName
ŒŒ 
=
ŒŒ 
reader
ŒŒ 
[
ŒŒ  
$str
ŒŒ  2
]
ŒŒ2 3
.
ŒŒ3 4
ToString
ŒŒ4 <
(
ŒŒ< =
)
ŒŒ= >
,
ŒŒ> ?
ServerFileName
œœ 
=
œœ 
reader
œœ 
[
œœ 
$str
œœ .
]
œœ. /
.
œœ/ 0
ToString
œœ0 8
(
œœ8 9
)
œœ9 :
,
œœ: ;
SizeInKB
–– 
=
–– 
Convert
–– 
.
–– 
ToInt32
––  
(
––  !
reader
––! '
[
––' (
$str
––( 2
]
––2 3
)
––3 4
,
––4 5

UploadDate
—— 
=
—— 
Convert
—— 
.
—— 

ToDateTime
—— %
(
——% &
reader
——& ,
[
——, -
$str
——- 9
]
——9 :
)
——: ;
,
——; <
FolderID
““ 
=
““ 
Convert
““ 
.
““ 
ToInt32
““  
(
““  !
reader
““! '
[
““' (
$str
““( 2
]
““2 3
)
““3 4
,
““4 5
ItemGuid
”” 
=
”” 
new
”” 
Guid
”” 
(
”” 
reader
””  
[
””  !
$str
””! +
]
””+ ,
.
””, -
ToString
””- 5
(
””5 6
)
””6 7
)
””7 8
,
””8 9

ModuleGuid
‘‘ 
=
‘‘ 
new
‘‘ 
Guid
‘‘ 
(
‘‘ 
reader
‘‘ "
[
‘‘" #
$str
‘‘# /
]
‘‘/ 0
.
‘‘0 1
ToString
‘‘1 9
(
‘‘9 :
)
‘‘: ;
)
‘‘; <
,
‘‘< =
UserGuid
’’ 
=
’’ 
new
’’ 
Guid
’’ 
(
’’ 
reader
’’  
[
’’  !
$str
’’! +
]
’’+ ,
.
’’, -
ToString
’’- 5
(
’’5 6
)
’’6 7
)
’’7 8
,
’’8 9

FolderGuid
÷÷ 
=
÷÷ 
new
÷÷ 
Guid
÷÷ 
(
÷÷ 
reader
÷÷ "
[
÷÷" #
$str
÷÷# /
]
÷÷/ 0
.
÷÷0 1
ToString
÷÷1 9
(
÷÷9 :
)
÷÷: ;
)
÷÷; <
,
÷÷< =
Description
◊◊ 
=
◊◊ 
reader
◊◊ 
[
◊◊ 
$str
◊◊ (
]
◊◊( )
.
◊◊) *
ToString
◊◊* 2
(
◊◊2 3
)
◊◊3 4
,
◊◊4 5
DownloadCount
ÿÿ 
=
ÿÿ 
Convert
ÿÿ 
.
ÿÿ 
ToInt32
ÿÿ %
(
ÿÿ% &
reader
ÿÿ& ,
[
ÿÿ, -
$str
ÿÿ- <
]
ÿÿ< =
)
ÿÿ= >
,
ÿÿ> ?
	ViewRoles
ŸŸ 
=
ŸŸ 
reader
ŸŸ 
[
ŸŸ 
$str
ŸŸ $
]
ŸŸ$ %
.
ŸŸ% &
ToString
ŸŸ& .
(
ŸŸ. /
)
ŸŸ/ 0
}
⁄⁄ 
;
⁄⁄ 
foldersAndFiles
‹‹ 
.
‹‹ 
Files
‹‹ 
.
‹‹ 
Add
‹‹ 
(
‹‹ 
newFile
‹‹ &
)
‹‹& '
;
‹‹' (
}
›› 
}
ﬁﬁ 
return
‡‡ 	
foldersAndFiles
‡‡
 
;
‡‡ 
}
·· 
}
‰‰ 
}ÂÂ à
ÑD:\Projects\DefensePoint\whitesource-testcases-csharp\CWE79\mojoportal\mojoPortal.Features.Business\SharedFiles\SharedFileHistory.cs
	namespace 	

mojoPortal
 
. 
Business 
{ 
public

 

class

 
SharedFileHistory

 "
{ 
public 
SharedFileHistory  
(  !
)! "
{ 	
}
 
private 
String 
friendlyName #
=$ %
String& ,
., -
Empty- 2
;2 3
private 
String 
serverFileName %
=& '
String( .
.. /
Empty/ 4
;4 5
public 
String 
FriendlyName "
{ 	
get 
{ 
return 
friendlyName %
;% &
}' (
set 
{ 
friendlyName 
=  
value! &
;& '
}( )
} 	
public 
String 
ServerFileName $
{ 	
get 
{ 
return 
serverFileName '
;' (
}) *
set 
{ 
serverFileName  
=! "
value# (
;( )
}* +
} 	
} 
}   ’T
rD:\Projects\DefensePoint\whitesource-testcases-csharp\CWE79\mojoportal\mojoPortal.Features.Business\Survey\Page.cs
	namespace 	
SurveyFeature
 
. 
Business  
{ 
public 

class 
Page 
{ 
public 
Page 
( 
) 
{ 	
}
 
public!! 
Page!! 
(!! 
Guid"" 
pageGuid"" 
)"" 
{## 	
GetPage$$ 
($$ 
pageGuid%% 
)%% 
;%% 
}&& 	
private,, 
Guid,, 
pageGuid,, 
=,, 
Guid,,  $
.,,$ %
Empty,,% *
;,,* +
private-- 
Guid-- 

surveyGuid-- 
=--  !
Guid--" &
.--& '
Empty--' ,
;--, -
private.. 
string.. 
	pageTitle..  
;..  !
private// 
int// 
	pageOrder// 
;// 
private00 
bool00 
pageEnabled00  
;00  !
private11 
int11 
questionCount11 !
=11" #
$num11$ %
;11% &
public77 
Guid77 
SurveyPageGuid77 "
{88 	
get99 
{99 
return99 
pageGuid99 !
;99! "
}99# $
set:: 
{:: 
pageGuid:: 
=:: 
value:: "
;::" #
}::$ %
};; 	
public<< 
Guid<< 

SurveyGuid<< 
{== 	
get>> 
{>> 
return>> 

surveyGuid>> #
;>># $
}>>% &
set?? 
{?? 

surveyGuid?? 
=?? 
value?? $
;??$ %
}??& '
}@@ 	
publicAA 
stringAA 
	PageTitleAA 
{BB 	
getCC 
{CC 
returnCC 
	pageTitleCC "
;CC" #
}CC$ %
setDD 
{DD 
	pageTitleDD 
=DD 
valueDD #
;DD# $
}DD% &
}EE 	
publicFF 
intFF 
	PageOrderFF 
{GG 	
getHH 
{HH 
returnHH 
	pageOrderHH "
;HH" #
}HH$ %
setII 
{II 
	pageOrderII 
=II 
valueII #
;II# $
}II% &
}JJ 	
publicKK 
boolKK 
PageEnabledKK 
{LL 	
getMM 
{MM 
returnMM 
pageEnabledMM $
;MM$ %
}MM& '
setNN 
{NN 
pageEnabledNN 
=NN 
valueNN  %
;NN% &
}NN' (
}OO 	
publicQQ 
intQQ 
QuestionCountQQ  
{RR 	
getSS 
{SS 
returnSS 
questionCountSS &
;SS& '
}SS( )
}UU 	
private__ 
void__ 
GetPage__ 
(__ 
Guid__ !
pageGuid__" *
)__* +
{`` 	
usingaa 
(aa 
IDataReaderaa 
readeraa %
=aa& '
DBSurveyPageaa( 4
.aa4 5
GetOneaa5 ;
(aa; <
pageGuidaa< D
)aaD E
)aaE F
{bb 
ifcc 
(cc 
readercc 
.cc 
Readcc 
(cc  
)cc  !
)cc! "
{dd 
thisee 
.ee 
pageGuidee !
=ee" #
newee$ '
Guidee( ,
(ee, -
readeree- 3
[ee3 4
$stree4 >
]ee> ?
.ee? @
ToStringee@ H
(eeH I
)eeI J
)eeJ K
;eeK L
thisff 
.ff 

surveyGuidff #
=ff$ %
newff& )
Guidff* .
(ff. /
readerff/ 5
[ff5 6
$strff6 B
]ffB C
.ffC D
ToStringffD L
(ffL M
)ffM N
)ffN O
;ffO P
thisgg 
.gg 
	pageTitlegg "
=gg# $
readergg% +
[gg+ ,
$strgg, 7
]gg7 8
.gg8 9
ToStringgg9 A
(ggA B
)ggB C
;ggC D
thishh 
.hh 
	pageOrderhh "
=hh# $
Converthh% ,
.hh, -
ToInt32hh- 4
(hh4 5
readerhh5 ;
[hh; <
$strhh< G
]hhG H
)hhH I
;hhI J
thisii 
.ii 
pageEnabledii $
=ii% &
Convertii' .
.ii. /
	ToBooleanii/ 8
(ii8 9
readerii9 ?
[ii? @
$strii@ M
]iiM N
)iiN O
;iiO P
thisjj 
.jj 
questionCountjj &
=jj' (
Convertjj) 0
.jj0 1
ToInt32jj1 8
(jj8 9
readerjj9 ?
[jj? @
$strjj@ O
]jjO P
)jjP Q
;jjQ R
}kk 
}mm 
}oo 	
privateuu 
booluu 
Createuu 
(uu 
)uu 
{vv 	
thisxx 
.xx 
pageGuidxx 
=xx 
Guidxx  
.xx  !
NewGuidxx! (
(xx( )
)xx) *
;xx* +
intzz 
rowsAffectedzz 
=zz 
DBSurveyPagezz +
.zz+ ,
Addzz, /
(zz/ 0
this{{ 
.{{ 
pageGuid{{ 
,{{ 
this|| 
.|| 

surveyGuid|| 
,||  
this}} 
.}} 
	pageTitle}} 
,}} 
this~~ 
.~~ 
pageEnabled~~  
)~~  !
;~~! "
return
ÄÄ 
(
ÄÄ 
rowsAffected
ÄÄ  
>
ÄÄ! "
$num
ÄÄ# $
)
ÄÄ$ %
;
ÄÄ% &
}
ÇÇ 	
private
ââ 
bool
ââ 
Update
ââ 
(
ââ 
)
ââ 
{
ää 	
return
åå 
DBSurveyPage
åå 
.
åå  
Update
åå  &
(
åå& '
this
çç 
.
çç 
pageGuid
çç 
,
çç 
this
éé 
.
éé 

surveyGuid
éé 
,
éé  
this
èè 
.
èè 
	pageTitle
èè 
,
èè 
this
êê 
.
êê 
	pageOrder
êê 
,
êê 
this
ëë 
.
ëë 
pageEnabled
ëë  
)
ëë  !
;
ëë! "
}
ìì 	
public
ùù 
bool
ùù 
Save
ùù 
(
ùù 
)
ùù 
{
ûû 	
if
üü 
(
üü 
this
üü 
.
üü 
pageGuid
üü 
!=
üü  
Guid
üü! %
.
üü% &
Empty
üü& +
)
üü+ ,
{
†† 
return
°° 
Update
°° 
(
°° 
)
°° 
;
°°  
}
¢¢ 
else
££ 
{
§§ 
return
•• 
Create
•• 
(
•• 
)
•• 
;
••  
}
¶¶ 
}
ßß 	
public
≤≤ 
static
≤≤ 
bool
≤≤ 
Delete
≤≤ !
(
≤≤! "
Guid
≤≤" &
pageGuid
≤≤' /
)
≤≤/ 0
{
≥≥ 	
return
¥¥ 
DBSurveyPage
¥¥ 
.
¥¥  
Delete
¥¥  &
(
¥¥& '
pageGuid
¥¥' /
)
¥¥/ 0
;
¥¥0 1
}
µµ 	
public
ƒƒ 
static
ƒƒ 
List
ƒƒ 
<
ƒƒ 
Page
ƒƒ 
>
ƒƒ  
GetAll
ƒƒ! '
(
ƒƒ' (
Guid
ƒƒ( ,

surveyGuid
ƒƒ- 7
)
ƒƒ7 8
{
≈≈ 	
List
∆∆ 
<
∆∆ 
Page
∆∆ 
>
∆∆ 
pageList
∆∆ 
=
«« 
new
«« 
List
«« 
<
«« 
Page
«« 
>
««  
(
««  !
)
««! "
;
««" #
using
…… 
(
…… 
IDataReader
…… 
reader
…… %
=
……& '
DBSurveyPage
……( 4
.
……4 5
GetAll
……5 ;
(
……; <

surveyGuid
……< F
)
……F G
)
……G H
{
   
while
ÀÀ 
(
ÀÀ 
reader
ÀÀ 
.
ÀÀ 
Read
ÀÀ "
(
ÀÀ" #
)
ÀÀ# $
)
ÀÀ$ %
{
ÃÃ 
Page
ÕÕ 
page
ÕÕ 
=
ÕÕ 
new
ÕÕ  #
Page
ÕÕ$ (
(
ÕÕ( )
)
ÕÕ) *
;
ÕÕ* +
page
ŒŒ 
.
ŒŒ 
pageGuid
ŒŒ !
=
ŒŒ" #
new
ŒŒ$ '
Guid
ŒŒ( ,
(
ŒŒ, -
reader
ŒŒ- 3
[
ŒŒ3 4
$str
ŒŒ4 >
]
ŒŒ> ?
.
ŒŒ? @
ToString
ŒŒ@ H
(
ŒŒH I
)
ŒŒI J
)
ŒŒJ K
;
ŒŒK L
page
œœ 
.
œœ 

surveyGuid
œœ #
=
œœ$ %
new
œœ& )
Guid
œœ* .
(
œœ. /
reader
œœ/ 5
[
œœ5 6
$str
œœ6 B
]
œœB C
.
œœC D
ToString
œœD L
(
œœL M
)
œœM N
)
œœN O
;
œœO P
page
–– 
.
–– 
	pageTitle
–– "
=
––# $
reader
––% +
[
––+ ,
$str
––, 7
]
––7 8
.
––8 9
ToString
––9 A
(
––A B
)
––B C
;
––C D
page
—— 
.
—— 
	pageOrder
—— "
=
——# $
Convert
——% ,
.
——, -
ToInt32
——- 4
(
——4 5
reader
——5 ;
[
——; <
$str
——< G
]
——G H
,
——H I
CultureInfo
——J U
.
——U V
CurrentCulture
——V d
)
——d e
;
——e f
page
““ 
.
““ 
pageEnabled
““ $
=
““% &
Convert
““' .
.
““. /
	ToBoolean
““/ 8
(
““8 9
reader
““9 ?
[
““? @
$str
““@ M
]
““M N
,
““N O
CultureInfo
““P [
.
““[ \
CurrentCulture
““\ j
)
““j k
;
““k l
page
”” 
.
”” 
questionCount
”” &
=
””' (
Convert
””) 0
.
””0 1
ToInt32
””1 8
(
””8 9
reader
””9 ?
[
””? @
$str
””@ O
]
””O P
)
””P Q
;
””Q R
pageList
‘‘ 
.
‘‘ 
Add
‘‘  
(
‘‘  !
page
‘‘! %
)
‘‘% &
;
‘‘& '
}
’’ 
}
÷÷ 
return
ÿÿ 
pageList
ÿÿ 
;
ÿÿ 
}
⁄⁄ 	
}
ﬂﬂ 
}·· ∑^
vD:\Projects\DefensePoint\whitesource-testcases-csharp\CWE79\mojoportal\mojoPortal.Features.Business\Survey\Question.cs
	namespace 	
SurveyFeature
 
. 
Business  
{ 
public 
class 
Question 
{ 
public 
Question	 
( 
) 
{ 
} 
public 
Question	 
( 
Guid 
questionGuid #
)# $
{   
GetQuestion!! 
(!! 
questionGuid!! 
)!! 
;!! 
}"" 
private)) 	
Guid))
 
questionGuid)) 
=)) 
Guid)) "
.))" #
Empty))# (
;))( )
private** 	
Guid**
 
pageGuid** 
=** 
Guid** 
.** 
Empty** $
;**$ %
private++ 	
string++
 
questionName++ 
;++ 
private,, 	
string,,
 
questionText,, 
;,, 
private-- 	
int--
 
questionTypeId-- 
;-- 
private.. 	
bool..
 
answerIsRequired.. 
;..  
private// 	
int//
 
questionOrder// 
;// 
private00 	
string00
 
validationMessage00 "
;00" #
public77 
Guid77	 
QuestionGuid77 
{88 
get99 
{99 
return99	 
questionGuid99 
;99 
}99 
set:: 
{:: 
questionGuid::	 
=:: 
value:: 
;:: 
}::  
};; 
public<< 
Guid<<	 
SurveyPageGuid<< 
{== 
get>> 
{>> 
return>>	 
pageGuid>> 
;>> 
}>> 
set?? 
{?? 
pageGuid??	 
=?? 
value?? 
;?? 
}?? 
}@@ 
publicAA 
stringAA	 
QuestionNameAA 
{BB 
getCC 
{CC 
returnCC	 
questionNameCC 
;CC 
}CC 
setDD 
{DD 
questionNameDD	 
=DD 
valueDD 
;DD 
}DD  
}EE 
publicFF 
stringFF	 
QuestionTextFF 
{GG 
getHH 
{HH 
returnHH	 
questionTextHH 
;HH 
}HH 
setII 
{II 
questionTextII	 
=II 
valueII 
;II 
}II  
}JJ 
publicKK 
intKK	 
QuestionTypeIdKK 
{LL 
getMM 
{MM 
returnMM	 
questionTypeIdMM 
;MM 
}MM  !
setNN 
{NN 
questionTypeIdNN	 
=NN 
valueNN 
;NN  
}NN! "
}OO 
publicPP 
boolPP	 
AnswerIsRequiredPP 
{QQ 
getRR 
{RR 
returnRR	 
answerIsRequiredRR  
;RR  !
}RR" #
setSS 
{SS 
answerIsRequiredSS	 
=SS 
valueSS !
;SS! "
}SS# $
}TT 
publicUU 
intUU	 
QuestionOrderUU 
{VV 
getWW 
{WW 
returnWW	 
questionOrderWW 
;WW 
}WW  
setXX 
{XX 
questionOrderXX	 
=XX 
valueXX 
;XX 
}XX  !
}YY 
publicZZ 
stringZZ	 
ValidationMessageZZ !
{[[ 
get\\ 
{\\ 
return\\	 
validationMessage\\ !
;\\! "
}\\# $
set]] 
{]] 
validationMessage]]	 
=]] 
value]] "
;]]" #
}]]$ %
}^^ 
privateee 	
voidee
 
GetQuestionee 
(ee 
Guidee 
guidQuestionGuidee  0
)ee0 1
{ff 
usinggg 
(gg	 

IDataReadergg
 
readergg 
=gg 

DBQuestiongg )
.gg) *
GetOnegg* 0
(gg0 1
guidQuestionGuidgg1 A
)ggA B
)ggB C
{hh 
ifii 
(ii 
readerii 
.ii 
Readii 
(ii 
)ii 
)ii 
{jj 
questionGuidkk 
=kk 
newkk 
Guidkk 
(kk 
readerkk #
[kk# $
$strkk$ 2
]kk2 3
.kk3 4
ToStringkk4 <
(kk< =
)kk= >
)kk> ?
;kk? @
pageGuidll 
=ll 
newll 
Guidll 
(ll 
readerll 
[ll  
$strll  *
]ll* +
.ll+ ,
ToStringll, 4
(ll4 5
)ll5 6
)ll6 7
;ll7 8
questionNamemm 
=mm 
readermm 
[mm 
$strmm )
]mm) *
.mm* +
ToStringmm+ 3
(mm3 4
)mm4 5
;mm5 6
questionTextnn 
=nn 
readernn 
[nn 
$strnn )
]nn) *
.nn* +
ToStringnn+ 3
(nn3 4
)nn4 5
;nn5 6
questionTypeIdoo 
=oo 
Convertoo 
.oo 
ToInt32oo %
(oo% &
readeroo& ,
[oo, -
$stroo- =
]oo= >
)oo> ?
;oo? @
answerIsRequiredpp 
=pp 
Convertpp 
.pp  
	ToBooleanpp  )
(pp) *
readerpp* 0
[pp0 1
$strpp1 C
]ppC D
)ppD E
;ppE F
questionOrderqq 
=qq 
Convertqq 
.qq 
ToInt32qq $
(qq$ %
readerqq% +
[qq+ ,
$strqq, ;
]qq; <
)qq< =
;qq= >
validationMessagerr 
=rr 
readerrr 
[rr  
$strrr  3
]rr3 4
.rr4 5
ToStringrr5 =
(rr= >
)rr> ?
;rr? @
}ss 
}tt 
}uu 
privatexx 	
boolxx
 
Createxx 
(xx 
)xx 
{yy 
questionGuidzz 
=zz 
Guidzz 
.zz 
NewGuidzz 
(zz 
)zz  
;zz  !
int|| 
rowsAffected|| 
=|| 

DBQuestion||  
.||  !
Add||! $
(||$ %
questionGuid}} 
,}} 
pageGuid~~ 
,~~ 
questionName 
, 
questionText
ÄÄ 
,
ÄÄ 
questionTypeId
ÅÅ 
,
ÅÅ 
answerIsRequired
ÇÇ 
,
ÇÇ 
validationMessage
ÉÉ 
)
ÑÑ 
;
ÑÑ 
return
ÜÜ 	
(
ÜÜ
 
rowsAffected
ÜÜ 
>
ÜÜ 
$num
ÜÜ 
)
ÜÜ 
;
ÜÜ 
}
áá 
private
ää 	
bool
ää
 
Update
ää 
(
ää 
)
ää 
{
ãã 
return
åå 	

DBQuestion
åå
 
.
åå 
Update
åå 
(
åå 
questionGuid
çç 
,
çç 
pageGuid
éé 
,
éé 
questionName
èè 
,
èè 
questionText
êê 
,
êê 
questionTypeId
ëë 
,
ëë 
answerIsRequired
íí 
,
íí 
questionOrder
ìì 
,
ìì 
validationMessage
îî 
)
ïï 
;
ïï 
}
ññ 
public
ûû 
bool
ûû	 
Save
ûû 
(
ûû 
)
ûû 
{
üü 
if
†† 
(
†† 
questionGuid
†† 
!=
†† 
Guid
†† 
.
†† 
Empty
†† !
)
††! "
{
°° 
return
¢¢ 

Update
¢¢ 
(
¢¢ 
)
¢¢ 
;
¢¢ 
}
££ 
else
§§ 
{
•• 
return
¶¶ 

Create
¶¶ 
(
¶¶ 
)
¶¶ 
;
¶¶ 
}
ßß 
}
®® 
public
≤≤ 
static
≤≤	 
bool
≤≤ 
Delete
≤≤ 
(
≤≤ 
Guid
≤≤  
questionGuid
≤≤! -
)
≤≤- .
{
≥≥ 
return
¥¥ 	

DBQuestion
¥¥
 
.
¥¥ 
Delete
¥¥ 
(
¥¥ 
questionGuid
¥¥ (
)
¥¥( )
;
¥¥) *
}
µµ 
public
∏∏ 
static
∏∏	 
List
∏∏ 
<
∏∏ 
Question
∏∏ 
>
∏∏ 
GetAll
∏∏ %
(
∏∏% &
Guid
∏∏& *
pageGuid
∏∏+ 3
)
∏∏3 4
{
ππ 
List
∫∫ 
<
∫∫ 
Question
∫∫ 
>
∫∫ 
pageQuestionList
∫∫ "
=
∫∫# $
new
∫∫% (
List
∫∫) -
<
∫∫- .
Question
∫∫. 6
>
∫∫6 7
(
∫∫7 8
)
∫∫8 9
;
∫∫9 :
using
ºº 
(
ºº	 

IDataReader
ºº
 
reader
ºº 
=
ºº 

DBQuestion
ºº )
.
ºº) *
GetAllByPage
ºº* 6
(
ºº6 7
pageGuid
ºº7 ?
)
ºº? @
)
ºº@ A
{
ΩΩ 
while
ææ 	
(
ææ
 
reader
ææ 
.
ææ 
Read
ææ 
(
ææ 
)
ææ 
)
ææ 
{
øø 
Question
¿¿ 
question
¿¿ 
=
¿¿ 
new
¿¿ 
Question
¿¿ %
{
¡¡ 
questionGuid
¬¬ 
=
¬¬ 
new
¬¬ 
Guid
¬¬ 
(
¬¬ 
reader
¬¬ $
[
¬¬$ %
$str
¬¬% 3
]
¬¬3 4
.
¬¬4 5
ToString
¬¬5 =
(
¬¬= >
)
¬¬> ?
)
¬¬? @
,
¬¬@ A
pageGuid
√√ 
=
√√ 
new
√√ 
Guid
√√ 
(
√√ 
reader
√√  
[
√√  !
$str
√√! +
]
√√+ ,
.
√√, -
ToString
√√- 5
(
√√5 6
)
√√6 7
)
√√7 8
,
√√8 9
questionName
ƒƒ 
=
ƒƒ 
reader
ƒƒ 
[
ƒƒ 
$str
ƒƒ *
]
ƒƒ* +
.
ƒƒ+ ,
ToString
ƒƒ, 4
(
ƒƒ4 5
)
ƒƒ5 6
,
ƒƒ6 7
questionText
≈≈ 
=
≈≈ 
reader
≈≈ 
[
≈≈ 
$str
≈≈ *
]
≈≈* +
.
≈≈+ ,
ToString
≈≈, 4
(
≈≈4 5
)
≈≈5 6
,
≈≈6 7
questionTypeId
∆∆ 
=
∆∆ 
Convert
∆∆ 
.
∆∆ 
ToInt32
∆∆ &
(
∆∆& '
reader
∆∆' -
[
∆∆- .
$str
∆∆. >
]
∆∆> ?
)
∆∆? @
,
∆∆@ A
answerIsRequired
«« 
=
«« 
Convert
««  
.
««  !
	ToBoolean
««! *
(
««* +
reader
««+ 1
[
««1 2
$str
««2 D
]
««D E
)
««E F
,
««F G
questionOrder
»» 
=
»» 
Convert
»» 
.
»» 
ToInt32
»» %
(
»»% &
reader
»»& ,
[
»», -
$str
»»- <
]
»»< =
)
»»= >
,
»»> ?
validationMessage
…… 
=
…… 
reader
……  
[
……  !
$str
……! 4
]
……4 5
.
……5 6
ToString
……6 >
(
……> ?
)
……? @
}
   
;
   
pageQuestionList
ÃÃ 
.
ÃÃ 
Add
ÃÃ 
(
ÃÃ 
question
ÃÃ "
)
ÃÃ" #
;
ÃÃ# $
}
ÕÕ 
}
ŒŒ 
return
–– 	
pageQuestionList
––
 
;
–– 
}
—— 
}
‘‘ 
}’’ ◊-
|D:\Projects\DefensePoint\whitesource-testcases-csharp\CWE79\mojoportal\mojoPortal.Features.Business\Survey\QuestionAnswer.cs
	namespace 	
SurveyFeature
 
. 
Business  
{ 
public 
class 
QuestionAnswer 
{ 
public 
QuestionAnswer	 
( 
) 
{ 
} 
public 
QuestionAnswer	 
( 
Guid 
questionGuid )
,) *
Guid+ /
responseGuid0 <
)< =
{ #
GetSurveyQuestionAnswer   
(   
questionGuid   '
,  ' (
responseGuid  ) 5
)  5 6
;  6 7
}!! 
public(( 
Guid((	 

AnswerGuid(( 
{(( 
get(( 
;(( 
set((  #
;((# $
}((% &
=((' (
Guid(() -
.((- .
Empty((. 3
;((3 4
public)) 
Guid))	 
QuestionGuid)) 
{)) 
get))  
;))  !
set))" %
;))% &
}))' (
=))) *
Guid))+ /
.))/ 0
Empty))0 5
;))5 6
public** 
Guid**	 
ResponseGuid** 
{** 
get**  
;**  !
set**" %
;**% &
}**' (
=**) *
Guid**+ /
.**/ 0
Empty**0 5
;**5 6
public++ 
string++	 
Answer++ 
{++ 
get++ 
;++ 
set++ !
;++! "
}++# $
public,, 
DateTime,,	 
AnsweredDate,, 
{,,  
get,,! $
;,,$ %
set,,& )
;,,) *
},,+ ,
private77 	
void77
 #
GetSurveyQuestionAnswer77 &
(77& '
Guid77' +
questionGuid77, 8
,778 9
Guid77: >
responseGuid77? K
)77K L
{88 
bool99 
found99 
=99 
false99 
;99 
using:: 
(::	 

IDataReader::
 
reader:: 
=:: 
DBQuestionAnswer:: /
.::/ 0
GetOne::0 6
(::6 7
responseGuid::7 C
,::C D
questionGuid::E Q
)::Q R
)::R S
{;; 
if<< 
(<< 
reader<< 
.<< 
Read<< 
(<< 
)<< 
)<< 
{== 

AnswerGuid>> 
=>> 
new>> 
Guid>> 
(>> 
reader>> !
[>>! "
$str>>" .
]>>. /
.>>/ 0
ToString>>0 8
(>>8 9
)>>9 :
)>>: ;
;>>; <
QuestionGuid?? 
=?? 
new?? 
Guid?? 
(?? 
reader?? #
[??# $
$str??$ 2
]??2 3
.??3 4
ToString??4 <
(??< =
)??= >
)??> ?
;??? @
ResponseGuid@@ 
=@@ 
new@@ 
Guid@@ 
(@@ 
reader@@ #
[@@# $
$str@@$ 2
]@@2 3
.@@3 4
ToString@@4 <
(@@< =
)@@= >
)@@> ?
;@@? @
AnswerAA 
=AA 
readerAA 
[AA 
$strAA 
]AA 
.AA 
ToStringAA '
(AA' (
)AA( )
;AA) *
AnsweredDateBB 
=BB 
ConvertBB 
.BB 

ToDateTimeBB &
(BB& '
readerBB' -
[BB- .
$strBB. <
]BB< =
)BB= >
;BB> ?
foundCC 

=CC 
trueCC 
;CC 
}DD 
}EE 
ifGG 
(GG 
!GG 
foundGG 
)GG 
{HH 

AnswerGuidII 
=II 
newII 
GuidII 
(II 
)II 
;II 
QuestionGuidJJ 
=JJ 
questionGuidJJ 
;JJ  
ResponseGuidKK 
=KK 
responseGuidKK 
;KK  
}LL 
}MM 
privateTT 	
boolTT
 
CreateTT 
(TT 
)TT 
{UU 

AnswerGuidVV 
=VV 
GuidVV 
.VV 
NewGuidVV 
(VV 
)VV 
;VV 
intXX 
rowsAffectedXX 
=XX 
DBQuestionAnswerXX &
.XX& '
AddXX' *
(XX* +

AnswerGuidYY 
,YY 
QuestionGuidZZ 
,ZZ 
ResponseGuid[[ 
,[[ 
Answer\\ 

)]] 
;]] 
return__ 	
(__
 
rowsAffected__ 
>__ 
$num__ 
)__ 
;__ 
}`` 
privategg 	
boolgg
 
Updategg 
(gg 
)gg 
{hh 
returnii 	
DBQuestionAnswerii
 
.ii 
Updateii !
(ii! "

AnswerGuidjj 
,jj 
QuestionGuidkk 
,kk 
ResponseGuidll 
,ll 
Answermm 

)nn 
;nn 
}oo 
publiczz 
boolzz	 
Savezz 
(zz 
)zz 
{{{ 
if|| 
(|| 

AnswerGuid|| 
!=|| 
Guid|| 
.|| 
Empty|| 
)||  
{}} 
return~~ 

Update~~ 
(~~ 
)~~ 
;~~ 
} 
else
ÄÄ 
{
ÅÅ 
return
ÇÇ 

Create
ÇÇ 
(
ÇÇ 
)
ÇÇ 
;
ÇÇ 
}
ÉÉ 
}
ÑÑ 
}
áá 
}àà ≈H
|D:\Projects\DefensePoint\whitesource-testcases-csharp\CWE79\mojoportal\mojoPortal.Features.Business\Survey\QuestionOption.cs
	namespace 	
SurveyFeature
 
. 
Business  
{ 
public 

class 
QuestionOption 
{ 
public 
QuestionOption 
( 
) 
{ 	
}
 
public   
QuestionOption   
(   
Guid!! 
questionOptionGuid!! #
)!!# $
{"" 	
GetQuestionOption## 
(## 
questionOptionGuid$$ "
)$$" #
;$$# $
}%% 	
private++ 
Guid++ 
questionOptionGuid++ '
=++( )
Guid++* .
.++. /
Empty++/ 4
;++4 5
private,, 
Guid,, 
questionGuid,, !
=,," #
Guid,,$ (
.,,( )
Empty,,) .
;,,. /
private-- 
string-- 
answer-- 
;-- 
private.. 
int.. 
order.. 
;.. 
public44 
Guid44 
QuestionOptionGuid44 &
{55 	
get66 
{66 
return66 
questionOptionGuid66 +
;66+ ,
}66- .
set77 
{77 
questionOptionGuid77 $
=77% &
value77' ,
;77, -
}77. /
}88 	
public99 
Guid99 
QuestionGuid99  
{:: 	
get;; 
{;; 
return;; 
questionGuid;; %
;;;% &
};;' (
set<< 
{<< 
questionGuid<< 
=<<  
value<<! &
;<<& '
}<<( )
}== 	
public>> 
string>> 
Answer>> 
{?? 	
get@@ 
{@@ 
return@@ 
answer@@ 
;@@  
}@@! "
setAA 
{AA 
answerAA 
=AA 
valueAA  
;AA  !
}AA" #
}BB 	
publicCC 
intCC 
OrderCC 
{DD 	
getEE 
{EE 
returnEE 
orderEE 
;EE 
}EE  !
setFF 
{FF 
orderFF 
=FF 
valueFF 
;FF  
}FF! "
}GG 	
privateMM 
voidMM 
GetQuestionOptionMM &
(MM& '
GuidMM' +
questionOptionGuidMM, >
)MM> ?
{NN 	
usingOO 
(OO 
IDataReaderOO 
readerOO %
=OO& '
DBQuestionOptionOO( 8
.OO8 9
GetOneOO9 ?
(OO? @
questionOptionGuidOO@ R
)OOR S
)OOS T
{PP 
ifQQ 
(QQ 
readerQQ 
.QQ 
ReadQQ 
(QQ  
)QQ  !
)QQ! "
{RR 
thisSS 
.SS 
questionOptionGuidSS +
=SS, -
newSS. 1
GuidSS2 6
(SS6 7
readerSS7 =
[SS= >
$strSS> R
]SSR S
.SSS T
ToStringSST \
(SS\ ]
)SS] ^
)SS^ _
;SS_ `
thisTT 
.TT 
questionGuidTT %
=TT& '
newTT( +
GuidTT, 0
(TT0 1
readerTT1 7
[TT7 8
$strTT8 F
]TTF G
.TTG H
ToStringTTH P
(TTP Q
)TTQ R
)TTR S
;TTS T
thisUU 
.UU 
answerUU 
=UU  !
readerUU" (
[UU( )
$strUU) 1
]UU1 2
.UU2 3
ToStringUU3 ;
(UU; <
)UU< =
;UU= >
thisVV 
.VV 
orderVV 
=VV  
ConvertVV! (
.VV( )
ToInt32VV) 0
(VV0 1
readerVV1 7
[VV7 8
$strVV8 ?
]VV? @
)VV@ A
;VVA B
}XX 
}ZZ 
}\\ 	
private^^ 
bool^^ 
Create^^ 
(^^ 
)^^ 
{__ 	
thisaa 
.aa 
questionOptionGuidaa #
=aa$ %
Guidaa& *
.aa* +
NewGuidaa+ 2
(aa2 3
)aa3 4
;aa4 5
intcc 
rowsAffectedcc 
=cc 
DBQuestionOptioncc /
.cc/ 0
Addcc0 3
(cc3 4
thisdd 
.dd 
questionOptionGuiddd '
,dd' (
thisee 
.ee 
questionGuidee !
,ee! "
thisff 
.ff 
answerff 
,ff 
thisgg 
.gg 
ordergg 
)gg 
;gg 
returnii 
(ii 
rowsAffectedii  
>ii! "
$numii# $
)ii$ %
;ii% &
}kk 	
privateoo 
booloo 
Updateoo 
(oo 
)oo 
{pp 	
returnrr 
DBQuestionOptionrr #
.rr# $
Updaterr$ *
(rr* +
thisss 
.ss 
questionOptionGuidss '
,ss' (
thistt 
.tt 
questionGuidtt !
,tt! "
thisuu 
.uu 
answeruu 
,uu 
thisvv 
.vv 
ordervv 
)vv 
;vv 
}xx 	
public
ÄÄ 
bool
ÄÄ 
Save
ÄÄ 
(
ÄÄ 
)
ÄÄ 
{
ÅÅ 	
if
ÇÇ 
(
ÇÇ 
this
ÇÇ 
.
ÇÇ  
questionOptionGuid
ÇÇ '
!=
ÇÇ( *
Guid
ÇÇ+ /
.
ÇÇ/ 0
Empty
ÇÇ0 5
)
ÇÇ5 6
{
ÉÉ 
return
ÑÑ 
Update
ÑÑ 
(
ÑÑ 
)
ÑÑ 
;
ÑÑ  
}
ÖÖ 
else
ÜÜ 
{
áá 
return
àà 
Create
àà 
(
àà 
)
àà 
;
àà  
}
ââ 
}
ää 	
public
åå 
bool
åå 
Delete
åå 
(
åå 
)
åå 
{
çç 	
if
éé 
(
éé  
QuestionOptionGuid
éé "
==
éé# %
Guid
éé& *
.
éé* +
Empty
éé+ 0
)
éé0 1
return
éé2 8
false
éé9 >
;
éé> ?
return
êê 
DBQuestionOption
êê #
.
êê# $
Delete
êê$ *
(
êê* +
this
êê+ /
.
êê/ 0 
questionOptionGuid
êê0 B
)
êêB C
;
êêC D
}
ëë 	
public
òò 
static
òò 

Collection
òò  
<
òò  !
QuestionOption
òò! /
>
òò/ 0
GetAll
òò1 7
(
òò7 8
Guid
òò8 <
questionGuid
òò= I
)
òòI J
{
ôô 	

Collection
öö 
<
öö 
QuestionOption
öö %
>
öö% & 
questionOptionList
öö' 9
=
õõ 
new
õõ 

Collection
õõ  
<
õõ  !
QuestionOption
õõ! /
>
õõ/ 0
(
õõ0 1
)
õõ1 2
;
õõ2 3
using
ùù 
(
ùù 
IDataReader
ùù 
reader
ùù %
=
ùù& '
DBQuestionOption
ùù( 8
.
ùù8 9
GetAll
ùù9 ?
(
ùù? @
questionGuid
ùù@ L
)
ùùL M
)
ùùM N
{
ûû 
while
üü 
(
üü 
reader
üü 
.
üü 
Read
üü "
(
üü" #
)
üü# $
)
üü$ %
{
†† 
QuestionOption
°° "
questionOption
°°# 1
=
°°2 3
new
°°4 7
QuestionOption
°°8 F
(
°°F G
)
°°G H
;
°°H I
questionOption
¢¢ "
.
¢¢" # 
questionOptionGuid
¢¢# 5
=
¢¢6 7
new
¢¢8 ;
Guid
¢¢< @
(
¢¢@ A
reader
¢¢A G
[
¢¢G H
$str
¢¢H \
]
¢¢\ ]
.
¢¢] ^
ToString
¢¢^ f
(
¢¢f g
)
¢¢g h
)
¢¢h i
;
¢¢i j
questionOption
££ "
.
££" #
questionGuid
££# /
=
££0 1
new
££2 5
Guid
££6 :
(
££: ;
reader
££; A
[
££A B
$str
££B P
]
££P Q
.
££Q R
ToString
££R Z
(
££Z [
)
££[ \
)
££\ ]
;
££] ^
questionOption
§§ "
.
§§" #
answer
§§# )
=
§§* +
reader
§§, 2
[
§§2 3
$str
§§3 ;
]
§§; <
.
§§< =
ToString
§§= E
(
§§E F
)
§§F G
;
§§G H
questionOption
•• "
.
••" #
order
••# (
=
••) *
Convert
••+ 2
.
••2 3
ToInt32
••3 :
(
••: ;
reader
••; A
[
••A B
$str
••B I
]
••I J
)
••J K
;
••K L 
questionOptionList
¶¶ &
.
¶¶& '
Add
¶¶' *
(
¶¶* +
questionOption
¶¶+ 9
)
¶¶9 :
;
¶¶: ;
}
ßß 
}
®® 
return
™™  
questionOptionList
™™ %
;
™™% &
}
¨¨ 	
}
∞∞ 
}≤≤ ˝
zD:\Projects\DefensePoint\whitesource-testcases-csharp\CWE79\mojoportal\mojoPortal.Features.Business\Survey\QuestionType.cs
	namespace 	
SurveyFeature
 
. 
Business  
{ 
public

 

enum

 
QuestionType

 
{ 
TextBox 
, 
DropDownList 
, 
CheckBoxList 
, 
RadioButtonList 
, 
Date 
} 
} ˙
tD:\Projects\DefensePoint\whitesource-testcases-csharp\CWE79\mojoportal\mojoPortal.Features.Business\Survey\Result.cs
	namespace 	
SurveyFeature
 
. 
Business  
{ 
public 
class 
Result 
{ 
public 
Result	 
( 
) 
{ 
} 
public 
Result	 
( 
Guid 
questionGuid 
, 
Guid 
responseGuid '
,' (
string) /
answer0 6
,6 7
string8 >
	pageTitle? H
,H I
stringJ P
questionTextQ ]
)] ^
{ 
QuestionGuid 
= 
questionGuid 
; 
ResponseGuid 
= 
responseGuid 
; 
Answer   	
=  
 
answer   
;   
	PageTitle!! 
=!! 
	pageTitle!! 
;!! 
QuestionName"" 
="" 
questionText"" 
;"" 
}## 
public** 
Guid**	 
QuestionGuid** 
{** 
get**  
;**  !
set**" %
;**% &
}**' (
=**) *
Guid**+ /
.**/ 0
Empty**0 5
;**5 6
public++ 
Guid++	 
ResponseGuid++ 
{++ 
get++  
;++  !
set++" %
;++% &
}++' (
=++) *
Guid+++ /
.++/ 0
Empty++0 5
;++5 6
public,, 
string,,	 
QuestionName,, 
{,, 
get,, "
;,," #
set,,$ '
;,,' (
},,) *
public-- 
string--	 
QuestionText-- 
{-- 
get-- "
;--" #
set--$ '
;--' (
}--) *
public.. 
string..	 
Answer.. 
{.. 
get.. 
;.. 
set.. !
;..! "
}..# $
public// 
string//	 
	PageTitle// 
{// 
get// 
;//  
set//! $
;//$ %
}//& '
}22 
}33 •~
tD:\Projects\DefensePoint\whitesource-testcases-csharp\CWE79\mojoportal\mojoPortal.Features.Business\Survey\Survey.cs
	namespace 	
SurveyFeature
 
. 
Business  
{ 
public 
class 
Survey 
{ 
private 	
const
 
string 
featureGuid "
=# $
$str% K
;K L
public 
static	 
Guid 
FeatureGuid  
=>! #
new$ '
Guid( ,
(, -
featureGuid- 8
)8 9
;9 :
public!! 
Survey!!	 
(!! 
)!! 
{!! 
}!! 
public"" 
Survey""	 
("" 
Guid"" 

surveyGuid"" 
)""  
=>""! #
	GetSurvey""$ -
(""- .

surveyGuid"". 8
)""8 9
;""9 :
public)) 
Guid))	 

SurveyGuid)) 
{)) 
get)) 
;)) 
set))  #
;))# $
}))% &
=))' (
Guid))) -
.))- .
Empty)). 3
;))3 4
public** 
Guid**	 
SiteGuid** 
{** 
get** 
;** 
set** !
;**! "
}**# $
=**% &
Guid**' +
.**+ ,
Empty**, 1
;**1 2
public++ 
string++	 

SurveyName++ 
{++ 
get++  
;++  !
set++" %
;++% &
}++' (
public,, 
int,,	 
SubmissionLimit,, 
{,, 
get,, "
;,," #
set,,$ '
;,,' (
},,) *
=,,+ ,
$num,,- .
;,,. /
public-- 
DateTime--	 
CreationDate-- 
{--  
get--! $
;--$ %
set--& )
;--) *
}--+ ,
public.. 
string..	 
StartPageText.. 
{.. 
get..  #
;..# $
set..% (
;..( )
}..* +
public// 
string//	 
EndPageText// 
{// 
get// !
;//! "
set//# &
;//& '
}//( )
public00 
int00	 
	PageCount00 
{00 
get00 
;00 
private00 %
set00& )
;00) *
}00+ ,
=00- .
$num00/ 0
;000 1
public11 
int11	 
ResponseCount11 
{11 
get11  
;11  !
private11" )
set11* -
;11- .
}11/ 0
=111 2
$num113 4
;114 5
private<< 	
void<<
 
	GetSurvey<< 
(<< 
Guid<< 
guidSurveyGuid<< ,
)<<, -
{== 
using>> 
(>>	 

IDataReader>>
 
reader>> 
=>> 
DBSurvey>> '
.>>' (
GetOne>>( .
(>>. /
guidSurveyGuid>>/ =
)>>= >
)>>> ?
{?? 
if@@ 
(@@ 
reader@@ 
.@@ 
Read@@ 
(@@ 
)@@ 
)@@ 
{AA 

SurveyGuidBB 
=BB 
newBB 
GuidBB 
(BB 
readerBB !
[BB! "
$strBB" .
]BB. /
.BB/ 0
ToStringBB0 8
(BB8 9
)BB9 :
)BB: ;
;BB; <
SiteGuidCC 
=CC 
newCC 
GuidCC 
(CC 
readerCC 
[CC  
$strCC  *
]CC* +
.CC+ ,
ToStringCC, 4
(CC4 5
)CC5 6
)CC6 7
;CC7 8

SurveyNameDD 
=DD 
readerDD 
[DD 
$strDD %
]DD% &
.DD& '
ToStringDD' /
(DD/ 0
)DD0 1
;DD1 2
CreationDateEE 
=EE 
ConvertEE 
.EE 

ToDateTimeEE &
(EE& '
readerEE' -
[EE- .
$strEE. <
]EE< =
,EE= >
CultureInfoEE? J
.EEJ K
CurrentCultureEEK Y
)EEY Z
;EEZ [
StartPageTextFF 
=FF 
readerFF 
[FF 
$strFF +
]FF+ ,
.FF, -
ToStringFF- 5
(FF5 6
)FF6 7
;FF7 8
EndPageTextGG 
=GG 
readerGG 
[GG 
$strGG '
]GG' (
.GG( )
ToStringGG) 1
(GG1 2
)GG2 3
;GG3 4
SubmissionLimitHH 
=HH 
ConvertHH 
.HH 
ToInt32HH &
(HH& '
readerHH' -
[HH- .
$strHH. ?
]HH? @
)HH@ A
;HHA B
	PageCountII 
=II 
ConvertII 
.II 
ToInt32II  
(II  !
readerII! '
[II' (
$strII( 3
]II3 4
)II4 5
;II5 6
ResponseCountJJ 
=JJ 
ConvertJJ 
.JJ 
ToInt32JJ $
(JJ$ %
readerJJ% +
[JJ+ ,
$strJJ, ;
]JJ; <
)JJ< =
;JJ= >
}KK 
}LL 
}MM 
privateTT 	
boolTT
 
CreateTT 
(TT 
)TT 
{UU 
GuidVV 
newIDVV 
=VV 
GuidVV 
.VV 
NewGuidVV 
(VV 
)VV 
;VV 

SurveyGuidWW 
=WW 
newIDWW 
;WW 
intYY 
rowsAffectedYY 
=YY 
DBSurveyYY 
.YY 
AddYY "
(YY" #

SurveyGuidZZ 
,ZZ 
SiteGuid[[ 
,[[ 

SurveyName\\ 
,\\ 
DateTime]] 
.]] 
Now]] 
,]] 
StartPageText^^ 
,^^ 
EndPageText__ 
,__ 
SubmissionLimit`` 
)aa 
;aa 
returncc 	
(cc
 
rowsAffectedcc 
>cc 
$numcc 
)cc 
;cc 
}dd 
privatekk 	
boolkk
 
Updatekk 
(kk 
)kk 
{ll 
returnmm 	
DBSurveymm
 
.mm 
Updatemm 
(mm 

SurveyGuidnn 
,nn 
SiteGuidoo 
,oo 

SurveyNamepp 
,pp 
CreationDateqq 
,qq 
StartPageTextrr 
,rr 
EndPageTextss 
,ss 
SubmissionLimittt 
)uu 
;uu 
}vv 
public
ÅÅ 
bool
ÅÅ	 
Save
ÅÅ 
(
ÅÅ 
)
ÅÅ 
{
ÇÇ 
if
ÉÉ 
(
ÉÉ 

SurveyGuid
ÉÉ 
!=
ÉÉ 
Guid
ÉÉ 
.
ÉÉ 
Empty
ÉÉ 
)
ÉÉ  
{
ÑÑ 
return
ÖÖ 

Update
ÖÖ 
(
ÖÖ 
)
ÖÖ 
;
ÖÖ 
}
ÜÜ 
else
áá 
{
àà 
return
ââ 

Create
ââ 
(
ââ 
)
ââ 
;
ââ 
}
ää 
}
ãã 
public
éé 
void
éé	 
AddToModule
éé 
(
éé 
int
éé 
moduleId
éé &
)
éé& '
{
èè 
DBSurvey
êê 
.
êê 
AddToModule
êê 
(
êê 

SurveyGuid
êê "
,
êê" #
moduleId
êê$ ,
)
êê, -
;
êê- .
}
ëë 
public
îî 
void
îî	 
RemoveFromModule
îî 
(
îî 
int
îî "
moduleId
îî# +
)
îî+ ,
{
ïï 
DBSurvey
ññ 
.
ññ 
RemoveFromModule
ññ 
(
ññ 

SurveyGuid
ññ '
,
ññ' (
moduleId
ññ) 1
)
ññ1 2
;
ññ2 3
}
óó 
public
££ 
static
££	 
void
££ 
Delete
££ 
(
££ 
Guid
££  

surveyGuid
££! +
)
££+ ,
{
§§ 
DBSurvey
•• 
.
•• 
Delete
•• 
(
•• 

surveyGuid
•• 
)
•• 
;
•• 
}
¶¶ 
public
©© 
static
©©	 
bool
©© 
DeleteBySite
©© !
(
©©! "
int
©©" %
siteId
©©& ,
)
©©, -
{
™™ 
return
´´ 	
DBSurvey
´´
 
.
´´ 
DeleteBySite
´´ 
(
´´  
siteId
´´  &
)
´´& '
;
´´' (
}
¨¨ 
public
ØØ 
static
ØØ	 
void
ØØ 
DeleteFromModule
ØØ %
(
ØØ% &
int
ØØ& )
moduleId
ØØ* 2
)
ØØ2 3
{
∞∞ 
DBSurvey
±± 
.
±± 
RemoveFromModule
±± 
(
±± 
moduleId
±± %
)
±±% &
;
±±& '
}
≤≤ 
public
∏∏ 
static
∏∏	 
List
∏∏ 
<
∏∏ 
Survey
∏∏ 
>
∏∏ 
GetAll
∏∏ #
(
∏∏# $
Guid
∏∏$ (
siteGuid
∏∏) 1
)
∏∏1 2
{
ππ 
List
∫∫ 
<
∫∫ 
Survey
∫∫ 
>
∫∫ 

surveyList
∫∫ 
=
∫∫ 
new
∫∫  
List
∫∫! %
<
∫∫% &
Survey
∫∫& ,
>
∫∫, -
(
∫∫- .
)
∫∫. /
;
∫∫/ 0
using
ºº 
(
ºº	 

IDataReader
ºº
 
reader
ºº 
=
ºº 
DBSurvey
ºº '
.
ºº' (
GetAll
ºº( .
(
ºº. /
siteGuid
ºº/ 7
)
ºº7 8
)
ºº8 9
{
ΩΩ 
while
ææ 	
(
ææ
 
reader
ææ 
.
ææ 
Read
ææ 
(
ææ 
)
ææ 
)
ææ 
{
øø 
Survey
¿¿ 
survey
¿¿ 
=
¿¿ 
new
¿¿ 
Survey
¿¿ 
{
¡¡ 

SurveyGuid
¬¬ 
=
¬¬ 
new
¬¬ 
Guid
¬¬ 
(
¬¬ 
reader
¬¬ "
[
¬¬" #
$str
¬¬# /
]
¬¬/ 0
.
¬¬0 1
ToString
¬¬1 9
(
¬¬9 :
)
¬¬: ;
)
¬¬; <
,
¬¬< =
SiteGuid
√√ 
=
√√ 
new
√√ 
Guid
√√ 
(
√√ 
reader
√√  
[
√√  !
$str
√√! +
]
√√+ ,
.
√√, -
ToString
√√- 5
(
√√5 6
)
√√6 7
)
√√7 8
,
√√8 9

SurveyName
ƒƒ 
=
ƒƒ 
reader
ƒƒ 
[
ƒƒ 
$str
ƒƒ &
]
ƒƒ& '
.
ƒƒ' (
ToString
ƒƒ( 0
(
ƒƒ0 1
)
ƒƒ1 2
,
ƒƒ2 3
CreationDate
≈≈ 
=
≈≈ 
Convert
≈≈ 
.
≈≈ 

ToDateTime
≈≈ '
(
≈≈' (
reader
≈≈( .
[
≈≈. /
$str
≈≈/ =
]
≈≈= >
)
≈≈> ?
,
≈≈? @
StartPageText
∆∆ 
=
∆∆ 
reader
∆∆ 
[
∆∆ 
$str
∆∆ ,
]
∆∆, -
.
∆∆- .
ToString
∆∆. 6
(
∆∆6 7
)
∆∆7 8
,
∆∆8 9
EndPageText
«« 
=
«« 
reader
«« 
[
«« 
$str
«« (
]
««( )
.
««) *
ToString
««* 2
(
««2 3
)
««3 4
,
««4 5
SubmissionLimit
»» 
=
»» 
Convert
»» 
.
»»  
ToInt32
»»  '
(
»»' (
reader
»»( .
[
»». /
$str
»»/ @
]
»»@ A
)
»»A B
,
»»B C
	PageCount
…… 
=
…… 
Convert
…… 
.
…… 
ToInt32
…… !
(
……! "
reader
……" (
[
……( )
$str
……) 4
]
……4 5
)
……5 6
,
……6 7
ResponseCount
   
=
   
Convert
   
.
   
ToInt32
   %
(
  % &
reader
  & ,
[
  , -
$str
  - <
]
  < =
)
  = >
}
ÀÀ 
;
ÀÀ 

surveyList
ÕÕ 
.
ÕÕ 
Add
ÕÕ 
(
ÕÕ 
survey
ÕÕ 
)
ÕÕ 
;
ÕÕ 
}
ŒŒ 
}
œœ 
return
—— 	

surveyList
——
 
;
—— 
}
““ 
public
’’ 
static
’’	 
Guid
’’ %
GetModulesCurrentSurvey
’’ ,
(
’’, -
int
’’- 0
moduleId
’’1 9
)
’’9 :
{
÷÷ 
return
◊◊ 	
DBSurvey
◊◊
 
.
◊◊ %
GetModulesCurrentSurvey
◊◊ *
(
◊◊* +
moduleId
◊◊+ 3
)
◊◊3 4
;
◊◊4 5
}
ÿÿ 
public
€€ 
static
€€	 
	DataTable
€€ 
GetResultsTable
€€ )
(
€€) *
Guid
€€* .

surveyGuid
€€/ 9
)
€€9 :
{
‹‹ 
IDataReader
›› 
reader
›› 
=
›› 
DBSurvey
››  
.
››  !

GetResults
››! +
(
››+ ,

surveyGuid
››, 6
)
››6 7
;
››7 8
return
ﬁﬁ 	
DatabaseHelper
ﬁﬁ
 
.
ﬁﬁ $
GetTableFromDataReader
ﬁﬁ /
(
ﬁﬁ/ 0
reader
ﬁﬁ0 6
)
ﬁﬁ6 7
;
ﬁﬁ7 8
}
ﬂﬂ 
public
‚‚ 
static
‚‚	 
List
‚‚ 
<
‚‚ 
Result
‚‚ 
>
‚‚ 

GetResults
‚‚ '
(
‚‚' (
Guid
‚‚( ,
responseGuid
‚‚- 9
)
‚‚9 :
{
„„ 
List
‰‰ 
<
‰‰ 
Result
‰‰ 
>
‰‰ 
results
‰‰ 
=
‰‰ 
new
‰‰ 
List
‰‰ "
<
‰‰" #
Result
‰‰# )
>
‰‰) *
(
‰‰* +
)
‰‰+ ,
;
‰‰, -
Result
ÂÂ 	
result
ÂÂ
 
;
ÂÂ 
using
ÁÁ 
(
ÁÁ	 

IDataReader
ÁÁ
 
reader
ÁÁ 
=
ÁÁ 
DBSurvey
ÁÁ '
.
ÁÁ' (
GetOneResult
ÁÁ( 4
(
ÁÁ4 5
responseGuid
ÁÁ5 A
)
ÁÁA B
)
ÁÁB C
{
ËË 
while
ÈÈ 	
(
ÈÈ
 
reader
ÈÈ 
.
ÈÈ 
Read
ÈÈ 
(
ÈÈ 
)
ÈÈ 
)
ÈÈ 
{
ÍÍ 
string
ÎÎ 
	pageTitle
ÎÎ 
=
ÎÎ 
reader
ÎÎ 
[
ÎÎ 
$str
ÎÎ *
]
ÎÎ* +
.
ÎÎ+ ,
ToString
ÎÎ, 4
(
ÎÎ4 5
)
ÎÎ5 6
;
ÎÎ6 7
string
ÏÏ 
answer
ÏÏ 
=
ÏÏ 
reader
ÏÏ 
[
ÏÏ 
$str
ÏÏ $
]
ÏÏ$ %
.
ÏÏ% &
ToString
ÏÏ& .
(
ÏÏ. /
)
ÏÏ/ 0
;
ÏÏ0 1
string
ÌÌ 
questionName
ÌÌ 
=
ÌÌ 
reader
ÌÌ !
[
ÌÌ! "
$str
ÌÌ" 0
]
ÌÌ0 1
.
ÌÌ1 2
ToString
ÌÌ2 :
(
ÌÌ: ;
)
ÌÌ; <
;
ÌÌ< =
Guid
ÓÓ 	
questionGuid
ÓÓ
 
=
ÓÓ 
new
ÓÓ 
Guid
ÓÓ !
(
ÓÓ! "
reader
ÓÓ" (
[
ÓÓ( )
$str
ÓÓ) 7
]
ÓÓ7 8
.
ÓÓ8 9
ToString
ÓÓ9 A
(
ÓÓA B
)
ÓÓB C
)
ÓÓC D
;
ÓÓD E
result
 
=
 
new
 
Result
 
(
 
questionGuid
 %
,
% &
responseGuid
' 3
,
3 4
answer
5 ;
,
; <
	pageTitle
= F
,
F G
questionName
H T
)
T U
;
U V
results
ÚÚ 
.
ÚÚ 
Add
ÚÚ 
(
ÚÚ 
result
ÚÚ 
)
ÚÚ 
;
ÚÚ 
}
ÛÛ 
}
ÙÙ 
return
ˆˆ 	
results
ˆˆ
 
;
ˆˆ 
}
˜˜ 
}
˙˙ 
}˚˚ Â
{D:\Projects\DefensePoint\whitesource-testcases-csharp\CWE79\mojoportal\mojoPortal.Features.Business\Survey\SurveyManager.cs
	namespace 	
SurveyFeature
 
. 
Business  
{ 
public 

class 
SurveyManager 
{		 
private

 
Guid

 
_surveyGuid

  
;

  !
public 
SurveyManager 
( 
Guid !

surveyGuid" ,
), -
{ 	
_surveyGuid 
= 

surveyGuid $
;$ %
} 	
public 
Guid !
GetNextSurveyPageGuid )
() *
Guid* .
pageGuid/ 7
)7 8
{ 	
return 
DBSurvey 
. 
GetNextPageGuid +
(+ ,
pageGuid, 4
)4 5
;5 6
} 	
public 
Guid %
GetPreviousSurveyPageGuid -
(- .
Guid. 2
pageGuid3 ;
); <
{ 	
return 
DBSurvey 
. 
GetPreviousPageGuid /
(/ 0
pageGuid0 8
)8 9
;9 :
} 	
public 
Guid (
GetSurveyFirstSurveyPageGuid 0
(0 1
Guid1 5

surveyGuid6 @
)@ A
{ 	
return 
DBSurvey 
. 
GetFirstPageGuid ,
(, -

surveyGuid- 7
)7 8
;8 9
} 	
} 
}   æz
|D:\Projects\DefensePoint\whitesource-testcases-csharp\CWE79\mojoportal\mojoPortal.Features.Business\Survey\SurveyResponse.cs
	namespace 	
SurveyFeature
 
. 
Business  
{ 
public 
class 
SurveyResponse 
{ 
public 
SurveyResponse	 
( 
) 
{ 
} 
public 
SurveyResponse	 
( 
Guid 
responseGuid )
)) *
=>+ -
GetSurveyResponse. ?
(? @
responseGuid@ L
)L M
;M N
public$$ 
Guid$$	 
ResponseGuid$$ 
{$$ 
get$$  
;$$  !
private$$" )
set$$* -
;$$- .
}$$/ 0
=$$1 2
Guid$$3 7
.$$7 8
Empty$$8 =
;$$= >
public%% 
Guid%%	 

SurveyGuid%% 
{%% 
get%% 
;%% 
set%%  #
;%%# $
}%%% &
=%%' (
Guid%%) -
.%%- .
Empty%%. 3
;%%3 4
public&& 
Guid&&	 
UserGuid&& 
{&& 
get&& 
;&& 
set&& !
;&&! "
}&&# $
=&&% &
Guid&&' +
.&&+ ,
Empty&&, 1
;&&1 2
public'' 
DateTime''	 
SubmissionDate''  
{''! "
get''# &
;''& '
set''( +
;''+ ,
}''- .
=''/ 0
DateTime''1 9
.''9 :
MinValue'': B
;''B C
public(( 
bool((	 

Annonymous(( 
{(( 
get(( 
;(( 
set((  #
;((# $
}((% &
=((' (
false(() .
;((. /
public)) 
bool))	 
Complete)) 
{)) 
get)) 
;)) 
set)) !
;))! "
}))# $
=))% &
false))' ,
;)), -
private55 	
void55
 
GetSurveyResponse55  
(55  !
Guid55! %
responseGuid55& 2
)552 3
{66 
using77 
(77	 

IDataReader77
 
reader77 
=77 
DBSurveyResponse77 /
.77/ 0
GetOne770 6
(776 7
responseGuid777 C
)77C D
)77D E
{88 
if99 
(99 
reader99 
.99 
Read99 
(99 
)99 
)99 
{:: 
ResponseGuid;; 
=;; 
new;; 
Guid;; 
(;; 
reader;; #
[;;# $
$str;;$ 2
];;2 3
.;;3 4
ToString;;4 <
(;;< =
);;= >
);;> ?
;;;? @

SurveyGuid<< 
=<< 
new<< 
Guid<< 
(<< 
reader<< !
[<<! "
$str<<" .
]<<. /
.<</ 0
ToString<<0 8
(<<8 9
)<<9 :
)<<: ;
;<<; <
UserGuid== 
=== 
new== 
Guid== 
(== 
reader== 
[==  
$str==  *
]==* +
.==+ ,
ToString==, 4
(==4 5
)==5 6
)==6 7
;==7 8
if?? 
(?? 	
reader??	 
[?? 
$str??  
]??  !
!=??" $
DBNull??% +
.??+ ,
Value??, 1
)??1 2
{@@ 
SubmissionDateAA 
=AA 
ConvertAA 
.AA 

ToDateTimeAA )
(AA) *
readerAA* 0
[AA0 1
$strAA1 A
]AAA B
,AAB C
CultureInfoAAD O
.AAO P
InvariantCultureAAP `
)AA` a
;AAa b
}BB 

AnnonymousDD 
=DD 
ConvertDD 
.DD 
	ToBooleanDD #
(DD# $
readerDD$ *
[DD* +
$strDD+ 7
]DD7 8
)DD8 9
;DD9 :
CompleteEE 
=EE 
ConvertEE 
.EE 
	ToBooleanEE !
(EE! "
readerEE" (
[EE( )
$strEE) 3
]EE3 4
)EE4 5
;EE5 6
}FF 
}GG 
}HH 
privateOO 	
boolOO
 
CreateOO 
(OO 
)OO 
{PP 
ResponseGuidQQ 
=QQ 
GuidQQ 
.QQ 
NewGuidQQ 
(QQ 
)QQ  
;QQ  !
intSS 
rowsAffectedSS 
=SS 
DBSurveyResponseSS &
.SS& '
AddSS' *
(SS* +
ResponseGuidTT 
,TT 

SurveyGuidUU 
,UU 
UserGuidVV 
,VV 

AnnonymousWW 
,WW 
CompleteXX 
)YY 
;YY 
return[[ 	
([[
 
rowsAffected[[ 
>[[ 
$num[[ 
)[[ 
;[[ 
}\\ 
publicgg 
boolgg	 
Savegg 
(gg 
)gg 
{hh 
boolii 
resultii 
=ii 
falseii 
;ii 
ifkk 
(kk 
ResponseGuidkk 
==kk 
Guidkk 
.kk 
Emptykk !
)kk! "
resultkk# )
=kk* +
Createkk, 2
(kk2 3
)kk3 4
;kk4 5
ifmm 
(mm 
SubmissionDatemm 
>mm 
DateTimemm  
.mm  !
MinValuemm! )
)mm) *
{nn 
Completeoo 
=oo 
trueoo 
;oo 
resultpp 

=pp 
DBSurveyResponsepp 
.pp 
Updatepp $
(pp$ %
ResponseGuidpp% 1
,pp1 2
SubmissionDatepp3 A
,ppA B
CompleteppC K
)ppK L
;ppL M
}qq 
returnss 	
resultss
 
;ss 
}tt 
public
ÄÄ 
static
ÄÄ	 
bool
ÄÄ 
Delete
ÄÄ 
(
ÄÄ 
Guid
ÄÄ  
responseGuid
ÄÄ! -
)
ÄÄ- .
=>
ÄÄ/ 1
DBSurveyResponse
ÄÄ2 B
.
ÄÄB C
Delete
ÄÄC I
(
ÄÄI J
responseGuid
ÄÄJ V
)
ÄÄV W
;
ÄÄW X
public
ÜÜ 
static
ÜÜ	 
List
ÜÜ 
<
ÜÜ 
SurveyResponse
ÜÜ #
>
ÜÜ# $
GetAll
ÜÜ% +
(
ÜÜ+ ,
Guid
ÜÜ, 0

surveyGuid
ÜÜ1 ;
)
ÜÜ; <
{
áá 
IDataReader
àà 
reader
àà 
=
àà 
DBSurveyResponse
àà (
.
àà( )
GetAll
àà) /
(
àà/ 0

surveyGuid
àà0 :
)
àà: ;
;
àà; <
return
ââ 	
LoadFromReader
ââ
 
(
ââ 
reader
ââ 
)
ââ  
;
ââ  !
}
ãã 
private
éé 	
static
éé
 
List
éé 
<
éé 
SurveyResponse
éé $
>
éé$ %
LoadFromReader
éé& 4
(
éé4 5
IDataReader
éé5 @
reader
ééA G
)
ééG H
{
èè 
List
êê 
<
êê 
SurveyResponse
êê 
>
êê  
surveyResponseList
êê *
=
êê+ ,
new
êê- 0
List
êê1 5
<
êê5 6
SurveyResponse
êê6 D
>
êêD E
(
êêE F
)
êêF G
;
êêG H
try
íí 
{
ìì 
while
îî 	
(
îî
 
reader
îî 
.
îî 
Read
îî 
(
îî 
)
îî 
)
îî 
{
ïï 
SurveyResponse
ññ 
surveyResponse
ññ "
=
ññ# $
new
ññ% (
SurveyResponse
ññ) 7
(
ññ7 8
)
ññ8 9
;
ññ9 :
surveyResponse
òò 
.
òò 
ResponseGuid
òò  
=
òò! "
new
òò# &
Guid
òò' +
(
òò+ ,
reader
òò, 2
[
òò2 3
$str
òò3 A
]
òòA B
.
òòB C
ToString
òòC K
(
òòK L
)
òòL M
)
òòM N
;
òòN O
surveyResponse
ôô 
.
ôô 

SurveyGuid
ôô 
=
ôô  
new
ôô! $
Guid
ôô% )
(
ôô) *
reader
ôô* 0
[
ôô0 1
$str
ôô1 =
]
ôô= >
.
ôô> ?
ToString
ôô? G
(
ôôG H
)
ôôH I
)
ôôI J
;
ôôJ K
surveyResponse
öö 
.
öö 
UserGuid
öö 
=
öö 
new
öö "
Guid
öö# '
(
öö' (
reader
öö( .
[
öö. /
$str
öö/ 9
]
öö9 :
.
öö: ;
ToString
öö; C
(
ööC D
)
ööD E
)
ööE F
;
ööF G
if
úú 
(
úú 	
reader
úú	 
[
úú 
$str
úú  
]
úú  !
!=
úú" $
DBNull
úú% +
.
úú+ ,
Value
úú, 1
)
úú1 2
{
ùù 
surveyResponse
ûû 
.
ûû 
SubmissionDate
ûû #
=
ûû$ %
Convert
ûû& -
.
ûû- .

ToDateTime
ûû. 8
(
ûû8 9
reader
ûû9 ?
[
ûû? @
$str
ûû@ P
]
ûûP Q
,
ûûQ R
CultureInfo
ûûS ^
.
ûû^ _
InvariantCulture
ûû_ o
)
ûûo p
;
ûûp q
}
üü 
surveyResponse
°° 
.
°° 

Annonymous
°° 
=
°°  
Convert
°°! (
.
°°( )
	ToBoolean
°°) 2
(
°°2 3
reader
°°3 9
[
°°9 :
$str
°°: F
]
°°F G
,
°°G H
CultureInfo
°°I T
.
°°T U
InvariantCulture
°°U e
)
°°e f
;
°°f g
surveyResponse
¢¢ 
.
¢¢ 
Complete
¢¢ 
=
¢¢ 
Convert
¢¢ &
.
¢¢& '
	ToBoolean
¢¢' 0
(
¢¢0 1
reader
¢¢1 7
[
¢¢7 8
$str
¢¢8 B
]
¢¢B C
,
¢¢C D
CultureInfo
¢¢E P
.
¢¢P Q
InvariantCulture
¢¢Q a
)
¢¢a b
;
¢¢b c 
surveyResponseList
§§ 
.
§§ 
Add
§§ 
(
§§ 
surveyResponse
§§ *
)
§§* +
;
§§+ ,
}
•• 
}
¶¶ 
finally
ßß 

{
®® 
reader
©© 

.
©©
 
Close
©© 
(
©© 
)
©© 
;
©© 
}
™™ 
return
¨¨ 	 
surveyResponseList
¨¨
 
;
¨¨ 
}
≠≠ 
private
∞∞ 	
static
∞∞
 
SurveyResponse
∞∞ 

FromReader
∞∞  *
(
∞∞* +
IDataReader
∞∞+ 6
reader
∞∞7 =
)
∞∞= >
{
±± 
SurveyResponse
≤≤ 
response
≤≤ 
=
≤≤ 
null
≤≤ !
;
≤≤! "
try
¥¥ 
{
µµ 
if
∂∂ 
(
∂∂ 
reader
∂∂ 
.
∂∂ 
Read
∂∂ 
(
∂∂ 
)
∂∂ 
)
∂∂ 
{
∑∑ 
response
∏∏ 
=
∏∏ 
new
∏∏ 
SurveyResponse
∏∏ "
(
∏∏" #
)
∏∏# $
;
∏∏$ %
response
∫∫ 
.
∫∫ 
ResponseGuid
∫∫ 
=
∫∫ 
new
∫∫  
Guid
∫∫! %
(
∫∫% &
reader
∫∫& ,
[
∫∫, -
$str
∫∫- ;
]
∫∫; <
.
∫∫< =
ToString
∫∫= E
(
∫∫E F
)
∫∫F G
)
∫∫G H
;
∫∫H I
response
ªª 
.
ªª 

SurveyGuid
ªª 
=
ªª 
new
ªª 
Guid
ªª #
(
ªª# $
reader
ªª$ *
[
ªª* +
$str
ªª+ 7
]
ªª7 8
.
ªª8 9
ToString
ªª9 A
(
ªªA B
)
ªªB C
)
ªªC D
;
ªªD E
response
ºº 
.
ºº 
UserGuid
ºº 
=
ºº 
new
ºº 
Guid
ºº !
(
ºº! "
reader
ºº" (
[
ºº( )
$str
ºº) 3
]
ºº3 4
.
ºº4 5
ToString
ºº5 =
(
ºº= >
)
ºº> ?
)
ºº? @
;
ºº@ A
if
ææ 
(
ææ 	
reader
ææ	 
[
ææ 
$str
ææ  
]
ææ  !
!=
ææ" $
DBNull
ææ% +
.
ææ+ ,
Value
ææ, 1
)
ææ1 2
{
øø 
response
¿¿ 
.
¿¿ 
SubmissionDate
¿¿ 
=
¿¿ 
Convert
¿¿  '
.
¿¿' (

ToDateTime
¿¿( 2
(
¿¿2 3
reader
¿¿3 9
[
¿¿9 :
$str
¿¿: J
]
¿¿J K
,
¿¿K L
CultureInfo
¿¿M X
.
¿¿X Y
InvariantCulture
¿¿Y i
)
¿¿i j
;
¿¿j k
}
¡¡ 
response
√√ 
.
√√ 

Annonymous
√√ 
=
√√ 
Convert
√√ "
.
√√" #
	ToBoolean
√√# ,
(
√√, -
reader
√√- 3
[
√√3 4
$str
√√4 @
]
√√@ A
,
√√A B
CultureInfo
√√C N
.
√√N O
InvariantCulture
√√O _
)
√√_ `
;
√√` a
response
ƒƒ 
.
ƒƒ 
Complete
ƒƒ 
=
ƒƒ 
Convert
ƒƒ  
.
ƒƒ  !
	ToBoolean
ƒƒ! *
(
ƒƒ* +
reader
ƒƒ+ 1
[
ƒƒ1 2
$str
ƒƒ2 <
]
ƒƒ< =
,
ƒƒ= >
CultureInfo
ƒƒ? J
.
ƒƒJ K
InvariantCulture
ƒƒK [
)
ƒƒ[ \
;
ƒƒ\ ]
}
≈≈ 
}
∆∆ 
finally
«« 

{
»» 
reader
…… 

.
……
 
Close
…… 
(
…… 
)
…… 
;
…… 
}
   
return
ÃÃ 	
response
ÃÃ
 
;
ÃÃ 
}
ÕÕ 
public
–– 
static
––	 
SurveyResponse
–– 
GetFirst
–– '
(
––' (
Guid
––( ,

surveyGuid
––- 7
)
––7 8
{
—— 
IDataReader
““ 
reader
““ 
=
““ 
DBSurveyResponse
““ (
.
““( )
GetFirst
““) 1
(
““1 2

surveyGuid
““2 <
)
““< =
;
““= >
return
”” 	

FromReader
””
 
(
”” 
reader
”” 
)
”” 
;
”” 
}
‘‘ 
public
◊◊ 
static
◊◊	 
SurveyResponse
◊◊ 
GetNext
◊◊ &
(
◊◊& '
Guid
◊◊' +
responseGuid
◊◊, 8
)
◊◊8 9
{
ÿÿ 
IDataReader
ŸŸ 
reader
ŸŸ 
=
ŸŸ 
DBSurveyResponse
ŸŸ (
.
ŸŸ( )
GetNext
ŸŸ) 0
(
ŸŸ0 1
responseGuid
ŸŸ1 =
)
ŸŸ= >
;
ŸŸ> ?
return
⁄⁄ 	

FromReader
⁄⁄
 
(
⁄⁄ 
reader
⁄⁄ 
)
⁄⁄ 
;
⁄⁄ 
}
€€ 
public
ﬁﬁ 
static
ﬁﬁ	 
SurveyResponse
ﬁﬁ 
GetPrevious
ﬁﬁ *
(
ﬁﬁ* +
Guid
ﬁﬁ+ /
responseGuid
ﬁﬁ0 <
)
ﬁﬁ< =
{
ﬂﬂ 
IDataReader
‡‡ 
reader
‡‡ 
=
‡‡ 
DBSurveyResponse
‡‡ (
.
‡‡( )
GetPrevious
‡‡) 4
(
‡‡4 5
responseGuid
‡‡5 A
)
‡‡A B
;
‡‡B C
return
·· 	

FromReader
··
 
(
·· 
reader
·· 
)
·· 
;
·· 
}
‚‚ 
}
ÂÂ 
}ÊÊ 